var Gw=Object.defineProperty;var Uw=(n,t,e)=>t in n?Gw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ww=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Vn=(n,t,e)=>(Uw(n,typeof t!="symbol"?t+"":t,e),e);var x4=Ww((vn,yn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xd(n,t){const e=new Set(n.split(","));return t?i=>e.has(i.toLowerCase()):i=>e.has(i)}const oe={},zr=[],kn=()=>{},qw=()=>!1,Nc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),wd=n=>n.startsWith("onUpdate:"),Be=Object.assign,Cd=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},Yw=Object.prototype.hasOwnProperty,Ft=(n,t)=>Yw.call(n,t),Ot=Array.isArray,Vr=n=>Dc(n)==="[object Map]",sb=n=>Dc(n)==="[object Set]",kt=n=>typeof n=="function",ge=n=>typeof n=="string",Po=n=>typeof n=="symbol",le=n=>n!==null&&typeof n=="object",rb=n=>(le(n)||kt(n))&&kt(n.then)&&kt(n.catch),ob=Object.prototype.toString,Dc=n=>ob.call(n),Xw=n=>Dc(n).slice(8,-1),ab=n=>Dc(n)==="[object Object]",Sd=n=>ge(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ea=xd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bc=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Kw=/-(\w)/g,Ci=Bc(n=>n.replace(Kw,(t,e)=>e?e.toUpperCase():"")),Jw=/\B([A-Z])/g,_s=Bc(n=>n.replace(Jw,"-$1").toLowerCase()),Lc=Bc(n=>n.charAt(0).toUpperCase()+n.slice(1)),_u=Bc(n=>n?`on${Lc(n)}`:""),Ps=(n,t)=>!Object.is(n,t),$u=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},Kl=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},Zw=n=>{const t=parseFloat(n);return isNaN(t)?n:t},Qw=n=>{const t=ge(n)?Number(n):NaN;return isNaN(t)?n:t};let Jf;const lb=()=>Jf||(Jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jc(n){if(Ot(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=ge(i)?i1(i):jc(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(ge(n)||le(n))return n}const t1=/;(?![^(]*\))/g,e1=/:([^]+)/,n1=/\/\*[^]*?\*\//g;function i1(n){const t={};return n.replace(n1,"").split(t1).forEach(e=>{if(e){const i=e.split(e1);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function s1(n){let t="";if(!n||ge(n))return t;for(const e in n){const i=n[e],s=e.startsWith("--")?e:_s(e);(ge(i)||typeof i=="number")&&(t+=`${s}:${i};`)}return t}function Fa(n){let t="";if(ge(n))t=n;else if(Ot(n))for(let e=0;e<n.length;e++){const i=Fa(n[e]);i&&(t+=i+" ")}else if(le(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const r1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o1=xd(r1);function cb(n){return!!n||n===""}const Xn=n=>ge(n)?n:n==null?"":Ot(n)||le(n)&&(n.toString===ob||!kt(n.toString))?JSON.stringify(n,ub,2):String(n),ub=(n,t)=>t&&t.__v_isRef?ub(n,t.value):Vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,s],r)=>(e[Iu(i,r)+" =>"]=s,e),{})}:sb(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Iu(e))}:Po(t)?Iu(t):le(t)&&!Ot(t)&&!ab(t)?String(t):t,Iu=(n,t="")=>{var e;return Po(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Un;class a1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Un,!t&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Un;try{return Un=this,t()}finally{Un=e}}}on(){Un=this}off(){Un=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function l1(n,t=Un){t&&t.active&&t.effects.push(n)}function c1(){return Un}let nr;class Pd{constructor(t,e,i,s){this.fn=t,this.trigger=e,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,l1(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,gr();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(u1(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),pr()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Cs,e=nr;try{return Cs=!0,nr=this,this._runnings++,Zf(this),this.fn()}finally{Qf(this),this._runnings--,nr=e,Cs=t}}stop(){var t;this.active&&(Zf(this),Qf(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function u1(n){return n.value}function Zf(n){n._trackId++,n._depsLength=0}function Qf(n){if(n.deps.length>n._depsLength){for(let t=n._depsLength;t<n.deps.length;t++)hb(n.deps[t],n);n.deps.length=n._depsLength}}function hb(n,t){const e=n.get(t);e!==void 0&&t._trackId!==e&&(n.delete(t),n.size===0&&n.cleanup())}let Cs=!0,yh=0;const db=[];function gr(){db.push(Cs),Cs=!1}function pr(){const n=db.pop();Cs=n===void 0?!0:n}function Ed(){yh++}function Od(){for(yh--;!yh&&xh.length;)xh.shift()()}function fb(n,t,e){if(t.get(n)!==n._trackId){t.set(n,n._trackId);const i=n.deps[n._depsLength];i!==t?(i&&hb(i,n),n.deps[n._depsLength++]=t):n._depsLength++}}const xh=[];function gb(n,t,e){Ed();for(const i of n.keys()){let s;i._dirtyLevel<t&&(s??(s=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(s??(s=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&xh.push(i.scheduler)))}Od()}const pb=(n,t)=>{const e=new Map;return e.cleanup=n,e.computed=t,e},wh=new WeakMap,ir=Symbol(""),Ch=Symbol("");function gn(n,t,e){if(Cs&&nr){let i=wh.get(n);i||wh.set(n,i=new Map);let s=i.get(e);s||i.set(e,s=pb(()=>i.delete(e))),fb(nr,s)}}function Di(n,t,e,i,s,r){const o=wh.get(n);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&Ot(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Po(u)&&u>=l)&&a.push(c)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":Ot(n)?Sd(e)&&a.push(o.get("length")):(a.push(o.get(ir)),Vr(n)&&a.push(o.get(Ch)));break;case"delete":Ot(n)||(a.push(o.get(ir)),Vr(n)&&a.push(o.get(Ch)));break;case"set":Vr(n)&&a.push(o.get(ir));break}Ed();for(const l of a)l&&gb(l,4);Od()}const h1=xd("__proto__,__v_isRef,__isVue"),mb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Po)),tg=d1();function d1(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const i=Ut(this);for(let r=0,o=this.length;r<o;r++)gn(i,"get",r+"");const s=i[t](...e);return s===-1||s===!1?i[t](...e.map(Ut)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){gr(),Ed();const i=Ut(this)[t].apply(this,e);return Od(),pr(),i}}),n}function f1(n){const t=Ut(this);return gn(t,"has",n),t.hasOwnProperty(n)}class bb{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const s=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(s?r?O1:wb:r?xb:yb).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Ot(t);if(!s){if(o&&Ft(tg,e))return Reflect.get(tg,e,i);if(e==="hasOwnProperty")return f1}const a=Reflect.get(t,e,i);return(Po(e)?mb.has(e):h1(e))||(s||gn(t,"get",e),r)?a:ln(a)?o&&Sd(e)?a:a.value:le(a)?s?Cb(a):de(a):a}}class vb extends bb{constructor(t=!1){super(!1,t)}set(t,e,i,s){let r=t[e];if(!this._isShallow){const l=Yr(r);if(!Jl(i)&&!Yr(i)&&(r=Ut(r),i=Ut(i)),!Ot(t)&&ln(r)&&!ln(i))return l?!1:(r.value=i,!0)}const o=Ot(t)&&Sd(e)?Number(e)<t.length:Ft(t,e),a=Reflect.set(t,e,i,s);return t===Ut(s)&&(o?Ps(i,r)&&Di(t,"set",e,i):Di(t,"add",e,i)),a}deleteProperty(t,e){const i=Ft(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&Di(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!Po(e)||!mb.has(e))&&gn(t,"has",e),i}ownKeys(t){return gn(t,"iterate",Ot(t)?"length":ir),Reflect.ownKeys(t)}}class g1 extends bb{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const p1=new vb,m1=new g1,b1=new vb(!0),Ad=n=>n,zc=n=>Reflect.getPrototypeOf(n);function nl(n,t,e=!1,i=!1){n=n.__v_raw;const s=Ut(n),r=Ut(t);e||(Ps(t,r)&&gn(s,"get",t),gn(s,"get",r));const{has:o}=zc(s),a=i?Ad:e?_d:xa;if(o.call(s,t))return a(n.get(t));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(t)}function il(n,t=!1){const e=this.__v_raw,i=Ut(e),s=Ut(n);return t||(Ps(n,s)&&gn(i,"has",n),gn(i,"has",s)),n===s?e.has(n):e.has(n)||e.has(s)}function sl(n,t=!1){return n=n.__v_raw,!t&&gn(Ut(n),"iterate",ir),Reflect.get(n,"size",n)}function eg(n){n=Ut(n);const t=Ut(this);return zc(t).has.call(t,n)||(t.add(n),Di(t,"add",n,n)),this}function ng(n,t){t=Ut(t);const e=Ut(this),{has:i,get:s}=zc(e);let r=i.call(e,n);r||(n=Ut(n),r=i.call(e,n));const o=s.call(e,n);return e.set(n,t),r?Ps(t,o)&&Di(e,"set",n,t):Di(e,"add",n,t),this}function ig(n){const t=Ut(this),{has:e,get:i}=zc(t);let s=e.call(t,n);s||(n=Ut(n),s=e.call(t,n)),i&&i.call(t,n);const r=t.delete(n);return s&&Di(t,"delete",n,void 0),r}function sg(){const n=Ut(this),t=n.size!==0,e=n.clear();return t&&Di(n,"clear",void 0,void 0),e}function rl(n,t){return function(i,s){const r=this,o=r.__v_raw,a=Ut(o),l=t?Ad:n?_d:xa;return!n&&gn(a,"iterate",ir),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function ol(n,t,e){return function(...i){const s=this.__v_raw,r=Ut(s),o=Vr(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=e?Ad:t?_d:xa;return!t&&gn(r,"iterate",l?Ch:ir),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function es(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function v1(){const n={get(r){return nl(this,r)},get size(){return sl(this)},has:il,add:eg,set:ng,delete:ig,clear:sg,forEach:rl(!1,!1)},t={get(r){return nl(this,r,!1,!0)},get size(){return sl(this)},has:il,add:eg,set:ng,delete:ig,clear:sg,forEach:rl(!1,!0)},e={get(r){return nl(this,r,!0)},get size(){return sl(this,!0)},has(r){return il.call(this,r,!0)},add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear"),forEach:rl(!0,!1)},i={get(r){return nl(this,r,!0,!0)},get size(){return sl(this,!0)},has(r){return il.call(this,r,!0)},add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear"),forEach:rl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=ol(r,!1,!1),e[r]=ol(r,!0,!1),t[r]=ol(r,!1,!0),i[r]=ol(r,!0,!0)}),[n,e,t,i]}const[y1,x1,w1,C1]=v1();function Td(n,t){const e=t?n?C1:w1:n?x1:y1;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Ft(e,s)&&s in i?e:i,s,r)}const S1={get:Td(!1,!1)},P1={get:Td(!1,!0)},E1={get:Td(!0,!1)},yb=new WeakMap,xb=new WeakMap,wb=new WeakMap,O1=new WeakMap;function A1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function T1(n){return n.__v_skip||!Object.isExtensible(n)?0:A1(Xw(n))}function de(n){return Yr(n)?n:Md(n,!1,p1,S1,yb)}function M1(n){return Md(n,!1,b1,P1,xb)}function Cb(n){return Md(n,!0,m1,E1,wb)}function Md(n,t,e,i,s){if(!le(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=T1(n);if(o===0)return n;const a=new Proxy(n,o===2?i:e);return s.set(n,a),a}function Fr(n){return Yr(n)?Fr(n.__v_raw):!!(n&&n.__v_isReactive)}function Yr(n){return!!(n&&n.__v_isReadonly)}function Jl(n){return!!(n&&n.__v_isShallow)}function Sb(n){return Fr(n)||Yr(n)}function Ut(n){const t=n&&n.__v_raw;return t?Ut(t):n}function kd(n){return Object.isExtensible(n)&&Kl(n,"__v_skip",!0),n}const xa=n=>le(n)?de(n):n,_d=n=>le(n)?Cb(n):n;class Pb{constructor(t,e,i,s){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Pd(()=>t(this._value),()=>Vl(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=Ut(this);return(!t._cacheable||t.effect.dirty)&&Ps(t._value,t._value=t.effect.run())&&Vl(t,4),Eb(t),t.effect._dirtyLevel>=2&&Vl(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function k1(n,t,e=!1){let i,s;const r=kt(n);return r?(i=n,s=kn):(i=n.get,s=n.set),new Pb(i,s,r||!s,e)}function Eb(n){var t;Cs&&nr&&(n=Ut(n),fb(nr,(t=n.dep)!=null?t:n.dep=pb(()=>n.dep=void 0,n instanceof Pb?n:void 0)))}function Vl(n,t=4,e){n=Ut(n);const i=n.dep;i&&gb(i,t)}function ln(n){return!!(n&&n.__v_isRef===!0)}function j(n){return _1(n,!1)}function _1(n,t){return ln(n)?n:new $1(n,t)}class $1{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Ut(t),this._value=e?t:xa(t)}get value(){return Eb(this),this._value}set value(t){const e=this.__v_isShallow||Jl(t)||Yr(t);t=e?t:Ut(t),Ps(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:xa(t),Vl(this,4))}}function Cn(n){return ln(n)?n.value:n}const I1={get:(n,t,e)=>Cn(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return ln(s)&&!ln(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function Ob(n){return Fr(n)?n:new Proxy(n,I1)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ss(n,t,e,i){try{return i?n(...i):n()}catch(s){Vc(s,t,e)}}function $n(n,t,e,i){if(kt(n)){const r=Ss(n,t,e,i);return r&&rb(r)&&r.catch(o=>{Vc(o,t,e)}),r}const s=[];for(let r=0;r<n.length;r++)s.push($n(n[r],t,e,i));return s}function Vc(n,t,e,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){Ss(l,null,10,[n,o,a]);return}}R1(n,e,s,i)}function R1(n,t,e,i=!0){console.error(n)}let wa=!1,Sh=!1;const Ke=[];let mi=0;const Hr=[];let hs=null,Ks=0;const Ab=Promise.resolve();let $d=null;function _t(n){const t=$d||Ab;return n?t.then(this?n.bind(this):n):t}function N1(n){let t=mi+1,e=Ke.length;for(;t<e;){const i=t+e>>>1,s=Ke[i],r=Ca(s);r<n||r===n&&s.pre?t=i+1:e=i}return t}function Id(n){(!Ke.length||!Ke.includes(n,wa&&n.allowRecurse?mi+1:mi))&&(n.id==null?Ke.push(n):Ke.splice(N1(n.id),0,n),Tb())}function Tb(){!wa&&!Sh&&(Sh=!0,$d=Ab.then(kb))}function D1(n){const t=Ke.indexOf(n);t>mi&&Ke.splice(t,1)}function B1(n){Ot(n)?Hr.push(...n):(!hs||!hs.includes(n,n.allowRecurse?Ks+1:Ks))&&Hr.push(n),Tb()}function rg(n,t,e=wa?mi+1:0){for(;e<Ke.length;e++){const i=Ke[e];if(i&&i.pre){if(n&&i.id!==n.uid)continue;Ke.splice(e,1),e--,i()}}}function Mb(n){if(Hr.length){const t=[...new Set(Hr)].sort((e,i)=>Ca(e)-Ca(i));if(Hr.length=0,hs){hs.push(...t);return}for(hs=t,Ks=0;Ks<hs.length;Ks++)hs[Ks]();hs=null,Ks=0}}const Ca=n=>n.id==null?1/0:n.id,L1=(n,t)=>{const e=Ca(n)-Ca(t);if(e===0){if(n.pre&&!t.pre)return-1;if(t.pre&&!n.pre)return 1}return e};function kb(n){Sh=!1,wa=!0,Ke.sort(L1);try{for(mi=0;mi<Ke.length;mi++){const t=Ke[mi];t&&t.active!==!1&&Ss(t,null,14)}}finally{mi=0,Ke.length=0,Mb(),wa=!1,$d=null,(Ke.length||Hr.length)&&kb()}}function j1(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||oe;let s=e;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=i[u]||oe;h&&(s=e.map(f=>ge(f)?f.trim():f)),d&&(s=e.map(Zw))}let a,l=i[a=_u(t)]||i[a=_u(Ci(t))];!l&&r&&(l=i[a=_u(_s(t))]),l&&$n(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,$n(c,n,6,s)}}function _b(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!kt(n)){const l=c=>{const u=_b(c,t,!0);u&&(a=!0,Be(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(le(n)&&i.set(n,null),null):(Ot(r)?r.forEach(l=>o[l]=null):Be(o,r),le(n)&&i.set(n,o),o)}function Fc(n,t){return!n||!Nc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ft(n,t[0].toLowerCase()+t.slice(1))||Ft(n,_s(t))||Ft(n,t))}let an=null,Hc=null;function Zl(n){const t=an;return an=n,Hc=n&&n.type.__scopeId||null,t}function $b(n){Hc=n}function Ib(){Hc=null}function We(n,t=an,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&yg(-1);const r=Zl(t);let o;try{o=n(...s)}finally{Zl(r),i._d&&yg(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ru(n){const{type:t,vnode:e,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:f,ctx:g,inheritAttrs:m}=n;let p,v;const b=Zl(n);try{if(e.shapeFlag&4){const w=s||i,C=w;p=pi(u.call(C,w,d,r,f,h,g)),v=l}else{const w=t;p=pi(w.length>1?w(r,{attrs:l,slots:a,emit:c}):w(r,null)),v=t.props?l:z1(l)}}catch(w){ra.length=0,Vc(w,n,1),p=x(xn)}let y=p;if(v&&m!==!1){const w=Object.keys(v),{shapeFlag:C}=y;w.length&&C&7&&(o&&w.some(wd)&&(v=V1(v,o)),y=Es(y,v))}return e.dirs&&(y=Es(y),y.dirs=y.dirs?y.dirs.concat(e.dirs):e.dirs),e.transition&&(y.transition=e.transition),p=y,Zl(b),p}const z1=n=>{let t;for(const e in n)(e==="class"||e==="style"||Nc(e))&&((t||(t={}))[e]=n[e]);return t},V1=(n,t)=>{const e={};for(const i in n)(!wd(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function F1(n,t,e){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?og(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!Fc(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?og(i,o,c):!0:!!o;return!1}function og(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==n[r]&&!Fc(e,r))return!0}return!1}function H1({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const Rb="components",G1="directives";function ve(n,t){return Nb(Rb,n,!0,t)||n}const U1=Symbol.for("v-ndc");function W1(n){return Nb(G1,n)}function Nb(n,t,e=!0,i=!1){const s=an||Ye;if(s){const r=s.type;if(n===Rb){const a=LC(r,!1);if(a&&(a===t||a===Ci(t)||a===Lc(Ci(t))))return r}const o=ag(s[n]||r[n],t)||ag(s.appContext[n],t);return!o&&i?r:o}}function ag(n,t){return n&&(n[t]||n[Ci(t)]||n[Lc(Ci(t))])}const q1=n=>n.__isSuspense;function Y1(n,t){t&&t.pendingBranch?Ot(n)?t.effects.push(...n):t.effects.push(n):B1(n)}const X1=Symbol.for("v-scx"),K1=()=>In(X1);function Eo(n,t){return Rd(n,null,t)}const al={};function st(n,t,e){return Rd(n,t,e)}function Rd(n,t,{immediate:e,deep:i,flush:s,once:r,onTrack:o,onTrigger:a}=oe){if(t&&r){const P=t;t=(...E)=>{P(...E),C()}}const l=Ye,c=P=>i===!0?P:Qs(P,i===!1?1:void 0);let u,d=!1,h=!1;if(ln(n)?(u=()=>n.value,d=Jl(n)):Fr(n)?(u=()=>c(n),d=!0):Ot(n)?(h=!0,d=n.some(P=>Fr(P)||Jl(P)),u=()=>n.map(P=>{if(ln(P))return P.value;if(Fr(P))return c(P);if(kt(P))return Ss(P,l,2)})):kt(n)?t?u=()=>Ss(n,l,2):u=()=>(f&&f(),$n(n,l,3,[g])):u=kn,t&&i){const P=u;u=()=>Qs(P())}let f,g=P=>{f=y.onStop=()=>{Ss(P,l,4),f=y.onStop=void 0}},m;if(qc)if(g=kn,t?e&&$n(t,l,3,[u(),h?[]:void 0,g]):u(),s==="sync"){const P=K1();m=P.__watcherHandles||(P.__watcherHandles=[])}else return kn;let p=h?new Array(n.length).fill(al):al;const v=()=>{if(!(!y.active||!y.dirty))if(t){const P=y.run();(i||d||(h?P.some((E,S)=>Ps(E,p[S])):Ps(P,p)))&&(f&&f(),$n(t,l,3,[P,p===al?void 0:h&&p[0]===al?[]:p,g]),p=P)}else y.run()};v.allowRecurse=!!t;let b;s==="sync"?b=v:s==="post"?b=()=>hn(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),b=()=>Id(v));const y=new Pd(u,kn,b),w=c1(),C=()=>{y.stop(),w&&Cd(w.effects,y)};return t?e?v():p=y.run():s==="post"?hn(y.run.bind(y),l&&l.suspense):y.run(),m&&m.push(C),C}function J1(n,t,e){const i=this.proxy,s=ge(n)?n.includes(".")?Db(i,n):()=>i[n]:n.bind(i,i);let r;kt(t)?r=t:(r=t.handler,e=t);const o=Ga(this),a=Rd(s,r.bind(i),e);return o(),a}function Db(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}function Qs(n,t,e=0,i){if(!le(n)||n.__v_skip)return n;if(t&&t>0){if(e>=t)return n;e++}if(i=i||new Set,i.has(n))return n;if(i.add(n),ln(n))Qs(n.value,t,e,i);else if(Ot(n))for(let s=0;s<n.length;s++)Qs(n[s],t,e,i);else if(sb(n)||Vr(n))n.forEach(s=>{Qs(s,t,e,i)});else if(ab(n))for(const s in n)Qs(n[s],t,e,i);return n}function De(n,t){if(an===null)return n;const e=Yc(an)||an.proxy,i=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[r,o,a,l=oe]=t[s];r&&(kt(r)&&(r={mounted:r,updated:r}),r.deep&&Qs(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Fs(n,t,e,i){const s=n.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(gr(),$n(l,e,8,[n.el,a,n,t]),pr())}}const ds=Symbol("_leaveCb"),ll=Symbol("_enterCb");function Z1(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return be(()=>{n.isMounted=!0}),Ai(()=>{n.isUnmounting=!0}),n}const Pn=[Function,Array],Bb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pn,onEnter:Pn,onAfterEnter:Pn,onEnterCancelled:Pn,onBeforeLeave:Pn,onLeave:Pn,onAfterLeave:Pn,onLeaveCancelled:Pn,onBeforeAppear:Pn,onAppear:Pn,onAfterAppear:Pn,onAppearCancelled:Pn},Q1={name:"BaseTransition",props:Bb,setup(n,{slots:t}){const e=ii(),i=Z1();return()=>{const s=t.default&&jb(t.default(),!0);if(!s||!s.length)return;let r=s[0];if(s.length>1){for(const h of s)if(h.type!==xn){r=h;break}}const o=Ut(n),{mode:a}=o;if(i.isLeaving)return Nu(r);const l=lg(r);if(!l)return Nu(r);const c=Ph(l,o,i,e);Eh(l,c);const u=e.subTree,d=u&&lg(u);if(d&&d.type!==xn&&!Js(l,d)){const h=Ph(d,o,i,e);if(Eh(d,h),a==="out-in")return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},Nu(r);a==="in-out"&&l.type!==xn&&(h.delayLeave=(f,g,m)=>{const p=Lb(i,d);p[String(d.key)]=d,f[ds]=()=>{g(),f[ds]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return r}}},tC=Q1;function Lb(n,t){const{leavingVNodes:e}=n;let i=e.get(t.type);return i||(i=Object.create(null),e.set(t.type,i)),i}function Ph(n,t,e,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:m,onAppear:p,onAfterAppear:v,onAppearCancelled:b}=t,y=String(n.key),w=Lb(e,n),C=(S,A)=>{S&&$n(S,i,9,A)},P=(S,A)=>{const M=A[1];C(S,A),Ot(S)?S.every(O=>O.length<=1)&&M():S.length<=1&&M()},E={mode:r,persisted:o,beforeEnter(S){let A=a;if(!e.isMounted)if(s)A=m||a;else return;S[ds]&&S[ds](!0);const M=w[y];M&&Js(n,M)&&M.el[ds]&&M.el[ds](),C(A,[S])},enter(S){let A=l,M=c,O=u;if(!e.isMounted)if(s)A=p||l,M=v||c,O=b||u;else return;let T=!1;const R=S[ll]=L=>{T||(T=!0,L?C(O,[S]):C(M,[S]),E.delayedLeave&&E.delayedLeave(),S[ll]=void 0)};A?P(A,[S,R]):R()},leave(S,A){const M=String(n.key);if(S[ll]&&S[ll](!0),e.isUnmounting)return A();C(d,[S]);let O=!1;const T=S[ds]=R=>{O||(O=!0,A(),R?C(g,[S]):C(f,[S]),S[ds]=void 0,w[M]===n&&delete w[M])};w[M]=n,h?P(h,[S,T]):T()},clone(S){return Ph(S,t,e,i)}};return E}function Nu(n){if(Gc(n))return n=Es(n),n.children=null,n}function lg(n){return Gc(n)?n.children?n.children[0]:void 0:n}function Eh(n,t){n.shapeFlag&6&&n.component?Eh(n.component.subTree,t):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function jb(n,t=!1,e){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===Jt?(o.patchFlag&128&&s++,i=i.concat(jb(o.children,t,a))):(t||o.type!==xn)&&i.push(a!=null?Es(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function U(n,t){return kt(n)?Be({name:n.name},t,{setup:n}):n}const Fl=n=>!!n.type.__asyncLoader,Gc=n=>n.type.__isKeepAlive;function Ei(n,t){zb(n,"a",t)}function Oi(n,t){zb(n,"da",t)}function zb(n,t,e=Ye){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Uc(t,i,e),e){let s=e.parent;for(;s&&s.parent;)Gc(s.parent.vnode)&&eC(i,t,e,s),s=s.parent}}function eC(n,t,e,i){const s=Uc(t,n,i,!0);Oo(()=>{Cd(i[t],s)},e)}function Uc(n,t,e=Ye,i=!1){if(e){const s=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;gr();const a=Ga(e),l=$n(t,e,n,o);return a(),pr(),l});return i?s.unshift(r):s.push(r),r}}const Yi=n=>(t,e=Ye)=>(!qc||n==="sp")&&Uc(n,(...i)=>t(...i),e),nC=Yi("bm"),be=Yi("m"),Vb=Yi("bu"),Fb=Yi("u"),Ai=Yi("bum"),Oo=Yi("um"),iC=Yi("sp"),sC=Yi("rtg"),rC=Yi("rtc");function oC(n,t=Ye){Uc("ec",n,t)}function ar(n,t,e,i){let s;const r=e&&e[i];if(Ot(n)||ge(n)){s=new Array(n.length);for(let o=0,a=n.length;o<a;o++)s[o]=t(n[o],o,void 0,r&&r[o])}else if(typeof n=="number"){s=new Array(n);for(let o=0;o<n;o++)s[o]=t(o+1,o,void 0,r&&r[o])}else if(le(n))if(n[Symbol.iterator])s=Array.from(n,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(n);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(n[c],c,a,r&&r[a])}}else s=[];return e&&(e[i]=s),s}const Oh=n=>n?tv(n)?Yc(n)||n.proxy:Oh(n.parent):null,na=Be(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Oh(n.parent),$root:n=>Oh(n.root),$emit:n=>n.emit,$options:n=>Nd(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,Id(n.update)}),$nextTick:n=>n.n||(n.n=_t.bind(n.proxy)),$watch:n=>J1.bind(n)}),Du=(n,t)=>n!==oe&&!n.__isScriptSetup&&Ft(n,t),aC={get({_:n},t){const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return r[t]}else{if(Du(i,t))return o[t]=1,i[t];if(s!==oe&&Ft(s,t))return o[t]=2,s[t];if((c=n.propsOptions[0])&&Ft(c,t))return o[t]=3,r[t];if(e!==oe&&Ft(e,t))return o[t]=4,e[t];Ah&&(o[t]=0)}}const u=na[t];let d,h;if(u)return t==="$attrs"&&gn(n,"get",t),u(n);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==oe&&Ft(e,t))return o[t]=4,e[t];if(h=l.config.globalProperties,Ft(h,t))return h[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:r}=n;return Du(s,t)?(s[t]=e,!0):i!==oe&&Ft(i,t)?(i[t]=e,!0):Ft(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!e[o]||n!==oe&&Ft(n,o)||Du(t,o)||(a=r[0])&&Ft(a,o)||Ft(i,o)||Ft(na,o)||Ft(s.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Ft(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function cg(n){return Ot(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Ah=!0;function lC(n){const t=Nd(n),e=n.proxy,i=n.ctx;Ah=!1,t.beforeCreate&&ug(t.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:g,activated:m,deactivated:p,beforeDestroy:v,beforeUnmount:b,destroyed:y,unmounted:w,render:C,renderTracked:P,renderTriggered:E,errorCaptured:S,serverPrefetch:A,expose:M,inheritAttrs:O,components:T,directives:R,filters:L}=t;if(c&&cC(c,i,null),o)for(const D in o){const V=o[D];kt(V)&&(i[D]=V.bind(e))}if(s){const D=s.call(e,e);le(D)&&(n.data=de(D))}if(Ah=!0,r)for(const D in r){const V=r[D],it=kt(V)?V.bind(e,e):kt(V.get)?V.get.bind(e,e):kn,at=!kt(V)&&kt(V.set)?V.set.bind(e):kn,z=F({get:it,set:at});Object.defineProperty(i,D,{enumerable:!0,configurable:!0,get:()=>z.value,set:q=>z.value=q})}if(a)for(const D in a)Hb(a[D],i,e,D);if(l){const D=kt(l)?l.call(e):l;Reflect.ownKeys(D).forEach(V=>{Ao(V,D[V])})}u&&ug(u,n,"c");function _(D,V){Ot(V)?V.forEach(it=>D(it.bind(e))):V&&D(V.bind(e))}if(_(nC,d),_(be,h),_(Vb,f),_(Fb,g),_(Ei,m),_(Oi,p),_(oC,S),_(rC,P),_(sC,E),_(Ai,b),_(Oo,w),_(iC,A),Ot(M))if(M.length){const D=n.exposed||(n.exposed={});M.forEach(V=>{Object.defineProperty(D,V,{get:()=>e[V],set:it=>e[V]=it})})}else n.exposed||(n.exposed={});C&&n.render===kn&&(n.render=C),O!=null&&(n.inheritAttrs=O),T&&(n.components=T),R&&(n.directives=R)}function cC(n,t,e=kn){Ot(n)&&(n=Th(n));for(const i in n){const s=n[i];let r;le(s)?"default"in s?r=In(s.from||i,s.default,!0):r=In(s.from||i):r=In(s),ln(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function ug(n,t,e){$n(Ot(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function Hb(n,t,e,i){const s=i.includes(".")?Db(e,i):()=>e[i];if(ge(n)){const r=t[n];kt(r)&&st(s,r)}else if(kt(n))st(s,n.bind(e));else if(le(n))if(Ot(n))n.forEach(r=>Hb(r,t,e,i));else{const r=kt(n.handler)?n.handler.bind(e):t[n.handler];kt(r)&&st(s,r,n)}}function Nd(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!e&&!i?l=t:(l={},s.length&&s.forEach(c=>Ql(l,c,o,!0)),Ql(l,t,o)),le(t)&&r.set(t,l),l}function Ql(n,t,e,i=!1){const{mixins:s,extends:r}=t;r&&Ql(n,r,e,!0),s&&s.forEach(o=>Ql(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=uC[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const uC={data:hg,props:dg,emits:dg,methods:Zo,computed:Zo,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:Zo,directives:Zo,watch:dC,provide:hg,inject:hC};function hg(n,t){return t?n?function(){return Be(kt(n)?n.call(this,this):n,kt(t)?t.call(this,this):t)}:t:n}function hC(n,t){return Zo(Th(n),Th(t))}function Th(n){if(Ot(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function rn(n,t){return n?[...new Set([].concat(n,t))]:t}function Zo(n,t){return n?Be(Object.create(null),n,t):t}function dg(n,t){return n?Ot(n)&&Ot(t)?[...new Set([...n,...t])]:Be(Object.create(null),cg(n),cg(t??{})):t}function dC(n,t){if(!n)return t;if(!t)return n;const e=Be(Object.create(null),n);for(const i in t)e[i]=rn(n[i],t[i]);return e}function Gb(){return{app:null,config:{isNativeTag:qw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fC=0;function gC(n,t){return function(i,s=null){kt(i)||(i=Be({},i)),s!=null&&!le(s)&&(s=null);const r=Gb(),o=new WeakSet;let a=!1;const l=r.app={_uid:fC++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:zC,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&kt(c.install)?(o.add(c),c.install(l,...u)):kt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const h=x(i,s);return h.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),u&&t?t(h,c):n(h,c,d),a=!0,l._container=c,c.__vue_app__=l,Yc(h.component)||h.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=ia;ia=l;try{return c()}finally{ia=u}}};return l}}let ia=null;function Ao(n,t){if(Ye){let e=Ye.provides;const i=Ye.parent&&Ye.parent.provides;i===e&&(e=Ye.provides=Object.create(i)),e[n]=t}}function In(n,t,e=!1){const i=Ye||an;if(i||ia){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ia._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return e&&kt(t)?t.call(i&&i.proxy):t}}function pC(n,t,e,i=!1){const s={},r={};Kl(r,Wc,1),n.propsDefaults=Object.create(null),Ub(n,t,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=i?s:M1(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function mC(n,t,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=Ut(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Fc(n.emitsOptions,h))continue;const f=t[h];if(l)if(Ft(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const g=Ci(h);s[g]=Mh(l,a,g,f,n,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{Ub(n,t,s,r)&&(c=!0);let u;for(const d in a)(!t||!Ft(t,d)&&((u=_s(d))===d||!Ft(t,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(s[d]=Mh(l,a,d,void 0,n,!0)):delete s[d]);if(r!==a)for(const d in r)(!t||!Ft(t,d))&&(delete r[d],c=!0)}c&&Di(n,"set","$attrs")}function Ub(n,t,e,i){const[s,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(ea(l))continue;const c=t[l];let u;s&&Ft(s,u=Ci(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:Fc(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Ut(e),c=a||oe;for(let u=0;u<r.length;u++){const d=r[u];e[d]=Mh(s,l,d,c[d],n,!Ft(c,d))}}return o}function Mh(n,t,e,i,s,r){const o=n[e];if(o!=null){const a=Ft(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&kt(l)){const{propsDefaults:c}=s;if(e in c)i=c[e];else{const u=Ga(s);i=c[e]=l.call(null,t),u()}}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===_s(e))&&(i=!0))}return i}function Wb(n,t,e=!1){const i=t.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!kt(n)){const u=d=>{l=!0;const[h,f]=Wb(d,t,!0);Be(o,h),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return le(n)&&i.set(n,zr),zr;if(Ot(r))for(let u=0;u<r.length;u++){const d=Ci(r[u]);fg(d)&&(o[d]=oe)}else if(r)for(const u in r){const d=Ci(u);if(fg(d)){const h=r[u],f=o[d]=Ot(h)||kt(h)?{type:h}:Be({},h);if(f){const g=mg(Boolean,f.type),m=mg(String,f.type);f[0]=g>-1,f[1]=m<0||g<m,(g>-1||Ft(f,"default"))&&a.push(d)}}}const c=[o,a];return le(n)&&i.set(n,c),c}function fg(n){return n[0]!=="$"&&!ea(n)}function gg(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function pg(n,t){return gg(n)===gg(t)}function mg(n,t){return Ot(t)?t.findIndex(e=>pg(e,n)):kt(t)&&pg(t,n)?0:-1}const qb=n=>n[0]==="_"||n==="$stable",Dd=n=>Ot(n)?n.map(pi):[pi(n)],bC=(n,t,e)=>{if(t._n)return t;const i=We((...s)=>Dd(t(...s)),e);return i._c=!1,i},Yb=(n,t,e)=>{const i=n._ctx;for(const s in n){if(qb(s))continue;const r=n[s];if(kt(r))t[s]=bC(s,r,i);else if(r!=null){const o=Dd(r);t[s]=()=>o}}},Xb=(n,t)=>{const e=Dd(t);n.slots.default=()=>e},vC=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=Ut(t),Kl(t,"_",e)):Yb(t,n.slots={})}else n.slots={},t&&Xb(n,t);Kl(n.slots,Wc,1)},yC=(n,t,e)=>{const{vnode:i,slots:s}=n;let r=!0,o=oe;if(i.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:(Be(s,t),!e&&a===1&&delete s._):(r=!t.$stable,Yb(t,s)),o=t}else t&&(Xb(n,t),o={default:1});if(r)for(const a in s)!qb(a)&&o[a]==null&&delete s[a]};function kh(n,t,e,i,s=!1){if(Ot(n)){n.forEach((h,f)=>kh(h,t&&(Ot(t)?t[f]:t),e,i,s));return}if(Fl(i)&&!s)return;const r=i.shapeFlag&4?Yc(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=n,c=t&&t.r,u=a.refs===oe?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(ge(c)?(u[c]=null,Ft(d,c)&&(d[c]=null)):ln(c)&&(c.value=null)),kt(l))Ss(l,a,12,[o,u]);else{const h=ge(l),f=ln(l);if(h||f){const g=()=>{if(n.f){const m=h?Ft(d,l)?d[l]:u[l]:l.value;s?Ot(m)&&Cd(m,r):Ot(m)?m.includes(r)||m.push(r):h?(u[l]=[r],Ft(d,l)&&(d[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else h?(u[l]=o,Ft(d,l)&&(d[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,hn(g,e)):g()}}}const hn=Y1;function xC(n){return wC(n)}function wC(n,t){const e=lb();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=kn,insertStaticContent:g}=n,m=(I,N,H,K=null,J=null,ot=null,dt=void 0,rt=null,ct=!!N.dynamicChildren)=>{if(I===N)return;I&&!Js(I,N)&&(K=B(I),q(I,J,ot,!0),I=null),N.patchFlag===-2&&(ct=!1,N.dynamicChildren=null);const{type:et,ref:pt,shapeFlag:Pt}=N;switch(et){case Ha:p(I,N,H,K);break;case xn:v(I,N,H,K);break;case Hl:I==null&&b(N,H,K,dt);break;case Jt:T(I,N,H,K,J,ot,dt,rt,ct);break;default:Pt&1?C(I,N,H,K,J,ot,dt,rt,ct):Pt&6?R(I,N,H,K,J,ot,dt,rt,ct):(Pt&64||Pt&128)&&et.process(I,N,H,K,J,ot,dt,rt,ct,xt)}pt!=null&&J&&kh(pt,I&&I.ref,ot,N||I,!N)},p=(I,N,H,K)=>{if(I==null)i(N.el=a(N.children),H,K);else{const J=N.el=I.el;N.children!==I.children&&c(J,N.children)}},v=(I,N,H,K)=>{I==null?i(N.el=l(N.children||""),H,K):N.el=I.el},b=(I,N,H,K)=>{[I.el,I.anchor]=g(I.children,N,H,K,I.el,I.anchor)},y=({el:I,anchor:N},H,K)=>{let J;for(;I&&I!==N;)J=h(I),i(I,H,K),I=J;i(N,H,K)},w=({el:I,anchor:N})=>{let H;for(;I&&I!==N;)H=h(I),s(I),I=H;s(N)},C=(I,N,H,K,J,ot,dt,rt,ct)=>{N.type==="svg"?dt="svg":N.type==="math"&&(dt="mathml"),I==null?P(N,H,K,J,ot,dt,rt,ct):A(I,N,J,ot,dt,rt,ct)},P=(I,N,H,K,J,ot,dt,rt)=>{let ct,et;const{props:pt,shapeFlag:Pt,transition:Ct,dirs:At}=I;if(ct=I.el=o(I.type,ot,pt&&pt.is,pt),Pt&8?u(ct,I.children):Pt&16&&S(I.children,ct,null,K,J,Bu(I,ot),dt,rt),At&&Fs(I,null,K,"created"),E(ct,I,I.scopeId,dt,K),pt){for(const Zt in pt)Zt!=="value"&&!ea(Zt)&&r(ct,Zt,null,pt[Zt],ot,I.children,K,J,ft);"value"in pt&&r(ct,"value",null,pt.value,ot),(et=pt.onVnodeBeforeMount)&&hi(et,K,I)}At&&Fs(I,null,K,"beforeMount");const Bt=CC(J,Ct);Bt&&Ct.beforeEnter(ct),i(ct,N,H),((et=pt&&pt.onVnodeMounted)||Bt||At)&&hn(()=>{et&&hi(et,K,I),Bt&&Ct.enter(ct),At&&Fs(I,null,K,"mounted")},J)},E=(I,N,H,K,J)=>{if(H&&f(I,H),K)for(let ot=0;ot<K.length;ot++)f(I,K[ot]);if(J){let ot=J.subTree;if(N===ot){const dt=J.vnode;E(I,dt,dt.scopeId,dt.slotScopeIds,J.parent)}}},S=(I,N,H,K,J,ot,dt,rt,ct=0)=>{for(let et=ct;et<I.length;et++){const pt=I[et]=rt?fs(I[et]):pi(I[et]);m(null,pt,N,H,K,J,ot,dt,rt)}},A=(I,N,H,K,J,ot,dt)=>{const rt=N.el=I.el;let{patchFlag:ct,dynamicChildren:et,dirs:pt}=N;ct|=I.patchFlag&16;const Pt=I.props||oe,Ct=N.props||oe;let At;if(H&&Hs(H,!1),(At=Ct.onVnodeBeforeUpdate)&&hi(At,H,N,I),pt&&Fs(N,I,H,"beforeUpdate"),H&&Hs(H,!0),et?M(I.dynamicChildren,et,rt,H,K,Bu(N,J),ot):dt||V(I,N,rt,null,H,K,Bu(N,J),ot,!1),ct>0){if(ct&16)O(rt,N,Pt,Ct,H,K,J);else if(ct&2&&Pt.class!==Ct.class&&r(rt,"class",null,Ct.class,J),ct&4&&r(rt,"style",Pt.style,Ct.style,J),ct&8){const Bt=N.dynamicProps;for(let Zt=0;Zt<Bt.length;Zt++){const ue=Bt[Zt],Le=Pt[ue],zn=Ct[ue];(zn!==Le||ue==="value")&&r(rt,ue,Le,zn,J,I.children,H,K,ft)}}ct&1&&I.children!==N.children&&u(rt,N.children)}else!dt&&et==null&&O(rt,N,Pt,Ct,H,K,J);((At=Ct.onVnodeUpdated)||pt)&&hn(()=>{At&&hi(At,H,N,I),pt&&Fs(N,I,H,"updated")},K)},M=(I,N,H,K,J,ot,dt)=>{for(let rt=0;rt<N.length;rt++){const ct=I[rt],et=N[rt],pt=ct.el&&(ct.type===Jt||!Js(ct,et)||ct.shapeFlag&70)?d(ct.el):H;m(ct,et,pt,null,K,J,ot,dt,!0)}},O=(I,N,H,K,J,ot,dt)=>{if(H!==K){if(H!==oe)for(const rt in H)!ea(rt)&&!(rt in K)&&r(I,rt,H[rt],null,dt,N.children,J,ot,ft);for(const rt in K){if(ea(rt))continue;const ct=K[rt],et=H[rt];ct!==et&&rt!=="value"&&r(I,rt,et,ct,dt,N.children,J,ot,ft)}"value"in K&&r(I,"value",H.value,K.value,dt)}},T=(I,N,H,K,J,ot,dt,rt,ct)=>{const et=N.el=I?I.el:a(""),pt=N.anchor=I?I.anchor:a("");let{patchFlag:Pt,dynamicChildren:Ct,slotScopeIds:At}=N;At&&(rt=rt?rt.concat(At):At),I==null?(i(et,H,K),i(pt,H,K),S(N.children||[],H,pt,J,ot,dt,rt,ct)):Pt>0&&Pt&64&&Ct&&I.dynamicChildren?(M(I.dynamicChildren,Ct,H,J,ot,dt,rt),(N.key!=null||J&&N===J.subTree)&&Bd(I,N,!0)):V(I,N,H,pt,J,ot,dt,rt,ct)},R=(I,N,H,K,J,ot,dt,rt,ct)=>{N.slotScopeIds=rt,I==null?N.shapeFlag&512?J.ctx.activate(N,H,K,dt,ct):L(N,H,K,J,ot,dt,ct):k(I,N,ct)},L=(I,N,H,K,J,ot,dt)=>{const rt=I.component=IC(I,K,J);if(Gc(I)&&(rt.ctx.renderer=xt),RC(rt),rt.asyncDep){if(J&&J.registerDep(rt,_),!I.el){const ct=rt.subTree=x(xn);v(null,ct,N,H)}}else _(rt,I,N,H,J,ot,dt)},k=(I,N,H)=>{const K=N.component=I.component;if(F1(I,N,H))if(K.asyncDep&&!K.asyncResolved){D(K,N,H);return}else K.next=N,D1(K.update),K.effect.dirty=!0,K.update();else N.el=I.el,K.vnode=N},_=(I,N,H,K,J,ot,dt)=>{const rt=()=>{if(I.isMounted){let{next:pt,bu:Pt,u:Ct,parent:At,vnode:Bt}=I;{const Er=Kb(I);if(Er){pt&&(pt.el=Bt.el,D(I,pt,dt)),Er.asyncDep.then(()=>{I.isUnmounted||rt()});return}}let Zt=pt,ue;Hs(I,!1),pt?(pt.el=Bt.el,D(I,pt,dt)):pt=Bt,Pt&&$u(Pt),(ue=pt.props&&pt.props.onVnodeBeforeUpdate)&&hi(ue,At,pt,Bt),Hs(I,!0);const Le=Ru(I),zn=I.subTree;I.subTree=Le,m(zn,Le,d(zn.el),B(zn),I,J,ot),pt.el=Le.el,Zt===null&&H1(I,Le.el),Ct&&hn(Ct,J),(ue=pt.props&&pt.props.onVnodeUpdated)&&hn(()=>hi(ue,At,pt,Bt),J)}else{let pt;const{el:Pt,props:Ct}=N,{bm:At,m:Bt,parent:Zt}=I,ue=Fl(N);if(Hs(I,!1),At&&$u(At),!ue&&(pt=Ct&&Ct.onVnodeBeforeMount)&&hi(pt,Zt,N),Hs(I,!0),Pt&&se){const Le=()=>{I.subTree=Ru(I),se(Pt,I.subTree,I,J,null)};ue?N.type.__asyncLoader().then(()=>!I.isUnmounted&&Le()):Le()}else{const Le=I.subTree=Ru(I);m(null,Le,H,K,I,J,ot),N.el=Le.el}if(Bt&&hn(Bt,J),!ue&&(pt=Ct&&Ct.onVnodeMounted)){const Le=N;hn(()=>hi(pt,Zt,Le),J)}(N.shapeFlag&256||Zt&&Fl(Zt.vnode)&&Zt.vnode.shapeFlag&256)&&I.a&&hn(I.a,J),I.isMounted=!0,N=H=K=null}},ct=I.effect=new Pd(rt,kn,()=>Id(et),I.scope),et=I.update=()=>{ct.dirty&&ct.run()};et.id=I.uid,Hs(I,!0),et()},D=(I,N,H)=>{N.component=I;const K=I.vnode.props;I.vnode=N,I.next=null,mC(I,N.props,K,H),yC(I,N.children,H),gr(),rg(I),pr()},V=(I,N,H,K,J,ot,dt,rt,ct=!1)=>{const et=I&&I.children,pt=I?I.shapeFlag:0,Pt=N.children,{patchFlag:Ct,shapeFlag:At}=N;if(Ct>0){if(Ct&128){at(et,Pt,H,K,J,ot,dt,rt,ct);return}else if(Ct&256){it(et,Pt,H,K,J,ot,dt,rt,ct);return}}At&8?(pt&16&&ft(et,J,ot),Pt!==et&&u(H,Pt)):pt&16?At&16?at(et,Pt,H,K,J,ot,dt,rt,ct):ft(et,J,ot,!0):(pt&8&&u(H,""),At&16&&S(Pt,H,K,J,ot,dt,rt,ct))},it=(I,N,H,K,J,ot,dt,rt,ct)=>{I=I||zr,N=N||zr;const et=I.length,pt=N.length,Pt=Math.min(et,pt);let Ct;for(Ct=0;Ct<Pt;Ct++){const At=N[Ct]=ct?fs(N[Ct]):pi(N[Ct]);m(I[Ct],At,H,null,J,ot,dt,rt,ct)}et>pt?ft(I,J,ot,!0,!1,Pt):S(N,H,K,J,ot,dt,rt,ct,Pt)},at=(I,N,H,K,J,ot,dt,rt,ct)=>{let et=0;const pt=N.length;let Pt=I.length-1,Ct=pt-1;for(;et<=Pt&&et<=Ct;){const At=I[et],Bt=N[et]=ct?fs(N[et]):pi(N[et]);if(Js(At,Bt))m(At,Bt,H,null,J,ot,dt,rt,ct);else break;et++}for(;et<=Pt&&et<=Ct;){const At=I[Pt],Bt=N[Ct]=ct?fs(N[Ct]):pi(N[Ct]);if(Js(At,Bt))m(At,Bt,H,null,J,ot,dt,rt,ct);else break;Pt--,Ct--}if(et>Pt){if(et<=Ct){const At=Ct+1,Bt=At<pt?N[At].el:K;for(;et<=Ct;)m(null,N[et]=ct?fs(N[et]):pi(N[et]),H,Bt,J,ot,dt,rt,ct),et++}}else if(et>Ct)for(;et<=Pt;)q(I[et],J,ot,!0),et++;else{const At=et,Bt=et,Zt=new Map;for(et=Bt;et<=Ct;et++){const mn=N[et]=ct?fs(N[et]):pi(N[et]);mn.key!=null&&Zt.set(mn.key,et)}let ue,Le=0;const zn=Ct-Bt+1;let Er=!1,Yf=0;const Vo=new Array(zn);for(et=0;et<zn;et++)Vo[et]=0;for(et=At;et<=Pt;et++){const mn=I[et];if(Le>=zn){q(mn,J,ot,!0);continue}let ui;if(mn.key!=null)ui=Zt.get(mn.key);else for(ue=Bt;ue<=Ct;ue++)if(Vo[ue-Bt]===0&&Js(mn,N[ue])){ui=ue;break}ui===void 0?q(mn,J,ot,!0):(Vo[ui-Bt]=et+1,ui>=Yf?Yf=ui:Er=!0,m(mn,N[ui],H,null,J,ot,dt,rt,ct),Le++)}const Xf=Er?SC(Vo):zr;for(ue=Xf.length-1,et=zn-1;et>=0;et--){const mn=Bt+et,ui=N[mn],Kf=mn+1<pt?N[mn+1].el:K;Vo[et]===0?m(null,ui,H,Kf,J,ot,dt,rt,ct):Er&&(ue<0||et!==Xf[ue]?z(ui,H,Kf,2):ue--)}}},z=(I,N,H,K,J=null)=>{const{el:ot,type:dt,transition:rt,children:ct,shapeFlag:et}=I;if(et&6){z(I.component.subTree,N,H,K);return}if(et&128){I.suspense.move(N,H,K);return}if(et&64){dt.move(I,N,H,xt);return}if(dt===Jt){i(ot,N,H);for(let Pt=0;Pt<ct.length;Pt++)z(ct[Pt],N,H,K);i(I.anchor,N,H);return}if(dt===Hl){y(I,N,H);return}if(K!==2&&et&1&&rt)if(K===0)rt.beforeEnter(ot),i(ot,N,H),hn(()=>rt.enter(ot),J);else{const{leave:Pt,delayLeave:Ct,afterLeave:At}=rt,Bt=()=>i(ot,N,H),Zt=()=>{Pt(ot,()=>{Bt(),At&&At()})};Ct?Ct(ot,Bt,Zt):Zt()}else i(ot,N,H)},q=(I,N,H,K=!1,J=!1)=>{const{type:ot,props:dt,ref:rt,children:ct,dynamicChildren:et,shapeFlag:pt,patchFlag:Pt,dirs:Ct}=I;if(rt!=null&&kh(rt,null,H,I,!0),pt&256){N.ctx.deactivate(I);return}const At=pt&1&&Ct,Bt=!Fl(I);let Zt;if(Bt&&(Zt=dt&&dt.onVnodeBeforeUnmount)&&hi(Zt,N,I),pt&6)X(I.component,H,K);else{if(pt&128){I.suspense.unmount(H,K);return}At&&Fs(I,null,N,"beforeUnmount"),pt&64?I.type.remove(I,N,H,J,xt,K):et&&(ot!==Jt||Pt>0&&Pt&64)?ft(et,N,H,!1,!0):(ot===Jt&&Pt&384||!J&&pt&16)&&ft(ct,N,H),K&&lt(I)}(Bt&&(Zt=dt&&dt.onVnodeUnmounted)||At)&&hn(()=>{Zt&&hi(Zt,N,I),At&&Fs(I,null,N,"unmounted")},H)},lt=I=>{const{type:N,el:H,anchor:K,transition:J}=I;if(N===Jt){mt(H,K);return}if(N===Hl){w(I);return}const ot=()=>{s(H),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(I.shapeFlag&1&&J&&!J.persisted){const{leave:dt,delayLeave:rt}=J,ct=()=>dt(H,ot);rt?rt(I.el,ot,ct):ct()}else ot()},mt=(I,N)=>{let H;for(;I!==N;)H=h(I),s(I),I=H;s(N)},X=(I,N,H)=>{const{bum:K,scope:J,update:ot,subTree:dt,um:rt}=I;K&&$u(K),J.stop(),ot&&(ot.active=!1,q(dt,I,N,H)),rt&&hn(rt,N),hn(()=>{I.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},ft=(I,N,H,K=!1,J=!1,ot=0)=>{for(let dt=ot;dt<I.length;dt++)q(I[dt],N,H,K,J)},B=I=>I.shapeFlag&6?B(I.component.subTree):I.shapeFlag&128?I.suspense.next():h(I.anchor||I.el);let ht=!1;const vt=(I,N,H)=>{I==null?N._vnode&&q(N._vnode,null,null,!0):m(N._vnode||null,I,N,null,null,null,H),ht||(ht=!0,rg(),Mb(),ht=!1),N._vnode=I},xt={p:m,um:q,m:z,r:lt,mt:L,mc:S,pc:V,pbc:M,n:B,o:n};let Wt,se;return t&&([Wt,se]=t(xt)),{render:vt,hydrate:Wt,createApp:gC(vt,Wt)}}function Bu({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Hs({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function CC(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Bd(n,t,e=!1){const i=n.children,s=t.children;if(Ot(i)&&Ot(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=fs(s[r]),a.el=o.el),e||Bd(o,a)),a.type===Ha&&(a.el=o.el)}}function SC(n){const t=n.slice(),e=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=e[e.length-1],n[s]<c){t[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<c?r=a+1:o=a;c<n[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Kb(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Kb(t)}const PC=n=>n.__isTeleport,sa=n=>n&&(n.disabled||n.disabled===""),bg=n=>typeof SVGElement<"u"&&n instanceof SVGElement,vg=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,_h=(n,t)=>{const e=n&&n.to;return ge(e)?t?t(e):null:e},EC={name:"Teleport",__isTeleport:!0,process(n,t,e,i,s,r,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:g,createText:m,createComment:p}}=c,v=sa(t.props);let{shapeFlag:b,children:y,dynamicChildren:w}=t;if(n==null){const C=t.el=m(""),P=t.anchor=m("");f(C,e,i),f(P,e,i);const E=t.target=_h(t.props,g),S=t.targetAnchor=m("");E&&(f(S,E),o==="svg"||bg(E)?o="svg":(o==="mathml"||vg(E))&&(o="mathml"));const A=(M,O)=>{b&16&&u(y,M,O,s,r,o,a,l)};v?A(e,P):E&&A(E,S)}else{t.el=n.el;const C=t.anchor=n.anchor,P=t.target=n.target,E=t.targetAnchor=n.targetAnchor,S=sa(n.props),A=S?e:P,M=S?C:E;if(o==="svg"||bg(P)?o="svg":(o==="mathml"||vg(P))&&(o="mathml"),w?(h(n.dynamicChildren,w,A,s,r,o,a),Bd(n,t,!0)):l||d(n,t,A,M,s,r,o,a,!1),v)S?t.props&&n.props&&t.props.to!==n.props.to&&(t.props.to=n.props.to):cl(t,e,C,c,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const O=t.target=_h(t.props,g);O&&cl(t,O,null,c,0)}else S&&cl(t,P,E,c,1)}Jb(t)},remove(n,t,e,i,{um:s,o:{remove:r}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=n;if(d&&r(u),o&&r(c),a&16){const f=o||!sa(h);for(let g=0;g<l.length;g++){const m=l[g];s(m,t,e,f,!!m.dynamicChildren)}}},move:cl,hydrate:OC};function cl(n,t,e,{o:{insert:i},m:s},r=2){r===0&&i(n.targetAnchor,t,e);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=n,d=r===2;if(d&&i(o,t,e),(!d||sa(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],t,e,2);d&&i(a,t,e)}function OC(n,t,e,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=t.target=_h(t.props,l);if(u){const d=u._lpa||u.firstChild;if(t.shapeFlag&16)if(sa(t.props))t.anchor=c(o(n),t,a(n),e,i,s,r),t.targetAnchor=d;else{t.anchor=o(n);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){t.targetAnchor=h,u._lpa=t.targetAnchor&&o(t.targetAnchor);break}c(d,t,u,e,i,s,r)}Jb(t)}return t.anchor&&o(t.anchor)}const mr=EC;function Jb(n){const t=n.ctx;if(t&&t.ut){let e=n.children[0].el;for(;e&&e!==n.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",t.uid),e=e.nextSibling;t.ut()}}const Jt=Symbol.for("v-fgt"),Ha=Symbol.for("v-txt"),xn=Symbol.for("v-cmt"),Hl=Symbol.for("v-stc"),ra=[];let Yn=null;function It(n=!1){ra.push(Yn=n?null:[])}function AC(){ra.pop(),Yn=ra[ra.length-1]||null}let Sa=1;function yg(n){Sa+=n}function Zb(n){return n.dynamicChildren=Sa>0?Yn||zr:null,AC(),Sa>0&&Yn&&Yn.push(n),n}function ne(n,t,e,i,s,r){return Zb(Kt(n,t,e,i,s,r,!0))}function on(n,t,e,i,s){return Zb(x(n,t,e,i,s,!0))}function tc(n){return n?n.__v_isVNode===!0:!1}function Js(n,t){return n.type===t.type&&n.key===t.key}const Wc="__vInternal",Qb=({key:n})=>n??null,Gl=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?ge(n)||ln(n)||kt(n)?{i:an,r:n,k:t,f:!!e}:n:null);function Kt(n,t=null,e=null,i=0,s=null,r=n===Jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Qb(t),ref:t&&Gl(t),scopeId:Hc,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:an};return a?(Ld(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=ge(e)?8:16),Sa>0&&!o&&Yn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Yn.push(l),l}const x=TC;function TC(n,t=null,e=null,i=0,s=null,r=!1){if((!n||n===U1)&&(n=xn),tc(n)){const a=Es(n,t,!0);return e&&Ld(a,e),Sa>0&&!r&&Yn&&(a.shapeFlag&6?Yn[Yn.indexOf(n)]=a:Yn.push(a)),a.patchFlag|=-2,a}if(jC(n)&&(n=n.__vccOpts),t){t=MC(t);let{class:a,style:l}=t;a&&!ge(a)&&(t.class=Fa(a)),le(l)&&(Sb(l)&&!Ot(l)&&(l=Be({},l)),t.style=jc(l))}const o=ge(n)?1:q1(n)?128:PC(n)?64:le(n)?4:kt(n)?2:0;return Kt(n,t,e,i,s,o,r,!0)}function MC(n){return n?Sb(n)||Wc in n?Be({},n):n:null}function Es(n,t,e=!1){const{props:i,ref:s,patchFlag:r,children:o}=n,a=t?Rt(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Qb(a),ref:t&&t.ref?e&&s?Ot(s)?s.concat(Gl(t)):[s,Gl(t)]:Gl(t):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Jt?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Es(n.ssContent),ssFallback:n.ssFallback&&Es(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Qn(n=" ",t=0){return x(Ha,null,n,t)}function kC(n,t){const e=x(Hl,null,n);return e.staticCount=t,e}function gi(n="",t=!1){return t?(It(),on(xn,null,n)):x(xn,null,n)}function pi(n){return n==null||typeof n=="boolean"?x(xn):Ot(n)?x(Jt,null,n.slice()):typeof n=="object"?fs(n):x(Ha,null,String(n))}function fs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Es(n)}function Ld(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Ot(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Ld(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!(Wc in t)?t._ctx=an:s===3&&an&&(an.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else kt(t)?(t={default:t,_ctx:an},e=32):(t=String(t),i&64?(e=16,t=[Qn(t)]):e=8);n.children=t,n.shapeFlag|=e}function Rt(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Fa([t.class,i.class]));else if(s==="style")t.style=jc([t.style,i.style]);else if(Nc(s)){const r=t[s],o=i[s];o&&r!==o&&!(Ot(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function hi(n,t,e,i=null){$n(n,t,7,[e,i])}const _C=Gb();let $C=0;function IC(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||_C,r={uid:$C++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new a1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wb(i,s),emitsOptions:_b(i,s),emit:null,emitted:null,propsDefaults:oe,inheritAttrs:i.inheritAttrs,ctx:oe,data:oe,props:oe,attrs:oe,slots:oe,refs:oe,setupState:oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=j1.bind(null,r),n.ce&&n.ce(r),r}let Ye=null;const ii=()=>Ye||an;let ec,$h;{const n=lb(),t=(e,i)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};ec=t("__VUE_INSTANCE_SETTERS__",e=>Ye=e),$h=t("__VUE_SSR_SETTERS__",e=>qc=e)}const Ga=n=>{const t=Ye;return ec(n),n.scope.on(),()=>{n.scope.off(),ec(t)}},xg=()=>{Ye&&Ye.scope.off(),ec(null)};function tv(n){return n.vnode.shapeFlag&4}let qc=!1;function RC(n,t=!1){t&&$h(t);const{props:e,children:i}=n.vnode,s=tv(n);pC(n,e,s,t),vC(n,i);const r=s?NC(n,t):void 0;return t&&$h(!1),r}function NC(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=kd(new Proxy(n.ctx,aC));const{setup:i}=e;if(i){const s=n.setupContext=i.length>1?BC(n):null,r=Ga(n);gr();const o=Ss(i,n,0,[n.props,s]);if(pr(),r(),rb(o)){if(o.then(xg,xg),t)return o.then(a=>{wg(n,a,t)}).catch(a=>{Vc(a,n,0)});n.asyncDep=o}else wg(n,o,t)}else ev(n,t)}function wg(n,t,e){kt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:le(t)&&(n.setupState=Ob(t)),ev(n,e)}let Cg;function ev(n,t,e){const i=n.type;if(!n.render){if(!t&&Cg&&!i.render){const s=i.template||Nd(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Be(Be({isCustomElement:r,delimiters:a},o),l);i.render=Cg(s,c)}}n.render=i.render||kn}{const s=Ga(n);gr();try{lC(n)}finally{pr(),s()}}}function DC(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(t,e){return gn(n,"get","$attrs"),t[e]}}))}function BC(n){const t=e=>{n.exposed=e||{}};return{get attrs(){return DC(n)},slots:n.slots,emit:n.emit,expose:t}}function Yc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Ob(kd(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in na)return na[e](n)},has(t,e){return e in t||e in na}}))}function LC(n,t=!0){return kt(n)?n.displayName||n.name:n.name||t&&n.__name}function jC(n){return kt(n)&&"__vccOpts"in n}const F=(n,t)=>k1(n,t,qc);function Xr(n,t,e){const i=arguments.length;return i===2?le(t)&&!Ot(t)?tc(t)?x(n,null,[t]):x(n,t):x(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&tc(e)&&(e=[e]),x(n,t,e))}const zC="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const VC="http://www.w3.org/2000/svg",FC="http://www.w3.org/1998/Math/MathML",gs=typeof document<"u"?document:null,Sg=gs&&gs.createElement("template"),HC={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t==="svg"?gs.createElementNS(VC,n):t==="mathml"?gs.createElementNS(FC,n):gs.createElement(n,e?{is:e}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>gs.createTextNode(n),createComment:n=>gs.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>gs.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,r){const o=e?e.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{Sg.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const a=Sg.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},ns="transition",Fo="animation",Pa=Symbol("_vtc"),br=(n,{slots:t})=>Xr(tC,GC(n),t);br.displayName="Transition";const nv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};br.props=Be({},Bb,nv);const Gs=(n,t=[])=>{Ot(n)?n.forEach(e=>e(...t)):n&&n(...t)},Pg=n=>n?Ot(n)?n.some(t=>t.length>1):n.length>1:!1;function GC(n){const t={};for(const T in n)T in nv||(t[T]=n[T]);if(n.css===!1)return t;const{name:e="v",type:i,duration:s,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:h=`${e}-leave-active`,leaveToClass:f=`${e}-leave-to`}=n,g=UC(s),m=g&&g[0],p=g&&g[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:w,onLeaveCancelled:C,onBeforeAppear:P=v,onAppear:E=b,onAppearCancelled:S=y}=t,A=(T,R,L)=>{Us(T,R?u:a),Us(T,R?c:o),L&&L()},M=(T,R)=>{T._isLeaving=!1,Us(T,d),Us(T,f),Us(T,h),R&&R()},O=T=>(R,L)=>{const k=T?E:b,_=()=>A(R,T,L);Gs(k,[R,_]),Eg(()=>{Us(R,T?l:r),is(R,T?u:a),Pg(k)||Og(R,i,m,_)})};return Be(t,{onBeforeEnter(T){Gs(v,[T]),is(T,r),is(T,o)},onBeforeAppear(T){Gs(P,[T]),is(T,l),is(T,c)},onEnter:O(!1),onAppear:O(!0),onLeave(T,R){T._isLeaving=!0;const L=()=>M(T,R);is(T,d),YC(),is(T,h),Eg(()=>{T._isLeaving&&(Us(T,d),is(T,f),Pg(w)||Og(T,i,p,L))}),Gs(w,[T,L])},onEnterCancelled(T){A(T,!1),Gs(y,[T])},onAppearCancelled(T){A(T,!0),Gs(S,[T])},onLeaveCancelled(T){M(T),Gs(C,[T])}})}function UC(n){if(n==null)return null;if(le(n))return[Lu(n.enter),Lu(n.leave)];{const t=Lu(n);return[t,t]}}function Lu(n){return Qw(n)}function is(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[Pa]||(n[Pa]=new Set)).add(t)}function Us(n,t){t.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const e=n[Pa];e&&(e.delete(t),e.size||(n[Pa]=void 0))}function Eg(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let WC=0;function Og(n,t,e,i){const s=n._endId=++WC,r=()=>{s===n._endId&&i()};if(e)return setTimeout(r,e);const{type:o,timeout:a,propCount:l}=qC(n,t);if(!o)return i();const c=o+"end";let u=0;const d=()=>{n.removeEventListener(c,h),r()},h=f=>{f.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),n.addEventListener(c,h)}function qC(n,t){const e=window.getComputedStyle(n),i=g=>(e[g]||"").split(", "),s=i(`${ns}Delay`),r=i(`${ns}Duration`),o=Ag(s,r),a=i(`${Fo}Delay`),l=i(`${Fo}Duration`),c=Ag(a,l);let u=null,d=0,h=0;t===ns?o>0&&(u=ns,d=o,h=r.length):t===Fo?c>0&&(u=Fo,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?ns:Fo:null,h=u?u===ns?r.length:l.length:0);const f=u===ns&&/\b(transform|all)(,|$)/.test(i(`${ns}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Ag(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,i)=>Tg(e)+Tg(n[i])))}function Tg(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function YC(){return document.body.offsetHeight}function XC(n,t,e){const i=n[Pa];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const nc=Symbol("_vod"),iv=Symbol("_vsh"),Ve={beforeMount(n,{value:t},{transition:e}){n[nc]=n.style.display==="none"?"":n.style.display,e&&t?e.beforeEnter(n):Ho(n,t)},mounted(n,{value:t},{transition:e}){e&&t&&e.enter(n)},updated(n,{value:t,oldValue:e},{transition:i}){!t!=!e&&(i?t?(i.beforeEnter(n),Ho(n,!0),i.enter(n)):i.leave(n,()=>{Ho(n,!1)}):Ho(n,t))},beforeUnmount(n,{value:t}){Ho(n,t)}};function Ho(n,t){n.style.display=t?n[nc]:"none",n[iv]=!t}const KC=Symbol(""),JC=/(^|;)\s*display\s*:/;function ZC(n,t,e){const i=n.style,s=ge(e);let r=!1;if(e&&!s){if(t)if(ge(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Ul(i,a,"")}else for(const o in t)e[o]==null&&Ul(i,o,"");for(const o in e)o==="display"&&(r=!0),Ul(i,o,e[o])}else if(s){if(t!==e){const o=i[KC];o&&(e+=";"+o),i.cssText=e,r=JC.test(e)}}else t&&n.removeAttribute("style");nc in n&&(n[nc]=r?i.display:"",n[iv]&&(i.display="none"))}const Mg=/\s*!important$/;function Ul(n,t,e){if(Ot(e))e.forEach(i=>Ul(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=QC(n,t);Mg.test(e)?n.setProperty(_s(i),e.replace(Mg,""),"important"):n[i]=e}}const kg=["Webkit","Moz","ms"],ju={};function QC(n,t){const e=ju[t];if(e)return e;let i=Ci(t);if(i!=="filter"&&i in n)return ju[t]=i;i=Lc(i);for(let s=0;s<kg.length;s++){const r=kg[s]+i;if(r in n)return ju[t]=r}return t}const _g="http://www.w3.org/1999/xlink";function tS(n,t,e,i,s){if(i&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(_g,t.slice(6,t.length)):n.setAttributeNS(_g,t,e);else{const r=o1(t);e==null||r&&!cb(e)?n.removeAttribute(t):n.setAttribute(t,r?"":e)}}function eS(n,t,e,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),n[t]=e??"";return}const a=n.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?n.getAttribute("value")||"":n.value,u=e??"";(c!==u||!("_value"in n))&&(n.value=u),e==null&&n.removeAttribute(t),n._value=e;return}let l=!1;if(e===""||e==null){const c=typeof n[t];c==="boolean"?e=cb(e):e==null&&c==="string"?(e="",l=!0):c==="number"&&(e=0,l=!0)}try{n[t]=e}catch{}l&&n.removeAttribute(t)}function nS(n,t,e,i){n.addEventListener(t,e,i)}function iS(n,t,e,i){n.removeEventListener(t,e,i)}const $g=Symbol("_vei");function sS(n,t,e,i,s=null){const r=n[$g]||(n[$g]={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=rS(t);if(i){const c=r[t]=lS(i,s);nS(n,a,c,l)}else o&&(iS(n,a,o,l),r[t]=void 0)}}const Ig=/(?:Once|Passive|Capture)$/;function rS(n){let t;if(Ig.test(n)){t={};let i;for(;i=n.match(Ig);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):_s(n.slice(2)),t]}let zu=0;const oS=Promise.resolve(),aS=()=>zu||(oS.then(()=>zu=0),zu=Date.now());function lS(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;$n(cS(i,e.value),t,5,[i])};return e.value=n,e.attached=aS(),e}function cS(n,t){if(Ot(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Rg=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,uS=(n,t,e,i,s,r,o,a,l)=>{const c=s==="svg";t==="class"?XC(n,i,c):t==="style"?ZC(n,e,i):Nc(t)?wd(t)||sS(n,t,e,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):hS(n,t,i,c))?eS(n,t,i,r,o,a,l):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),tS(n,t,i,c))};function hS(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&Rg(t)&&kt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Rg(t)&&ge(e)?!1:t in n}const dS=["ctrl","shift","alt","meta"],fS={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>dS.some(e=>n[`${e}Key`]&&!t.includes(e))},Vu=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(s,...r)=>{for(let o=0;o<t.length;o++){const a=fS[t[o]];if(a&&a(s,t))return}return n(s,...r)})},gS={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pS=(n,t)=>{const e=n._withKeys||(n._withKeys={}),i=t.join(".");return e[i]||(e[i]=s=>{if(!("key"in s))return;const r=_s(s.key);if(t.some(o=>o===r||gS[o]===r))return n(s)})},mS=Be({patchProp:uS},HC);let Ng;function bS(){return Ng||(Ng=xC(mS))}const jd=(...n)=>{const t=bS().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=yS(i);if(!s)return;const r=t._component;!kt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=e(s,!1,vS(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function vS(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function yS(n){return ge(n)?document.querySelector(n):n}if(typeof window<"u"){let n=function(){var t=document.body,e=document.getElementById("__svg__icons__dom__");e||(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.width="0",e.style.height="0",e.id="__svg__icons__dom__",e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),e.innerHTML='<symbol class="icon" viewBox="0 0 1024 1024"  id="icon-action"><path d="m780.715 456.576-471.979-279.04a64 64 0 0 0-97.067 55.381V790.87a64.299 64.299 0 0 0 97.067 55.467l471.979-278.997a64.299 64.299 0 0 0 0-110.934z" fill="#fff" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-condition"><path d="M725.419 554.667a42.667 42.667 0 0 1 4.992 85.034l-4.992.299H231.125l140.459 140.501a42.667 42.667 0 0 1 3.541 56.32l-3.541 4.011a42.667 42.667 0 0 1-56.32 3.541l-4.01-3.541L97.92 627.499c-25.728-25.686-9.387-68.864 25.301-72.576l4.864-.256H725.42zm-16.64-375.04 4.053 3.541 213.333 213.333c25.728 25.686 9.387 68.864-25.301 72.576l-4.864.256H298.667a42.667 42.667 0 0 1-4.992-85.034l4.992-.299H792.96L652.501 243.499a42.667 42.667 0 0 1-3.541-56.32l3.541-4.011a42.667 42.667 0 0 1 56.32-3.541z" fill="#fff" /></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon-trigger"><path d="M201.9 557.8v19.6h-112c-14.3 0-25.8-11.7-25.8-26.1 0-14.4 11.6-26.1 25.8-26.1h113.7c-1.1 10.6-1.7 21.5-1.7 32.6zm77.2-205-83.8-84.7c-10.1-10.2-10.1-26.7 0-36.9s26.4-10.2 36.5 0l84.4 85.3c-13.4 11-25.7 23.2-37.1 36.3zm207.3-104.9V124.6c0-14.4 11.6-26.1 25.8-26.1 14.3 0 25.8 11.7 25.8 26.1v123.3c-8.6-.7-17.3-1.3-26.1-1.3-8.5 0-17 .6-25.5 1.3zm344.3 625.4h-60.3V559.9c0-144.2-115.7-261.1-258.4-261.1S253.6 415.7 253.6 559.9v313.3h-60.3c-14.3 0-25.8 11.7-25.8 26.1 0 14.4 11.6 26.1 25.8 26.1h637.5c14.3 0 25.8-11.7 25.8-26.1 0-14.3-11.6-26-25.9-26zm-112 0H305.2V564.9C305.2 449.5 397.8 356 512 356c114.2 0 206.7 93.5 206.7 208.9v308.4zm30.5-515.8c-11.3-13.4-23.6-25.8-37-37.2l82.8-83.7c10.2-10.3 26.7-10.3 36.9 0s10.2 27 0 37.3l-82.7 83.6zm184.9 219.8h-112v-19.6c0-11-.6-21.9-1.7-32.6h113.7c14.3 0 25.8 11.7 25.8 26.1.1 14.4-11.5 26.1-25.8 26.1zm-498.2 31h155.5c13.4 0 24.3-10.9 24.3-24.3s-10.9-24.3-24.3-24.3H435.9c-13.4 0-24.3 10.9-24.3 24.3 0 13.5 10.9 24.3 24.3 24.3zm17.1-7.1 100.1-100.1c9.5-9.5 9.5-24.8 0-34.3-9.5-9.5-24.8-9.5-34.3 0L418.7 566.9c-9.5 9.5-9.5 24.8 0 34.3 9.5 9.5 24.8 9.5 34.3 0zm55.4 100.1 100.1-100.1c9.5-9.5 9.5-24.8 0-34.3-9.5-9.5-24.8-9.5-34.3 0L474.1 667c-9.5 9.5-9.5 24.8 0 34.3 9.5 9.5 24.8 9.5 34.3 0z" fill="#fff" /></symbol>',t.insertBefore(e,t.lastChild)};var S4=n;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()}const $s=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e},xS=["xlink:href"],wS={__name:"index",props:{title:{type:String,default:""},iconClass:{type:String,required:!0},className:{type:String,default:""}},setup(n){const t=n,e=F(()=>`#icon-${t.iconClass}`),i=F(()=>t.className?`svg-icon ${t.className}`:"svg-icon");return(s,r)=>(It(),ne("svg",{class:Fa(i.value),"aria-hidden":"true"},[Kt("title",null,Xn(n.title),1),Kt("use",{"xlink:href":e.value},null,8,xS)],2))}},CS=$s(wS,[["__scopeId","data-v-2e844bac"]]),SS=n=>{n.component("SvgIcon",CS)};function us(n){const t={"[object String]":"string","[object Number]":"number","[object Boolean]":"boolean","[object Symbol]":"symbol","[object Undefined]":"undefined","[object Null]":"null","[object Function]":"function","[object Date]":"date","[object Array]":"array","[object Object]":"object","[object Map]":"map","[object Set]":"set","[object RegExp]":"regexp","[object Error]":"error","[object HTMLDocument]":"document","[object global]":"window"},e=Object.prototype.toString.call(n);return t[e]}function sv(n){let t={};for(const e in n)if(Object.hasOwnProperty.call(n,e)){const i=n[e];if(us(i)==="object"){let s=sv(i);Object.keys(s).length>0&&(t[e]=s)}else if(us(i)==="array"){let s=i.filter(r=>r!==null&&r!=="");s.length>0&&(t[e]=s)}else us(i)==="string"?i!==null&&i!==""&&i!==void 0&&(t[e]=i):(us(i)==="number"||us(i)==="boolean"||us(i)!="undefined"&&us(i)!="null")&&(t[e]=i)}return t}function PS(n=[],t=[]){return Object.keys(n).forEach(e=>{const i=n[e];t&&(t[e]=i)}),t}(function(){const n={INFO:"#73767a",WARN:"#b88230",ERR:"#c45656"},t=(e,...i)=>{const[s,...r]=i;console.log(`%c${s} `,`color: ${n[e]}`,...r)};window.logger={info:(...e)=>t("INFO",...e),warn:(...e)=>t("WARN",...e),err:(...e)=>t("ERR",...e)}})();class ms extends Error{constructor(e,i){super(i);Vn(this,"errorCode");Vn(this,"errorMsg");this.errorCode=e,this.errorMsg=i}static InvalidParameters(e){return new ms(2e3,e||"invalid parameters")}static VerifyFailure(e){return new ms(2001,e||"verify failure")}static InvalidFormatData(e){return new ms(2002,e||"invalid format data")}static InvalidVueShapeAttr(e){return new ms(2003,e||"Vue")}static DuplicateData(e){return new ms(2004,e||"")}}function Ih(){}const St=Object.assign,Dn=typeof window<"u",Vi=n=>n!==null&&typeof n=="object",jt=n=>n!=null,Kr=n=>typeof n=="function",zd=n=>Vi(n)&&Kr(n.then)&&Kr(n.catch),Ea=n=>Object.prototype.toString.call(n)==="[object Date]"&&!Number.isNaN(n.getTime());function rv(n){return n=n.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(n)||/^0[0-9-]{10,13}$/.test(n)}const ov=n=>typeof n=="number"||/^\d+(\.\d+)?$/.test(n),ES=()=>Dn?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Dg(n,t){const e=t.split(".");let i=n;return e.forEach(s=>{var r;i=Vi(i)&&(r=i[s])!=null?r:""}),i}function Gt(n,t,e){return t.reduce((i,s)=>((!e||n[s]!==void 0)&&(i[s]=n[s]),i),{})}const bi=(n,t)=>JSON.stringify(n)===JSON.stringify(t),ic=n=>Array.isArray(n)?n:[n],OS=n=>n.reduce((t,e)=>t.concat(e),[]),he=null,Y=[Number,String],G={type:Boolean,default:!0},Me=n=>({type:n,required:!0}),ce=()=>({type:Array,default:()=>[]}),Ee=n=>({type:Number,default:n}),ut=n=>({type:Y,default:n}),Q=n=>({type:String,default:n});var Is=typeof window<"u";function Ze(n){return Is?requestAnimationFrame(n):-1}function Xc(n){Is&&cancelAnimationFrame(n)}function vs(n){Ze(()=>Ze(n))}var AS=n=>n===window,Bg=(n,t)=>({top:0,left:0,right:n,bottom:t,width:n,height:t}),Xt=n=>{const t=Cn(n);if(AS(t)){const e=t.innerWidth,i=t.innerHeight;return Bg(e,i)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Bg(0,0)};function TS(n=!1){const t=j(n);return[t,(i=!t.value)=>{t.value=i}]}function Xe(n){const t=In(n,null);if(t){const e=ii(),{link:i,unlink:s,internalChildren:r}=t;i(e),Oo(()=>s(e));const o=F(()=>r.indexOf(e));return{parent:t,index:o}}return{parent:null,index:j(-1)}}function MS(n){const t=[],e=i=>{Array.isArray(i)&&i.forEach(s=>{var r;tc(s)&&(t.push(s),(r=s.component)!=null&&r.subTree&&(t.push(s.component.subTree),e(s.component.subTree.children)),s.children&&e(s.children))})};return e(n),t}var Lg=(n,t)=>{const e=n.indexOf(t);return e===-1?n.findIndex(i=>t.key!==void 0&&t.key!==null&&i.type===t.type&&i.key===t.key):e};function kS(n,t,e){const i=MS(n.subTree.children);e.sort((r,o)=>Lg(i,r.vnode)-Lg(i,o.vnode));const s=e.map(r=>r.proxy);t.sort((r,o)=>{const a=s.indexOf(r),l=s.indexOf(o);return a-l})}function en(n){const t=de([]),e=de([]),i=ii();return{children:t,linkChildren:r=>{Ao(n,Object.assign({link:l=>{l.proxy&&(e.push(l),t.push(l.proxy),kS(i,t,e))},unlink:l=>{const c=e.indexOf(l);t.splice(c,1),e.splice(c,1)},children:t,internalChildren:e},r))}}}var Rh=1e3,Nh=60*Rh,Dh=60*Nh,jg=24*Dh;function _S(n){const t=Math.floor(n/jg),e=Math.floor(n%jg/Dh),i=Math.floor(n%Dh/Nh),s=Math.floor(n%Nh/Rh),r=Math.floor(n%Rh);return{total:n,days:t,hours:e,minutes:i,seconds:s,milliseconds:r}}function $S(n,t){return Math.floor(n/1e3)===Math.floor(t/1e3)}function IS(n){let t,e,i,s;const r=j(n.time),o=F(()=>_S(r.value)),a=()=>{i=!1,Xc(t)},l=()=>Math.max(e-Date.now(),0),c=m=>{var p,v;r.value=m,(p=n.onChange)==null||p.call(n,o.value),m===0&&(a(),(v=n.onFinish)==null||v.call(n))},u=()=>{t=Ze(()=>{i&&(c(l()),r.value>0&&u())})},d=()=>{t=Ze(()=>{if(i){const m=l();(!$S(m,r.value)||m===0)&&c(m),r.value>0&&d()}})},h=()=>{Is&&(n.millisecond?u():d())},f=()=>{i||(e=Date.now()+r.value,i=!0,h())},g=(m=n.time)=>{a(),r.value=m};return Ai(a),Ei(()=>{s&&(i=!0,s=!1,h())}),Oi(()=>{i&&(a(),s=!0)}),{start:f,pause:a,reset:g,current:o}}function To(n){let t;be(()=>{n(),_t(()=>{t=!0})}),Ei(()=>{t&&n()})}function Se(n,t,e={}){if(!Is)return;const{target:i=window,passive:s=!1,capture:r=!1}=e;let o=!1,a;const l=d=>{if(o)return;const h=Cn(d);h&&!a&&(h.addEventListener(n,t,{capture:r,passive:s}),a=!0)},c=d=>{if(o)return;const h=Cn(d);h&&a&&(h.removeEventListener(n,t,r),a=!1)};Oo(()=>c(i)),Oi(()=>c(i)),To(()=>l(i));let u;return ln(i)&&(u=st(i,(d,h)=>{c(h),l(d)})),()=>{u==null||u(),c(i),o=!0}}function Kc(n,t,e={}){if(!Is)return;const{eventName:i="click"}=e;Se(i,r=>{(Array.isArray(n)?n:[n]).every(l=>{const c=Cn(l);return c&&!c.contains(r.target)})&&t(r)},{target:document})}var ul,Fu;function RS(){if(!ul&&(ul=j(0),Fu=j(0),Is)){const n=()=>{ul.value=window.innerWidth,Fu.value=window.innerHeight};n(),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0})}return{width:ul,height:Fu}}var NS=/scroll|auto|overlay/i,av=Is?window:void 0;function DS(n){return n.tagName!=="HTML"&&n.tagName!=="BODY"&&n.nodeType===1}function Vd(n,t=av){let e=n;for(;e&&e!==t&&DS(e);){const{overflowY:i}=window.getComputedStyle(e);if(NS.test(i))return e;e=e.parentNode}return t}function Mo(n,t=av){const e=j();return be(()=>{n.value&&(e.value=Vd(n.value,t))}),e}var hl;function BS(){if(!hl&&(hl=j("visible"),Is)){const n=()=>{hl.value=document.hidden?"hidden":"visible"};n(),window.addEventListener("visibilitychange",n)}return hl}var lv=Symbol("van-field");function Rs(n){const t=In(lv,null);t&&!t.customValue.value&&(t.customValue.value=n,st(n,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}function Fi(n){const t="scrollTop"in n?n.scrollTop:n.pageYOffset;return Math.max(t,0)}function sc(n,t){"scrollTop"in n?n.scrollTop=t:n.scrollTo(n.scrollX,t)}function Ua(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Jc(n){sc(window,n),sc(document.body,n)}function zg(n,t){if(n===window)return 0;const e=t?Fi(t):Ua();return Xt(n).top+e}const LS=ES();function cv(){LS&&Jc(Ua())}const Fd=n=>n.stopPropagation();function ie(n,t){(typeof n.cancelable!="boolean"||n.cancelable)&&n.preventDefault(),t&&Fd(n)}function lr(n){const t=Cn(n);if(!t)return!1;const e=window.getComputedStyle(t),i=e.display==="none",s=t.offsetParent===null&&e.position!=="fixed";return i||s}const{width:Kn,height:Rn}=RS();function jS(n){const t=window.getComputedStyle(n);return t.transform!=="none"||t.perspective!=="none"||["transform","perspective","filter"].some(e=>(t.willChange||"").includes(e))}function zS(n){let t=n.parentElement;for(;t;){if(t&&t.tagName!=="HTML"&&t.tagName!=="BODY"&&jS(t))return t;t=t.parentElement}return null}function Mt(n){if(jt(n))return ov(n)?`${n}px`:String(n)}function Xi(n){if(jt(n)){if(Array.isArray(n))return{width:Mt(n[0]),height:Mt(n[1])};const t=Mt(n);return{width:t,height:t}}}function Ki(n){const t={};return n!==void 0&&(t.zIndex=+n),t}let Hu;function VS(){if(!Hu){const n=document.documentElement,t=n.style.fontSize||window.getComputedStyle(n).fontSize;Hu=parseFloat(t)}return Hu}function FS(n){return n=n.replace(/rem/g,""),+n*VS()}function HS(n){return n=n.replace(/vw/g,""),+n*Kn.value/100}function GS(n){return n=n.replace(/vh/g,""),+n*Rn.value/100}function Hd(n){if(typeof n=="number")return n;if(Dn){if(n.includes("rem"))return FS(n);if(n.includes("vw"))return HS(n);if(n.includes("vh"))return GS(n)}return parseFloat(n)}const US=/-(\w)/g,uv=n=>n.replace(US,(t,e)=>e.toUpperCase()),WS=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function Wn(n,t=2){let e=n+"";for(;e.length<t;)e="0"+e;return e}const Ue=(n,t,e)=>Math.min(Math.max(n,t),e);function Vg(n,t,e){const i=n.indexOf(t);return i===-1?n:t==="-"&&i!==0?n.slice(0,i):n.slice(0,i+1)+n.slice(i).replace(e,"")}function Bh(n,t=!0,e=!0){t?n=Vg(n,".",/\./g):n=n.split(".")[0],e?n=Vg(n,"-",/-/g):n=n.replace(/-/,"");const i=t?/[^-0-9.]/g:/[^-0-9]/g;return n.replace(i,"")}function hv(n,t){return Math.round((n+t)*1e10)/1e10}const{hasOwnProperty:qS}=Object.prototype;function YS(n,t,e){const i=t[e];jt(i)&&(!qS.call(n,e)||!Vi(i)?n[e]=i:n[e]=dv(Object(n[e]),i))}function dv(n,t){return Object.keys(t).forEach(e=>{YS(n,t,e)}),n}var XS={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(n,t)=>`${n}${t}`,rangePrompt:n=>` ${n} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:n=>`${n}`,condition:n=>`${n}`},vanCouponCell:{title:"",count:n=>`${n}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const Fg=j("zh-CN"),Hg=de({"zh-CN":XS}),fv={messages(){return Hg[Fg.value]},use(n,t){Fg.value=n,this.add({[n]:t})},add(n={}){dv(Hg,n)}};var KS=fv;function JS(n){const t=uv(n)+".";return(e,...i)=>{const s=KS.messages(),r=Dg(s,t+e)||Dg(s,e);return Kr(r)?r(...i):r}}function Lh(n,t){return t?typeof t=="string"?` ${n}--${t}`:Array.isArray(t)?t.reduce((e,i)=>e+Lh(n,i),""):Object.keys(t).reduce((e,i)=>e+(t[i]?Lh(n,i):""),""):""}function ZS(n){return(t,e)=>(t&&typeof t!="string"&&(e=t,t=""),t=t?`${n}__${t}`:n,`${t}${Lh(t,e)}`)}function W(n){const t=`van-${n}`;return[t,ZS(t),JS(t)]}const Ji="van-hairline",gv=`${Ji}--top`,pv=`${Ji}--left`,QS=`${Ji}--right`,Gd=`${Ji}--bottom`,oa=`${Ji}--surround`,Zc=`${Ji}--top-bottom`,tP=`${Ji}-unset--top-bottom`,pn="van-haptics-feedback",mv=Symbol("van-form"),bv=500,Gg=5;function Ns(n,{args:t=[],done:e,canceled:i,error:s}){if(n){const r=n.apply(null,t);zd(r)?r.then(o=>{o?e():i&&i()}).catch(s||Ih):r?e():i&&i()}else e()}function Z(n){return n.install=t=>{const{name:e}=n;e&&(t.component(e,n),t.component(uv(`-${e}`),n))},n}function rc(n,t){return n.reduce((e,i)=>Math.abs(e-t)<Math.abs(i-t)?e:i)}const vv=Symbol();function Qc(n){const t=In(vv,null);t&&st(t,e=>{e&&n()})}const yv=(n,t)=>{const e=j(),i=()=>{e.value=Xt(n).height};return be(()=>{if(_t(i),t)for(let s=1;s<=3;s++)setTimeout(i,100*s)}),Qc(()=>_t(i)),st([Kn,Rn],i),e};function tu(n,t){const e=yv(n,!0);return i=>x("div",{class:t("placeholder"),style:{height:e.value?`${e.value}px`:void 0}},[i()])}const[xv,Ug]=W("action-bar"),Ud=Symbol(xv),eP={placeholder:Boolean,safeAreaInsetBottom:G};var nP=U({name:xv,props:eP,setup(n,{slots:t}){const e=j(),i=tu(e,Ug),{linkChildren:s}=en(Ud);s();const r=()=>{var o;return x("div",{ref:e,class:[Ug(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(o=t.default)==null?void 0:o.call(t)])};return()=>n.placeholder?i(r):r()}});const wv=Z(nP);function Lt(n){const t=ii();t&&St(t.proxy,n)}const Ds={to:[String,Object],url:String,replace:Boolean};function Cv({to:n,url:t,replace:e,$router:i}){n&&i?i[e?"replace":"push"](n):t&&(e?location.replace(t):location.href=t)}function vr(){const n=ii().proxy;return()=>Cv(n)}const[iP,Wg]=W("badge"),sP={dot:Boolean,max:Y,tag:Q("div"),color:String,offset:Array,content:Y,showZero:G,position:Q("top-right")};var rP=U({name:iP,props:sP,setup(n,{slots:t}){const e=()=>{if(t.content)return!0;const{content:a,showZero:l}=n;return jt(a)&&a!==""&&(l||a!==0&&a!=="0")},i=()=>{const{dot:a,max:l,content:c}=n;if(!a&&e())return t.content?t.content():jt(l)&&ov(c)&&+c>+l?`${l}+`:c},s=a=>a.startsWith("-")?a.replace("-",""):`-${a}`,r=F(()=>{const a={background:n.color};if(n.offset){const[l,c]=n.offset,{position:u}=n,[d,h]=u.split("-");t.default?(typeof c=="number"?a[d]=Mt(d==="top"?c:-c):a[d]=d==="top"?Mt(c):s(c),typeof l=="number"?a[h]=Mt(h==="left"?l:-l):a[h]=h==="left"?Mt(l):s(l)):(a.marginTop=Mt(c),a.marginLeft=Mt(l))}return a}),o=()=>{if(e()||n.dot)return x("div",{class:Wg([n.position,{dot:n.dot,fixed:!!t.default}]),style:r.value},[i()])};return()=>{if(t.default){const{tag:a}=n;return x(a,{class:Wg("wrapper")},{default:()=>[t.default(),o()]})}return o()}}});const yr=Z(rP);let Sv=2e3;const oP=()=>++Sv,aP=n=>{Sv=n},[Pv,lP]=W("config-provider"),Ev=Symbol(Pv),cP={tag:Q("div"),theme:Q("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:Q("local"),iconPrefix:String};function uP(n){return n.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function hP(n){const t={};return Object.keys(n).forEach(e=>{const i=uP(WS(e));t[`--van-${i}`]=n[e]}),t}function dl(n={},t={}){Object.keys(n).forEach(e=>{n[e]!==t[e]&&document.documentElement.style.setProperty(e,n[e])}),Object.keys(t).forEach(e=>{n[e]||document.documentElement.style.removeProperty(e)})}var dP=U({name:Pv,props:cP,setup(n,{slots:t}){const e=F(()=>hP(St({},n.themeVars,n.theme==="dark"?n.themeVarsDark:n.themeVarsLight)));if(Dn){const i=()=>{document.documentElement.classList.add(`van-theme-${n.theme}`)},s=(r=n.theme)=>{document.documentElement.classList.remove(`van-theme-${r}`)};st(()=>n.theme,(r,o)=>{o&&s(o),i()},{immediate:!0}),Ei(i),Oi(s),Ai(s),st(e,(r,o)=>{n.themeVarsScope==="global"&&dl(r,o)}),st(()=>n.themeVarsScope,(r,o)=>{o==="global"&&dl({},e.value),r==="global"&&dl(e.value,{})}),n.themeVarsScope==="global"&&dl(e.value,{})}return Ao(Ev,n),Eo(()=>{n.zIndex!==void 0&&aP(n.zIndex)}),()=>x(n.tag,{class:lP(),style:n.themeVarsScope==="local"?e.value:void 0},{default:()=>{var i;return[(i=t.default)==null?void 0:i.call(t)]}})}});const[fP,qg]=W("icon"),gP=n=>n==null?void 0:n.includes("/"),pP={dot:Boolean,tag:Q("i"),name:String,size:Y,badge:Y,color:String,badgeProps:Object,classPrefix:String};var mP=U({name:fP,props:pP,setup(n,{slots:t}){const e=In(Ev,null),i=F(()=>n.classPrefix||(e==null?void 0:e.iconPrefix)||qg());return()=>{const{tag:s,dot:r,name:o,size:a,badge:l,color:c}=n,u=gP(o);return x(yr,Rt({dot:r,tag:s,class:[i.value,u?"":`${i.value}-${o}`],style:{color:c,fontSize:Mt(a)},content:l},n.badgeProps),{default:()=>{var d;return[(d=t.default)==null?void 0:d.call(t),u&&x("img",{class:qg("image"),src:o},null)]}})}}});const $t=Z(mP);var bP=$t;const[vP,aa]=W("loading"),yP=Array(12).fill(null).map((n,t)=>x("i",{class:aa("line",String(t+1))},null)),xP=x("svg",{class:aa("circular"),viewBox:"25 25 50 50"},[x("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),wP={size:Y,type:Q("circular"),color:String,vertical:Boolean,textSize:Y,textColor:String};var CP=U({name:vP,props:wP,setup(n,{slots:t}){const e=F(()=>St({color:n.color},Xi(n.size))),i=()=>{const r=n.type==="spinner"?yP:xP;return x("span",{class:aa("spinner",n.type),style:e.value},[t.icon?t.icon():r])},s=()=>{var r;if(t.default)return x("span",{class:aa("text"),style:{fontSize:Mt(n.textSize),color:(r=n.textColor)!=null?r:n.color}},[t.default()])};return()=>{const{type:r,vertical:o}=n;return x("div",{class:aa([r,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[i(),s()])}}});const si=Z(CP),[SP,Or]=W("button"),PP=St({},Ds,{tag:Q("button"),text:String,icon:String,type:Q("default"),size:Q("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Q("button"),loadingSize:Y,loadingText:String,loadingType:String,iconPosition:Q("left")});var EP=U({name:SP,props:PP,emits:["click"],setup(n,{emit:t,slots:e}){const i=vr(),s=()=>e.loading?e.loading():x(si,{size:n.loadingSize,type:n.loadingType,class:Or("loading")},null),r=()=>{if(n.loading)return s();if(e.icon)return x("div",{class:Or("icon")},[e.icon()]);if(n.icon)return x($t,{name:n.icon,class:Or("icon"),classPrefix:n.iconPrefix},null)},o=()=>{let c;if(n.loading?c=n.loadingText:c=e.default?e.default():n.text,c)return x("span",{class:Or("text")},[c])},a=()=>{const{color:c,plain:u}=n;if(c){const d={color:u?c:"white"};return u||(d.background=c),c.includes("gradient")?d.border=0:d.borderColor=c,d}},l=c=>{n.loading?ie(c):n.disabled||(t("click",c),i())};return()=>{const{tag:c,type:u,size:d,block:h,round:f,plain:g,square:m,loading:p,disabled:v,hairline:b,nativeType:y,iconPosition:w}=n,C=[Or([u,d,{plain:g,block:h,round:f,square:m,loading:p,disabled:v,hairline:b}]),{[oa]:b}];return x(c,{type:y,class:C,style:a(),disabled:v,onClick:l},{default:()=>[x("div",{class:Or("content")},[w==="left"&&r(),o(),w==="right"&&r()])]})}}});const Qe=Z(EP),[OP,AP]=W("action-bar-button"),TP=St({},Ds,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var MP=U({name:OP,props:TP,setup(n,{slots:t}){const e=vr(),{parent:i,index:s}=Xe(Ud),r=F(()=>{if(i){const a=i.children[s.value-1];return!(a&&"isButton"in a)}}),o=F(()=>{if(i){const a=i.children[s.value+1];return!(a&&"isButton"in a)}});return Lt({isButton:!0}),()=>{const{type:a,icon:l,text:c,color:u,loading:d,disabled:h}=n;return x(Qe,{class:AP([a,{last:o.value,first:r.value}]),size:"large",type:a,icon:l,color:u,loading:d,disabled:h,onClick:e},{default:()=>[t.default?t.default():c]})}}});const jh=Z(MP),[kP,Gu]=W("action-bar-icon"),_P=St({},Ds,{dot:Boolean,text:String,icon:String,color:String,badge:Y,iconClass:he,badgeProps:Object,iconPrefix:String});var $P=U({name:kP,props:_P,setup(n,{slots:t}){const e=vr();Xe(Ud);const i=()=>{const{dot:s,badge:r,icon:o,color:a,iconClass:l,badgeProps:c,iconPrefix:u}=n;return t.icon?x(yr,Rt({dot:s,class:Gu("icon"),content:r},c),{default:t.icon}):x($t,{tag:"div",dot:s,name:o,badge:r,color:a,class:[Gu("icon"),l],badgeProps:c,classPrefix:u},null)};return()=>x("div",{role:"button",class:Gu(),tabindex:0,onClick:e},[i(),t.default?t.default():n.text])}});const IP=Z($P),ko={show:Boolean,zIndex:Y,overlay:G,duration:Y,teleport:[String,Object],lockScroll:G,lazyRender:G,beforeClose:Function,overlayStyle:Object,overlayClass:he,transitionAppear:Boolean,closeOnClickOverlay:G},Wd=Object.keys(ko);function RP(n,t){return n>t?"horizontal":t>n?"vertical":""}function jn(){const n=j(0),t=j(0),e=j(0),i=j(0),s=j(0),r=j(0),o=j(""),a=j(!0),l=()=>o.value==="vertical",c=()=>o.value==="horizontal",u=()=>{e.value=0,i.value=0,s.value=0,r.value=0,o.value="",a.value=!0};return{move:f=>{const g=f.touches[0];e.value=(g.clientX<0?0:g.clientX)-n.value,i.value=g.clientY-t.value,s.value=Math.abs(e.value),r.value=Math.abs(i.value);const m=10;(!o.value||s.value<m&&r.value<m)&&(o.value=RP(s.value,r.value)),a.value&&(s.value>Gg||r.value>Gg)&&(a.value=!1)},start:f=>{u(),n.value=f.touches[0].clientX,t.value=f.touches[0].clientY},reset:u,startX:n,startY:t,deltaX:e,deltaY:i,offsetX:s,offsetY:r,direction:o,isVertical:l,isHorizontal:c,isTap:a}}let Go=0;const Yg="van-overflow-hidden";function Ov(n,t){const e=jn(),i="01",s="10",r=u=>{e.move(u);const d=e.deltaY.value>0?s:i,h=Vd(u.target,n.value),{scrollHeight:f,offsetHeight:g,scrollTop:m}=h;let p="11";m===0?p=g>=f?"00":"01":m+g>=f&&(p="10"),p!=="11"&&e.isVertical()&&!(parseInt(p,2)&parseInt(d,2))&&ie(u,!0)},o=()=>{document.addEventListener("touchstart",e.start),document.addEventListener("touchmove",r,{passive:!1}),Go||document.body.classList.add(Yg),Go++},a=()=>{Go&&(document.removeEventListener("touchstart",e.start),document.removeEventListener("touchmove",r),Go--,Go||document.body.classList.remove(Yg))},l=()=>t()&&o(),c=()=>t()&&a();To(l),Oi(c),Ai(c),st(t,u=>{u?o():a()})}function qd(n){const t=j(!1);return st(n,e=>{e&&(t.value=e)},{immediate:!0}),e=>()=>t.value?e():null}const oc=()=>{var n;const{scopeId:t}=((n=ii())==null?void 0:n.vnode)||{};return t?{[t]:""}:null},[NP,DP]=W("overlay"),BP={show:Boolean,zIndex:Y,duration:Y,className:he,lockScroll:G,lazyRender:G,customStyle:Object};var LP=U({name:NP,props:BP,setup(n,{slots:t}){const e=j(),i=qd(()=>n.show||!n.lazyRender),s=o=>{n.lockScroll&&ie(o,!0)},r=i(()=>{var o;const a=St(Ki(n.zIndex),n.customStyle);return jt(n.duration)&&(a.animationDuration=`${n.duration}s`),De(x("div",{ref:e,style:a,class:[DP(),n.className]},[(o=t.default)==null?void 0:o.call(t)]),[[Ve,n.show]])});return Se("touchmove",s,{target:e}),()=>x(br,{name:"van-fade",appear:!0},{default:r})}});const Av=Z(LP),jP=St({},ko,{round:Boolean,position:Q("center"),closeIcon:Q("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Q("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[zP,Xg]=W("popup");var VP=U({name:zP,inheritAttrs:!1,props:jP,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(n,{emit:t,attrs:e,slots:i}){let s,r;const o=j(),a=j(),l=qd(()=>n.show||!n.lazyRender),c=F(()=>{const P={zIndex:o.value};if(jt(n.duration)){const E=n.position==="center"?"animationDuration":"transitionDuration";P[E]=`${n.duration}s`}return P}),u=()=>{s||(s=!0,o.value=n.zIndex!==void 0?+n.zIndex:oP(),t("open"))},d=()=>{s&&Ns(n.beforeClose,{done(){s=!1,t("close"),t("update:show",!1)}})},h=P=>{t("clickOverlay",P),n.closeOnClickOverlay&&d()},f=()=>{if(n.overlay)return x(Av,Rt({show:n.show,class:n.overlayClass,zIndex:o.value,duration:n.duration,customStyle:n.overlayStyle,role:n.closeOnClickOverlay?"button":void 0,tabindex:n.closeOnClickOverlay?0:void 0},oc(),{onClick:h}),{default:i["overlay-content"]})},g=P=>{t("clickCloseIcon",P),d()},m=()=>{if(n.closeable)return x($t,{role:"button",tabindex:0,name:n.closeIcon,class:[Xg("close-icon",n.closeIconPosition),pn],classPrefix:n.iconPrefix,onClick:g},null)};let p;const v=()=>{p&&clearTimeout(p),p=setTimeout(()=>{t("opened")})},b=()=>t("closed"),y=P=>t("keydown",P),w=l(()=>{var P;const{round:E,position:S,safeAreaInsetTop:A,safeAreaInsetBottom:M}=n;return De(x("div",Rt({ref:a,style:c.value,role:"dialog",tabindex:0,class:[Xg({round:E,[S]:S}),{"van-safe-area-top":A,"van-safe-area-bottom":M}],onKeydown:y},e,oc()),[(P=i.default)==null?void 0:P.call(i),m()]),[[Ve,n.show]])}),C=()=>{const{position:P,transition:E,transitionAppear:S}=n,A=P==="center"?"van-fade":`van-popup-slide-${P}`;return x(br,{name:E||A,appear:S,onAfterEnter:v,onAfterLeave:b},{default:w})};return st(()=>n.show,P=>{P&&!s&&(u(),e.tabindex===0&&_t(()=>{var E;(E=a.value)==null||E.focus()})),!P&&s&&(s=!1,t("close"))}),Lt({popupRef:a}),Ov(a,()=>n.show&&n.lockScroll),Se("popstate",()=>{n.closeOnPopstate&&(d(),r=!1)}),be(()=>{n.show&&u()}),Ei(()=>{r&&(t("update:show",!0),r=!1)}),Oi(()=>{n.show&&n.teleport&&(d(),r=!0)}),Ao(vv,()=>n.show),()=>n.teleport?x(mr,{to:n.teleport},{default:()=>[f(),C()]}):x(Jt,null,[f(),C()])}});const ri=Z(VP),[FP,En]=W("action-sheet"),HP=St({},ko,{title:String,round:G,actions:ce(),closeIcon:Q("cross"),closeable:G,cancelText:String,description:String,closeOnPopstate:G,closeOnClickAction:Boolean,safeAreaInsetBottom:G}),GP=[...Wd,"round","closeOnPopstate","safeAreaInsetBottom"];var UP=U({name:FP,props:HP,emits:["select","cancel","update:show"],setup(n,{slots:t,emit:e}){const i=d=>e("update:show",d),s=()=>{i(!1),e("cancel")},r=()=>{if(n.title)return x("div",{class:En("header")},[n.title,n.closeable&&x($t,{name:n.closeIcon,class:[En("close"),pn],onClick:s},null)])},o=()=>{if(t.cancel||n.cancelText)return[x("div",{class:En("gap")},null),x("button",{type:"button",class:En("cancel"),onClick:s},[t.cancel?t.cancel():n.cancelText])]},a=d=>{if(d.icon)return x($t,{class:En("item-icon"),name:d.icon},null)},l=(d,h)=>d.loading?x(si,{class:En("loading-icon")},null):t.action?t.action({action:d,index:h}):[x("span",{class:En("name")},[d.name]),d.subname&&x("div",{class:En("subname")},[d.subname])],c=(d,h)=>{const{color:f,loading:g,callback:m,disabled:p,className:v}=d,b=()=>{p||g||(m&&m(d),n.closeOnClickAction&&i(!1),_t(()=>e("select",d,h)))};return x("button",{type:"button",style:{color:f},class:[En("item",{loading:g,disabled:p}),v],onClick:b},[a(d),l(d,h)])},u=()=>{if(n.description||t.description){const d=t.description?t.description():n.description;return x("div",{class:En("description")},[d])}};return()=>x(ri,Rt({class:En(),position:"bottom","onUpdate:show":i},Gt(n,GP)),{default:()=>{var d;return[r(),u(),x("div",{class:En("content")},[n.actions.map(c),(d=t.default)==null?void 0:d.call(t)]),o()]}})}});const WP=Z(UP),[qP,Ri,Kg]=W("picker"),Tv=n=>n.find(t=>!t.disabled)||n[0];function YP(n,t){const e=n[0];if(e){if(Array.isArray(e))return"multiple";if(t.children in e)return"cascade"}return"default"}function Wl(n,t){t=Ue(t,0,n.length);for(let e=t;e<n.length;e++)if(!n[e].disabled)return e;for(let e=t-1;e>=0;e--)if(!n[e].disabled)return e;return 0}const Jg=(n,t,e)=>t!==void 0&&!!n.find(i=>i[e.value]===t);function zh(n,t,e){const i=n.findIndex(r=>r[e.value]===t),s=Wl(n,i);return n[s]}function XP(n,t,e){const i=[];let s={[t.children]:n},r=0;for(;s&&s[t.children];){const o=s[t.children],a=e.value[r];if(s=jt(a)?zh(o,a,t):void 0,!s&&o.length){const l=Tv(o)[t.value];s=zh(o,l,t)}r++,i.push(o)}return i}function KP(n){const{transform:t}=window.getComputedStyle(n),e=t.slice(7,t.length-1).split(", ")[5];return Number(e)}function JP(n){return St({text:"text",value:"value",children:"children"},n)}const Zg=200,Qg=300,ZP=15,[Mv,Uu]=W("picker-column"),kv=Symbol(Mv);var QP=U({name:Mv,props:{value:Y,fields:Me(Object),options:ce(),readonly:Boolean,allowHtml:Boolean,optionHeight:Me(Number),swipeDuration:Me(Y),visibleOptionNum:Me(Y)},emits:["change","clickOption","scrollInto"],setup(n,{emit:t,slots:e}){let i,s,r,o,a;const l=j(),c=j(),u=j(0),d=j(0),h=jn(),f=()=>n.options.length,g=()=>n.optionHeight*(+n.visibleOptionNum-1)/2,m=M=>{let O=Wl(n.options,M);const T=-O*n.optionHeight,R=()=>{O>f()-1&&(O=Wl(n.options,M));const L=n.options[O][n.fields.value];L!==n.value&&t("change",L)};i&&T!==u.value?a=R:R(),u.value=T},p=()=>n.readonly||!n.options.length,v=M=>{i||p()||(a=null,d.value=Zg,m(M),t("clickOption",n.options[M]))},b=M=>Ue(Math.round(-M/n.optionHeight),0,f()-1),y=F(()=>b(u.value)),w=(M,O)=>{const T=Math.abs(M/O);M=u.value+T/.003*(M<0?-1:1);const R=b(M);d.value=+n.swipeDuration,m(R)},C=()=>{i=!1,d.value=0,a&&(a(),a=null)},P=M=>{if(!p()){if(h.start(M),i){const O=KP(c.value);u.value=Math.min(0,O-g())}d.value=0,s=u.value,r=Date.now(),o=s,a=null}},E=M=>{if(p())return;h.move(M),h.isVertical()&&(i=!0,ie(M,!0));const O=Ue(s+h.deltaY.value,-(f()*n.optionHeight),n.optionHeight),T=b(O);T!==y.value&&t("scrollInto",n.options[T]),u.value=O;const R=Date.now();R-r>Qg&&(r=R,o=O)},S=()=>{if(p())return;const M=u.value-o,O=Date.now()-r;if(O<Qg&&Math.abs(M)>ZP){w(M,O);return}const R=b(u.value);d.value=Zg,m(R),setTimeout(()=>{i=!1},0)},A=()=>{const M={height:`${n.optionHeight}px`};return n.options.map((O,T)=>{const R=O[n.fields.text],{disabled:L}=O,k=O[n.fields.value],_={role:"button",style:M,tabindex:L?-1:0,class:[Uu("item",{disabled:L,selected:k===n.value}),O.className],onClick:()=>v(T)},D={class:"van-ellipsis",[n.allowHtml?"innerHTML":"textContent"]:R};return x("li",_,[e.option?e.option(O,T):x("div",D,null)])})};return Xe(kv),Lt({stopMomentum:C}),Eo(()=>{const M=i?Math.floor(-u.value/n.optionHeight):n.options.findIndex(R=>R[n.fields.value]===n.value),O=Wl(n.options,M),T=-O*n.optionHeight;i&&O<M&&C(),u.value=T}),Se("touchmove",E,{target:l}),()=>x("div",{ref:l,class:Uu(),onTouchstartPassive:P,onTouchend:S,onTouchcancel:S},[x("ul",{ref:c,style:{transform:`translate3d(0, ${u.value+g()}px, 0)`,transitionDuration:`${d.value}ms`,transitionProperty:d.value?"all":"none"},class:Uu("wrapper"),onTransitionend:C},[A()])])}});const[tE]=W("picker-toolbar"),eu={title:String,cancelButtonText:String,confirmButtonText:String},_v=["cancel","confirm","title","toolbar"],eE=Object.keys(eu);var $v=U({name:tE,props:eu,emits:["confirm","cancel"],setup(n,{emit:t,slots:e}){const i=()=>{if(e.title)return e.title();if(n.title)return x("div",{class:[Ri("title"),"van-ellipsis"]},[n.title])},s=()=>t("cancel"),r=()=>t("confirm"),o=()=>{var l;const c=(l=n.cancelButtonText)!=null?l:Kg("cancel");if(!(!e.cancel&&!c))return x("button",{type:"button",class:[Ri("cancel"),pn],onClick:s},[e.cancel?e.cancel():c])},a=()=>{var l;const c=(l=n.confirmButtonText)!=null?l:Kg("confirm");if(!(!e.confirm&&!c))return x("button",{type:"button",class:[Ri("confirm"),pn],onClick:r},[e.confirm?e.confirm():c])};return()=>x("div",{class:Ri("toolbar")},[e.toolbar?e.toolbar():[o(),i(),a()]])}});const Yd=(n,t)=>{const e=j(n());return st(n,i=>{i!==e.value&&(e.value=i)}),st(e,i=>{i!==n()&&t(i)}),e};function nE(n,t,e){let i,s=0;const r=n.scrollLeft,o=e===0?1:Math.round(e*1e3/16);function a(){Xc(i)}function l(){n.scrollLeft+=(t-r)/o,++s<o&&(i=Ze(l))}return l(),a}function iE(n,t,e,i){let s,r=Fi(n);const o=r<t,a=e===0?1:Math.round(e*1e3/16),l=(t-r)/a;function c(){Xc(s)}function u(){r+=l,(o&&r>t||!o&&r<t)&&(r=t),sc(n,r),o&&r<t||!o&&r>t?s=Ze(u):i&&(s=Ze(i))}return u(),c}let sE=0;function _o(){const n=ii(),{name:t="unknown"}=(n==null?void 0:n.type)||{};return`${t}-${++sE}`}function Wa(){const n=j([]),t=[];return Vb(()=>{n.value=[]}),[n,i=>(t[i]||(t[i]=s=>{n.value[i]=s}),t[i])]}function Iv(n,t){if(!Dn||!window.IntersectionObserver)return;const e=new IntersectionObserver(r=>{t(r[0].intersectionRatio>0)},{root:document.body}),i=()=>{n.value&&e.observe(n.value)},s=()=>{n.value&&e.unobserve(n.value)};Oi(s),Ai(s),To(i)}const[rE,oE]=W("sticky"),aE={zIndex:Y,position:Q("top"),container:Object,offsetTop:ut(0),offsetBottom:ut(0)};var lE=U({name:rE,props:aE,emits:["scroll","change"],setup(n,{emit:t,slots:e}){const i=j(),s=Mo(i),r=de({fixed:!1,width:0,height:0,transform:0}),o=j(!1),a=F(()=>Hd(n.position==="top"?n.offsetTop:n.offsetBottom)),l=F(()=>{if(o.value)return;const{fixed:h,height:f,width:g}=r;if(h)return{width:`${g}px`,height:`${f}px`}}),c=F(()=>{if(!r.fixed||o.value)return;const h=St(Ki(n.zIndex),{width:`${r.width}px`,height:`${r.height}px`,[n.position]:`${a.value}px`});return r.transform&&(h.transform=`translate3d(0, ${r.transform}px, 0)`),h}),u=h=>t("scroll",{scrollTop:h,isFixed:r.fixed}),d=()=>{if(!i.value||lr(i))return;const{container:h,position:f}=n,g=Xt(i),m=Fi(window);if(r.width=g.width,r.height=g.height,f==="top")if(h){const p=Xt(h),v=p.bottom-a.value-r.height;r.fixed=a.value>g.top&&p.bottom>0,r.transform=v<0?v:0}else r.fixed=a.value>g.top;else{const{clientHeight:p}=document.documentElement;if(h){const v=Xt(h),b=p-v.top-a.value-r.height;r.fixed=p-a.value<g.bottom&&p>v.top,r.transform=b<0?-b:0}else r.fixed=p-a.value<g.bottom}u(m)};return st(()=>r.fixed,h=>t("change",h)),Se("scroll",d,{target:s,passive:!0}),Iv(i,d),st([Kn,Rn],()=>{!i.value||lr(i)||!r.fixed||(o.value=!0,_t(()=>{const h=Xt(i);r.width=h.width,r.height=h.height,o.value=!1}))}),()=>{var h;return x("div",{ref:i,style:l.value},[x("div",{class:oE({fixed:r.fixed&&!o.value}),style:c.value},[(h=e.default)==null?void 0:h.call(e)])])}}});const Rv=Z(lE),[Nv,fl]=W("swipe"),cE={loop:G,width:Y,height:Y,vertical:Boolean,autoplay:ut(0),duration:ut(500),touchable:G,lazyRender:Boolean,initialSwipe:ut(0),indicatorColor:String,showIndicators:G,stopPropagation:G},Dv=Symbol(Nv);var uE=U({name:Nv,props:cE,emits:["change","dragStart","dragEnd"],setup(n,{emit:t,slots:e}){const i=j(),s=j(),r=de({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let o=!1;const a=jn(),{children:l,linkChildren:c}=en(Dv),u=F(()=>l.length),d=F(()=>r[n.vertical?"height":"width"]),h=F(()=>n.vertical?a.deltaY.value:a.deltaX.value),f=F(()=>r.rect?(n.vertical?r.rect.height:r.rect.width)-d.value*u.value:0),g=F(()=>d.value?Math.ceil(Math.abs(f.value)/d.value):u.value),m=F(()=>u.value*d.value),p=F(()=>(r.active+u.value)%u.value),v=F(()=>{const z=n.vertical?"vertical":"horizontal";return a.direction.value===z}),b=F(()=>{const z={transitionDuration:`${r.swiping?0:n.duration}ms`,transform:`translate${n.vertical?"Y":"X"}(${+r.offset.toFixed(2)}px)`};if(d.value){const q=n.vertical?"height":"width",lt=n.vertical?"width":"height";z[q]=`${m.value}px`,z[lt]=n[lt]?`${n[lt]}px`:""}return z}),y=z=>{const{active:q}=r;return z?n.loop?Ue(q+z,-1,u.value):Ue(q+z,0,g.value):q},w=(z,q=0)=>{let lt=z*d.value;n.loop||(lt=Math.min(lt,-f.value));let mt=q-lt;return n.loop||(mt=Ue(mt,f.value,0)),mt},C=({pace:z=0,offset:q=0,emitChange:lt})=>{if(u.value<=1)return;const{active:mt}=r,X=y(z),ft=w(X,q);if(n.loop){if(l[0]&&ft!==f.value){const B=ft<f.value;l[0].setOffset(B?m.value:0)}if(l[u.value-1]&&ft!==0){const B=ft>0;l[u.value-1].setOffset(B?-m.value:0)}}r.active=X,r.offset=ft,lt&&X!==mt&&t("change",p.value)},P=()=>{r.swiping=!0,r.active<=-1?C({pace:u.value}):r.active>=u.value&&C({pace:-u.value})},E=()=>{P(),a.reset(),vs(()=>{r.swiping=!1,C({pace:-1,emitChange:!0})})},S=()=>{P(),a.reset(),vs(()=>{r.swiping=!1,C({pace:1,emitChange:!0})})};let A;const M=()=>clearTimeout(A),O=()=>{M(),+n.autoplay>0&&u.value>1&&(A=setTimeout(()=>{S(),O()},+n.autoplay))},T=(z=+n.initialSwipe)=>{if(!i.value)return;const q=()=>{var lt,mt;if(!lr(i)){const X={width:i.value.offsetWidth,height:i.value.offsetHeight};r.rect=X,r.width=+((lt=n.width)!=null?lt:X.width),r.height=+((mt=n.height)!=null?mt:X.height)}u.value&&(z=Math.min(u.value-1,z),z===-1&&(z=u.value-1)),r.active=z,r.swiping=!0,r.offset=w(z),l.forEach(X=>{X.setOffset(0)}),O()};lr(i)?_t().then(q):q()},R=()=>T(r.active);let L;const k=z=>{!n.touchable||z.touches.length>1||(a.start(z),o=!1,L=Date.now(),M(),P())},_=z=>{n.touchable&&r.swiping&&(a.move(z),v.value&&(!n.loop&&(r.active===0&&h.value>0||r.active===u.value-1&&h.value<0)||(ie(z,n.stopPropagation),C({offset:h.value}),o||(t("dragStart",{index:p.value}),o=!0))))},D=()=>{if(!n.touchable||!r.swiping)return;const z=Date.now()-L,q=h.value/z;if((Math.abs(q)>.25||Math.abs(h.value)>d.value/2)&&v.value){const mt=n.vertical?a.offsetY.value:a.offsetX.value;let X=0;n.loop?X=mt>0?h.value>0?-1:1:0:X=-Math[h.value>0?"ceil":"floor"](h.value/d.value),C({pace:X,emitChange:!0})}else h.value&&C({pace:0});o=!1,r.swiping=!1,t("dragEnd",{index:p.value}),O()},V=(z,q={})=>{P(),a.reset(),vs(()=>{let lt;n.loop&&z===u.value?lt=r.active===0?0:z:lt=z%u.value,q.immediate?vs(()=>{r.swiping=!1}):r.swiping=!1,C({pace:lt-r.active,emitChange:!0})})},it=(z,q)=>{const lt=q===p.value,mt=lt?{backgroundColor:n.indicatorColor}:void 0;return x("i",{style:mt,class:fl("indicator",{active:lt})},null)},at=()=>{if(e.indicator)return e.indicator({active:p.value,total:u.value});if(n.showIndicators&&u.value>1)return x("div",{class:fl("indicators",{vertical:n.vertical})},[Array(u.value).fill("").map(it)])};return Lt({prev:E,next:S,state:r,resize:R,swipeTo:V}),c({size:d,props:n,count:u,activeIndicator:p}),st(()=>n.initialSwipe,z=>T(+z)),st(u,()=>T(r.active)),st(()=>n.autoplay,O),st([Kn,Rn,()=>n.width,()=>n.height],R),st(BS(),z=>{z==="visible"?O():M()}),be(T),Ei(()=>T(r.active)),Qc(()=>T(r.active)),Oi(M),Ai(M),Se("touchmove",_,{target:s}),()=>{var z;return x("div",{ref:i,class:fl()},[x("div",{ref:s,style:b.value,class:fl("track",{vertical:n.vertical}),onTouchstartPassive:k,onTouchend:D,onTouchcancel:D},[(z=e.default)==null?void 0:z.call(e)]),at()])}}});const Xd=Z(uE),[hE,tp]=W("tabs");var dE=U({name:hE,props:{count:Me(Number),inited:Boolean,animated:Boolean,duration:Me(Y),swipeable:Boolean,lazyRender:Boolean,currentIndex:Me(Number)},emits:["change"],setup(n,{emit:t,slots:e}){const i=j(),s=a=>t("change",a),r=()=>{var a;const l=(a=e.default)==null?void 0:a.call(e);return n.animated||n.swipeable?x(Xd,{ref:i,loop:!1,class:tp("track"),duration:+n.duration*1e3,touchable:n.swipeable,lazyRender:n.lazyRender,showIndicators:!1,onChange:s},{default:()=>[l]}):l},o=a=>{const l=i.value;l&&l.state.active!==a&&l.swipeTo(a,{immediate:!n.inited})};return st(()=>n.currentIndex,o),be(()=>{o(n.currentIndex)}),Lt({swipeRef:i}),()=>x("div",{class:tp("content",{animated:n.animated||n.swipeable})},[r()])}});const[Bv,gl]=W("tabs"),fE={type:Q("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:ut(0),duration:ut(.3),animated:Boolean,ellipsis:G,swipeable:Boolean,scrollspy:Boolean,offsetTop:ut(0),background:String,lazyRender:G,showHeader:G,lineWidth:Y,lineHeight:Y,beforeChange:Function,swipeThreshold:ut(5),titleActiveColor:String,titleInactiveColor:String},Lv=Symbol(Bv);var gE=U({name:Bv,props:fE,emits:["change","scroll","rendered","clickTab","update:active"],setup(n,{emit:t,slots:e}){let i,s,r,o,a;const l=j(),c=j(),u=j(),d=j(),h=_o(),f=Mo(l),[g,m]=Wa(),{children:p,linkChildren:v}=en(Lv),b=de({inited:!1,position:"",lineStyle:{},currentIndex:-1}),y=F(()=>p.length>+n.swipeThreshold||!n.ellipsis||n.shrink),w=F(()=>({borderColor:n.color,background:n.background})),C=(X,ft)=>{var B;return(B=X.name)!=null?B:ft},P=F(()=>{const X=p[b.currentIndex];if(X)return C(X,b.currentIndex)}),E=F(()=>Hd(n.offsetTop)),S=F(()=>n.sticky?E.value+i:0),A=X=>{const ft=c.value,B=g.value;if(!y.value||!ft||!B||!B[b.currentIndex])return;const ht=B[b.currentIndex].$el,vt=ht.offsetLeft-(ft.offsetWidth-ht.offsetWidth)/2;o&&o(),o=nE(ft,vt,X?0:+n.duration)},M=()=>{const X=b.inited;_t(()=>{const ft=g.value;if(!ft||!ft[b.currentIndex]||n.type!=="line"||lr(l.value))return;const B=ft[b.currentIndex].$el,{lineWidth:ht,lineHeight:vt}=n,xt=B.offsetLeft+B.offsetWidth/2,Wt={width:Mt(ht),backgroundColor:n.color,transform:`translateX(${xt}px) translateX(-50%)`};if(X&&(Wt.transitionDuration=`${n.duration}s`),jt(vt)){const se=Mt(vt);Wt.height=se,Wt.borderRadius=se}b.lineStyle=Wt})},O=X=>{const ft=X<b.currentIndex?-1:1;for(;X>=0&&X<p.length;){if(!p[X].disabled)return X;X+=ft}},T=(X,ft)=>{const B=O(X);if(!jt(B))return;const ht=p[B],vt=C(ht,B),xt=b.currentIndex!==null;b.currentIndex!==B&&(b.currentIndex=B,ft||A(),M()),vt!==n.active&&(t("update:active",vt),xt&&t("change",vt,ht.title)),r&&!n.scrollspy&&Jc(Math.ceil(zg(l.value)-E.value))},R=(X,ft)=>{const B=p.find((vt,xt)=>C(vt,xt)===X),ht=B?p.indexOf(B):0;T(ht,ft)},L=(X=!1)=>{if(n.scrollspy){const ft=p[b.currentIndex].$el;if(ft&&f.value){const B=zg(ft,f.value)-S.value;s=!0,a&&a(),a=iE(f.value,B,X?0:+n.duration,()=>{s=!1})}}},k=(X,ft,B)=>{const{title:ht,disabled:vt}=p[ft],xt=C(p[ft],ft);vt||(Ns(n.beforeChange,{args:[xt],done:()=>{T(ft),L()}}),Cv(X)),t("clickTab",{name:xt,title:ht,event:B,disabled:vt})},_=X=>{r=X.isFixed,t("scroll",X)},D=X=>{_t(()=>{R(X),L(!0)})},V=()=>{for(let X=0;X<p.length;X++){const{top:ft}=Xt(p[X].$el);if(ft>S.value)return X===0?0:X-1}return p.length-1},it=()=>{if(n.scrollspy&&!s){const X=V();T(X)}},at=()=>{if(n.type==="line"&&p.length)return x("div",{class:gl("line"),style:b.lineStyle},null)},z=()=>{var X,ft,B;const{type:ht,border:vt,sticky:xt}=n,Wt=[x("div",{ref:xt?void 0:u,class:[gl("wrap"),{[Zc]:ht==="line"&&vt}]},[x("div",{ref:c,role:"tablist",class:gl("nav",[ht,{shrink:n.shrink,complete:y.value}]),style:w.value,"aria-orientation":"horizontal"},[(X=e["nav-left"])==null?void 0:X.call(e),p.map(se=>se.renderTitle(k)),at(),(ft=e["nav-right"])==null?void 0:ft.call(e)])]),(B=e["nav-bottom"])==null?void 0:B.call(e)];return xt?x("div",{ref:u},[Wt]):Wt},q=()=>{M(),_t(()=>{var X,ft;A(!0),(ft=(X=d.value)==null?void 0:X.swipeRef.value)==null||ft.resize()})};st(()=>[n.color,n.duration,n.lineWidth,n.lineHeight],M),st(Kn,q),st(()=>n.active,X=>{X!==P.value&&R(X)}),st(()=>p.length,()=>{b.inited&&(R(n.active),M(),_t(()=>{A(!0)}))});const lt=()=>{R(n.active,!0),_t(()=>{b.inited=!0,u.value&&(i=Xt(u.value).height),A(!0)})},mt=(X,ft)=>t("rendered",X,ft);return Lt({resize:q,scrollTo:D}),Ei(M),Qc(M),To(lt),Iv(l,M),Se("scroll",it,{target:f,passive:!0}),v({id:h,props:n,setLine:M,scrollable:y,onRendered:mt,currentName:P,setTitleRefs:m,scrollIntoView:A}),()=>x("div",{ref:l,class:gl([n.type])},[n.showHeader?n.sticky?x(Rv,{container:l.value,offsetTop:E.value,onScroll:_},{default:()=>[z()]}):z():null,x(dE,{ref:d,count:p.length,inited:b.inited,animated:n.animated,duration:n.duration,swipeable:n.swipeable,lazyRender:n.lazyRender,currentIndex:b.currentIndex,onChange:T},{default:()=>{var X;return[(X=e.default)==null?void 0:X.call(e)]}})])}});const jv=Symbol(),pE=()=>In(jv,null),[mE,ep]=W("tab"),bE=U({name:mE,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:Y,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:G},setup(n,{slots:t}){const e=F(()=>{const s={},{type:r,color:o,disabled:a,isActive:l,activeColor:c,inactiveColor:u}=n;o&&r==="card"&&(s.borderColor=o,a||(l?s.backgroundColor=o:s.color=o));const h=l?c:u;return h&&(s.color=h),s}),i=()=>{const s=x("span",{class:ep("text",{ellipsis:!n.scrollable})},[t.title?t.title():n.title]);return n.dot||jt(n.badge)&&n.badge!==""?x(yr,{dot:n.dot,content:n.badge,showZero:n.showZeroBadge},{default:()=>[s]}):s};return()=>x("div",{id:n.id,role:"tab",class:[ep([n.type,{grow:n.scrollable&&!n.shrink,shrink:n.shrink,active:n.isActive,disabled:n.disabled}])],style:e.value,tabindex:n.disabled?void 0:n.isActive?0:-1,"aria-selected":n.isActive,"aria-disabled":n.disabled||void 0,"aria-controls":n.controls},[i()])}}),[vE,yE]=W("swipe-item");var xE=U({name:vE,setup(n,{slots:t}){let e;const i=de({offset:0,inited:!1,mounted:!1}),{parent:s,index:r}=Xe(Dv);if(!s)return;const o=F(()=>{const c={},{vertical:u}=s.props;return s.size.value&&(c[u?"height":"width"]=`${s.size.value}px`),i.offset&&(c.transform=`translate${u?"Y":"X"}(${i.offset}px)`),c}),a=F(()=>{const{loop:c,lazyRender:u}=s.props;if(!u||e)return!0;if(!i.mounted)return!1;const d=s.activeIndicator.value,h=s.count.value-1,f=d===0&&c?h:d-1,g=d===h&&c?0:d+1;return e=r.value===d||r.value===f||r.value===g,e}),l=c=>{i.offset=c};return be(()=>{_t(()=>{i.mounted=!0})}),Lt({setOffset:l}),()=>{var c;return x("div",{class:yE(),style:o.value},[a.value?(c=t.default)==null?void 0:c.call(t):null])}}});const Kd=Z(xE),[wE,Wu]=W("tab"),CE=St({},Ds,{dot:Boolean,name:Y,badge:Y,title:String,disabled:Boolean,titleClass:he,titleStyle:[String,Object],showZeroBadge:G});var SE=U({name:wE,props:CE,setup(n,{slots:t}){const e=_o(),i=j(!1),s=ii(),{parent:r,index:o}=Xe(Lv);if(!r)return;const a=()=>{var g;return(g=n.name)!=null?g:o.value},l=()=>{i.value=!0,r.props.lazyRender&&_t(()=>{r.onRendered(a(),n.title)})},c=F(()=>{const g=a()===r.currentName.value;return g&&!i.value&&l(),g}),u=j(""),d=j("");Eo(()=>{const{titleClass:g,titleStyle:m}=n;u.value=g?Fa(g):"",d.value=m&&typeof m!="string"?s1(jc(m)):m});const h=g=>x(bE,Rt({key:e,id:`${r.id}-${o.value}`,ref:r.setTitleRefs(o.value),style:d.value,class:u.value,isActive:c.value,controls:e,scrollable:r.scrollable.value,activeColor:r.props.titleActiveColor,inactiveColor:r.props.titleInactiveColor,onClick:m=>g(s.proxy,o.value,m)},Gt(r.props,["type","color","shrink"]),Gt(n,["dot","badge","title","disabled","showZeroBadge"])),{title:t.title}),f=j(!c.value);return st(c,g=>{g?f.value=!1:vs(()=>{f.value=!0})}),st(()=>n.title,()=>{r.setLine(),r.scrollIntoView()}),Ao(jv,c),Lt({id:e,renderTitle:h}),()=>{var g;const m=`${r.id}-${o.value}`,{animated:p,swipeable:v,scrollspy:b,lazyRender:y}=r.props;if(!t.default&&!p)return;const w=b||c.value;if(p||v)return x(Kd,{id:e,role:"tabpanel",class:Wu("panel-wrapper",{inactive:f.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":m},{default:()=>{var E;return[x("div",{class:Wu("panel")},[(E=t.default)==null?void 0:E.call(t)])]}});const P=i.value||b||!y?(g=t.default)==null?void 0:g.call(t):null;return De(x("div",{id:e,role:"tabpanel",class:Wu("panel"),tabindex:w?0:-1,"aria-labelledby":m},[P]),[[Ve,w]])}}});const Oa=Z(SE),nu=Z(gE),[zv,qu]=W("picker-group"),Vv=Symbol(zv),PE=St({tabs:ce(),activeTab:ut(0),nextStepText:String},eu);var EE=U({name:zv,props:PE,emits:["confirm","cancel","update:activeTab"],setup(n,{emit:t,slots:e}){const i=Yd(()=>n.activeTab,c=>t("update:activeTab",c)),{children:s,linkChildren:r}=en(Vv);r();const o=()=>+i.value<n.tabs.length-1&&n.nextStepText,a=()=>{o()?i.value=+i.value+1:t("confirm",s.map(c=>c.confirm()))},l=()=>t("cancel");return()=>{var c,u;let d=(u=(c=e.default)==null?void 0:c.call(e))==null?void 0:u.filter(f=>f.type!==xn).map(f=>f.type===Jt?f.children:f);d&&(d=OS(d));const h=o()?n.nextStepText:n.confirmButtonText;return x("div",{class:qu()},[x($v,{title:n.title,cancelButtonText:n.cancelButtonText,confirmButtonText:h,onConfirm:a,onCancel:l},Gt(e,_v)),x(nu,{active:i.value,"onUpdate:active":f=>i.value=f,class:qu("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[n.tabs.map((f,g)=>x(Oa,{title:f,titleClass:qu("tab-title")},{default:()=>[d==null?void 0:d[g]]}))]})])}}});const iu=St({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:ut(44),showToolbar:G,swipeDuration:ut(1e3),visibleOptionNum:ut(6)},eu),OE=St({},iu,{columns:ce(),modelValue:ce(),toolbarPosition:Q("top"),columnsFieldNames:Object});var AE=U({name:qP,props:OE,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(),s=j(n.modelValue.slice(0)),{parent:r}=Xe(Vv),{children:o,linkChildren:a}=en(kv);a();const l=F(()=>JP(n.columnsFieldNames)),c=F(()=>Hd(n.optionHeight)),u=F(()=>YP(n.columns,l.value)),d=F(()=>{const{columns:O}=n;switch(u.value){case"multiple":return O;case"cascade":return XP(O,l.value,s);default:return[O]}}),h=F(()=>d.value.some(O=>O.length)),f=F(()=>d.value.map((O,T)=>zh(O,s.value[T],l.value))),g=F(()=>d.value.map((O,T)=>O.findIndex(R=>R[l.value.value]===s.value[T]))),m=(O,T)=>{if(s.value[O]!==T){const R=s.value.slice(0);R[O]=T,s.value=R}},p=()=>({selectedValues:s.value.slice(0),selectedOptions:f.value,selectedIndexes:g.value}),v=(O,T)=>{m(T,O),u.value==="cascade"&&s.value.forEach((R,L)=>{const k=d.value[L];Jg(k,R,l.value)||m(L,k.length?k[0][l.value.value]:void 0)}),_t(()=>{t("change",St({columnIndex:T},p()))})},b=(O,T)=>{const R={columnIndex:T,currentOption:O};t("clickOption",St(p(),R)),t("scrollInto",R)},y=()=>{o.forEach(T=>T.stopMomentum());const O=p();return _t(()=>{t("confirm",O)}),O},w=()=>t("cancel",p()),C=()=>d.value.map((O,T)=>x(QP,{value:s.value[T],fields:l.value,options:O,readonly:n.readonly,allowHtml:n.allowHtml,optionHeight:c.value,swipeDuration:n.swipeDuration,visibleOptionNum:n.visibleOptionNum,onChange:R=>v(R,T),onClickOption:R=>b(R,T),onScrollInto:R=>{t("scrollInto",{currentOption:R,columnIndex:T})}},{option:e.option})),P=O=>{if(h.value){const T={height:`${c.value}px`},R={backgroundSize:`100% ${(O-c.value)/2}px`};return[x("div",{class:Ri("mask"),style:R},null),x("div",{class:[tP,Ri("frame")],style:T},null)]}},E=()=>{const O=c.value*+n.visibleOptionNum,T={height:`${O}px`};return x("div",{ref:i,class:Ri("columns"),style:T},[C(),P(O)])},S=()=>{if(n.showToolbar&&!r)return x($v,Rt(Gt(n,eE),{onConfirm:y,onCancel:w}),Gt(e,_v))};st(d,O=>{O.forEach((T,R)=>{T.length&&!Jg(T,s.value[R],l.value)&&m(R,Tv(T)[l.value.value])})},{immediate:!0});let A;return st(()=>n.modelValue,O=>{!bi(O,s.value)&&!bi(O,A)&&(s.value=O.slice(0),A=O.slice(0))},{deep:!0}),st(s,O=>{bi(O,n.modelValue)||(A=O.slice(0),t("update:modelValue",A))},{immediate:!0}),Se("touchmove",ie,{target:i}),Lt({confirm:y,getSelectedOptions:()=>f.value}),()=>{var O,T;return x("div",{class:Ri()},[n.toolbarPosition==="top"?S():null,n.loading?x(si,{class:Ri("loading")},null):null,(O=e["columns-top"])==null?void 0:O.call(e),E(),(T=e["columns-bottom"])==null?void 0:T.call(e),n.toolbarPosition==="bottom"?S():null])}}});const Gr="000000",TE=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],Fv=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],ss=(n="",t=Gr,e=void 0)=>({text:n,value:t,children:e});function ME({areaList:n,columnsNum:t,columnsPlaceholder:e}){const{city_list:i={},county_list:s={},province_list:r={}}=n,o=+t>1,a=+t>2,l=()=>{if(o)return e.length?[ss(e[0],Gr,a?[]:void 0)]:[]},c=new Map;Object.keys(r).forEach(h=>{c.set(h.slice(0,2),ss(r[h],h,l()))});const u=new Map;if(o){const h=()=>{if(a)return e.length?[ss(e[1])]:[]};Object.keys(i).forEach(f=>{const g=ss(i[f],f,h());u.set(f.slice(0,4),g);const m=c.get(f.slice(0,2));m&&m.children.push(g)})}a&&Object.keys(s).forEach(h=>{const f=u.get(h.slice(0,4));f&&f.children.push(ss(s[h],h))});const d=Array.from(c.values());if(e.length){const h=a?[ss(e[2])]:void 0,f=o?[ss(e[1],Gr,h)]:void 0;d.unshift(ss(e[0],Gr,f))}return d}const su=Z(AE),[kE,_E]=W("area"),$E=St({},Gt(iu,Fv),{modelValue:String,columnsNum:ut(3),columnsPlaceholder:ce(),areaList:{type:Object,default:()=>({})}});var IE=U({name:kE,props:$E,emits:["change","confirm","cancel","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j([]),s=j(),r=F(()=>ME(n)),o=(...c)=>t("change",...c),a=(...c)=>t("cancel",...c),l=(...c)=>t("confirm",...c);return st(i,c=>{const u=c.length?c[c.length-1]:"";u&&u!==n.modelValue&&t("update:modelValue",u)},{deep:!0}),st(()=>n.modelValue,c=>{if(c){const u=i.value.length?i.value[i.value.length-1]:"";c!==u&&(i.value=[`${c.slice(0,2)}0000`,`${c.slice(0,4)}00`,c].slice(0,+n.columnsNum))}else i.value=[]},{immediate:!0}),Lt({confirm:()=>{var c;return(c=s.value)==null?void 0:c.confirm()},getSelectedOptions:()=>{var c;return((c=s.value)==null?void 0:c.getSelectedOptions())||[]}}),()=>x(su,Rt({ref:s,modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:_E(),columns:r.value,onChange:o,onCancel:a,onConfirm:l},Gt(n,Fv)),Gt(e,TE))}});const Hv=Z(IE),[RE,Ar]=W("cell"),ru={tag:Q("div"),icon:String,size:String,title:Y,value:Y,label:Y,center:Boolean,isLink:Boolean,border:G,iconPrefix:String,valueClass:he,labelClass:he,titleClass:he,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},NE=St({},ru,Ds);var DE=U({name:RE,props:NE,setup(n,{slots:t}){const e=vr(),i=()=>{if(t.label||jt(n.label))return x("div",{class:[Ar("label"),n.labelClass]},[t.label?t.label():n.label])},s=()=>{var l;if(t.title||jt(n.title)){const c=(l=t.title)==null?void 0:l.call(t);return Array.isArray(c)&&c.length===0?void 0:x("div",{class:[Ar("title"),n.titleClass],style:n.titleStyle},[c||x("span",null,[n.title]),i()])}},r=()=>{const l=t.value||t.default;if(l||jt(n.value))return x("div",{class:[Ar("value"),n.valueClass]},[l?l():x("span",null,[n.value])])},o=()=>{if(t.icon)return t.icon();if(n.icon)return x($t,{name:n.icon,class:Ar("left-icon"),classPrefix:n.iconPrefix},null)},a=()=>{if(t["right-icon"])return t["right-icon"]();if(n.isLink){const l=n.arrowDirection&&n.arrowDirection!=="right"?`arrow-${n.arrowDirection}`:"arrow";return x($t,{name:l,class:Ar("right-icon")},null)}};return()=>{var l;const{tag:c,size:u,center:d,border:h,isLink:f,required:g}=n,m=(l=n.clickable)!=null?l:f,p={center:d,required:!!g,clickable:m,borderless:!h};return u&&(p[u]=!!u),x(c,{class:Ar(p),role:m?"button":void 0,tabindex:m?0:void 0,onClick:e},{default:()=>{var v;return[o(),s(),r(),a(),(v=t.extra)==null?void 0:v.call(t)]}})}}});const oi=Z(DE),[BE,LE]=W("form"),jE={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:Y,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:G,showErrorMessage:G,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var zE=U({name:BE,props:jE,emits:["submit","failed"],setup(n,{emit:t,slots:e}){const{children:i,linkChildren:s}=en(mv),r=p=>p?i.filter(v=>p.includes(v.name)):i,o=p=>new Promise((v,b)=>{const y=[];r(p).reduce((C,P)=>C.then(()=>{if(!y.length)return P.validate().then(E=>{E&&y.push(E)})}),Promise.resolve()).then(()=>{y.length?b(y):v()})}),a=p=>new Promise((v,b)=>{const y=r(p);Promise.all(y.map(w=>w.validate())).then(w=>{w=w.filter(Boolean),w.length?b(w):v()})}),l=p=>{const v=i.find(b=>b.name===p);return v?new Promise((b,y)=>{v.validate().then(w=>{w?y(w):b()})}):Promise.reject()},c=p=>typeof p=="string"?l(p):n.validateFirst?o(p):a(p),u=p=>{typeof p=="string"&&(p=[p]),r(p).forEach(b=>{b.resetValidation()})},d=()=>i.reduce((p,v)=>(p[v.name]=v.getValidationStatus(),p),{}),h=(p,v)=>{i.some(b=>b.name===p?(b.$el.scrollIntoView(v),!0):!1)},f=()=>i.reduce((p,v)=>(v.name!==void 0&&(p[v.name]=v.formValue.value),p),{}),g=()=>{const p=f();c().then(()=>t("submit",p)).catch(v=>{t("failed",{values:p,errors:v}),n.scrollToError&&v[0].name&&h(v[0].name)})},m=p=>{ie(p),g()};return s({props:n}),Lt({submit:g,validate:c,getValues:f,scrollToField:h,resetValidation:u,getValidationStatus:d}),()=>{var p;return x("form",{class:LE(),onSubmit:m},[(p=e.default)==null?void 0:p.call(e)])}}});const Jd=Z(zE);function Gv(n){return Array.isArray(n)?!n.length:n===0?!1:!n}function VE(n,t){if(Gv(n)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(n)))}function FE(n,t){return new Promise(e=>{const i=t.validator(n,t);if(zd(i)){i.then(e);return}e(i)})}function np(n,t){const{message:e}=t;return Kr(e)?e(n,t):e||""}function HE({target:n}){n.composing=!0}function ip({target:n}){n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}function GE(n,t){const e=Ua();n.style.height="auto";let i=n.scrollHeight;if(Vi(t)){const{maxHeight:s,minHeight:r}=t;s!==void 0&&(i=Math.min(i,s)),r!==void 0&&(i=Math.max(i,r))}i&&(n.style.height=`${i}px`,Jc(e))}function UE(n){return n==="number"?{type:"text",inputmode:"decimal"}:n==="digit"?{type:"tel",inputmode:"numeric"}:{type:n}}function Mi(n){return[...n].length}function Yu(n,t){return[...n].slice(0,t).join("")}const[WE,On]=W("field"),Zd={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:Y,formatter:Function,clearIcon:Q("clear"),modelValue:ut(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Q("focus"),formatTrigger:Q("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},qE=St({},ru,Zd,{rows:Y,type:Q("text"),rules:Array,autosize:[Boolean,Object],labelWidth:Y,labelClass:he,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var YE=U({name:WE,props:qE,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e}){const i=_o(),s=de({status:"unvalidated",focused:!1,validateMessage:""}),r=j(),o=j(),a=j(),{parent:l}=Xe(mv),c=()=>{var B;return String((B=n.modelValue)!=null?B:"")},u=B=>{if(jt(n[B]))return n[B];if(l&&jt(l.props[B]))return l.props[B]},d=F(()=>{const B=u("readonly");if(n.clearable&&!B){const ht=c()!=="",vt=n.clearTrigger==="always"||n.clearTrigger==="focus"&&s.focused;return ht&&vt}return!1}),h=F(()=>a.value&&e.input?a.value():n.modelValue),f=F(()=>{var B;const ht=u("required");return ht==="auto"?(B=n.rules)==null?void 0:B.some(vt=>vt.required):ht}),g=B=>B.reduce((ht,vt)=>ht.then(()=>{if(s.status==="failed")return;let{value:xt}=h;if(vt.formatter&&(xt=vt.formatter(xt,vt)),!VE(xt,vt)){s.status="failed",s.validateMessage=np(xt,vt);return}if(vt.validator)return Gv(xt)&&vt.validateEmpty===!1?void 0:FE(xt,vt).then(Wt=>{Wt&&typeof Wt=="string"?(s.status="failed",s.validateMessage=Wt):Wt===!1&&(s.status="failed",s.validateMessage=np(xt,vt))})}),Promise.resolve()),m=()=>{s.status="unvalidated",s.validateMessage=""},p=()=>t("endValidate",{status:s.status,message:s.validateMessage}),v=(B=n.rules)=>new Promise(ht=>{m(),B?(t("startValidate"),g(B).then(()=>{s.status==="failed"?(ht({name:n.name,message:s.validateMessage}),p()):(s.status="passed",ht(),p())})):ht()}),b=B=>{if(l&&n.rules){const{validateTrigger:ht}=l.props,vt=ic(ht).includes(B),xt=n.rules.filter(Wt=>Wt.trigger?ic(Wt.trigger).includes(B):vt);xt.length&&v(xt)}},y=B=>{var ht;const{maxlength:vt}=n;if(jt(vt)&&Mi(B)>+vt){const xt=c();if(xt&&Mi(xt)===+vt)return xt;const Wt=(ht=r.value)==null?void 0:ht.selectionEnd;if(s.focused&&Wt){const se=[...B],I=se.length-+vt;return se.splice(Wt-I,I),se.join("")}return Yu(B,+vt)}return B},w=(B,ht="onChange")=>{const vt=B;B=y(B);const xt=Mi(vt)-Mi(B);if(n.type==="number"||n.type==="digit"){const se=n.type==="number";B=Bh(B,se,se)}let Wt=0;if(n.formatter&&ht===n.formatTrigger){const{formatter:se,maxlength:I}=n;if(B=se(B),jt(I)&&Mi(B)>+I&&(B=Yu(B,+I)),r.value&&s.focused){const{selectionEnd:N}=r.value,H=Yu(vt,N);Wt=Mi(se(H))-Mi(H)}}if(r.value&&r.value.value!==B)if(s.focused){let{selectionStart:se,selectionEnd:I}=r.value;if(r.value.value=B,jt(se)&&jt(I)){const N=Mi(B);xt?(se-=xt,I-=xt):Wt&&(se+=Wt,I+=Wt),r.value.setSelectionRange(Math.min(se,N),Math.min(I,N))}}else r.value.value=B;B!==n.modelValue&&t("update:modelValue",B)},C=B=>{B.target.composing||w(B.target.value)},P=()=>{var B;return(B=r.value)==null?void 0:B.blur()},E=()=>{var B;return(B=r.value)==null?void 0:B.focus()},S=()=>{const B=r.value;n.type==="textarea"&&n.autosize&&B&&GE(B,n.autosize)},A=B=>{s.focused=!0,t("focus",B),_t(S),u("readonly")&&P()},M=B=>{s.focused=!1,w(c(),"onBlur"),t("blur",B),!u("readonly")&&(b("onBlur"),_t(S),cv())},O=B=>t("clickInput",B),T=B=>t("clickLeftIcon",B),R=B=>t("clickRightIcon",B),L=B=>{ie(B),t("update:modelValue",""),t("clear",B)},k=F(()=>{if(typeof n.error=="boolean")return n.error;if(l&&l.props.showError&&s.status==="failed")return!0}),_=F(()=>{const B=u("labelWidth"),ht=u("labelAlign");if(B&&ht!=="top")return{width:Mt(B)}}),D=B=>{B.keyCode===13&&(!(l&&l.props.submitOnEnter)&&n.type!=="textarea"&&ie(B),n.type==="search"&&P()),t("keypress",B)},V=()=>n.id||`${i}-input`,it=()=>s.status,at=()=>{const B=On("control",[u("inputAlign"),{error:k.value,custom:!!e.input,"min-height":n.type==="textarea"&&!n.autosize}]);if(e.input)return x("div",{class:B,onClick:O},[e.input()]);const ht={id:V(),ref:r,name:n.name,rows:n.rows!==void 0?+n.rows:void 0,class:B,disabled:u("disabled"),readonly:u("readonly"),autofocus:n.autofocus,placeholder:n.placeholder,autocomplete:n.autocomplete,autocapitalize:n.autocapitalize,autocorrect:n.autocorrect,enterkeyhint:n.enterkeyhint,spellcheck:n.spellcheck,"aria-labelledby":n.label?`${i}-label`:void 0,onBlur:M,onFocus:A,onInput:C,onClick:O,onChange:ip,onKeypress:D,onCompositionend:ip,onCompositionstart:HE};return n.type==="textarea"?x("textarea",ht,null):x("input",Rt(UE(n.type),ht),null)},z=()=>{const B=e["left-icon"];if(n.leftIcon||B)return x("div",{class:On("left-icon"),onClick:T},[B?B():x($t,{name:n.leftIcon,classPrefix:n.iconPrefix},null)])},q=()=>{const B=e["right-icon"];if(n.rightIcon||B)return x("div",{class:On("right-icon"),onClick:R},[B?B():x($t,{name:n.rightIcon,classPrefix:n.iconPrefix},null)])},lt=()=>{if(n.showWordLimit&&n.maxlength){const B=Mi(c());return x("div",{class:On("word-limit")},[x("span",{class:On("word-num")},[B]),Qn("/"),n.maxlength])}},mt=()=>{if(l&&l.props.showErrorMessage===!1)return;const B=n.errorMessage||s.validateMessage;if(B){const ht=e["error-message"],vt=u("errorMessageAlign");return x("div",{class:On("error-message",vt)},[ht?ht({message:B}):B])}},X=()=>{const B=u("labelWidth"),ht=u("labelAlign"),vt=u("colon")?":":"";if(e.label)return[e.label(),vt];if(n.label)return x("label",{id:`${i}-label`,for:e.input?void 0:V(),onClick:xt=>{ie(xt),E()},style:ht==="top"&&B?{width:Mt(B)}:void 0},[n.label+vt])},ft=()=>[x("div",{class:On("body")},[at(),d.value&&x($t,{ref:o,name:n.clearIcon,class:On("clear")},null),q(),e.button&&x("div",{class:On("button")},[e.button()])]),lt(),mt()];return Lt({blur:P,focus:E,validate:v,formValue:h,resetValidation:m,getValidationStatus:it}),Ao(lv,{customValue:a,resetValidation:m,validateWithTrigger:b}),st(()=>n.modelValue,()=>{w(c()),m(),b("onChange"),_t(S)}),be(()=>{w(c(),n.formatTrigger),_t(S)}),Se("touchstart",L,{target:F(()=>{var B;return(B=o.value)==null?void 0:B.$el})}),()=>{const B=u("disabled"),ht=u("labelAlign"),vt=z(),xt=()=>{const Wt=X();return ht==="top"?[vt,Wt].filter(Boolean):Wt||[]};return x(oi,{size:n.size,class:On({error:k.value,disabled:B,[`label-${ht}`]:ht}),center:n.center,border:n.border,isLink:n.isLink,clickable:n.clickable,titleStyle:_.value,valueClass:On("value"),titleClass:[On("label",[ht,{required:f.value}]),n.labelClass],arrowDirection:n.arrowDirection},{icon:vt&&ht!=="top"?()=>vt:null,title:xt,value:ft,extra:e.extra})}}});const Bi=Z(YE);let Uo=0;function XE(n){n?(Uo||document.body.classList.add("van-toast--unclickable"),Uo++):Uo&&(Uo--,Uo||document.body.classList.remove("van-toast--unclickable"))}const[KE,Tr]=W("toast"),JE=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],ZE={icon:String,show:Boolean,type:Q("text"),overlay:Boolean,message:Y,iconSize:Y,duration:Ee(2e3),position:Q("middle"),teleport:[String,Object],wordBreak:String,className:he,iconPrefix:String,transition:Q("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:he,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:Y};var Uv=U({name:KE,props:ZE,emits:["update:show"],setup(n,{emit:t,slots:e}){let i,s=!1;const r=()=>{const d=n.show&&n.forbidClick;s!==d&&(s=d,XE(s))},o=d=>t("update:show",d),a=()=>{n.closeOnClick&&o(!1)},l=()=>clearTimeout(i),c=()=>{const{icon:d,type:h,iconSize:f,iconPrefix:g,loadingType:m}=n;if(d||h==="success"||h==="fail")return x($t,{name:d||h,size:f,class:Tr("icon"),classPrefix:g},null);if(h==="loading")return x(si,{class:Tr("loading"),size:f,type:m},null)},u=()=>{const{type:d,message:h}=n;if(e.message)return x("div",{class:Tr("text")},[e.message()]);if(jt(h)&&h!=="")return d==="html"?x("div",{key:0,class:Tr("text"),innerHTML:String(h)},null):x("div",{class:Tr("text")},[h])};return st(()=>[n.show,n.forbidClick],r),st(()=>[n.show,n.type,n.message,n.duration],()=>{l(),n.show&&n.duration>0&&(i=setTimeout(()=>{o(!1)},n.duration))}),be(r),Oo(r),()=>x(ri,Rt({class:[Tr([n.position,n.wordBreak==="normal"?"break-normal":n.wordBreak,{[n.type]:!n.icon}]),n.className],lockScroll:!1,onClick:a,onClosed:l,"onUpdate:show":o},Gt(n,JE)),{default:()=>[c(),u()]})}});function Wv(){const n=de({show:!1}),t=s=>{n.show=s},e=s=>{St(n,s,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return Lt({open:e,close:i,toggle:t}),{open:e,close:i,state:n,toggle:t}}function qv(n){const t=jd(n),e=document.createElement("div");return document.body.appendChild(e),{instance:t.mount(e),unmount(){t.unmount(),document.body.removeChild(e)}}}const QE={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let pl=[],tO=!1,sp=St({},QE);const eO=new Map;function nO(n){return Vi(n)?n:{message:n}}function iO(){const{instance:n,unmount:t}=qv({setup(){const e=j(""),{open:i,state:s,close:r,toggle:o}=Wv(),a=()=>{},l=()=>x(Uv,Rt(s,{onClosed:a,"onUpdate:show":o}),null);return st(e,c=>{s.message=c}),ii().render=l,{open:i,close:r,message:e}}});return n}function sO(){if(!pl.length||tO){const n=iO();pl.push(n)}return pl[pl.length-1]}function ac(n={}){if(!Dn)return{};const t=sO(),e=nO(n);return t.open(St({},sp,eO.get(e.type||sp.type),e)),t}const rO=Z(Uv),[oO,Xu]=W("switch"),aO={size:Y,loading:Boolean,disabled:Boolean,modelValue:he,activeColor:String,inactiveColor:String,activeValue:{type:he,default:!0},inactiveValue:{type:he,default:!1}};var lO=U({name:oO,props:aO,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const i=()=>n.modelValue===n.activeValue,s=()=>{if(!n.disabled&&!n.loading){const o=i()?n.inactiveValue:n.activeValue;t("update:modelValue",o),t("change",o)}},r=()=>{if(n.loading){const o=i()?n.activeColor:n.inactiveColor;return x(si,{class:Xu("loading"),color:o},null)}if(e.node)return e.node()};return Rs(()=>n.modelValue),()=>{var o;const{size:a,loading:l,disabled:c,activeColor:u,inactiveColor:d}=n,h=i(),f={fontSize:Mt(a),backgroundColor:h?u:d};return x("div",{role:"switch",class:Xu({on:h,loading:l,disabled:c}),style:f,tabindex:c?void 0:0,"aria-checked":h,onClick:s},[x("div",{class:Xu("node")},[r()]),(o=e.background)==null?void 0:o.call(e)])}}});const Qd=Z(lO),[cO,rp]=W("address-edit-detail"),op=W("address-edit")[2];var uO=U({name:cO,props:{show:Boolean,rows:Y,value:String,rules:Array,focused:Boolean,maxlength:Y,searchResult:Array,showSearchResult:Boolean},emits:["blur","focus","input","selectSearch"],setup(n,{emit:t}){const e=j(),i=()=>n.focused&&n.searchResult&&n.showSearchResult,s=c=>{t("selectSearch",c),t("input",`${c.address||""} ${c.name||""}`.trim())},r=()=>{if(!i())return;const{searchResult:c}=n;return c.map(u=>x(oi,{clickable:!0,key:(u.name||"")+(u.address||""),icon:"location-o",title:u.name,label:u.address,class:rp("search-item"),border:!1,onClick:()=>s(u)},null))},o=c=>t("blur",c),a=c=>t("focus",c),l=c=>t("input",c);return()=>{if(n.show)return x(Jt,null,[x(Bi,{autosize:!0,clearable:!0,ref:e,class:rp(),rows:n.rows,type:"textarea",rules:n.rules,label:op("addressDetail"),border:!i(),maxlength:n.maxlength,modelValue:n.value,placeholder:op("addressDetail"),onBlur:o,onFocus:a,"onUpdate:modelValue":l},null),r()])}}});const[hO,Mr,nn]=W("address-edit"),Yv={name:"",tel:"",city:"",county:"",country:"",province:"",areaCode:"",isDefault:!1,addressDetail:""},dO={areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showArea:G,showDetail:G,showDelete:Boolean,disableArea:Boolean,searchResult:Array,telMaxlength:Y,showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,detailRows:ut(1),detailMaxlength:ut(200),areaColumnsPlaceholder:ce(),addressInfo:{type:Object,default:()=>St({},Yv)},telValidator:{type:Function,default:rv}};var fO=U({name:hO,props:dO,emits:["save","focus","change","delete","clickArea","changeArea","changeDetail","selectSearch","changeDefault"],setup(n,{emit:t,slots:e}){const i=j(),s=de({}),r=j(!1),o=j(!1),a=F(()=>Vi(n.areaList)&&Object.keys(n.areaList).length),l=F(()=>{const{province:P,city:E,county:S,areaCode:A}=s;if(A){const M=[P,E,S];return P&&P===E&&M.splice(1,1),M.filter(Boolean).join("/")}return""}),c=F(()=>{var P;return((P=n.searchResult)==null?void 0:P.length)&&o.value}),u=P=>{o.value=P==="addressDetail",t("focus",P)},d=(P,E)=>{t("change",{key:P,value:E})},h=F(()=>{const{validator:P,telValidator:E}=n,S=(A,M)=>({validator:O=>{if(P){const T=P(A,O);if(T)return T}return O?!0:M}});return{name:[S("name",nn("nameEmpty"))],tel:[S("tel",nn("telInvalid")),{validator:E,message:nn("telInvalid")}],areaCode:[S("areaCode",nn("areaEmpty"))],addressDetail:[S("addressDetail",nn("addressEmpty"))]}}),f=()=>t("save",s),g=P=>{s.addressDetail=P,t("changeDetail",P)},m=P=>{s.province=P[0].text,s.city=P[1].text,s.county=P[2].text},p=({selectedValues:P,selectedOptions:E})=>{P.some(S=>S===Gr)?ac(nn("areaEmpty")):(r.value=!1,m(E),t("changeArea",E))},v=()=>t("delete",s),b=P=>{s.areaCode=P||""},y=()=>{setTimeout(()=>{o.value=!1})},w=P=>{s.addressDetail=P},C=()=>{if(n.showSetDefault){const P={"right-icon":()=>x(Qd,{modelValue:s.isDefault,"onUpdate:modelValue":E=>s.isDefault=E,onChange:E=>t("changeDefault",E)},null)};return De(x(oi,{center:!0,border:!1,title:nn("defaultAddress"),class:Mr("default")},P),[[Ve,!c.value]])}};return Lt({setAreaCode:b,setAddressDetail:w}),st(()=>n.addressInfo,P=>{St(s,Yv,P),_t(()=>{var E;const S=(E=i.value)==null?void 0:E.getSelectedOptions();S&&S.every(A=>A&&A.value!==Gr)&&m(S)})},{deep:!0,immediate:!0}),()=>{const{disableArea:P}=n;return x(Jd,{class:Mr(),onSubmit:f},{default:()=>{var E;return[x("div",{class:Mr("fields")},[x(Bi,{modelValue:s.name,"onUpdate:modelValue":[S=>s.name=S,S=>d("name",S)],clearable:!0,label:nn("name"),rules:h.value.name,placeholder:nn("name"),onFocus:()=>u("name")},null),x(Bi,{modelValue:s.tel,"onUpdate:modelValue":[S=>s.tel=S,S=>d("tel",S)],clearable:!0,type:"tel",label:nn("tel"),rules:h.value.tel,maxlength:n.telMaxlength,placeholder:nn("tel"),onFocus:()=>u("tel")},null),De(x(Bi,{readonly:!0,label:nn("area"),"is-link":!P,modelValue:l.value,rules:n.showArea?h.value.areaCode:void 0,placeholder:n.areaPlaceholder||nn("area"),onFocus:()=>u("areaCode"),onClick:()=>{t("clickArea"),r.value=!P}},null),[[Ve,n.showArea]]),x(uO,{show:n.showDetail,rows:n.detailRows,rules:h.value.addressDetail,value:s.addressDetail,focused:o.value,maxlength:n.detailMaxlength,searchResult:n.searchResult,showSearchResult:n.showSearchResult,onBlur:y,onFocus:()=>u("addressDetail"),onInput:g,onSelectSearch:S=>t("selectSearch",S)},null),(E=e.default)==null?void 0:E.call(e)]),C(),De(x("div",{class:Mr("buttons")},[x(Qe,{block:!0,round:!0,type:"primary",text:n.saveButtonText||nn("save"),class:Mr("button"),loading:n.isSaving,nativeType:"submit"},null),n.showDelete&&x(Qe,{block:!0,round:!0,class:Mr("button"),loading:n.isDeleting,text:n.deleteButtonText||nn("delete"),onClick:v},null)]),[[Ve,!c.value]]),x(ri,{show:r.value,"onUpdate:show":S=>r.value=S,round:!0,teleport:"body",position:"bottom",lazyRender:!1},{default:()=>[x(Hv,{modelValue:s.areaCode,"onUpdate:modelValue":S=>s.areaCode=S,ref:i,loading:!a.value,areaList:n.areaList,columnsPlaceholder:n.areaColumnsPlaceholder,onConfirm:p,onCancel:()=>{r.value=!1}},null)]})]}})}}});const gO=Z(fO),[Xv,pO]=W("radio-group"),mO={shape:String,disabled:Boolean,iconSize:Y,direction:String,modelValue:he,checkedColor:String},Kv=Symbol(Xv);var bO=U({name:Xv,props:mO,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const{linkChildren:i}=en(Kv),s=r=>t("update:modelValue",r);return st(()=>n.modelValue,r=>t("change",r)),i({props:n,updateValue:s}),Rs(()=>n.modelValue),()=>{var r;return x("div",{class:pO([n.direction]),role:"radiogroup"},[(r=e.default)==null?void 0:r.call(e)])}}});const tf=Z(bO),[vO,ap]=W("tag"),yO={size:String,mark:Boolean,show:G,type:Q("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var xO=U({name:vO,props:yO,emits:["close"],setup(n,{slots:t,emit:e}){const i=o=>{o.stopPropagation(),e("close",o)},s=()=>n.plain?{color:n.textColor||n.color,borderColor:n.color}:{color:n.textColor,background:n.color},r=()=>{var o;const{type:a,mark:l,plain:c,round:u,size:d,closeable:h}=n,f={mark:l,plain:c,round:u};d&&(f[d]=d);const g=h&&x($t,{name:"cross",class:[ap("close"),pn],onClick:i},null);return x("span",{style:s(),class:ap([f,a])},[(o=t.default)==null?void 0:o.call(t),g])};return()=>x(br,{name:n.closeable?"van-fade":void 0},{default:()=>[n.show?r():null]})}});const ou=Z(xO),ef={name:he,disabled:Boolean,iconSize:Y,modelValue:he,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Jv=U({props:St({},ef,{bem:Me(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:G,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(n,{emit:t,slots:e}){const i=j(),s=h=>{if(n.parent&&n.bindGroup)return n.parent.props[h]},r=F(()=>{if(n.parent&&n.bindGroup){const h=s("disabled")||n.disabled;if(n.role==="checkbox"){const f=s("modelValue").length,g=s("max"),m=g&&f>=+g;return h||m&&!n.checked}return h}return n.disabled}),o=F(()=>s("direction")),a=F(()=>{const h=n.checkedColor||s("checkedColor");if(h&&n.checked&&!r.value)return{borderColor:h,backgroundColor:h}}),l=F(()=>n.shape||s("shape")||"round"),c=h=>{const{target:f}=h,g=i.value,m=g===f||(g==null?void 0:g.contains(f));!r.value&&(m||!n.labelDisabled)&&t("toggle"),t("click",h)},u=()=>{var h,f;const{bem:g,checked:m,indeterminate:p}=n,v=n.iconSize||s("iconSize");return x("div",{ref:i,class:g("icon",[l.value,{disabled:r.value,checked:m,indeterminate:p}]),style:l.value!=="dot"?{fontSize:Mt(v)}:{width:Mt(v),height:Mt(v),borderColor:(h=a.value)==null?void 0:h.borderColor}},[e.icon?e.icon({checked:m,disabled:r.value}):l.value!=="dot"?x($t,{name:p?"minus":"success",style:a.value},null):x("div",{class:g("icon--dot__icon"),style:{backgroundColor:(f=a.value)==null?void 0:f.backgroundColor}},null)])},d=()=>{const{checked:h}=n;if(e.default)return x("span",{class:n.bem("label",[n.labelPosition,{disabled:r.value}])},[e.default({checked:h,disabled:r.value})])};return()=>{const h=n.labelPosition==="left"?[d(),u()]:[u(),d()];return x("div",{role:n.role,class:n.bem([{disabled:r.value,"label-disabled":n.labelDisabled},o.value]),tabindex:r.value?void 0:0,"aria-checked":n.checked,onClick:c},[h])}}});const wO=St({},ef,{shape:String}),[CO,SO]=W("radio");var PO=U({name:CO,props:wO,emits:["update:modelValue"],setup(n,{emit:t,slots:e}){const{parent:i}=Xe(Kv),s=()=>(i?i.props.modelValue:n.modelValue)===n.name,r=()=>{i?i.updateValue(n.name):t("update:modelValue",n.name)};return()=>x(Jv,Rt({bem:SO,role:"radio",parent:i,checked:s(),onToggle:r},n),Gt(e,["default","icon"]))}});const nf=Z(PO),[EO,kr]=W("address-item");var OO=U({name:EO,props:{address:Me(Object),disabled:Boolean,switchable:Boolean,defaultTagText:String,rightIcon:Q("edit")},emits:["edit","click","select"],setup(n,{slots:t,emit:e}){const i=a=>{n.switchable&&e("select"),e("click",a)},s=()=>x($t,{name:n.rightIcon,class:kr("edit"),onClick:a=>{a.stopPropagation(),e("edit"),e("click",a)}},null),r=()=>{if(t.tag)return t.tag(n.address);if(n.address.isDefault&&n.defaultTagText)return x(ou,{type:"primary",round:!0,class:kr("tag")},{default:()=>[n.defaultTagText]})},o=()=>{const{address:a,disabled:l,switchable:c}=n,u=[x("div",{class:kr("name")},[`${a.name} ${a.tel}`,r()]),x("div",{class:kr("address")},[a.address])];return c&&!l?x(nf,{name:a.id,iconSize:18},{default:()=>[u]}):u};return()=>{var a;const{disabled:l}=n;return x("div",{class:kr({disabled:l}),onClick:i},[x(oi,{border:!1,titleClass:kr("title")},{title:o,"right-icon":s}),(a=t.bottom)==null?void 0:a.call(t,St({},n.address,{disabled:l}))])}}});const[AO,ml,TO]=W("address-list"),MO={list:ce(),modelValue:Y,switchable:G,disabledText:String,disabledList:ce(),showAddButton:G,addButtonText:String,defaultTagText:String,rightIcon:Q("edit")};var kO=U({name:AO,props:MO,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(n,{slots:t,emit:e}){const i=(o,a,l)=>{const c=()=>e(l?"editDisabled":"edit",o,a),u=h=>e("clickItem",o,a,{event:h}),d=()=>{e(l?"selectDisabled":"select",o,a),l||e("update:modelValue",o.id)};return x(OO,{key:o.id,address:o,disabled:l,switchable:n.switchable,defaultTagText:n.defaultTagText,rightIcon:n.rightIcon,onEdit:c,onClick:u,onSelect:d},{bottom:t["item-bottom"],tag:t.tag})},s=(o,a)=>{if(o)return o.map((l,c)=>i(l,c,a))},r=()=>n.showAddButton?x("div",{class:[ml("bottom"),"van-safe-area-bottom"]},[x(Qe,{round:!0,block:!0,type:"primary",text:n.addButtonText||TO("add"),class:ml("add"),onClick:()=>e("add")},null)]):void 0;return()=>{var o,a;const l=s(n.list),c=s(n.disabledList,!0),u=n.disabledText&&x("div",{class:ml("disabled-text")},[n.disabledText]);return x("div",{class:ml()},[(o=t.top)==null?void 0:o.call(t),x(tf,{modelValue:n.modelValue},{default:()=>[l]}),u,c,(a=t.default)==null?void 0:a.call(t),r()])}}});const _O=Z(kO);function $O(n,t){let e=null,i=0;return function(...s){if(e)return;const r=Date.now()-i,o=()=>{i=Date.now(),e=!1,n.apply(this,s)};r>=t?o():e=setTimeout(o,t)}}const[IO,Ku]=W("back-top"),RO={right:Y,bottom:Y,zIndex:Y,target:[String,Object],offset:ut(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var NO=U({name:IO,inheritAttrs:!1,props:RO,emits:["click"],setup(n,{emit:t,slots:e,attrs:i}){let s=!1;const r=j(!1),o=j(),a=j(),l=F(()=>St(Ki(n.zIndex),{right:Mt(n.right),bottom:Mt(n.bottom)})),c=f=>{var g;t("click",f),(g=a.value)==null||g.scrollTo({top:0,behavior:n.immediate?"auto":"smooth"})},u=()=>{r.value=a.value?Fi(a.value)>=+n.offset:!1},d=()=>{const{target:f}=n;if(typeof f=="string"){const g=document.querySelector(f);if(g)return g}else return f},h=()=>{Dn&&_t(()=>{a.value=n.target?d():Vd(o.value),u()})};return Se("scroll",$O(u,100),{target:a}),be(h),Ei(()=>{s&&(r.value=!0,s=!1)}),Oi(()=>{r.value&&n.teleport&&(r.value=!1,s=!0)}),st(()=>n.target,h),()=>{const f=x("div",Rt({ref:n.teleport?void 0:o,class:Ku({active:r.value}),style:l.value,onClick:c},i),[e.default?e.default():x($t,{name:"back-top",class:Ku("icon")},null)]);return n.teleport?[x("div",{ref:o,class:Ku("placeholder")},null),x(mr,{to:n.teleport},{default:()=>[f]})]:f}}});const DO=Z(NO);var BO=(n,t,e)=>new Promise((i,s)=>{var r=l=>{try{a(e.next(l))}catch(c){s(c)}},o=l=>{try{a(e.throw(l))}catch(c){s(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);a((e=e.apply(n,t)).next())});const LO={top:ut(10),rows:ut(4),duration:ut(4e3),autoPlay:G,delay:Ee(300),modelValue:ce()},[jO,lp]=W("barrage");var zO=U({name:jO,props:LO,emits:["update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(),s=lp("item"),r=j(0),o=[],a=(m,p=n.delay)=>{const v=document.createElement("span");return v.className=s,v.innerText=String(m),v.style.animationDuration=`${n.duration}ms`,v.style.animationDelay=`${p}ms`,v.style.animationName="van-barrage",v.style.animationTimingFunction="linear",v},l=j(!0),c=j(n.autoPlay),u=({id:m,text:p},v)=>{var b;const y=a(p,l.value?v*n.delay:void 0);!n.autoPlay&&c.value===!1&&(y.style.animationPlayState="paused"),(b=i.value)==null||b.append(y),r.value++;const w=(r.value-1)%+n.rows*y.offsetHeight+ +n.top;y.style.top=`${w}px`,y.dataset.id=String(m),o.push(y),y.addEventListener("animationend",()=>{t("update:modelValue",[...n.modelValue].filter(C=>String(C.id)!==y.dataset.id))})},d=(m,p)=>{const v=new Map(p.map(b=>[b.id,b]));m.forEach((b,y)=>{v.has(b.id)?v.delete(b.id):u(b,y)}),v.forEach(b=>{const y=o.findIndex(w=>w.dataset.id===String(b.id));y>-1&&(o[y].remove(),o.splice(y,1))}),l.value=!1};st(()=>n.modelValue.slice(),(m,p)=>d(m??[],p??[]),{deep:!0});const h=j({});return be(()=>BO(this,null,function*(){var m;h.value["--move-distance"]=`-${(m=i.value)==null?void 0:m.offsetWidth}px`,yield _t(),d(n.modelValue,[])})),Lt({play:()=>{c.value=!0,o.forEach(m=>{m.style.animationPlayState="running"})},pause:()=>{c.value=!1,o.forEach(m=>{m.style.animationPlayState="paused"})}}),()=>{var m;return x("div",{class:lp(),ref:i,style:h.value},[(m=e.default)==null?void 0:m.call(e)])}}});const VO=Z(zO),[FO,Ne,Li]=W("calendar"),HO=n=>Li("monthTitle",n.getFullYear(),n.getMonth()+1);function Vh(n,t){const e=n.getFullYear(),i=t.getFullYear();if(e===i){const s=n.getMonth(),r=t.getMonth();return s===r?0:s>r?1:-1}return e>i?1:-1}function bn(n,t){const e=Vh(n,t);if(e===0){const i=n.getDate(),s=t.getDate();return i===s?0:i>s?1:-1}return e}const lc=n=>new Date(n),cp=n=>Array.isArray(n)?n.map(lc):lc(n);function sf(n,t){const e=lc(n);return e.setDate(e.getDate()+t),e}const Fh=n=>sf(n,-1),Zv=n=>sf(n,1),Hh=()=>{const n=new Date;return n.setHours(0,0,0,0),n};function GO(n){const t=n[0].getTime();return(n[1].getTime()-t)/(1e3*60*60*24)+1}const Qv=St({},iu,{modelValue:ce(),filter:Function,formatter:{type:Function,default:(n,t)=>t}}),ty=Object.keys(iu);function UO(n,t){if(n<0)return[];const e=Array(n);let i=-1;for(;++i<n;)e[i]=t(i);return e}const ey=(n,t)=>32-new Date(n,t-1,32).getDate(),Ur=(n,t,e,i,s,r)=>{const o=UO(t-n+1,a=>{const l=Wn(n+a);return i(e,{text:l,value:l})});return s?s(e,o,r):o},ny=(n,t)=>n.map((e,i)=>{const s=t[i];if(s.length){const r=+s[0].value,o=+s[s.length-1].value;return Wn(Ue(+e,r,o))}return e}),[WO]=W("calendar-day");var qO=U({name:WO,props:{item:Me(Object),color:String,index:Number,offset:Ee(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(n,{emit:t,slots:e}){const i=F(()=>{var l;const{item:c,index:u,color:d,offset:h,rowHeight:f}=n,g={height:f};if(c.type==="placeholder")return g.width="100%",g;if(u===0&&(g.marginLeft=`${100*h/7}%`),d)switch(c.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":g.background=d;break;case"middle":g.color=d;break}return h+(((l=c.date)==null?void 0:l.getDate())||1)>28&&(g.marginBottom=0),g}),s=()=>{n.item.type!=="disabled"?t("click",n.item):t("clickDisabledDate",n.item)},r=()=>{const{topInfo:l}=n.item;if(l||e["top-info"])return x("div",{class:Ne("top-info")},[e["top-info"]?e["top-info"](n.item):l])},o=()=>{const{bottomInfo:l}=n.item;if(l||e["bottom-info"])return x("div",{class:Ne("bottom-info")},[e["bottom-info"]?e["bottom-info"](n.item):l])},a=()=>{const{item:l,color:c,rowHeight:u}=n,{type:d,text:h}=l,f=[r(),h,o()];return d==="selected"?x("div",{class:Ne("selected-day"),style:{width:u,height:u,background:c}},[f]):f};return()=>{const{type:l,className:c}=n.item;return l==="placeholder"?x("div",{class:Ne("day"),style:i.value},null):x("div",{role:"gridcell",style:i.value,class:[Ne("day",l),c],tabindex:l==="disabled"?void 0:-1,onClick:s},[a()])}}});const[YO]=W("calendar-month"),XO={date:Me(Date),type:String,color:String,minDate:Me(Date),maxDate:Me(Date),showMark:Boolean,rowHeight:Y,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var KO=U({name:YO,props:XO,emits:["click","clickDisabledDate"],setup(n,{emit:t,slots:e}){const[i,s]=TS(),r=j(),o=j(),a=yv(o),l=F(()=>HO(n.date)),c=F(()=>Mt(n.rowHeight)),u=F(()=>{const M=n.date.getDay();return n.firstDayOfWeek?(M+7-n.firstDayOfWeek)%7:M}),d=F(()=>ey(n.date.getFullYear(),n.date.getMonth()+1)),h=F(()=>i.value||!n.lazyRender),f=()=>l.value,g=M=>{const O=T=>n.currentDate.some(R=>bn(R,T)===0);if(O(M)){const T=Fh(M),R=Zv(M),L=O(T),k=O(R);return L&&k?"multiple-middle":L?"end":k?"start":"multiple-selected"}return""},m=M=>{const[O,T]=n.currentDate;if(!O)return"";const R=bn(M,O);if(!T)return R===0?"start":"";const L=bn(M,T);return n.allowSameDay&&R===0&&L===0?"start-end":R===0?"start":L===0?"end":R>0&&L<0?"middle":""},p=M=>{const{type:O,minDate:T,maxDate:R,currentDate:L}=n;if(bn(M,T)<0||bn(M,R)>0)return"disabled";if(L===null)return"";if(Array.isArray(L)){if(O==="multiple")return g(M);if(O==="range")return m(M)}else if(O==="single")return bn(M,L)===0?"selected":"";return""},v=M=>{if(n.type==="range"){if(M==="start"||M==="end")return Li(M);if(M==="start-end")return`${Li("start")}/${Li("end")}`}},b=()=>{if(n.showMonthTitle)return x("div",{class:Ne("month-title")},[e["month-title"]?e["month-title"]({date:n.date,text:l.value}):l.value])},y=()=>{if(n.showMark&&h.value)return x("div",{class:Ne("month-mark")},[n.date.getMonth()+1])},w=F(()=>{const M=Math.ceil((d.value+u.value)/7);return Array(M).fill({type:"placeholder"})}),C=F(()=>{const M=[],O=n.date.getFullYear(),T=n.date.getMonth();for(let R=1;R<=d.value;R++){const L=new Date(O,T,R),k=p(L);let _={date:L,type:k,text:R,bottomInfo:v(k)};n.formatter&&(_=n.formatter(_)),M.push(_)}return M}),P=F(()=>C.value.filter(M=>M.type==="disabled")),E=(M,O)=>{if(r.value){const T=Xt(r.value),R=w.value.length,k=(Math.ceil((O.getDate()+u.value)/7)-1)*T.height/R;sc(M,T.top+k+M.scrollTop-Xt(M).top)}},S=(M,O)=>x(qO,{item:M,index:O,color:n.color,offset:u.value,rowHeight:c.value,onClick:T=>t("click",T),onClickDisabledDate:T=>t("clickDisabledDate",T)},Gt(e,["top-info","bottom-info"])),A=()=>x("div",{ref:r,role:"grid",class:Ne("days")},[y(),(h.value?C:w).value.map(S)]);return Lt({getTitle:f,getHeight:()=>a.value,setVisible:s,scrollToDate:E,disabledDays:P}),()=>x("div",{class:Ne("month"),ref:o},[b(),A()])}});const[JO]=W("calendar-header");var ZO=U({name:JO,props:{date:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},emits:["clickSubtitle"],setup(n,{slots:t,emit:e}){const i=()=>{if(n.showTitle){const a=n.title||Li("title"),l=t.title?t.title():a;return x("div",{class:Ne("header-title")},[l])}},s=a=>e("clickSubtitle",a),r=()=>{if(n.showSubtitle){const a=t.subtitle?t.subtitle({date:n.date,text:n.subtitle}):n.subtitle;return x("div",{class:Ne("header-subtitle"),onClick:s},[a])}},o=()=>{const{firstDayOfWeek:a}=n,l=Li("weekdays"),c=[...l.slice(a,7),...l.slice(0,a)];return x("div",{class:Ne("weekdays")},[c.map(u=>x("span",{class:Ne("weekday")},[u]))])};return()=>x("div",{class:Ne("header")},[i(),r(),o()])}});const QO={show:Boolean,type:Q("single"),title:String,color:String,round:G,readonly:Boolean,poppable:G,maxRange:ut(null),position:Q("bottom"),teleport:[String,Object],showMark:G,showTitle:G,formatter:Function,rowHeight:Y,confirmText:String,rangePrompt:String,lazyRender:G,showConfirm:G,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:G,closeOnPopstate:G,showRangePrompt:G,confirmDisabledText:String,closeOnClickOverlay:G,safeAreaInsetTop:Boolean,safeAreaInsetBottom:G,minDate:{type:Date,validator:Ea,default:Hh},maxDate:{type:Date,validator:Ea,default:()=>{const n=Hh();return new Date(n.getFullYear(),n.getMonth()+6,n.getDate())}},firstDayOfWeek:{type:Y,default:0,validator:n=>n>=0&&n<=6}};var tA=U({name:FO,props:QO,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate"],setup(n,{emit:t,slots:e}){const i=(k,_=n.minDate,D=n.maxDate)=>bn(k,_)===-1?_:bn(k,D)===1?D:k,s=(k=n.defaultDate)=>{const{type:_,minDate:D,maxDate:V,allowSameDay:it}=n;if(k===null)return k;const at=Hh();if(_==="range"){Array.isArray(k)||(k=[]);const z=i(k[0]||at,D,it?V:Fh(V)),q=i(k[1]||at,it?D:Zv(D));return[z,q]}return _==="multiple"?Array.isArray(k)?k.map(z=>i(z)):[i(at)]:((!k||Array.isArray(k))&&(k=at),i(k))};let r;const o=j(),a=j({textFn:()=>"",date:void 0}),l=j(s()),[c,u]=Wa(),d=F(()=>n.firstDayOfWeek?+n.firstDayOfWeek%7:0),h=F(()=>{const k=[],_=new Date(n.minDate);_.setDate(1);do k.push(new Date(_)),_.setMonth(_.getMonth()+1);while(Vh(_,n.maxDate)!==1);return k}),f=F(()=>{if(l.value){if(n.type==="range")return!l.value[0]||!l.value[1];if(n.type==="multiple")return!l.value.length}return!l.value}),g=()=>l.value,m=()=>{const k=Fi(o.value),_=k+r,D=h.value.map((q,lt)=>c.value[lt].getHeight()),V=D.reduce((q,lt)=>q+lt,0);if(_>V&&k>0)return;let it=0,at;const z=[-1,-1];for(let q=0;q<h.value.length;q++){const lt=c.value[q];it<=_&&it+D[q]>=k&&(z[1]=q,at||(at=lt,z[0]=q),c.value[q].showed||(c.value[q].showed=!0,t("monthShow",{date:lt.date,title:lt.getTitle()}))),it+=D[q]}h.value.forEach((q,lt)=>{const mt=lt>=z[0]-1&&lt<=z[1]+1;c.value[lt].setVisible(mt)}),at&&(a.value={textFn:at.getTitle,date:at.date})},p=k=>{Ze(()=>{h.value.some((_,D)=>Vh(_,k)===0?(o.value&&c.value[D].scrollToDate(o.value,k),!0):!1),m()})},v=()=>{if(!(n.poppable&&!n.show))if(l.value){const k=n.type==="single"?l.value:l.value[0];Ea(k)&&p(k)}else Ze(m)},b=()=>{n.poppable&&!n.show||(Ze(()=>{r=Math.floor(Xt(o).height)}),v())},y=(k=s())=>{l.value=k,v()},w=k=>{const{maxRange:_,rangePrompt:D,showRangePrompt:V}=n;return _&&GO(k)>+_?(V&&ac(D||Li("rangePrompt",_)),t("overRange"),!1):!0},C=()=>{var k;return t("confirm",(k=l.value)!=null?k:cp(l.value))},P=(k,_)=>{const D=V=>{l.value=V,t("select",cp(V))};if(_&&n.type==="range"&&!w(k)){D([k[0],sf(k[0],+n.maxRange-1)]);return}D(k),_&&!n.showConfirm&&C()},E=(k,_,D)=>{var V;return(V=k.find(it=>bn(_,it.date)===-1&&bn(it.date,D)===-1))==null?void 0:V.date},S=F(()=>c.value.reduce((k,_)=>{var D,V;return k.push(...(V=(D=_.disabledDays)==null?void 0:D.value)!=null?V:[]),k},[])),A=k=>{if(n.readonly||!k.date)return;const{date:_}=k,{type:D}=n;if(D==="range"){if(!l.value){P([_]);return}const[V,it]=l.value;if(V&&!it){const at=bn(_,V);if(at===1){const z=E(S.value,V,_);if(z){const q=Fh(z);bn(V,q)===-1?P([V,q]):P([_])}else P([V,_],!0)}else at===-1?P([_]):n.allowSameDay&&P([_,_],!0)}else P([_])}else if(D==="multiple"){if(!l.value){P([_]);return}const V=l.value,it=V.findIndex(at=>bn(at,_)===0);if(it!==-1){const[at]=V.splice(it,1);t("unselect",lc(at))}else n.maxRange&&V.length>=+n.maxRange?ac(n.rangePrompt||Li("rangePrompt",n.maxRange)):P([...V,_])}else P(_,!0)},M=k=>t("update:show",k),O=(k,_)=>{const D=_!==0||!n.showSubtitle;return x(KO,Rt({ref:u(_),date:k,currentDate:l.value,showMonthTitle:D,firstDayOfWeek:d.value},Gt(n,["type","color","minDate","maxDate","showMark","formatter","rowHeight","lazyRender","showSubtitle","allowSameDay"]),{onClick:A,onClickDisabledDate:V=>t("clickDisabledDate",V)}),Gt(e,["top-info","bottom-info","month-title"]))},T=()=>{if(e.footer)return e.footer();if(n.showConfirm){const k=e["confirm-text"],_=f.value,D=_?n.confirmDisabledText:n.confirmText;return x(Qe,{round:!0,block:!0,type:"primary",color:n.color,class:Ne("confirm"),disabled:_,nativeType:"button",onClick:C},{default:()=>[k?k({disabled:_}):D||Li("confirm")]})}},R=()=>x("div",{class:[Ne("footer"),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[T()]),L=()=>{const k=a.value.textFn();return x("div",{class:Ne()},[x(ZO,{date:a.value.date,title:n.title,subtitle:k,showTitle:n.showTitle,showSubtitle:n.showSubtitle,firstDayOfWeek:d.value,onClickSubtitle:_=>t("clickSubtitle",_)},Gt(e,["title","subtitle"])),x("div",{ref:o,class:Ne("body"),onScroll:m},[h.value.map(O)]),R()])};return st(()=>n.show,b),st(()=>[n.type,n.minDate,n.maxDate],()=>y(s(l.value))),st(()=>n.defaultDate,(k=null)=>{l.value=k,v()}),Lt({reset:y,scrollToDate:p,getSelectedDate:g}),To(b),()=>n.poppable?x(ri,{show:n.show,class:Ne("popup"),round:n.round,position:n.position,closeable:n.showTitle||n.showSubtitle,teleport:n.teleport,closeOnPopstate:n.closeOnPopstate,safeAreaInsetTop:n.safeAreaInsetTop,closeOnClickOverlay:n.closeOnClickOverlay,"onUpdate:show":M},{default:L}):L()}});const eA=Z(tA),[nA,_r]=W("image"),iA={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:Y,height:Y,radius:Y,lazyLoad:Boolean,iconSize:Y,showError:G,errorIcon:Q("photo-fail"),iconPrefix:String,showLoading:G,loadingIcon:Q("photo"),crossorigin:String,referrerpolicy:String};var sA=U({name:nA,props:iA,emits:["load","error"],setup(n,{emit:t,slots:e}){const i=j(!1),s=j(!0),r=j(),{$Lazyload:o}=ii().proxy,a=F(()=>{const p={width:Mt(n.width),height:Mt(n.height)};return jt(n.radius)&&(p.overflow="hidden",p.borderRadius=Mt(n.radius)),p});st(()=>n.src,()=>{i.value=!1,s.value=!0});const l=p=>{s.value&&(s.value=!1,t("load",p))},c=()=>{const p=new Event("load");Object.defineProperty(p,"target",{value:r.value,enumerable:!0}),l(p)},u=p=>{i.value=!0,s.value=!1,t("error",p)},d=(p,v,b)=>b?b():x($t,{name:p,size:n.iconSize,class:v,classPrefix:n.iconPrefix},null),h=()=>{if(s.value&&n.showLoading)return x("div",{class:_r("loading")},[d(n.loadingIcon,_r("loading-icon"),e.loading)]);if(i.value&&n.showError)return x("div",{class:_r("error")},[d(n.errorIcon,_r("error-icon"),e.error)])},f=()=>{if(i.value||!n.src)return;const p={alt:n.alt,class:_r("img"),style:{objectFit:n.fit,objectPosition:n.position},crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy};return n.lazyLoad?De(x("img",Rt({ref:r},p),null),[[W1("lazy"),n.src]]):x("img",Rt({ref:r,src:n.src,onLoad:l,onError:u},p),null)},g=({el:p})=>{const v=()=>{p===r.value&&s.value&&c()};r.value?v():_t(v)},m=({el:p})=>{p===r.value&&!i.value&&u()};return o&&Dn&&(o.$on("loaded",g),o.$on("error",m),Ai(()=>{o.$off("loaded",g),o.$off("error",m)})),be(()=>{_t(()=>{var p;(p=r.value)!=null&&p.complete&&!n.lazyLoad&&c()})}),()=>{var p;return x("div",{class:_r({round:n.round,block:n.block}),style:a.value},[f(),h(),(p=e.default)==null?void 0:p.call(e)])}}});const au=Z(sA),[rA,sn]=W("card"),oA={tag:String,num:Y,desc:String,thumb:String,title:String,price:Y,centered:Boolean,lazyLoad:Boolean,currency:Q(""),thumbLink:String,originPrice:Y};var aA=U({name:rA,props:oA,emits:["clickThumb"],setup(n,{slots:t,emit:e}){const i=()=>{if(t.title)return t.title();if(n.title)return x("div",{class:[sn("title"),"van-multi-ellipsis--l2"]},[n.title])},s=()=>{if(t.tag||n.tag)return x("div",{class:sn("tag")},[t.tag?t.tag():x(ou,{mark:!0,type:"primary"},{default:()=>[n.tag]})])},r=()=>t.thumb?t.thumb():x(au,{src:n.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:n.lazyLoad},null),o=()=>{if(t.thumb||n.thumb)return x("a",{href:n.thumbLink,class:sn("thumb"),onClick:c=>e("clickThumb",c)},[r(),s()])},a=()=>{if(t.desc)return t.desc();if(n.desc)return x("div",{class:[sn("desc"),"van-ellipsis"]},[n.desc])},l=()=>{const c=n.price.toString().split(".");return x("div",null,[x("span",{class:sn("price-currency")},[n.currency]),x("span",{class:sn("price-integer")},[c[0]]),Qn("."),x("span",{class:sn("price-decimal")},[c[1]])])};return()=>{var c,u,d;const h=t.num||jt(n.num),f=t.price||jt(n.price),g=t["origin-price"]||jt(n.originPrice),m=h||f||g||t.bottom,p=f&&x("div",{class:sn("price")},[t.price?t.price():l()]),v=g&&x("div",{class:sn("origin-price")},[t["origin-price"]?t["origin-price"]():`${n.currency} ${n.originPrice}`]),b=h&&x("div",{class:sn("num")},[t.num?t.num():`x${n.num}`]),y=t.footer&&x("div",{class:sn("footer")},[t.footer()]),w=m&&x("div",{class:sn("bottom")},[(c=t["price-top"])==null?void 0:c.call(t),p,v,b,(u=t.bottom)==null?void 0:u.call(t)]);return x("div",{class:sn()},[x("div",{class:sn("header")},[o(),x("div",{class:sn("content",{centered:n.centered})},[x("div",null,[i(),a(),(d=t.tags)==null?void 0:d.call(t)]),w])]),y])}}});const lA=Z(aA),[cA,ki,uA]=W("cascader"),hA={title:String,options:ce(),closeable:G,swipeable:G,closeIcon:Q("cross"),showHeader:G,modelValue:Y,fieldNames:Object,placeholder:String,activeColor:String};var dA=U({name:cA,props:hA,emits:["close","change","finish","clickTab","update:modelValue"],setup(n,{slots:t,emit:e}){const i=j([]),s=j(0),[r,o]=Wa(),{text:a,value:l,children:c}=St({text:"text",value:"value",children:"children"},n.fieldNames),u=(C,P)=>{for(const E of C){if(E[l]===P)return[E];if(E[c]){const S=u(E[c],P);if(S)return[E,...S]}}},d=()=>{const{options:C,modelValue:P}=n;if(P!==void 0){const E=u(C,P);if(E){let S=C;i.value=E.map(A=>{const M={options:S,selected:A},O=S.find(T=>T[l]===A[l]);return O&&(S=O[c]),M}),S&&i.value.push({options:S,selected:null}),_t(()=>{s.value=i.value.length-1});return}}i.value=[{options:C,selected:null}]},h=(C,P)=>{if(C.disabled)return;if(i.value[P].selected=C,i.value.length>P+1&&(i.value=i.value.slice(0,P+1)),C[c]){const A={options:C[c],selected:null};i.value[P+1]?i.value[P+1]=A:i.value.push(A),_t(()=>{s.value++})}const E=i.value.map(A=>A.selected).filter(Boolean);e("update:modelValue",C[l]);const S={value:C[l],tabIndex:P,selectedOptions:E};e("change",S),C[c]||e("finish",S)},f=()=>e("close"),g=({name:C,title:P})=>e("clickTab",C,P),m=()=>n.showHeader?x("div",{class:ki("header")},[x("h2",{class:ki("title")},[t.title?t.title():n.title]),n.closeable?x($t,{name:n.closeIcon,class:[ki("close-icon"),pn],onClick:f},null):null]):null,p=(C,P,E)=>{const{disabled:S}=C,A=!!(P&&C[l]===P[l]),M=C.color||(A?n.activeColor:void 0),O=t.option?t.option({option:C,selected:A}):x("span",null,[C[a]]);return x("li",{ref:A?o(E):void 0,role:"menuitemradio",class:[ki("option",{selected:A,disabled:S}),C.className],style:{color:M},tabindex:S?void 0:A?0:-1,"aria-checked":A,"aria-disabled":S||void 0,onClick:()=>h(C,E)},[O,A?x($t,{name:"success",class:ki("selected-icon")},null):null])},v=(C,P,E)=>x("ul",{role:"menu",class:ki("options")},[C.map(S=>p(S,P,E))]),b=(C,P)=>{const{options:E,selected:S}=C,A=n.placeholder||uA("select"),M=S?S[a]:A;return x(Oa,{title:M,titleClass:ki("tab",{unselected:!S})},{default:()=>{var O,T;return[(O=t["options-top"])==null?void 0:O.call(t,{tabIndex:P}),v(E,S,P),(T=t["options-bottom"])==null?void 0:T.call(t,{tabIndex:P})]}})},y=()=>x(nu,{active:s.value,"onUpdate:active":C=>s.value=C,shrink:!0,animated:!0,class:ki("tabs"),color:n.activeColor,swipeable:n.swipeable,onClickTab:g},{default:()=>[i.value.map(b)]}),w=C=>{const P=C.parentElement;P&&(P.scrollTop=C.offsetTop-(P.offsetHeight-C.offsetHeight)/2)};return d(),st(s,C=>{const P=r.value[C];P&&w(P)}),st(()=>n.options,d,{deep:!0}),st(()=>n.modelValue,C=>{C!==void 0&&i.value.map(E=>{var S;return(S=E.selected)==null?void 0:S[l]}).includes(C)||d()}),()=>x("div",{class:ki()},[m(),y()])}});const fA=Z(dA),[gA,up]=W("cell-group"),pA={title:String,inset:Boolean,border:G};var mA=U({name:gA,inheritAttrs:!1,props:pA,setup(n,{slots:t,attrs:e}){const i=()=>{var r;return x("div",Rt({class:[up({inset:n.inset}),{[Zc]:n.border&&!n.inset}]},e,oc()),[(r=t.default)==null?void 0:r.call(t)])},s=()=>x("div",{class:up("title",{inset:n.inset})},[t.title?t.title():n.title]);return()=>n.title||t.title?x(Jt,null,[s(),i()]):i()}});const bA=Z(mA),[iy,vA]=W("checkbox-group"),yA={max:Y,shape:Q("round"),disabled:Boolean,iconSize:Y,direction:String,modelValue:ce(),checkedColor:String},sy=Symbol(iy);var xA=U({name:iy,props:yA,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const{children:i,linkChildren:s}=en(sy),r=a=>t("update:modelValue",a),o=(a={})=>{typeof a=="boolean"&&(a={checked:a});const{checked:l,skipDisabled:c}=a,d=i.filter(h=>h.props.bindGroup?h.props.disabled&&c?h.checked.value:l??!h.checked.value:!1).map(h=>h.name);r(d)};return st(()=>n.modelValue,a=>t("change",a)),Lt({toggleAll:o}),Rs(()=>n.modelValue),s({props:n,updateValue:r}),()=>{var a;return x("div",{class:vA([n.direction])},[(a=e.default)==null?void 0:a.call(e)])}}});const[wA,CA]=W("checkbox"),SA=St({},ef,{shape:String,bindGroup:G,indeterminate:{type:Boolean,default:null}});var PA=U({name:wA,props:SA,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const{parent:i}=Xe(sy),s=a=>{const{name:l}=n,{max:c,modelValue:u}=i.props,d=u.slice();if(a)!(c&&d.length>=+c)&&!d.includes(l)&&(d.push(l),n.bindGroup&&i.updateValue(d));else{const h=d.indexOf(l);h!==-1&&(d.splice(h,1),n.bindGroup&&i.updateValue(d))}},r=F(()=>i&&n.bindGroup?i.props.modelValue.indexOf(n.name)!==-1:!!n.modelValue),o=(a=!r.value)=>{i&&n.bindGroup?s(a):t("update:modelValue",a),n.indeterminate!==null&&t("change",a)};return st(()=>n.modelValue,a=>{n.indeterminate===null&&t("change",a)}),Lt({toggle:o,props:n,checked:r}),Rs(()=>n.modelValue),()=>x(Jv,Rt({bem:CA,role:"checkbox",parent:i,checked:r.value,onToggle:o},n),Gt(e,["default","icon"]))}});const ry=Z(PA),EA=Z(xA),[OA,bl]=W("circle");let AA=0;const hp=n=>Math.min(Math.max(+n,0),100);function TA(n,t){const e=n?1:0;return`M ${t/2} ${t/2} m 0, -500 a 500, 500 0 1, ${e} 0, 1000 a 500, 500 0 1, ${e} 0, -1000`}const MA={text:String,size:Y,fill:Q("none"),rate:ut(100),speed:ut(0),color:[String,Object],clockwise:G,layerColor:String,currentRate:Ee(0),strokeWidth:ut(40),strokeLinecap:String,startPosition:Q("top")};var kA=U({name:OA,props:MA,emits:["update:currentRate"],setup(n,{emit:t,slots:e}){const i=`van-circle-${AA++}`,s=F(()=>+n.strokeWidth+1e3),r=F(()=>TA(n.clockwise,s.value)),o=F(()=>{const h={top:0,right:90,bottom:180,left:270}[n.startPosition];if(h)return{transform:`rotate(${h}deg)`}});st(()=>n.rate,d=>{let h;const f=Date.now(),g=n.currentRate,m=hp(d),p=Math.abs((g-m)*1e3/+n.speed),v=()=>{const b=Date.now(),w=Math.min((b-f)/p,1)*(m-g)+g;t("update:currentRate",hp(parseFloat(w.toFixed(1)))),(m>g?w<m:w>m)&&(h=Ze(v))};n.speed?(h&&Xc(h),h=Ze(v)):t("update:currentRate",m)},{immediate:!0});const a=()=>{const{strokeWidth:h,currentRate:f,strokeLinecap:g}=n,m=3140*f/100,p=Vi(n.color)?`url(#${i})`:n.color,v={stroke:p,strokeWidth:`${+h+1}px`,strokeLinecap:g,strokeDasharray:`${m}px 3140px`};return x("path",{d:r.value,style:v,class:bl("hover"),stroke:p},null)},l=()=>{const d={fill:n.fill,stroke:n.layerColor,strokeWidth:`${n.strokeWidth}px`};return x("path",{class:bl("layer"),style:d,d:r.value},null)},c=()=>{const{color:d}=n;if(!Vi(d))return;const h=Object.keys(d).sort((f,g)=>parseFloat(f)-parseFloat(g)).map((f,g)=>x("stop",{key:g,offset:f,"stop-color":d[f]},null));return x("defs",null,[x("linearGradient",{id:i,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[h])])},u=()=>{if(e.default)return e.default();if(n.text)return x("div",{class:bl("text")},[n.text])};return()=>x("div",{class:bl(),style:Xi(n.size)},[x("svg",{viewBox:`0 0 ${s.value} ${s.value}`,style:o.value},[c(),l(),a()]),u()])}});const _A=Z(kA),[oy,$A]=W("row"),ay=Symbol(oy),IA={tag:Q("div"),wrap:G,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var RA=U({name:oy,props:IA,setup(n,{slots:t}){const{children:e,linkChildren:i}=en(ay),s=F(()=>{const a=[[]];let l=0;return e.forEach((c,u)=>{l+=Number(c.span),l>24?(a.push([u]),l-=24):a[a.length-1].push(u)}),a}),r=F(()=>{let a=0;Array.isArray(n.gutter)?a=Number(n.gutter[0])||0:a=Number(n.gutter);const l=[];return a&&s.value.forEach(c=>{const u=a*(c.length-1)/c.length;c.forEach((d,h)=>{if(h===0)l.push({right:u});else{const f=a-l[d-1].right,g=u-f;l.push({left:f,right:g})}})}),l}),o=F(()=>{const{gutter:a}=n,l=[];if(Array.isArray(a)&&a.length>1){const c=Number(a[1])||0;if(c<=0)return l;s.value.forEach((u,d)=>{d!==s.value.length-1&&u.forEach(()=>{l.push({bottom:c})})})}return l});return i({spaces:r,verticalSpaces:o}),()=>{const{tag:a,wrap:l,align:c,justify:u}=n;return x(a,{class:$A({[`align-${c}`]:c,[`justify-${u}`]:u,nowrap:!l})},{default:()=>{var d;return[(d=t.default)==null?void 0:d.call(t)]}})}}});const[NA,DA]=W("col"),BA={tag:Q("div"),span:ut(0),offset:Y};var LA=U({name:NA,props:BA,setup(n,{slots:t}){const{parent:e,index:i}=Xe(ay),s=F(()=>{if(!e)return;const{spaces:r,verticalSpaces:o}=e;let a={};if(r&&r.value&&r.value[i.value]){const{left:c,right:u}=r.value[i.value];a={paddingLeft:c?`${c}px`:null,paddingRight:u?`${u}px`:null}}const{bottom:l}=o.value[i.value]||{};return St(a,{marginBottom:l?`${l}px`:null})});return()=>{const{tag:r,span:o,offset:a}=n;return x(r,{style:s.value,class:DA({[o]:o,[`offset-${a}`]:a})},{default:()=>{var l;return[(l=t.default)==null?void 0:l.call(t)]}})}}});const jA=Z(LA),[ly,zA]=W("collapse"),cy=Symbol(ly),VA={border:G,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var FA=U({name:ly,props:VA,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const{linkChildren:i,children:s}=en(cy),r=c=>{t("change",c),t("update:modelValue",c)},o=(c,u)=>{const{accordion:d,modelValue:h}=n;r(d?c===h?"":c:u?h.concat(c):h.filter(f=>f!==c))},a=(c={})=>{if(n.accordion)return;typeof c=="boolean"&&(c={expanded:c});const{expanded:u,skipDisabled:d}=c,f=s.filter(g=>g.disabled&&d?g.expanded.value:u??!g.expanded.value).map(g=>g.itemName.value);r(f)},l=c=>{const{accordion:u,modelValue:d}=n;return u?d===c:d.includes(c)};return Lt({toggleAll:a}),i({toggle:o,isExpanded:l}),()=>{var c;return x("div",{class:[zA(),{[Zc]:n.border}]},[(c=e.default)==null?void 0:c.call(e)])}}});const HA=Z(FA),[GA,vl]=W("collapse-item"),UA=["icon","title","value","label","right-icon"],WA=St({},ru,{name:Y,isLink:G,disabled:Boolean,readonly:Boolean,lazyRender:G});var qA=U({name:GA,props:WA,setup(n,{slots:t}){const e=j(),i=j(),{parent:s,index:r}=Xe(cy);if(!s)return;const o=F(()=>{var m;return(m=n.name)!=null?m:r.value}),a=F(()=>s.isExpanded(o.value)),l=j(a.value),c=qd(()=>l.value||!n.lazyRender),u=()=>{a.value?e.value&&(e.value.style.height=""):l.value=!1};st(a,(m,p)=>{if(p===null)return;m&&(l.value=!0),(m?_t:Ze)(()=>{if(!i.value||!e.value)return;const{offsetHeight:b}=i.value;if(b){const y=`${b}px`;e.value.style.height=m?"0":y,vs(()=>{e.value&&(e.value.style.height=m?y:"0")})}else u()})});const d=(m=!a.value)=>{s.toggle(o.value,m)},h=()=>{!n.disabled&&!n.readonly&&d()},f=()=>{const{border:m,disabled:p,readonly:v}=n,b=Gt(n,Object.keys(ru));return v&&(b.isLink=!1),(p||v)&&(b.clickable=!1),x(oi,Rt({role:"button",class:vl("title",{disabled:p,expanded:a.value,borderless:!m}),"aria-expanded":String(a.value),onClick:h},b),Gt(t,UA))},g=c(()=>{var m;return De(x("div",{ref:e,class:vl("wrapper"),onTransitionend:u},[x("div",{ref:i,class:vl("content")},[(m=t.default)==null?void 0:m.call(t)])]),[[Ve,l.value]])});return Lt({toggle:d,expanded:a,itemName:o}),()=>x("div",{class:[vl({border:r.value&&n.border})]},[f(),g()])}});const YA=Z(qA),XA=Z(dP),[KA,dp,Ju]=W("contact-card"),JA={tel:String,name:String,type:Q("add"),addText:String,editable:G};var ZA=U({name:KA,props:JA,emits:["click"],setup(n,{emit:t}){const e=s=>{n.editable&&t("click",s)},i=()=>n.type==="add"?n.addText||Ju("addContact"):[x("div",null,[`${Ju("name")}${n.name}`]),x("div",null,[`${Ju("tel")}${n.tel}`])];return()=>x(oi,{center:!0,icon:n.type==="edit"?"contact":"add-square",class:dp([n.type]),border:!1,isLink:n.editable,titleClass:dp("title"),onClick:e},{title:i})}});const QA=Z(ZA),[tT,$r,rs]=W("contact-edit"),Gh={tel:"",name:""},eT={isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,showSetDefault:Boolean,setDefaultLabel:String,contactInfo:{type:Object,default:()=>St({},Gh)},telValidator:{type:Function,default:rv}};var nT=U({name:tT,props:eT,emits:["save","delete","changeDefault"],setup(n,{emit:t}){const e=de(St({},Gh,n.contactInfo)),i=()=>{n.isSaving||t("save",e)},s=()=>t("delete",e),r=()=>x("div",{class:$r("buttons")},[x(Qe,{block:!0,round:!0,type:"primary",text:rs("save"),class:$r("button"),loading:n.isSaving,nativeType:"submit"},null),n.isEdit&&x(Qe,{block:!0,round:!0,text:rs("delete"),class:$r("button"),loading:n.isDeleting,onClick:s},null)]),o=()=>x(Qd,{modelValue:e.isDefault,"onUpdate:modelValue":l=>e.isDefault=l,onChange:l=>t("changeDefault",l)},null),a=()=>{if(n.showSetDefault)return x(oi,{title:n.setDefaultLabel,class:$r("switch-cell"),border:!1},{"right-icon":o})};return st(()=>n.contactInfo,l=>St(e,Gh,l)),()=>x(Jd,{class:$r(),onSubmit:i},{default:()=>[x("div",{class:$r("fields")},[x(Bi,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,clearable:!0,label:rs("name"),rules:[{required:!0,message:rs("nameEmpty")}],maxlength:"30",placeholder:rs("name")},null),x(Bi,{modelValue:e.tel,"onUpdate:modelValue":l=>e.tel=l,clearable:!0,type:"tel",label:rs("tel"),rules:[{validator:n.telValidator,message:rs("telInvalid")}],placeholder:rs("tel")},null)]),a(),r()]})}});const iT=Z(nT),[sT,_i,rT]=W("contact-list"),oT={list:Array,addText:String,modelValue:he,defaultTagText:String};var aT=U({name:sT,props:oT,emits:["add","edit","select","update:modelValue"],setup(n,{emit:t}){const e=(i,s)=>{const r=()=>{t("update:modelValue",i.id),t("select",i,s)},o=()=>x(nf,{class:_i("radio"),name:i.id,iconSize:18},null),a=()=>x($t,{name:"edit",class:_i("edit"),onClick:c=>{c.stopPropagation(),t("edit",i,s)}},null),l=()=>{const c=[`${i.name}${i.tel}`];return i.isDefault&&n.defaultTagText&&c.push(x(ou,{type:"primary",round:!0,class:_i("item-tag")},{default:()=>[n.defaultTagText]})),c};return x(oi,{key:i.id,isLink:!0,center:!0,class:_i("item"),titleClass:_i("item-title"),onClick:r},{icon:a,title:l,"right-icon":o})};return()=>x("div",{class:_i()},[x(tf,{modelValue:n.modelValue,class:_i("group")},{default:()=>[n.list&&n.list.map(e)]}),x("div",{class:[_i("bottom"),"van-safe-area-bottom"]},[x(Qe,{round:!0,block:!0,type:"primary",class:_i("add"),text:n.addText||rT("addContact"),onClick:()=>t("add")},null)])])}});const lT=Z(aT);function cT(n,t){const{days:e}=t;let{hours:i,minutes:s,seconds:r,milliseconds:o}=t;if(n.includes("DD")?n=n.replace("DD",Wn(e)):i+=e*24,n.includes("HH")?n=n.replace("HH",Wn(i)):s+=i*60,n.includes("mm")?n=n.replace("mm",Wn(s)):r+=s*60,n.includes("ss")?n=n.replace("ss",Wn(r)):o+=r*1e3,n.includes("S")){const a=Wn(o,3);n.includes("SSS")?n=n.replace("SSS",a):n.includes("SS")?n=n.replace("SS",a.slice(0,2)):n=n.replace("S",a.charAt(0))}return n}const[uT,hT]=W("count-down"),dT={time:ut(0),format:Q("HH:mm:ss"),autoStart:G,millisecond:Boolean};var fT=U({name:uT,props:dT,emits:["change","finish"],setup(n,{emit:t,slots:e}){const{start:i,pause:s,reset:r,current:o}=IS({time:+n.time,millisecond:n.millisecond,onChange:c=>t("change",c),onFinish:()=>t("finish")}),a=F(()=>cT(n.format,o.value)),l=()=>{r(+n.time),n.autoStart&&i()};return st(()=>n.time,l,{immediate:!0}),Lt({start:i,pause:s,reset:l}),()=>x("div",{role:"timer",class:hT()},[e.default?e.default(o.value):a.value])}});const gT=Z(fT);function fp(n){const t=new Date(n*1e3);return`${t.getFullYear()}.${Wn(t.getMonth()+1)}.${Wn(t.getDate())}`}const pT=n=>(n/10).toFixed(n%10===0?0:1),gp=n=>(n/100).toFixed(n%100===0?0:n%10===0?1:2),[mT,di,Zu]=W("coupon");var bT=U({name:mT,props:{chosen:Boolean,coupon:Me(Object),disabled:Boolean,currency:Q("")},setup(n){const t=F(()=>{const{startAt:s,endAt:r}=n.coupon;return`${fp(s)} - ${fp(r)}`}),e=F(()=>{const{coupon:s,currency:r}=n;if(s.valueDesc)return[s.valueDesc,x("span",null,[s.unitDesc||""])];if(s.denominations){const o=gp(s.denominations);return[x("span",null,[r]),` ${o}`]}return s.discount?Zu("discount",pT(s.discount)):""}),i=F(()=>{const s=gp(n.coupon.originCondition||0);return s==="0"?Zu("unlimited"):Zu("condition",s)});return()=>{const{chosen:s,coupon:r,disabled:o}=n,a=o&&r.reason||r.description;return x("div",{class:di({disabled:o})},[x("div",{class:di("content")},[x("div",{class:di("head")},[x("h2",{class:di("amount")},[e.value]),x("p",{class:di("condition")},[r.condition||i.value])]),x("div",{class:di("body")},[x("p",{class:di("name")},[r.name]),x("p",{class:di("valid")},[t.value]),!o&&x(ry,{class:di("corner"),modelValue:s},null)])]),a&&x("p",{class:di("description")},[a])])}}});const Uh=Z(bT),[vT,pp,Wh]=W("coupon-cell"),yT={title:String,border:G,editable:G,coupons:ce(),currency:Q(""),chosenCoupon:ut(-1)};function xT({coupons:n,chosenCoupon:t,currency:e}){const i=n[+t];if(i){let s=0;return jt(i.value)?{value:s}=i:jt(i.denominations)&&(s=i.denominations),`-${e} ${(s/100).toFixed(2)}`}return n.length===0?Wh("noCoupon"):Wh("count",n.length)}var wT=U({name:vT,props:yT,setup(n){return()=>{const t=n.coupons[+n.chosenCoupon];return x(oi,{class:pp(),value:xT(n),title:n.title||Wh("title"),border:n.border,isLink:n.editable,valueClass:pp("value",{selected:t})},null)}}});const CT=Z(wT),[ST,yl]=W("empty"),PT={image:Q("default"),imageSize:[Number,String,Array],description:String};var ET=U({name:ST,props:PT,setup(n,{slots:t}){const e=()=>{const v=t.description?t.description():n.description;if(v)return x("p",{class:yl("description")},[v])},i=()=>{if(t.default)return x("div",{class:yl("bottom")},[t.default()])},s=_o(),r=v=>`${s}-${v}`,o=v=>`url(#${r(v)})`,a=(v,b,y)=>x("stop",{"stop-color":v,offset:`${b}%`,"stop-opacity":y},null),l=(v,b)=>[a(v,0),a(b,100)],c=v=>[x("defs",null,[x("radialGradient",{id:r(v),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)"},[a("#EBEDF0",0),a("#F2F3F5",100,.3)])]),x("ellipse",{fill:o(v),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8"},null)],u=()=>[x("defs",null,[x("linearGradient",{id:r("a"),x1:"64%",y1:"100%",x2:"64%"},[a("#FFF",0,.5),a("#F2F3F5",100)])]),x("g",{opacity:".8"},[x("path",{d:"M36 131V53H16v20H2v58h34z",fill:o("a")},null),x("path",{d:"M123 15h22v14h9v77h-31V15z",fill:o("a")},null)])],d=()=>[x("defs",null,[x("linearGradient",{id:r("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%"},[a("#F2F3F5",0,.3),a("#F2F3F5",100)])]),x("g",{opacity:".8"},[x("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:o("b")},null),x("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:o("b")},null)])],h=()=>x("svg",{viewBox:"0 0 160 160"},[x("defs",null,[x("linearGradient",{id:r(1),x1:"64%",y1:"100%",x2:"64%"},[a("#FFF",0,.5),a("#F2F3F5",100)]),x("linearGradient",{id:r(2),x1:"50%",x2:"50%",y2:"84%"},[a("#EBEDF0",0),a("#DCDEE0",100,0)]),x("linearGradient",{id:r(3),x1:"100%",x2:"100%",y2:"100%"},[l("#EAEDF0","#DCDEE0")]),x("radialGradient",{id:r(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[a("#EBEDF0",0),a("#FFF",100,0)])]),x("g",{fill:"none"},[u(),x("path",{fill:o(4),d:"M0 139h160v21H0z"},null),x("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:o(2)},null),x("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[x("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:o(3)},null),x("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:o(3)},null),x("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:o(3)},null),x("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:o(3)},null)]),x("g",{transform:"translate(31 105)"},[x("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),x("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),x("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),f=()=>x("svg",{viewBox:"0 0 160 160"},[x("defs",null,[x("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(5)},[l("#F2F3F5","#DCDEE0")]),x("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:r(6)},[l("#EAEDF1","#DCDEE0")]),x("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:r(7)},[l("#EAEDF1","#DCDEE0")])]),u(),d(),x("g",{transform:"translate(36 50)",fill:"none"},[x("g",{transform:"translate(8)"},[x("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),x("rect",{fill:o(5),width:"64",height:"66",rx:"2"},null),x("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),x("g",{transform:"translate(15 17)",fill:o(6)},[x("rect",{width:"34",height:"6",rx:"1"},null),x("path",{d:"M0 14h34v6H0z"},null),x("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),x("rect",{fill:o(7),y:"61",width:"88",height:"28",rx:"1"},null),x("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),g=()=>x("svg",{viewBox:"0 0 160 160"},[x("defs",null,[x("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(8)},[l("#EAEDF1","#DCDEE0")])]),u(),d(),c("c"),x("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:o(8)},null)]),m=()=>x("svg",{viewBox:"0 0 160 160"},[x("defs",null,[x("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:r(9)},[l("#EEE","#D8D8D8")]),x("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:r(10)},[l("#F2F3F5","#DCDEE0")]),x("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(11)},[l("#F2F3F5","#DCDEE0")]),x("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:r(12)},[l("#FFF","#F7F8FA")])]),u(),d(),c("d"),x("g",{transform:"rotate(-45 113 -4)",fill:"none"},[x("rect",{fill:o(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),x("rect",{fill:o(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),x("circle",{stroke:o(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),x("circle",{fill:o(12),cx:"27",cy:"27",r:"16"},null),x("path",{d:"M37 7c-8 0-15 5-16 12",stroke:o(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),p=()=>{var v;if(t.image)return t.image();const b={error:g,search:m,network:h,default:f};return((v=b[n.image])==null?void 0:v.call(b))||x("img",{src:n.image},null)};return()=>x("div",{class:yl()},[x("div",{class:yl("image"),style:Xi(n.imageSize)},[p()]),e(),i()])}});const uy=Z(ET),[OT,fi,Ir]=W("coupon-list"),AT={code:Q(""),coupons:ce(),currency:Q(""),showCount:G,emptyImage:String,chosenCoupon:Ee(-1),enabledTitle:String,disabledTitle:String,disabledCoupons:ce(),showExchangeBar:G,showCloseButton:G,closeButtonText:String,inputPlaceholder:String,exchangeMinLength:Ee(1),exchangeButtonText:String,displayedCouponIndex:Ee(-1),exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean};var TT=U({name:OT,props:AT,emits:["change","exchange","update:code"],setup(n,{emit:t,slots:e}){const[i,s]=Wa(),r=j(),o=j(),a=j(0),l=j(0),c=j(n.code),u=F(()=>!n.exchangeButtonLoading&&(n.exchangeButtonDisabled||!c.value||c.value.length<n.exchangeMinLength)),d=()=>{const y=Xt(r).height,w=Xt(o).height+44;l.value=(y>w?y:Rn.value)-w},h=()=>{t("exchange",c.value),n.code||(c.value="")},f=b=>{_t(()=>{var y;return(y=i.value[b])==null?void 0:y.scrollIntoView()})},g=()=>x(uy,{image:n.emptyImage},{default:()=>[x("p",{class:fi("empty-tip")},[Ir("noCoupon")])]}),m=()=>{if(n.showExchangeBar)return x("div",{ref:o,class:fi("exchange-bar")},[x(Bi,{modelValue:c.value,"onUpdate:modelValue":b=>c.value=b,clearable:!0,border:!1,class:fi("field"),placeholder:n.inputPlaceholder||Ir("placeholder"),maxlength:"20"},null),x(Qe,{plain:!0,type:"primary",class:fi("exchange"),text:n.exchangeButtonText||Ir("exchange"),loading:n.exchangeButtonLoading,disabled:u.value,onClick:h},null)])},p=()=>{const{coupons:b}=n,y=n.showCount?` (${b.length})`:"",w=(n.enabledTitle||Ir("enable"))+y;return x(Oa,{title:w},{default:()=>{var C;return[x("div",{class:fi("list",{"with-bottom":n.showCloseButton}),style:{height:`${l.value}px`}},[b.map((P,E)=>x(Uh,{key:P.id,ref:s(E),coupon:P,chosen:E===n.chosenCoupon,currency:n.currency,onClick:()=>t("change",E)},null)),!b.length&&g(),(C=e["list-footer"])==null?void 0:C.call(e)])]}})},v=()=>{const{disabledCoupons:b}=n,y=n.showCount?` (${b.length})`:"",w=(n.disabledTitle||Ir("disabled"))+y;return x(Oa,{title:w},{default:()=>{var C;return[x("div",{class:fi("list",{"with-bottom":n.showCloseButton}),style:{height:`${l.value}px`}},[b.map(P=>x(Uh,{disabled:!0,key:P.id,coupon:P,currency:n.currency},null)),!b.length&&g(),(C=e["disabled-list-footer"])==null?void 0:C.call(e)])]}})};return st(()=>n.code,b=>{c.value=b}),st(Rn,d),st(c,b=>t("update:code",b)),st(()=>n.displayedCouponIndex,f),be(()=>{d(),f(n.displayedCouponIndex)}),()=>x("div",{ref:r,class:fi()},[m(),x(nu,{active:a.value,"onUpdate:active":b=>a.value=b,class:fi("tab")},{default:()=>[p(),v()]}),x("div",{class:fi("bottom")},[De(x(Qe,{round:!0,block:!0,type:"primary",class:fi("close"),text:n.closeButtonText||Ir("close"),onClick:()=>t("change",-1)},null),[[Ve,n.showCloseButton]])])])}});const MT=Z(TT),mp=new Date().getFullYear(),[kT]=W("date-picker"),_T=St({},Qv,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(mp-10,0,1),validator:Ea},maxDate:{type:Date,default:()=>new Date(mp+10,11,31),validator:Ea}});var $T=U({name:kT,props:_T,emits:["confirm","cancel","change","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(n.modelValue),s=j(!1),r=()=>{const v=n.minDate.getFullYear(),b=n.maxDate.getFullYear();return Ur(v,b,"year",n.formatter,n.filter)},o=v=>v===n.minDate.getFullYear(),a=v=>v===n.maxDate.getFullYear(),l=v=>v===n.minDate.getMonth()+1,c=v=>v===n.maxDate.getMonth()+1,u=v=>{const{minDate:b,columnsType:y}=n,w=y.indexOf(v),C=s.value?n.modelValue[w]:i.value[w];if(C)return+C;switch(v){case"year":return b.getFullYear();case"month":return b.getMonth()+1;case"day":return b.getDate()}},d=()=>{const v=u("year"),b=o(v)?n.minDate.getMonth()+1:1,y=a(v)?n.maxDate.getMonth()+1:12;return Ur(b,y,"month",n.formatter,n.filter)},h=()=>{const v=u("year"),b=u("month"),y=o(v)&&l(b)?n.minDate.getDate():1,w=a(v)&&c(b)?n.maxDate.getDate():ey(v,b);return Ur(y,w,"day",n.formatter,n.filter)},f=F(()=>n.columnsType.map(v=>{switch(v){case"year":return r();case"month":return d();case"day":return h();default:return[]}}));st(i,v=>{bi(v,n.modelValue)||t("update:modelValue",v)}),st(()=>n.modelValue,(v,b)=>{s.value=bi(b,i.value),v=ny(v,f.value),bi(v,i.value)||(i.value=v),s.value=!1},{immediate:!0});const g=(...v)=>t("change",...v),m=(...v)=>t("cancel",...v),p=(...v)=>t("confirm",...v);return()=>x(su,Rt({modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,columns:f.value,onChange:g,onCancel:m,onConfirm:p},Gt(n,ty)),e)}});const IT=Z($T),[RT,Fn,xl]=W("dialog"),NT=St({},ko,{title:String,theme:String,width:Y,message:[String,Function],callback:Function,allowHtml:Boolean,className:he,transition:Q("van-dialog-bounce"),messageAlign:String,closeOnPopstate:G,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:G,closeOnClickOverlay:Boolean}),DT=[...Wd,"transition","closeOnPopstate"];var BT=U({name:RT,props:NT,emits:["confirm","cancel","keydown","update:show"],setup(n,{emit:t,slots:e}){const i=j(),s=de({confirm:!1,cancel:!1}),r=v=>t("update:show",v),o=v=>{var b;r(!1),(b=n.callback)==null||b.call(n,v)},a=v=>()=>{n.show&&(t(v),n.beforeClose?(s[v]=!0,Ns(n.beforeClose,{args:[v],done(){o(v),s[v]=!1},canceled(){s[v]=!1}})):o(v))},l=a("cancel"),c=a("confirm"),u=pS(v=>{var b,y;if(v.target!==((y=(b=i.value)==null?void 0:b.popupRef)==null?void 0:y.value))return;({Enter:n.showConfirmButton?c:Ih,Escape:n.showCancelButton?l:Ih})[v.key](),t("keydown",v)},["enter","esc"]),d=()=>{const v=e.title?e.title():n.title;if(v)return x("div",{class:Fn("header",{isolated:!n.message&&!e.default})},[v])},h=v=>{const{message:b,allowHtml:y,messageAlign:w}=n,C=Fn("message",{"has-title":v,[w]:w}),P=Kr(b)?b():b;return y&&typeof P=="string"?x("div",{class:C,innerHTML:P},null):x("div",{class:C},[P])},f=()=>{if(e.default)return x("div",{class:Fn("content")},[e.default()]);const{title:v,message:b,allowHtml:y}=n;if(b){const w=!!(v||e.title);return x("div",{key:y?1:0,class:Fn("content",{isolated:!w})},[h(w)])}},g=()=>x("div",{class:[gv,Fn("footer")]},[n.showCancelButton&&x(Qe,{size:"large",text:n.cancelButtonText||xl("cancel"),class:Fn("cancel"),style:{color:n.cancelButtonColor},loading:s.cancel,disabled:n.cancelButtonDisabled,onClick:l},null),n.showConfirmButton&&x(Qe,{size:"large",text:n.confirmButtonText||xl("confirm"),class:[Fn("confirm"),{[pv]:n.showCancelButton}],style:{color:n.confirmButtonColor},loading:s.confirm,disabled:n.confirmButtonDisabled,onClick:c},null)]),m=()=>x(wv,{class:Fn("footer")},{default:()=>[n.showCancelButton&&x(jh,{type:"warning",text:n.cancelButtonText||xl("cancel"),class:Fn("cancel"),color:n.cancelButtonColor,loading:s.cancel,disabled:n.cancelButtonDisabled,onClick:l},null),n.showConfirmButton&&x(jh,{type:"danger",text:n.confirmButtonText||xl("confirm"),class:Fn("confirm"),color:n.confirmButtonColor,loading:s.confirm,disabled:n.confirmButtonDisabled,onClick:c},null)]}),p=()=>e.footer?e.footer():n.theme==="round-button"?m():g();return()=>{const{width:v,title:b,theme:y,message:w,className:C}=n;return x(ri,Rt({ref:i,role:"dialog",class:[Fn([y]),C],style:{width:Mt(v)},tabindex:0,"aria-labelledby":b||w,onKeydown:u,"onUpdate:show":r},Gt(n,DT)),{default:()=>[d(),f(),p()]})}}});const LT=Z(BT),[jT,zT]=W("divider"),VT={dashed:Boolean,hairline:G,vertical:Boolean,contentPosition:Q("center")};var FT=U({name:jT,props:VT,setup(n,{slots:t}){return()=>{var e;return x("div",{role:"separator",class:zT({dashed:n.dashed,hairline:n.hairline,vertical:n.vertical,[`content-${n.contentPosition}`]:!!t.default&&!n.vertical})},[!n.vertical&&((e=t.default)==null?void 0:e.call(t))])}}});const HT=Z(FT),[hy,wl]=W("dropdown-menu"),GT={overlay:G,zIndex:Y,duration:ut(.2),direction:Q("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:G,closeOnClickOverlay:G,swipeThreshold:Y},dy=Symbol(hy);var UT=U({name:hy,props:GT,setup(n,{slots:t}){const e=_o(),i=j(),s=j(),r=j(0),{children:o,linkChildren:a}=en(dy),l=Mo(i),c=F(()=>o.some(b=>b.state.showWrapper)),u=F(()=>n.swipeThreshold&&o.length>+n.swipeThreshold),d=F(()=>{if(c.value&&jt(n.zIndex))return{zIndex:+n.zIndex+1}}),h=()=>{o.forEach(b=>{b.toggle(!1)})},f=()=>{n.closeOnClickOutside&&h()},g=()=>{if(s.value){const b=Xt(s);n.direction==="down"?r.value=b.bottom:r.value=Rn.value-b.top}},m=()=>{c.value&&g()},p=b=>{o.forEach((y,w)=>{w===b?y.toggle():y.state.showPopup&&y.toggle(!1,{immediate:!0})})},v=(b,y)=>{const{showPopup:w}=b.state,{disabled:C,titleClass:P}=b;return x("div",{id:`${e}-${y}`,role:"button",tabindex:C?void 0:0,class:[wl("item",{disabled:C,grow:u.value}),{[pn]:!C}],onClick:()=>{C||p(y)}},[x("span",{class:[wl("title",{down:w===(n.direction==="down"),active:w}),P],style:{color:w?n.activeColor:""}},[x("div",{class:"van-ellipsis"},[b.renderTitle()])])])};return Lt({close:h}),a({id:e,props:n,offset:r,updateOffset:g}),Kc(i,f),Se("scroll",m,{target:l,passive:!0}),()=>{var b;return x("div",{ref:i,class:wl()},[x("div",{ref:s,style:d.value,class:wl("bar",{opened:c.value,scrollable:u.value})},[o.map(v)]),(b=t.default)==null?void 0:b.call(t)])}}});const[WT,Cl]=W("dropdown-item"),qT={title:String,options:ce(),disabled:Boolean,teleport:[String,Object],lazyRender:G,modelValue:he,titleClass:he};var YT=U({name:WT,inheritAttrs:!1,props:qT,emits:["open","opened","close","closed","change","update:modelValue"],setup(n,{emit:t,slots:e,attrs:i}){const s=de({showPopup:!1,transition:!0,showWrapper:!1}),r=j(),{parent:o,index:a}=Xe(dy);if(!o)return;const l=b=>()=>t(b),c=l("open"),u=l("close"),d=l("opened"),h=()=>{s.showWrapper=!1,t("closed")},f=b=>{n.teleport&&b.stopPropagation()},g=(b=!s.showPopup,y={})=>{b!==s.showPopup&&(s.showPopup=b,s.transition=!y.immediate,b&&(o.updateOffset(),s.showWrapper=!0))},m=()=>{if(e.title)return e.title();if(n.title)return n.title;const b=n.options.find(y=>y.value===n.modelValue);return b?b.text:""},p=b=>{const{activeColor:y}=o.props,w=b.value===n.modelValue,C=()=>{s.showPopup=!1,b.value!==n.modelValue&&(t("update:modelValue",b.value),t("change",b.value))},P=()=>{if(w)return x($t,{class:Cl("icon"),color:y,name:"success"},null)};return x(oi,{role:"menuitem",key:String(b.value),icon:b.icon,title:b.text,class:Cl("option",{active:w}),style:{color:w?y:""},tabindex:w?0:-1,clickable:!0,onClick:C},{value:P})},v=()=>{const{offset:b}=o,{autoLocate:y,zIndex:w,overlay:C,duration:P,direction:E,closeOnClickOverlay:S}=o.props,A=Ki(w);let M=b.value;if(y&&r.value){const O=zS(r.value);O&&(M-=Xt(O).top)}return E==="down"?A.top=`${M}px`:A.bottom=`${M}px`,De(x("div",Rt({ref:r,style:A,class:Cl([E]),onClick:f},i),[x(ri,{show:s.showPopup,"onUpdate:show":O=>s.showPopup=O,role:"menu",class:Cl("content"),overlay:C,position:E==="down"?"top":"bottom",duration:s.transition?P:0,lazyRender:n.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${o.id}-${a.value}`,closeOnClickOverlay:S,onOpen:c,onClose:u,onOpened:d,onClosed:h},{default:()=>{var O;return[n.options.map(p),(O=e.default)==null?void 0:O.call(e)]}})]),[[Ve,s.showWrapper]])};return Lt({state:s,toggle:g,renderTitle:m}),()=>n.teleport?x(mr,{to:n.teleport},{default:()=>[v()]}):v()}});const XT=Z(YT),KT=Z(UT),JT={gap:Ee(24),icon:String,axis:Q("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[ZT,bp]=W("floating-bubble");var QT=U({name:ZT,inheritAttrs:!1,props:JT,emits:["click","update:offset","offsetChange"],setup(n,{slots:t,emit:e,attrs:i}){const s=j(),r=j({x:0,y:0,width:0,height:0}),o=F(()=>({top:n.gap,right:Kn.value-r.value.width-n.gap,bottom:Rn.value-r.value.height-n.gap,left:n.gap})),a=j(!1);let l=!1;const c=F(()=>{const y={},w=Mt(r.value.x),C=Mt(r.value.y);return y.transform=`translate3d(${w}, ${C}, 0)`,(a.value||!l)&&(y.transition="none"),y}),u=()=>{if(!b.value)return;const{width:y,height:w}=Xt(s.value),{offset:C}=n;r.value={x:C.x>-1?C.x:Kn.value-y-n.gap,y:C.y>-1?C.y:Rn.value-w-n.gap,width:y,height:w}},d=jn();let h=0,f=0;const g=y=>{d.start(y),a.value=!0,h=r.value.x,f=r.value.y};Se("touchmove",y=>{if(y.preventDefault(),d.move(y),n.axis!=="lock"&&!d.isTap.value){if(n.axis==="x"||n.axis==="xy"){let C=h+d.deltaX.value;C<o.value.left&&(C=o.value.left),C>o.value.right&&(C=o.value.right),r.value.x=C}if(n.axis==="y"||n.axis==="xy"){let C=f+d.deltaY.value;C<o.value.top&&(C=o.value.top),C>o.value.bottom&&(C=o.value.bottom),r.value.y=C}const w=Gt(r.value,["x","y"]);e("update:offset",w)}},{target:s});const p=()=>{a.value=!1,_t(()=>{if(n.magnetic==="x"){const y=rc([o.value.left,o.value.right],r.value.x);r.value.x=y}if(n.magnetic==="y"){const y=rc([o.value.top,o.value.bottom],r.value.y);r.value.y=y}if(!d.isTap.value){const y=Gt(r.value,["x","y"]);e("update:offset",y),(h!==y.x||f!==y.y)&&e("offsetChange",y)}})},v=y=>{d.isTap.value?e("click",y):y.stopPropagation()};be(()=>{u(),_t(()=>{l=!0})}),st([Kn,Rn,()=>n.gap,()=>n.offset],u,{deep:!0});const b=j(!0);return Ei(()=>{b.value=!0}),Oi(()=>{n.teleport&&(b.value=!1)}),()=>{const y=De(x("div",Rt({class:bp(),ref:s,onTouchstartPassive:g,onTouchend:p,onTouchcancel:p,onClickCapture:v,style:c.value},i),[t.default?t.default():x(bP,{name:n.icon,class:bp("icon")},null)]),[[Ve,b.value]]);return n.teleport?x(mr,{to:n.teleport},{default:()=>[y]}):y}}});const tM=Z(QT),eM={height:ut(0),anchors:ce(),duration:ut(.3),contentDraggable:G,lockScroll:Boolean,safeAreaInsetBottom:G},[nM,Sl]=W("floating-panel");var iM=U({name:nM,props:eM,emits:["heightChange","update:height"],setup(n,{emit:t,slots:e}){const s=j(),r=j(),o=Yd(()=>+n.height,b=>t("update:height",b)),a=F(()=>{var b,y;return{min:(b=n.anchors[0])!=null?b:100,max:(y=n.anchors[n.anchors.length-1])!=null?y:Math.round(Rn.value*.6)}}),l=F(()=>n.anchors.length>=2?n.anchors:[a.value.min,a.value.max]),c=j(!1),u=F(()=>({height:Mt(a.value.max),transform:`translateY(calc(100% + ${Mt(-o.value)}))`,transition:c.value?"none":`transform ${n.duration}s cubic-bezier(0.18, 0.89, 0.32, 1.28)`})),d=b=>{const y=Math.abs(b),{min:w,max:C}=a.value;return y>C?-(C+(y-C)*.2):y<w?-(w-(w-y)*.2):b};let h,f=-1;const g=jn(),m=b=>{g.start(b),c.value=!0,h=-o.value,f=-1},p=b=>{var y;g.move(b);const w=b.target;if(r.value===w||(y=r.value)!=null&&y.contains(w)){const{scrollTop:P}=r.value;if(f=Math.max(f,P),!n.contentDraggable)return;if(-h<a.value.max)ie(b,!0);else if(!(P<=0&&g.deltaY.value>0)||f>0)return}const C=g.deltaY.value+h;o.value=-d(C)},v=()=>{f=-1,c.value=!1,o.value=rc(l.value,o.value),o.value!==-h&&t("heightChange",{height:o.value})};return st(a,()=>{o.value=rc(l.value,o.value)},{immediate:!0}),Ov(s,()=>n.lockScroll||c.value),Se("touchmove",p,{target:s}),()=>{var b;return x("div",{class:[Sl(),{"van-safe-area-bottom":n.safeAreaInsetBottom}],ref:s,style:u.value,onTouchstartPassive:m,onTouchend:v,onTouchcancel:v},[x("div",{class:Sl("header")},[x("div",{class:Sl("header-bar")},null)]),x("div",{class:Sl("content"),ref:r},[(b=e.default)==null?void 0:b.call(e)])])}}});const sM=Z(iM),[fy,rM]=W("grid"),oM={square:Boolean,center:G,border:G,gutter:Y,reverse:Boolean,iconSize:Y,direction:String,clickable:Boolean,columnNum:ut(4)},gy=Symbol(fy);var aM=U({name:fy,props:oM,setup(n,{slots:t}){const{linkChildren:e}=en(gy);return e({props:n}),()=>{var i;return x("div",{style:{paddingLeft:Mt(n.gutter)},class:[rM(),{[gv]:n.border&&!n.gutter}]},[(i=t.default)==null?void 0:i.call(t)])}}});const lM=Z(aM),[cM,Pl]=W("grid-item"),uM=St({},Ds,{dot:Boolean,text:String,icon:String,badge:Y,iconColor:String,iconPrefix:String,badgeProps:Object});var hM=U({name:cM,props:uM,setup(n,{slots:t}){const{parent:e,index:i}=Xe(gy),s=vr();if(!e)return;const r=F(()=>{const{square:u,gutter:d,columnNum:h}=e.props,f=`${100/+h}%`,g={flexBasis:f};if(u)g.paddingTop=f;else if(d){const m=Mt(d);g.paddingRight=m,i.value>=+h&&(g.marginTop=m)}return g}),o=F(()=>{const{square:u,gutter:d}=e.props;if(u&&d){const h=Mt(d);return{right:h,bottom:h,height:"auto"}}}),a=()=>{if(t.icon)return x(yr,Rt({dot:n.dot,content:n.badge},n.badgeProps),{default:t.icon});if(n.icon)return x($t,{dot:n.dot,name:n.icon,size:e.props.iconSize,badge:n.badge,class:Pl("icon"),color:n.iconColor,badgeProps:n.badgeProps,classPrefix:n.iconPrefix},null)},l=()=>{if(t.text)return t.text();if(n.text)return x("span",{class:Pl("text")},[n.text])},c=()=>t.default?t.default():[a(),l()];return()=>{const{center:u,border:d,square:h,gutter:f,reverse:g,direction:m,clickable:p}=e.props,v=[Pl("content",[m,{center:u,square:h,reverse:g,clickable:p,surround:d&&f}]),{[Ji]:d}];return x("div",{class:[Pl({square:h})],style:r.value},[x("div",{role:p?"button":void 0,class:v,style:o.value,tabindex:p?0:void 0,onClick:s},[c()])])}}});const dM=Z(hM),[fM,vp]=W("highlight"),gM={autoEscape:G,caseSensitive:Boolean,highlightClass:String,highlightTag:Q("span"),keywords:Me([String,Array]),sourceString:Q(""),tag:Q("div"),unhighlightClass:String,unhighlightTag:Q("span")};var pM=U({name:fM,props:gM,setup(n){const t=F(()=>{const{autoEscape:i,caseSensitive:s,keywords:r,sourceString:o}=n,a=s?"g":"gi";let c=(Array.isArray(r)?r:[r]).filter(d=>d).reduce((d,h)=>{i&&(h=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));const f=new RegExp(h,a);let g;for(;g=f.exec(o);){const m=g.index,p=f.lastIndex;if(m>=p){f.lastIndex++;continue}d.push({start:m,end:p,highlight:!0})}return d},[]);c=c.sort((d,h)=>d.start-h.start).reduce((d,h)=>{const f=d[d.length-1];if(!f||h.start>f.end){const g=f?f.end:0,m=h.start;g!==m&&d.push({start:g,end:m,highlight:!1}),d.push(h)}else f.end=Math.max(f.end,h.end);return d},[]);const u=c[c.length-1];return u&&u.end<o.length&&c.push({start:u.end,end:o.length,highlight:!1}),c}),e=()=>{const{sourceString:i,highlightClass:s,unhighlightClass:r,highlightTag:o,unhighlightTag:a}=n;return t.value.map(l=>{const{start:c,end:u,highlight:d}=l,h=i.slice(c,u);return d?x(o,{class:[vp("tag"),s]},{default:()=>[h]}):x(a,{class:r},{default:()=>[h]})})};return()=>{const{tag:i}=n;return x(i,{class:vp()},{default:()=>[e()]})}}});const mM=Z(pM),yp=n=>Math.sqrt((n[0].clientX-n[1].clientX)**2+(n[0].clientY-n[1].clientY)**2),bM=n=>({x:(n[0].clientX+n[1].clientX)/2,y:(n[0].clientY+n[1].clientY)/2}),Qu=W("image-preview")[1],xp=2.6,vM={src:String,show:Boolean,active:Number,minZoom:Me(Y),maxZoom:Me(Y),rootWidth:Me(Number),rootHeight:Me(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var yM=U({props:vM,emits:["scale","close","longPress"],setup(n,{emit:t,slots:e}){const i=de({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),s=jn(),r=j(),o=j(),a=j(!1),l=j(!1);let c=0;const u=F(()=>{const{scale:_,moveX:D,moveY:V,moving:it,zooming:at,initializing:z}=i,q={transitionDuration:at||it||z?"0s":".3s"};return(_!==1||l.value)&&(q.transform=`matrix(${_}, 0, 0, ${_}, ${D}, ${V})`),q}),d=F(()=>{if(i.imageRatio){const{rootWidth:_,rootHeight:D}=n,V=a.value?D/i.imageRatio:_;return Math.max(0,(i.scale*V-_)/2)}return 0}),h=F(()=>{if(i.imageRatio){const{rootWidth:_,rootHeight:D}=n,V=a.value?D:_*i.imageRatio;return Math.max(0,(i.scale*V-D)/2)}return 0}),f=(_,D)=>{var V;if(_=Ue(_,+n.minZoom,+n.maxZoom+1),_!==i.scale){const it=_/i.scale;if(i.scale=_,D){const at=Xt((V=r.value)==null?void 0:V.$el),z={x:at.width*.5,y:at.height*.5},q=i.moveX-(D.x-at.left-z.x)*(it-1),lt=i.moveY-(D.y-at.top-z.y)*(it-1);i.moveX=Ue(q,-d.value,d.value),i.moveY=Ue(lt,-h.value,h.value)}else i.moveX=0,i.moveY=l.value?c:0;t("scale",{scale:_,index:n.active})}},g=()=>{f(1)},m=()=>{const _=i.scale>1?1:2;f(_,_===2||l.value?{x:s.startX.value,y:s.startY.value}:void 0)};let p,v,b,y,w,C,P,E,S=!1;const A=_=>{const{touches:D}=_;if(p=D.length,p===2&&n.disableZoom)return;const{offsetX:V}=s;s.start(_),v=i.moveX,b=i.moveY,E=Date.now(),S=!1,i.moving=p===1&&(i.scale!==1||l.value),i.zooming=p===2&&!V.value,i.zooming&&(y=i.scale,w=yp(D))},M=_=>{const{touches:D}=_;if(s.move(_),i.moving){const{deltaX:V,deltaY:it}=s,at=V.value+v,z=it.value+b;if((n.vertical?s.isVertical()&&Math.abs(z)>h.value:s.isHorizontal()&&Math.abs(at)>d.value)&&!S){i.moving=!1;return}S=!0,ie(_,!0),i.moveX=Ue(at,-d.value,d.value),i.moveY=Ue(z,-h.value,h.value)}if(i.zooming&&(ie(_,!0),D.length===2)){const V=yp(D),it=y*V/w;C=bM(D),f(it,C)}},O=_=>{var D;const V=(D=o.value)==null?void 0:D.$el,it=V.firstElementChild,at=_.target===V,z=it==null?void 0:it.contains(_.target);!n.closeOnClickImage&&z||!n.closeOnClickOverlay&&at||t("close")},T=_=>{if(p>1)return;const D=Date.now()-E,V=250;s.isTap.value&&(D<V?n.doubleScale?P?(clearTimeout(P),P=null,m()):P=setTimeout(()=>{O(_),P=null},V):O(_):D>bv&&t("longPress"))},R=_=>{let D=!1;if((i.moving||i.zooming)&&(D=!0,i.moving&&v===i.moveX&&b===i.moveY&&(D=!1),!_.touches.length)){i.zooming&&(i.moveX=Ue(i.moveX,-d.value,d.value),i.moveY=Ue(i.moveY,-h.value,h.value),i.zooming=!1),i.moving=!1,v=0,b=0,y=1,i.scale<1&&g();const V=+n.maxZoom;i.scale>V&&f(V,C)}ie(_,D),T(_),s.reset()},L=()=>{const{rootWidth:_,rootHeight:D}=n,V=D/_,{imageRatio:it}=i;a.value=i.imageRatio>V&&it<xp,l.value=i.imageRatio>V&&it>=xp,l.value&&(c=(it*_-D)/2,i.moveY=c,i.initializing=!0,Ze(()=>{i.initializing=!1})),g()},k=_=>{const{naturalWidth:D,naturalHeight:V}=_.target;i.imageRatio=V/D,L()};return st(()=>n.active,g),st(()=>n.show,_=>{_||g()}),st(()=>[n.rootWidth,n.rootHeight],L),Se("touchmove",M,{target:F(()=>{var _;return(_=o.value)==null?void 0:_.$el})}),Lt({resetScale:g}),()=>{const _={loading:()=>x(si,{type:"spinner"},null)};return x(Kd,{ref:o,class:Qu("swipe-item"),onTouchstartPassive:A,onTouchend:R,onTouchcancel:R},{default:()=>[e.image?x("div",{class:Qu("image-wrap")},[e.image({src:n.src,onLoad:k,style:u.value})]):x(au,{ref:r,src:n.src,fit:"contain",class:Qu("image",{vertical:a.value}),style:u.value,onLoad:k},_)]})}}});const[xM,Rr]=W("image-preview"),wM=["show","teleport","transition","overlayStyle","closeOnPopstate"],CM={show:Boolean,loop:G,images:ce(),minZoom:ut(1/3),maxZoom:ut(3),overlay:G,vertical:Boolean,closeable:Boolean,showIndex:G,className:he,closeIcon:Q("clear"),transition:String,beforeClose:Function,doubleScale:G,overlayClass:he,overlayStyle:Object,swipeDuration:ut(300),startPosition:ut(0),showIndicators:Boolean,closeOnPopstate:G,closeOnClickImage:G,closeOnClickOverlay:G,closeIconPosition:Q("top-right"),teleport:[String,Object]};var py=U({name:xM,props:CM,emits:["scale","close","closed","change","longPress","update:show"],setup(n,{emit:t,slots:e}){const i=j(),s=j(),r=de({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),o=()=>{if(i.value){const y=Xt(i.value.$el);r.rootWidth=y.width,r.rootHeight=y.height,i.value.resize()}},a=y=>t("scale",y),l=y=>t("update:show",y),c=()=>{Ns(n.beforeClose,{args:[r.active],done:()=>l(!1)})},u=y=>{y!==r.active&&(r.active=y,t("change",y))},d=()=>{if(n.showIndex)return x("div",{class:Rr("index")},[e.index?e.index({index:r.active}):`${r.active+1} / ${n.images.length}`])},h=()=>{if(e.cover)return x("div",{class:Rr("cover")},[e.cover()])},f=()=>{r.disableZoom=!0},g=()=>{r.disableZoom=!1},m=()=>x(Xd,{ref:i,lazyRender:!0,loop:n.loop,class:Rr("swipe"),vertical:n.vertical,duration:n.swipeDuration,initialSwipe:n.startPosition,showIndicators:n.showIndicators,indicatorColor:"white",onChange:u,onDragEnd:g,onDragStart:f},{default:()=>[n.images.map((y,w)=>x(yM,{ref:C=>{w===r.active&&(s.value=C)},src:y,show:n.show,active:r.active,maxZoom:n.maxZoom,minZoom:n.minZoom,rootWidth:r.rootWidth,rootHeight:r.rootHeight,disableZoom:r.disableZoom,doubleScale:n.doubleScale,closeOnClickImage:n.closeOnClickImage,closeOnClickOverlay:n.closeOnClickOverlay,vertical:n.vertical,onScale:a,onClose:c,onLongPress:()=>t("longPress",{index:w})},{image:e.image}))]}),p=()=>{if(n.closeable)return x($t,{role:"button",name:n.closeIcon,class:[Rr("close-icon",n.closeIconPosition),pn],onClick:c},null)},v=()=>t("closed"),b=(y,w)=>{var C;return(C=i.value)==null?void 0:C.swipeTo(y,w)};return Lt({resetScale:()=>{var y;(y=s.value)==null||y.resetScale()},swipeTo:b}),be(o),st([Kn,Rn],o),st(()=>n.startPosition,y=>u(+y)),st(()=>n.show,y=>{const{images:w,startPosition:C}=n;y?(u(+C),_t(()=>{o(),b(+C,{immediate:!0})})):t("close",{index:r.active,url:w[r.active]})}),()=>x(ri,Rt({class:[Rr(),n.className],overlayClass:[Rr("overlay"),n.overlayClass],onClosed:v,"onUpdate:show":l},Gt(n,wM)),{default:()=>[p(),m(),d(),h()]})}});let ql;const SM={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function PM(){({instance:ql}=qv({setup(){const{state:n,toggle:t}=Wv(),e=()=>{n.images=[]};return()=>x(py,Rt(n,{onClosed:e,"onUpdate:show":t}),null)}}))}const EM=(n,t=0)=>{if(Dn)return ql||PM(),n=Array.isArray(n)?{images:n,startPosition:t}:n,ql.open(St({},SM,n)),ql},OM=Z(py);function AM(){return Array(26).fill("").map((e,i)=>String.fromCharCode(65+i))}const[my,th]=W("index-bar"),TM={sticky:G,zIndex:Y,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Ee(0),indexList:{type:Array,default:AM}},by=Symbol(my);var MM=U({name:my,props:TM,emits:["select","change"],setup(n,{emit:t,slots:e}){const i=j(),s=j(),r=j(""),o=jn(),a=Mo(i),{children:l,linkChildren:c}=en(by);let u;c({props:n});const d=F(()=>{if(jt(n.zIndex))return{zIndex:+n.zIndex+1}}),h=F(()=>{if(n.highlightColor)return{color:n.highlightColor}}),f=(S,A)=>{for(let M=l.length-1;M>=0;M--){const O=M>0?A[M-1].height:0,T=n.sticky?O+n.stickyOffsetTop:0;if(S+T>=A[M].top)return M}return-1},g=S=>l.find(A=>String(A.index)===S),m=()=>{if(lr(i))return;const{sticky:S,indexList:A}=n,M=Fi(a.value),O=Xt(a),T=l.map(L=>L.getRect(a.value,O));let R=-1;if(u){const L=g(u);if(L){const k=L.getRect(a.value,O);R=f(k.top,T)}}else R=f(M,T);r.value=A[R],S&&l.forEach((L,k)=>{const{state:_,$el:D}=L;if(k===R||k===R-1){const V=D.getBoundingClientRect();_.left=V.left,_.width=V.width}else _.left=null,_.width=null;if(k===R)_.active=!0,_.top=Math.max(n.stickyOffsetTop,T[k].top-M)+O.top;else if(k===R-1&&u===""){const V=T[R].top-M;_.active=V>0,_.top=V+O.top-T[k].height}else _.active=!1}),u=""},p=()=>{_t(m)};Se("scroll",m,{target:a,passive:!0}),be(p),st(()=>n.indexList,p),st(r,S=>{S&&t("change",S)});const v=()=>n.indexList.map(S=>{const A=S===r.value;return x("span",{class:th("index",{active:A}),style:A?h.value:void 0,"data-index":S},[S])}),b=S=>{u=String(S);const A=g(u);if(A){const M=Fi(a.value),O=Xt(a),{offsetHeight:T}=document.documentElement;if(A.$el.scrollIntoView(),M===T-O.height){m();return}n.sticky&&n.stickyOffsetTop&&Jc(Ua()-n.stickyOffsetTop),t("select",A.index)}},y=S=>{const{index:A}=S.dataset;A&&b(A)},w=S=>{y(S.target)};let C;const P=S=>{if(o.move(S),o.isVertical()){ie(S);const{clientX:A,clientY:M}=S.touches[0],O=document.elementFromPoint(A,M);if(O){const{index:T}=O.dataset;T&&C!==T&&(C=T,y(O))}}},E=()=>x("div",{ref:s,class:th("sidebar"),style:d.value,onClick:w,onTouchstartPassive:o.start},[v()]);return Lt({scrollTo:b}),Se("touchmove",P,{target:s}),()=>{var S;return x("div",{ref:i,class:th()},[n.teleport?x(mr,{to:n.teleport},{default:()=>[E()]}):E(),(S=e.default)==null?void 0:S.call(e)])}}});const[kM,_M]=W("index-anchor"),$M={index:Y};var IM=U({name:kM,props:$M,setup(n,{slots:t}){const e=de({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),i=j(),{parent:s}=Xe(by);if(!s)return;const r=()=>e.active&&s.props.sticky,o=F(()=>{const{zIndex:l,highlightColor:c}=s.props;if(r())return St(Ki(l),{left:e.left?`${e.left}px`:void 0,width:e.width?`${e.width}px`:void 0,transform:e.top?`translate3d(0, ${e.top}px, 0)`:void 0,color:c})});return Lt({state:e,getRect:(l,c)=>{const u=Xt(i);return e.rect.height=u.height,l===window||l===document.body?e.rect.top=u.top+Ua():e.rect.top=u.top+Fi(l)-c.top,e.rect}}),()=>{const l=r();return x("div",{ref:i,style:{height:l?`${e.rect.height}px`:void 0}},[x("div",{style:o.value,class:[_M({sticky:l}),{[Gd]:l}]},[t.default?t.default():n.index])])}}});const RM=Z(IM),NM=Z(MM),[DM,Nr,BM]=W("list"),LM={error:Boolean,offset:ut(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:Q("down"),loadingText:String,finishedText:String,immediateCheck:G};var jM=U({name:DM,props:LM,emits:["load","update:error","update:loading"],setup(n,{emit:t,slots:e}){const i=j(n.loading),s=j(),r=j(),o=pE(),a=Mo(s),l=F(()=>n.scroller||a.value),c=()=>{_t(()=>{if(i.value||n.finished||n.disabled||n.error||(o==null?void 0:o.value)===!1)return;const{direction:g}=n,m=+n.offset,p=Xt(l);if(!p.height||lr(s))return;let v=!1;const b=Xt(r);g==="up"?v=p.top-b.top<=m:v=b.bottom-p.bottom<=m,v&&(i.value=!0,t("update:loading",!0),t("load"))})},u=()=>{if(n.finished){const g=e.finished?e.finished():n.finishedText;if(g)return x("div",{class:Nr("finished-text")},[g])}},d=()=>{t("update:error",!1),c()},h=()=>{if(n.error){const g=e.error?e.error():n.errorText;if(g)return x("div",{role:"button",class:Nr("error-text"),tabindex:0,onClick:d},[g])}},f=()=>{if(i.value&&!n.finished&&!n.disabled)return x("div",{class:Nr("loading")},[e.loading?e.loading():x(si,{class:Nr("loading-icon")},{default:()=>[n.loadingText||BM("loading")]})])};return st(()=>[n.loading,n.finished,n.error],c),o&&st(o,g=>{g&&c()}),Fb(()=>{i.value=n.loading}),be(()=>{n.immediateCheck&&c()}),Lt({check:c}),Se("scroll",c,{target:l,passive:!0}),()=>{var g;const m=(g=e.default)==null?void 0:g.call(e),p=x("div",{ref:r,class:Nr("placeholder")},null);return x("div",{ref:s,role:"feed",class:Nr(),"aria-busy":i.value},[n.direction==="down"?m:p,f(),u(),h(),n.direction==="up"?m:p])}}});const zM=Z(jM),[VM,$i]=W("nav-bar"),FM={title:String,fixed:Boolean,zIndex:Y,border:G,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:G};var HM=U({name:VM,props:FM,emits:["clickLeft","clickRight"],setup(n,{emit:t,slots:e}){const i=j(),s=tu(i,$i),r=u=>{n.leftDisabled||t("clickLeft",u)},o=u=>{n.rightDisabled||t("clickRight",u)},a=()=>e.left?e.left():[n.leftArrow&&x($t,{class:$i("arrow"),name:"arrow-left"},null),n.leftText&&x("span",{class:$i("text")},[n.leftText])],l=()=>e.right?e.right():x("span",{class:$i("text")},[n.rightText]),c=()=>{const{title:u,fixed:d,border:h,zIndex:f}=n,g=Ki(f),m=n.leftArrow||n.leftText||e.left,p=n.rightText||e.right;return x("div",{ref:i,style:g,class:[$i({fixed:d}),{[Gd]:h,"van-safe-area-top":n.safeAreaInsetTop}]},[x("div",{class:$i("content")},[m&&x("div",{class:[$i("left",{disabled:n.leftDisabled}),n.clickable&&!n.leftDisabled?pn:""],onClick:r},[a()]),x("div",{class:[$i("title"),"van-ellipsis"]},[e.title?e.title():u]),p&&x("div",{class:[$i("right",{disabled:n.rightDisabled}),n.clickable&&!n.rightDisabled?pn:""],onClick:o},[l()])])])};return()=>n.fixed&&n.placeholder?s(c):c()}});const GM=Z(HM),[UM,Wo]=W("notice-bar"),WM={text:String,mode:String,color:String,delay:ut(1),speed:ut(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var qM=U({name:UM,props:WM,emits:["close","replay"],setup(n,{emit:t,slots:e}){let i=0,s=0,r;const o=j(),a=j(),l=de({show:!0,offset:0,duration:0}),c=()=>{if(e["left-icon"])return e["left-icon"]();if(n.leftIcon)return x($t,{class:Wo("left-icon"),name:n.leftIcon},null)},u=()=>{if(n.mode==="closeable")return"cross";if(n.mode==="link")return"arrow"},d=p=>{n.mode==="closeable"&&(l.show=!1,t("close",p))},h=()=>{if(e["right-icon"])return e["right-icon"]();const p=u();if(p)return x($t,{name:p,class:Wo("right-icon"),onClick:d},null)},f=()=>{l.offset=i,l.duration=0,Ze(()=>{vs(()=>{l.offset=-s,l.duration=(s+i)/+n.speed,t("replay")})})},g=()=>{const p=n.scrollable===!1&&!n.wrapable,v={transform:l.offset?`translateX(${l.offset}px)`:"",transitionDuration:`${l.duration}s`};return x("div",{ref:o,role:"marquee",class:Wo("wrap")},[x("div",{ref:a,style:v,class:[Wo("content"),{"van-ellipsis":p}],onTransitionend:f},[e.default?e.default():n.text])])},m=()=>{const{delay:p,speed:v,scrollable:b}=n,y=jt(p)?+p*1e3:0;i=0,s=0,l.offset=0,l.duration=0,clearTimeout(r),r=setTimeout(()=>{if(!o.value||!a.value||b===!1)return;const w=Xt(o).width,C=Xt(a).width;(b||C>w)&&vs(()=>{i=w,s=C,l.offset=-s,l.duration=s/+v})},y)};return Qc(m),To(m),Se("pageshow",m),Lt({reset:m}),st(()=>[n.text,n.scrollable],m),()=>{const{color:p,wrapable:v,background:b}=n;return De(x("div",{role:"alert",class:Wo({wrapable:v}),style:{color:p,background:b}},[c(),g(),h()]),[[Ve,l.show]])}}});const YM=Z(qM),[XM,KM]=W("notify"),JM=["lockScroll","position","show","teleport","zIndex"],ZM=St({},ko,{type:Q("danger"),color:String,message:Y,position:Q("top"),className:he,background:String,lockScroll:Boolean});var QM=U({name:XM,props:ZM,emits:["update:show"],setup(n,{emit:t,slots:e}){const i=s=>t("update:show",s);return()=>x(ri,Rt({class:[KM([n.type]),n.className],style:{color:n.color,background:n.background},overlay:!1,duration:.2,"onUpdate:show":i},Gt(n,JM)),{default:()=>[e.default?e.default():n.message]})}});const tk=Z(QM),[ek,la]=W("key"),nk=x("svg",{class:la("collapse-icon"),viewBox:"0 0 30 24"},[x("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ik=x("svg",{class:la("delete-icon"),viewBox:"0 0 32 22"},[x("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var eh=U({name:ek,props:{type:String,text:Y,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(n,{emit:t,slots:e}){const i=j(!1),s=jn(),r=c=>{s.start(c),i.value=!0},o=c=>{s.move(c),s.direction.value&&(i.value=!1)},a=c=>{i.value&&(e.default||ie(c),i.value=!1,t("press",n.text,n.type))},l=()=>{if(n.loading)return x(si,{class:la("loading-icon")},null);const c=e.default?e.default():n.text;switch(n.type){case"delete":return c||ik;case"extra":return c||nk;default:return c}};return()=>x("div",{class:la("wrapper",{wider:n.wider}),onTouchstartPassive:r,onTouchmovePassive:o,onTouchend:a,onTouchcancel:a},[x("div",{role:"button",tabindex:0,class:la([n.color,{large:n.large,active:i.value,delete:n.type==="delete"}])},[l()])])}});const[sk,os]=W("number-keyboard"),rk={show:Boolean,title:String,theme:Q("default"),zIndex:Y,teleport:[String,Object],maxlength:ut(1/0),modelValue:Q(""),transition:G,blurOnClose:G,showDeleteKey:G,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:G,safeAreaInsetBottom:G,extraKey:{type:[String,Array],default:""}};function ok(n){for(let t=n.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1)),i=n[t];n[t]=n[e],n[e]=i}return n}var ak=U({name:sk,inheritAttrs:!1,props:rk,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(n,{emit:t,slots:e,attrs:i}){const s=j(),r=()=>{const p=Array(9).fill("").map((v,b)=>({text:b+1}));return n.randomKeyOrder&&ok(p),p},o=()=>[...r(),{text:n.extraKey,type:"extra"},{text:0},{text:n.showDeleteKey?n.deleteButtonText:"",type:n.showDeleteKey?"delete":""}],a=()=>{const p=r(),{extraKey:v}=n,b=Array.isArray(v)?v:[v];return b.length===1?p.push({text:0,wider:!0},{text:b[0],type:"extra"}):b.length===2&&p.push({text:b[0],type:"extra"},{text:0},{text:b[1],type:"extra"}),p},l=F(()=>n.theme==="custom"?a():o()),c=()=>{n.show&&t("blur")},u=()=>{t("close"),n.blurOnClose&&c()},d=()=>t(n.show?"show":"hide"),h=(p,v)=>{if(p===""){v==="extra"&&c();return}const b=n.modelValue;v==="delete"?(t("delete"),t("update:modelValue",b.slice(0,b.length-1))):v==="close"?u():b.length<+n.maxlength&&(t("input",p),t("update:modelValue",b+p))},f=()=>{const{title:p,theme:v,closeButtonText:b}=n,y=e["title-left"],w=b&&v==="default";if(p||w||y)return x("div",{class:os("header")},[y&&x("span",{class:os("title-left")},[y()]),p&&x("h2",{class:os("title")},[p]),w&&x("button",{type:"button",class:[os("close"),pn],onClick:u},[b])])},g=()=>l.value.map(p=>{const v={};return p.type==="delete"&&(v.default=e.delete),p.type==="extra"&&(v.default=e["extra-key"]),x(eh,{key:p.text,text:p.text,type:p.type,wider:p.wider,color:p.color,onPress:h},v)}),m=()=>{if(n.theme==="custom")return x("div",{class:os("sidebar")},[n.showDeleteKey&&x(eh,{large:!0,text:n.deleteButtonText,type:"delete",onPress:h},{default:e.delete}),x(eh,{large:!0,text:n.closeButtonText,type:"close",color:"blue",loading:n.closeButtonLoading,onPress:h},null)])};return st(()=>n.show,p=>{n.transition||t(p?"show":"hide")}),n.hideOnClickOutside&&Kc(s,c,{eventName:"touchstart"}),()=>{const p=f(),v=x(br,{name:n.transition?"van-slide-up":""},{default:()=>[De(x("div",Rt({ref:s,style:Ki(n.zIndex),class:os({unfit:!n.safeAreaInsetBottom,"with-title":!!p}),onAnimationend:d,onTouchstartPassive:Fd},i),[p,x("div",{class:os("body")},[x("div",{class:os("keys")},[g()]),m()])]),[[Ve,n.show]])]});return n.teleport?x(mr,{to:n.teleport},{default:()=>[v]}):v}}});const lk=Z(ak),[ck,Dr,wp]=W("pagination"),nh=(n,t,e)=>({number:n,text:t,active:e}),uk={mode:Q("multi"),prevText:String,nextText:String,pageCount:ut(0),modelValue:Ee(0),totalItems:ut(0),showPageSize:ut(5),itemsPerPage:ut(10),forceEllipses:Boolean,showPrevButton:G,showNextButton:G};var hk=U({name:ck,props:uk,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const i=F(()=>{const{pageCount:u,totalItems:d,itemsPerPage:h}=n,f=+u||Math.ceil(+d/+h);return Math.max(1,f)}),s=F(()=>{const u=[],d=i.value,h=+n.showPageSize,{modelValue:f,forceEllipses:g}=n;let m=1,p=d;const v=h<d;v&&(m=Math.max(f-Math.floor(h/2),1),p=m+h-1,p>d&&(p=d,m=p-h+1));for(let b=m;b<=p;b++){const y=nh(b,b,b===f);u.push(y)}if(v&&h>0&&g){if(m>1){const b=nh(m-1,"...");u.unshift(b)}if(p<d){const b=nh(p+1,"...");u.push(b)}}return u}),r=(u,d)=>{u=Ue(u,1,i.value),n.modelValue!==u&&(t("update:modelValue",u),d&&t("change",u))};Eo(()=>r(n.modelValue));const o=()=>x("li",{class:Dr("page-desc")},[e.pageDesc?e.pageDesc():`${n.modelValue}/${i.value}`]),a=()=>{const{mode:u,modelValue:d,showPrevButton:h}=n;if(!h)return;const f=e["prev-text"],g=d===1;return x("li",{class:[Dr("item",{disabled:g,border:u==="simple",prev:!0}),oa]},[x("button",{type:"button",disabled:g,onClick:()=>r(d-1,!0)},[f?f():n.prevText||wp("prev")])])},l=()=>{const{mode:u,modelValue:d,showNextButton:h}=n;if(!h)return;const f=e["next-text"],g=d===i.value;return x("li",{class:[Dr("item",{disabled:g,border:u==="simple",next:!0}),oa]},[x("button",{type:"button",disabled:g,onClick:()=>r(d+1,!0)},[f?f():n.nextText||wp("next")])])},c=()=>s.value.map(u=>x("li",{class:[Dr("item",{active:u.active,page:!0}),oa]},[x("button",{type:"button","aria-current":u.active||void 0,onClick:()=>r(u.number,!0)},[e.page?e.page(u):u.text])]));return()=>x("nav",{role:"navigation",class:Dr()},[x("ul",{class:Dr("items")},[a(),n.mode==="simple"?o():c(),l()])])}});const dk=Z(hk),[fk,qo]=W("password-input"),gk={info:String,mask:G,value:Q(""),gutter:Y,length:ut(6),focused:Boolean,errorInfo:String};var pk=U({name:fk,props:gk,emits:["focus"],setup(n,{emit:t}){const e=s=>{s.stopPropagation(),t("focus",s)},i=()=>{const s=[],{mask:r,value:o,gutter:a,focused:l}=n,c=+n.length;for(let u=0;u<c;u++){const d=o[u],h=u!==0&&!a,f=l&&u===o.length;let g;u!==0&&a&&(g={marginLeft:Mt(a)}),s.push(x("li",{class:[{[pv]:h},qo("item",{focus:f})],style:g},[r?x("i",{style:{visibility:d?"visible":"hidden"}},null):d,f&&x("div",{class:qo("cursor")},null)]))}return s};return()=>{const s=n.errorInfo||n.info;return x("div",{class:qo()},[x("ul",{class:[qo("security"),{[oa]:!n.gutter}],onTouchstartPassive:e},[i()]),s&&x("div",{class:qo(n.errorInfo?"error-info":"info")},[s])])}}});const mk=Z(pk),bk=Z(EE);function ai(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function rf(n){var t=ai(n).Element;return n instanceof t||n instanceof Element}function Jn(n){var t=ai(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function vy(n){if(typeof ShadowRoot>"u")return!1;var t=ai(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}var Jr=Math.round;function qh(){var n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function vk(){return!/^((?!chrome|android).)*safari/i.test(qh())}function cc(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),s=1,r=1;t&&Jn(n)&&(s=n.offsetWidth>0&&Jr(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&Jr(i.height)/n.offsetHeight||1);var o=rf(n)?ai(n):window,a=o.visualViewport,l=!vk()&&e,c=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,d=i.width/s,h=i.height/r;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function yy(n){var t=ai(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function yk(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function xk(n){return n===ai(n)||!Jn(n)?yy(n):yk(n)}function Hi(n){return n?(n.nodeName||"").toLowerCase():null}function lu(n){return((rf(n)?n.ownerDocument:n.document)||window.document).documentElement}function wk(n){return cc(lu(n)).left+yy(n).scrollLeft}function Gi(n){return ai(n).getComputedStyle(n)}function of(n){var t=Gi(n),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function Ck(n){var t=n.getBoundingClientRect(),e=Jr(t.width)/n.offsetWidth||1,i=Jr(t.height)/n.offsetHeight||1;return e!==1||i!==1}function Sk(n,t,e){e===void 0&&(e=!1);var i=Jn(t),s=Jn(t)&&Ck(t),r=lu(t),o=cc(n,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((Hi(t)!=="body"||of(r))&&(a=xk(t)),Jn(t)?(l=cc(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=wk(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Pk(n){var t=cc(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function af(n){return Hi(n)==="html"?n:n.assignedSlot||n.parentNode||(vy(n)?n.host:null)||lu(n)}function xy(n){return["html","body","#document"].indexOf(Hi(n))>=0?n.ownerDocument.body:Jn(n)&&of(n)?n:xy(af(n))}function Yl(n,t){var e;t===void 0&&(t=[]);var i=xy(n),s=i===((e=n.ownerDocument)==null?void 0:e.body),r=ai(i),o=s?[r].concat(r.visualViewport||[],of(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(Yl(af(o)))}function Ek(n){return["table","td","th"].indexOf(Hi(n))>=0}function Cp(n){return!Jn(n)||Gi(n).position==="fixed"?null:n.offsetParent}function Ok(n){var t=/firefox/i.test(qh()),e=/Trident/i.test(qh());if(e&&Jn(n)){var i=Gi(n);if(i.position==="fixed")return null}var s=af(n);for(vy(s)&&(s=s.host);Jn(s)&&["html","body"].indexOf(Hi(s))<0;){var r=Gi(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function wy(n){for(var t=ai(n),e=Cp(n);e&&Ek(e)&&Gi(e).position==="static";)e=Cp(e);return e&&(Hi(e)==="html"||Hi(e)==="body"&&Gi(e).position==="static")?t:e||Ok(n)||t}var Wr="top",uc="bottom",Aa="right",sr="left",Cy="auto",Ak=[Wr,uc,Aa,sr],Sy="start",hc="end",Tk=[].concat(Ak,[Cy]).reduce(function(n,t){return n.concat([t,t+"-"+Sy,t+"-"+hc])},[]),Mk="beforeRead",kk="read",_k="afterRead",$k="beforeMain",Ik="main",Rk="afterMain",Nk="beforeWrite",Dk="write",Bk="afterWrite",Yh=[Mk,kk,_k,$k,Ik,Rk,Nk,Dk,Bk];function Lk(n){var t=new Map,e=new Set,i=[];n.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){e.has(r.name)||s(r)}),i}function jk(n){var t=Lk(n);return Yh.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function zk(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function as(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return[].concat(e).reduce(function(s,r){return s.replace(/%s/,r)},n)}var Ws='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',Vk='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',Sp=["name","enabled","phase","fn","effect","requires","options"];function Fk(n){n.forEach(function(t){[].concat(Object.keys(t),Sp).filter(function(e,i,s){return s.indexOf(e)===i}).forEach(function(e){switch(e){case"name":typeof t.name!="string"&&console.error(as(Ws,String(t.name),'"name"','"string"','"'+String(t.name)+'"'));break;case"enabled":typeof t.enabled!="boolean"&&console.error(as(Ws,t.name,'"enabled"','"boolean"','"'+String(t.enabled)+'"'));break;case"phase":Yh.indexOf(t.phase)<0&&console.error(as(Ws,t.name,'"phase"',"either "+Yh.join(", "),'"'+String(t.phase)+'"'));break;case"fn":typeof t.fn!="function"&&console.error(as(Ws,t.name,'"fn"','"function"','"'+String(t.fn)+'"'));break;case"effect":t.effect!=null&&typeof t.effect!="function"&&console.error(as(Ws,t.name,'"effect"','"function"','"'+String(t.fn)+'"'));break;case"requires":t.requires!=null&&!Array.isArray(t.requires)&&console.error(as(Ws,t.name,'"requires"','"array"','"'+String(t.requires)+'"'));break;case"requiresIfExists":Array.isArray(t.requiresIfExists)||console.error(as(Ws,t.name,'"requiresIfExists"','"array"','"'+String(t.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+t.name+'" modifier, valid properties are '+Sp.map(function(i){return'"'+i+'"'}).join(", ")+'; but "'+e+'" was provided.')}t.requires&&t.requires.forEach(function(i){n.find(function(s){return s.name===i})==null&&console.error(as(Vk,String(t.name),i,i))})})})}function Hk(n,t){var e=new Set;return n.filter(function(i){var s=t(i);if(!e.has(s))return e.add(s),!0})}function cu(n){return n.split("-")[0]}function Gk(n){var t=n.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}function Py(n){return n.split("-")[1]}function Uk(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Wk(n){var t=n.reference,e=n.element,i=n.placement,s=i?cu(i):null,r=i?Py(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case Wr:l={x:o,y:t.y-e.height};break;case uc:l={x:o,y:t.y+t.height};break;case Aa:l={x:t.x+t.width,y:a};break;case sr:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?Uk(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Sy:l[c]=l[c]-(t[u]/2-e[u]/2);break;case hc:l[c]=l[c]+(t[u]/2-e[u]/2);break}}return l}var Pp="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",qk="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",Ep={placement:"bottom",modifiers:[],strategy:"absolute"};function Op(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Yk(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?Ep:s;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ep,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(v){var b=typeof v=="function"?v(u.options):v;m(),u.options=Object.assign({},r,u.options,b),u.scrollParents={reference:rf(a)?Yl(a):a.contextElement?Yl(a.contextElement):[],popper:Yl(l)};var y=jk(Gk([].concat(i,u.options.modifiers)));u.orderedModifiers=y.filter(function(O){return O.enabled});{var w=Hk([].concat(y,u.options.modifiers),function(O){var T=O.name;return T});if(Fk(w),cu(u.options.placement)===Cy){var C=u.orderedModifiers.find(function(O){var T=O.name;return T==="flip"});C||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var P=Gi(l),E=P.marginTop,S=P.marginRight,A=P.marginBottom,M=P.marginLeft;[E,S,A,M].some(function(O){return parseFloat(O)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return g(),f.update()},forceUpdate:function(){if(!h){var v=u.elements,b=v.reference,y=v.popper;if(!Op(b,y)){console.error(Pp);return}u.rects={reference:Sk(b,wy(y),u.options.strategy==="fixed"),popper:Pk(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var w=0,C=0;C<u.orderedModifiers.length;C++){if(w+=1,w>100){console.error(qk);break}if(u.reset===!0){u.reset=!1,C=-1;continue}var P=u.orderedModifiers[C],E=P.fn,S=P.options,A=S===void 0?{}:S,M=P.name;typeof E=="function"&&(u=E({state:u,options:A,name:M,instance:f})||u)}}},update:zk(function(){return new Promise(function(p){f.forceUpdate(),p(u)})}),destroy:function(){m(),h=!0}};if(!Op(a,l))return console.error(Pp),f;f.setOptions(c).then(function(p){!h&&c.onFirstUpdate&&c.onFirstUpdate(p)});function g(){u.orderedModifiers.forEach(function(p){var v=p.name,b=p.options,y=b===void 0?{}:b,w=p.effect;if(typeof w=="function"){var C=w({state:u,name:v,instance:f,options:y}),P=function(){};d.push(C||P)}})}function m(){d.forEach(function(p){return p()}),d=[]}return f}}var El={passive:!0};function Xk(n){var t=n.state,e=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=ai(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",e.update,El)}),a&&l.addEventListener("resize",e.update,El),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",e.update,El)}),a&&l.removeEventListener("resize",e.update,El)}}var Kk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xk,data:{}};function Jk(n){var t=n.state,e=n.name;t.modifiersData[e]=Wk({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Zk={name:"popperOffsets",enabled:!0,phase:"read",fn:Jk,data:{}},Qk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function t_(n){var t=n.x,e=n.y,i=window,s=i.devicePixelRatio||1;return{x:Jr(t*s)/s||0,y:Jr(e*s)/s||0}}function Ap(n){var t,e=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,f=h===void 0?0:h,g=o.y,m=g===void 0?0:g,p=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=p.x,m=p.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=sr,w=Wr,C=window;if(c){var P=wy(e),E="clientHeight",S="clientWidth";if(P===ai(e)&&(P=lu(e),Gi(P).position!=="static"&&a==="absolute"&&(E="scrollHeight",S="scrollWidth")),P=P,s===Wr||(s===sr||s===Aa)&&r===hc){w=uc;var A=d&&P===C&&C.visualViewport?C.visualViewport.height:P[E];m-=A-i.height,m*=l?1:-1}if(s===sr||(s===Wr||s===uc)&&r===hc){y=Aa;var M=d&&P===C&&C.visualViewport?C.visualViewport.width:P[S];f-=M-i.width,f*=l?1:-1}}var O=Object.assign({position:a},c&&Qk),T=u===!0?t_({x:f,y:m}):{x:f,y:m};if(f=T.x,m=T.y,l){var R;return Object.assign({},O,(R={},R[w]=b?"0":"",R[y]=v?"0":"",R.transform=(C.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",R))}return Object.assign({},O,(t={},t[w]=b?m+"px":"",t[y]=v?f+"px":"",t.transform="",t))}function e_(n){var t=n.state,e=n.options,i=e.gpuAcceleration,s=i===void 0?!0:i,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a;{var c=Gi(t.elements.popper).transitionProperty||"";o&&["transform","top","right","bottom","left"].some(function(d){return c.indexOf(d)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var u={placement:cu(t.placement),variation:Py(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Ap(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ap(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var n_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:e_,data:{}};function i_(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!Jn(r)||!Hi(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function s_(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Jn(s)||!Hi(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var r_={name:"applyStyles",enabled:!0,phase:"write",fn:i_,effect:s_,requires:["computeStyles"]},o_=[Kk,Zk,n_,r_],a_=Yk({defaultModifiers:o_});function l_(n,t,e){var i=cu(n),s=[sr,Wr].indexOf(i)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[sr,Aa].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function c_(n){var t=n.state,e=n.options,i=n.name,s=e.offset,r=s===void 0?[0,0]:s,o=Tk.reduce(function(u,d){return u[d]=l_(d,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var u_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:c_};const[h_,qs]=W("popover"),d_=["overlay","duration","teleport","overlayStyle","overlayClass","closeOnClickOverlay"],f_={show:Boolean,theme:Q("light"),overlay:Boolean,actions:ce(),actionsDirection:Q("vertical"),trigger:Q("click"),duration:Y,showArrow:G,placement:Q("bottom"),iconPrefix:String,overlayClass:he,overlayStyle:Object,closeOnClickAction:G,closeOnClickOverlay:G,closeOnClickOutside:G,offset:{type:Array,default:()=>[0,8]},teleport:{type:[String,Object],default:"body"}};var g_=U({name:h_,props:f_,emits:["select","touchstart","update:show"],setup(n,{emit:t,slots:e,attrs:i}){let s;const r=j(),o=j(),a=j(),l=Yd(()=>n.show,b=>t("update:show",b)),c=()=>({placement:n.placement,modifiers:[{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},St({},u_,{options:{offset:n.offset}})]}),u=()=>o.value&&a.value?a_(o.value,a.value.popupRef.value,c()):null,d=()=>{_t(()=>{l.value&&(s?s.setOptions(c()):(s=u(),Dn&&(window.addEventListener("animationend",d),window.addEventListener("transitionend",d))))})},h=b=>{l.value=b},f=()=>{n.trigger==="click"&&(l.value=!l.value)},g=(b,y)=>{b.disabled||(t("select",b,y),n.closeOnClickAction&&(l.value=!1))},m=()=>{l.value&&n.closeOnClickOutside&&(!n.overlay||n.closeOnClickOverlay)&&(l.value=!1)},p=(b,y)=>e.action?e.action({action:b,index:y}):[b.icon&&x($t,{name:b.icon,classPrefix:n.iconPrefix,class:qs("action-icon")},null),x("div",{class:[qs("action-text"),{[Gd]:n.actionsDirection==="vertical"}]},[b.text])],v=(b,y)=>{const{icon:w,color:C,disabled:P,className:E}=b;return x("div",{role:"menuitem",class:[qs("action",{disabled:P,"with-icon":w}),{[QS]:n.actionsDirection==="horizontal"},E],style:{color:C},tabindex:P?void 0:0,"aria-disabled":P||void 0,onClick:()=>g(b,y)},[p(b,y)])};return be(()=>{d(),Eo(()=>{var b;r.value=(b=a.value)==null?void 0:b.popupRef.value})}),Ai(()=>{s&&(Dn&&(window.removeEventListener("animationend",d),window.removeEventListener("transitionend",d)),s.destroy(),s=null)}),st(()=>[l.value,n.offset,n.placement],d),Kc([o,r],m,{eventName:"touchstart"}),()=>{var b;return x(Jt,null,[x("span",{ref:o,class:qs("wrapper"),onClick:f},[(b=e.reference)==null?void 0:b.call(e)]),x(ri,Rt({ref:a,show:l.value,class:qs([n.theme]),position:"",transition:"van-popover-zoom",lockScroll:!1,"onUpdate:show":h},i,oc(),Gt(n,d_)),{default:()=>[n.showArrow&&x("div",{class:qs("arrow")},null),x("div",{role:"menu",class:qs("content",n.actionsDirection)},[e.default?e.default():n.actions.map(v)])]})])}}});const p_=Z(g_),[m_,ih]=W("progress"),b_={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:G,pivotColor:String,trackColor:String,strokeWidth:Y,percentage:{type:Y,default:0,validator:n=>+n>=0&&+n<=100}};var v_=U({name:m_,props:b_,setup(n){const t=F(()=>n.inactive?void 0:n.color),e=()=>{const{textColor:i,pivotText:s,pivotColor:r,percentage:o}=n,a=s??`${o}%`;if(n.showPivot&&a){const l={color:i,left:`${+o}%`,transform:`translate(-${+o}%,-50%)`,background:r||t.value};return x("span",{style:l,class:ih("pivot",{inactive:n.inactive})},[a])}};return()=>{const{trackColor:i,percentage:s,strokeWidth:r}=n,o={background:i,height:Mt(r)},a={width:`${s}%`,background:t.value};return x("div",{class:ih(),style:o},[x("span",{class:ih("portion",{inactive:n.inactive}),style:a},null),e()])}}});const y_=Z(v_),[x_,Yo,w_]=W("pull-refresh"),Ey=50,C_=["pulling","loosing","success"],S_={disabled:Boolean,modelValue:Boolean,headHeight:ut(Ey),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:Y,successDuration:ut(500),animationDuration:ut(300)};var P_=U({name:x_,props:S_,emits:["change","refresh","update:modelValue"],setup(n,{emit:t,slots:e}){let i;const s=j(),r=j(),o=Mo(s),a=de({status:"normal",distance:0,duration:0}),l=jn(),c=()=>{if(n.headHeight!==Ey)return{height:`${n.headHeight}px`}},u=()=>a.status!=="loading"&&a.status!=="success"&&!n.disabled,d=w=>{const C=+(n.pullDistance||n.headHeight);return w>C&&(w<C*2?w=C+(w-C)/2:w=C*1.5+(w-C*2)/4),Math.round(w)},h=(w,C)=>{const P=+(n.pullDistance||n.headHeight);a.distance=w,C?a.status="loading":w===0?a.status="normal":w<P?a.status="pulling":a.status="loosing",t("change",{status:a.status,distance:w})},f=()=>{const{status:w}=a;return w==="normal"?"":n[`${w}Text`]||w_(w)},g=()=>{const{status:w,distance:C}=a;if(e[w])return e[w]({distance:C});const P=[];return C_.includes(w)&&P.push(x("div",{class:Yo("text")},[f()])),w==="loading"&&P.push(x(si,{class:Yo("loading")},{default:f})),P},m=()=>{a.status="success",setTimeout(()=>{h(0)},+n.successDuration)},p=w=>{i=Fi(o.value)===0,i&&(a.duration=0,l.start(w))},v=w=>{u()&&p(w)},b=w=>{if(u()){i||p(w);const{deltaY:C}=l;l.move(w),i&&C.value>=0&&l.isVertical()&&(ie(w),h(d(C.value)))}},y=()=>{i&&l.deltaY.value&&u()&&(a.duration=+n.animationDuration,a.status==="loosing"?(h(+n.headHeight,!0),t("update:modelValue",!0),_t(()=>t("refresh"))):h(0))};return st(()=>n.modelValue,w=>{a.duration=+n.animationDuration,w?h(+n.headHeight,!0):e.success||n.successText?m():h(0,!1)}),Se("touchmove",b,{target:r}),()=>{var w;const C={transitionDuration:`${a.duration}ms`,transform:a.distance?`translate3d(0,${a.distance}px, 0)`:""};return x("div",{ref:s,class:Yo()},[x("div",{ref:r,class:Yo("track"),style:C,onTouchstartPassive:v,onTouchend:y,onTouchcancel:y},[x("div",{class:Yo("head"),style:c()},[g()]),(w=e.default)==null?void 0:w.call(e)])])}}});const E_=Z(P_),[O_,Ol]=W("rate");function A_(n,t,e,i){return n>=t?{status:"full",value:1}:n+.5>=t&&e&&!i?{status:"half",value:.5}:n+1>=t&&e&&i?{status:"half",value:Math.round((n-t+1)*1e10)/1e10}:{status:"void",value:0}}const T_={size:Y,icon:Q("star"),color:String,count:ut(5),gutter:Y,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:Q("star-o"),allowHalf:Boolean,voidColor:String,touchable:G,iconPrefix:String,modelValue:Ee(0),disabledColor:String};var M_=U({name:O_,props:T_,emits:["change","update:modelValue"],setup(n,{emit:t}){const e=jn(),[i,s]=Wa(),r=j(),o=F(()=>n.readonly||n.disabled),a=F(()=>o.value||!n.touchable),l=F(()=>Array(+n.count).fill("").map((y,w)=>A_(n.modelValue,w+1,n.allowHalf,n.readonly)));let c,u,d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;const f=()=>{u=Xt(r);const y=i.value.map(Xt);c=[],y.forEach((w,C)=>{d=Math.min(w.top,d),h=Math.max(w.top,h),n.allowHalf?c.push({score:C+.5,left:w.left,top:w.top,height:w.height},{score:C+1,left:w.left+w.width/2,top:w.top,height:w.height}):c.push({score:C+1,left:w.left,top:w.top,height:w.height})})},g=(y,w)=>{for(let C=c.length-1;C>0;C--)if(w>=u.top&&w<=u.bottom){if(y>c[C].left&&w>=c[C].top&&w<=c[C].top+c[C].height)return c[C].score}else{const P=w<u.top?d:h;if(y>c[C].left&&c[C].top===P)return c[C].score}return n.allowHalf?.5:1},m=y=>{o.value||y===n.modelValue||(t("update:modelValue",y),t("change",y))},p=y=>{a.value||(e.start(y),f())},v=y=>{if(!a.value&&(e.move(y),e.isHorizontal()&&!e.isTap.value)){const{clientX:w,clientY:C}=y.touches[0];ie(y),m(g(w,C))}},b=(y,w)=>{const{icon:C,size:P,color:E,count:S,gutter:A,voidIcon:M,disabled:O,voidColor:T,allowHalf:R,iconPrefix:L,disabledColor:k}=n,_=w+1,D=y.status==="full",V=y.status==="void",it=R&&y.value>0&&y.value<1;let at;A&&_!==+S&&(at={paddingRight:Mt(A)});const z=q=>{f();let lt=R?g(q.clientX,q.clientY):_;n.clearable&&e.isTap.value&&lt===n.modelValue&&(lt=0),m(lt)};return x("div",{key:w,ref:s(w),role:"radio",style:at,class:Ol("item"),tabindex:O?void 0:0,"aria-setsize":S,"aria-posinset":_,"aria-checked":!V,onClick:z},[x($t,{size:P,name:D?C:M,class:Ol("icon",{disabled:O,full:D}),color:O?k:D?E:T,classPrefix:L},null),it&&x($t,{size:P,style:{width:y.value+"em"},name:V?M:C,class:Ol("icon",["half",{disabled:O,full:!V}]),color:O?k:V?T:E,classPrefix:L},null)])};return Rs(()=>n.modelValue),Se("touchmove",v,{target:r}),()=>x("div",{ref:r,role:"radiogroup",class:Ol({readonly:n.readonly,disabled:n.disabled}),tabindex:n.disabled?void 0:0,"aria-disabled":n.disabled,"aria-readonly":n.readonly,onTouchstartPassive:p},[l.value.map(b)])}});const k_=Z(M_),__={figureArr:ce(),delay:Number,duration:Ee(2),isStart:Boolean,direction:Q("down"),height:Ee(40)},[$_,sh]=W("rolling-text-item");var I_=U({name:$_,props:__,setup(n){const t=F(()=>n.direction==="down"?n.figureArr.slice().reverse():n.figureArr),e=F(()=>`-${n.height*(n.figureArr.length-1)}px`),i=F(()=>({lineHeight:Mt(n.height)})),s=F(()=>({height:Mt(n.height),"--van-translate":e.value,"--van-duration":n.duration+"s","--van-delay":n.delay+"s"}));return()=>x("div",{class:sh([n.direction]),style:s.value},[x("div",{class:sh("box",{animate:n.isStart})},[Array.isArray(t.value)&&t.value.map(r=>x("div",{class:sh("item"),style:i.value},[r]))])])}});const[R_,N_]=W("rolling-text"),D_={startNum:Ee(0),targetNum:Number,textList:ce(),duration:Ee(2),autoStart:G,direction:Q("down"),stopOrder:Q("ltr"),height:Ee(40)},B_=2;var L_=U({name:R_,props:D_,setup(n){const t=F(()=>Array.isArray(n.textList)&&n.textList.length),e=F(()=>t.value?n.textList[0].length:`${Math.max(n.startNum,n.targetNum)}`.length),i=d=>{const h=[];for(let f=0;f<n.textList.length;f++)h.push(n.textList[f][d]);return h},s=F(()=>t.value?new Array(e.value).fill(""):Wn(n.targetNum,e.value).split("")),r=F(()=>Wn(n.startNum,e.value).split("")),o=d=>{const h=+r.value[d],f=+s.value[d],g=[];for(let m=h;m<=9;m++)g.push(m);for(let m=0;m<=B_;m++)for(let p=0;p<=9;p++)g.push(p);for(let m=0;m<=f;m++)g.push(m);return g},a=(d,h)=>n.stopOrder==="ltr"?.2*d:.2*(h-1-d),l=j(n.autoStart),c=()=>{l.value=!0},u=()=>{l.value=!1,n.autoStart&&Ze(()=>c())};return st(()=>n.autoStart,d=>{d&&c()}),Lt({start:c,reset:u}),()=>x("div",{class:N_()},[s.value.map((d,h)=>x(I_,{figureArr:t.value?i(h):o(h),duration:n.duration,direction:n.direction,isStart:l.value,height:n.height,delay:a(h,e.value)},null))])}});const j_=Z(L_),z_=Z(RA),[V_,Xo,F_]=W("search"),H_=St({},Zd,{label:String,shape:Q("square"),leftIcon:Q("search"),clearable:G,actionText:String,background:String,showAction:Boolean});var G_=U({name:V_,props:H_,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e,attrs:i}){const s=_o(),r=j(),o=()=>{e.action||(t("update:modelValue",""),t("cancel"))},a=C=>{C.keyCode===13&&(ie(C),t("search",n.modelValue))},l=()=>n.id||`${s}-input`,c=()=>{if(e.label||n.label)return x("label",{class:Xo("label"),for:l()},[e.label?e.label():n.label])},u=()=>{if(n.showAction){const C=n.actionText||F_("cancel");return x("div",{class:Xo("action"),role:"button",tabindex:0,onClick:o},[e.action?e.action():C])}},d=()=>{var C;return(C=r.value)==null?void 0:C.blur()},h=()=>{var C;return(C=r.value)==null?void 0:C.focus()},f=C=>t("blur",C),g=C=>t("focus",C),m=C=>t("clear",C),p=C=>t("clickInput",C),v=C=>t("clickLeftIcon",C),b=C=>t("clickRightIcon",C),y=Object.keys(Zd),w=()=>{const C=St({},i,Gt(n,y),{id:l()}),P=E=>t("update:modelValue",E);return x(Bi,Rt({ref:r,type:"search",class:Xo("field",{"with-message":C.errorMessage}),border:!1,onBlur:f,onFocus:g,onClear:m,onKeypress:a,onClickInput:p,onClickLeftIcon:v,onClickRightIcon:b,"onUpdate:modelValue":P},C),Gt(e,["left-icon","right-icon"]))};return Lt({focus:h,blur:d}),()=>{var C;return x("div",{class:Xo({"show-action":n.showAction}),style:{background:n.background}},[(C=e.left)==null?void 0:C.call(e),x("div",{class:Xo("content",n.shape)},[c(),w()]),u()])}}});const U_=Z(G_),W_=n=>n==null?void 0:n.includes("/"),q_=[...Wd,"round","closeOnPopstate","safeAreaInsetBottom"],Y_={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[X_,Hn,K_]=W("share-sheet"),J_=St({},ko,{title:String,round:G,options:ce(),cancelText:String,description:String,closeOnPopstate:G,safeAreaInsetBottom:G});var Z_=U({name:X_,props:J_,emits:["cancel","select","update:show"],setup(n,{emit:t,slots:e}){const i=h=>t("update:show",h),s=()=>{i(!1),t("cancel")},r=(h,f)=>t("select",h,f),o=()=>{const h=e.title?e.title():n.title,f=e.description?e.description():n.description;if(h||f)return x("div",{class:Hn("header")},[h&&x("h2",{class:Hn("title")},[h]),f&&x("span",{class:Hn("description")},[f])])},a=h=>W_(h)?x("img",{src:h,class:Hn("image-icon")},null):x("div",{class:Hn("icon",[h])},[x($t,{name:Y_[h]||h},null)]),l=(h,f)=>{const{name:g,icon:m,className:p,description:v}=h;return x("div",{role:"button",tabindex:0,class:[Hn("option"),p,pn],onClick:()=>r(h,f)},[a(m),g&&x("span",{class:Hn("name")},[g]),v&&x("span",{class:Hn("option-description")},[v])])},c=(h,f)=>x("div",{class:Hn("options",{border:f})},[h.map(l)]),u=()=>{const{options:h}=n;return Array.isArray(h[0])?h.map((f,g)=>c(f,g!==0)):c(h)},d=()=>{var h;const f=(h=n.cancelText)!=null?h:K_("cancel");if(e.cancel||f)return x("button",{type:"button",class:Hn("cancel"),onClick:s},[e.cancel?e.cancel():f])};return()=>x(ri,Rt({class:Hn(),position:"bottom","onUpdate:show":i},Gt(n,q_)),{default:()=>[o(),u(),d()]})}});const Q_=Z(Z_),[Oy,t$]=W("sidebar"),Ay=Symbol(Oy),e$={modelValue:ut(0)};var n$=U({name:Oy,props:e$,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const{linkChildren:i}=en(Ay),s=()=>+n.modelValue;return i({getActive:s,setActive:o=>{o!==s()&&(t("update:modelValue",o),t("change",o))}}),()=>{var o;return x("div",{role:"tablist",class:t$()},[(o=e.default)==null?void 0:o.call(e)])}}});const Ty=Z(n$),[i$,Tp]=W("sidebar-item"),s$=St({},Ds,{dot:Boolean,title:String,badge:Y,disabled:Boolean,badgeProps:Object});var r$=U({name:i$,props:s$,emits:["click"],setup(n,{emit:t,slots:e}){const i=vr(),{parent:s,index:r}=Xe(Ay);if(!s)return;const o=()=>{n.disabled||(t("click",r.value),s.setActive(r.value),i())};return()=>{const{dot:a,badge:l,title:c,disabled:u}=n,d=r.value===s.getActive();return x("div",{role:"tab",class:Tp({select:d,disabled:u}),tabindex:u?void 0:0,"aria-selected":d,onClick:o},[x(yr,Rt({dot:a,class:Tp("text"),content:l},n.badgeProps),{default:()=>[e.title?e.title():c]})])}}});const My=Z(r$),[o$,rh,Mp]=W("signature"),a$={tips:String,type:Q("png"),penColor:Q("#000"),lineWidth:Ee(3),clearButtonText:String,backgroundColor:Q(""),confirmButtonText:String},l$=()=>{var n;const t=document.createElement("canvas");return!!((n=t.getContext)!=null&&n.call(t,"2d"))};var c$=U({name:o$,props:a$,emits:["submit","clear","start","end","signing"],setup(n,{emit:t}){const e=j(),i=j(),s=F(()=>e.value?e.value.getContext("2d"):null),r=Dn?l$():!0;let o=0,a=0,l;const c=()=>{if(!s.value)return!1;s.value.beginPath(),s.value.lineWidth=n.lineWidth,s.value.strokeStyle=n.penColor,l=Xt(e),t("start")},u=b=>{if(!s.value)return!1;ie(b);const y=b.touches[0],w=y.clientX-((l==null?void 0:l.left)||0),C=y.clientY-((l==null?void 0:l.top)||0);s.value.lineCap="round",s.value.lineJoin="round",s.value.lineTo(w,C),s.value.stroke(),t("signing",b)},d=b=>{ie(b),t("end")},h=b=>{const y=document.createElement("canvas");if(y.width=b.width,y.height=b.height,n.backgroundColor){const w=y.getContext("2d");f(w)}return b.toDataURL()===y.toDataURL()},f=b=>{b&&n.backgroundColor&&(b.fillStyle=n.backgroundColor,b.fillRect(0,0,o,a))},g=()=>{var b,y;const w=e.value;if(!w)return;const P=h(w)?"":((y=(b={jpg:()=>w.toDataURL("image/jpeg",.8),jpeg:()=>w.toDataURL("image/jpeg",.8)})[n.type])==null?void 0:y.call(b))||w.toDataURL(`image/${n.type}`);t("submit",{image:P,canvas:w})},m=()=>{s.value&&(s.value.clearRect(0,0,o,a),s.value.closePath(),f(s.value)),t("clear")},p=()=>{var b,y,w;if(r&&e.value){const C=e.value,P=Dn?window.devicePixelRatio:1;o=C.width=(((b=i.value)==null?void 0:b.offsetWidth)||0)*P,a=C.height=(((y=i.value)==null?void 0:y.offsetHeight)||0)*P,(w=s.value)==null||w.scale(P,P),f(s.value)}},v=()=>{if(s.value){const b=s.value.getImageData(0,0,o,a);p(),s.value.putImageData(b,0,0)}};return st(Kn,v),be(p),Lt({resize:v,clear:m,submit:g}),()=>x("div",{class:rh()},[x("div",{class:rh("content"),ref:i},[r?x("canvas",{ref:e,onTouchstartPassive:c,onTouchmove:u,onTouchend:d},null):x("p",null,[n.tips])]),x("div",{class:rh("footer")},[x(Qe,{size:"small",onClick:m},{default:()=>[n.clearButtonText||Mp("clear")]}),x(Qe,{type:"primary",size:"small",onClick:g},{default:()=>[n.confirmButtonText||Mp("confirm")]})])])}});const u$=Z(c$),[h$,d$]=W("skeleton-title"),f$={round:Boolean,titleWidth:Y};var g$=U({name:h$,props:f$,setup(n){return()=>x("h3",{class:d$([{round:n.round}]),style:{width:Mt(n.titleWidth)}},null)}});const ky=Z(g$);var p$=ky;const[m$,b$]=W("skeleton-avatar"),v$={avatarSize:Y,avatarShape:Q("round")};var y$=U({name:m$,props:v$,setup(n){return()=>x("div",{class:b$([n.avatarShape]),style:Xi(n.avatarSize)},null)}});const _y=Z(y$);var x$=_y;const lf="100%",w$={round:Boolean,rowWidth:{type:Y,default:lf}},[C$,S$]=W("skeleton-paragraph");var P$=U({name:C$,props:w$,setup(n){return()=>x("div",{class:S$([{round:n.round}]),style:{width:n.rowWidth}},null)}});const $y=Z(P$);var E$=$y;const[O$,kp]=W("skeleton"),A$="60%",T$={row:ut(0),round:Boolean,title:Boolean,titleWidth:Y,avatar:Boolean,avatarSize:Y,avatarShape:Q("round"),loading:G,animate:G,rowWidth:{type:[Number,String,Array],default:lf}};var M$=U({name:O$,inheritAttrs:!1,props:T$,setup(n,{slots:t,attrs:e}){const i=()=>{if(n.avatar)return x(x$,{avatarShape:n.avatarShape,avatarSize:n.avatarSize},null)},s=()=>{if(n.title)return x(p$,{round:n.round,titleWidth:n.titleWidth},null)},r=l=>{const{rowWidth:c}=n;return c===lf&&l===+n.row-1?A$:Array.isArray(c)?c[l]:c},o=()=>Array(+n.row).fill("").map((l,c)=>x(E$,{key:c,round:n.round,rowWidth:Mt(r(c))},null)),a=()=>t.template?t.template():x(Jt,null,[i(),x("div",{class:kp("content")},[s(),o()])]);return()=>{var l;return n.loading?x("div",Rt({class:kp({animate:n.animate,round:n.round})},e),[a()]):(l=t.default)==null?void 0:l.call(t)}}});const k$=Z(M$),[_$,_p]=W("skeleton-image"),$$={imageSize:Y,imageShape:Q("square")};var I$=U({name:_$,props:$$,setup(n){return()=>x("div",{class:_p([n.imageShape]),style:Xi(n.imageSize)},[x($t,{name:"photo",class:_p("icon")},null)])}});const R$=Z(I$),[N$,Ko]=W("slider"),D$={min:ut(0),max:ut(100),step:ut(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:Y,buttonSize:Y,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var B$=U({name:N$,props:D$,emits:["change","dragEnd","dragStart","update:modelValue"],setup(n,{emit:t,slots:e}){let i,s,r;const o=j(),a=[j(),j()],l=j(),c=jn(),u=F(()=>Number(n.max)-Number(n.min)),d=F(()=>{const O=n.vertical?"width":"height";return{background:n.inactiveColor,[O]:Mt(n.barHeight)}}),h=O=>n.range&&Array.isArray(O),f=()=>{const{modelValue:O,min:T}=n;return h(O)?`${(O[1]-O[0])*100/u.value}%`:`${(O-Number(T))*100/u.value}%`},g=()=>{const{modelValue:O,min:T}=n;return h(O)?`${(O[0]-Number(T))*100/u.value}%`:"0%"},m=F(()=>{const T={[n.vertical?"height":"width"]:f(),background:n.activeColor};l.value&&(T.transition="none");const R=()=>n.vertical?n.reverse?"bottom":"top":n.reverse?"right":"left";return T[R()]=g(),T}),p=O=>{const T=+n.min,R=+n.max,L=+n.step;O=Ue(O,T,R);const k=Math.round((O-T)/L)*L;return hv(T,k)},v=()=>{const O=n.modelValue;h(O)?r=O.map(p):r=p(O)},b=O=>{var T,R;const L=(T=O[0])!=null?T:Number(n.min),k=(R=O[1])!=null?R:Number(n.max);return L>k?[k,L]:[L,k]},y=(O,T)=>{h(O)?O=b(O).map(p):O=p(O),bi(O,n.modelValue)||t("update:modelValue",O),T&&!bi(O,r)&&t("change",O)},w=O=>{if(O.stopPropagation(),n.disabled||n.readonly)return;v();const{min:T,reverse:R,vertical:L,modelValue:k}=n,_=Xt(o),D=()=>L?R?_.bottom-O.clientY:O.clientY-_.top:R?_.right-O.clientX:O.clientX-_.left,V=L?_.height:_.width,it=Number(T)+D()/V*u.value;if(h(k)){const[at,z]=k,q=(at+z)/2;it<=q?y([it,z],!0):y([at,it],!0)}else y(it,!0)},C=O=>{n.disabled||n.readonly||(c.start(O),s=n.modelValue,v(),l.value="start")},P=O=>{if(n.disabled||n.readonly)return;l.value==="start"&&t("dragStart",O),ie(O,!0),c.move(O),l.value="dragging";const T=Xt(o),R=n.vertical?c.deltaY.value:c.deltaX.value,L=n.vertical?T.height:T.width;let k=R/L*u.value;if(n.reverse&&(k=-k),h(r)){const _=n.reverse?1-i:i;s[_]=r[_]+k}else s=r+k;y(s)},E=O=>{n.disabled||n.readonly||(l.value==="dragging"&&(y(s,!0),t("dragEnd",O)),l.value="")},S=O=>typeof O=="number"?Ko("button-wrapper",["left","right"][O]):Ko("button-wrapper",n.reverse?"left":"right"),A=(O,T)=>{const R=l.value==="dragging";if(typeof T=="number"){const L=e[T===0?"left-button":"right-button"];let k;if(R&&Array.isArray(s)&&(k=s[0]>s[1]?i^1:i),L)return L({value:O,dragging:R,dragIndex:k})}return e.button?e.button({value:O,dragging:R}):x("div",{class:Ko("button"),style:Xi(n.buttonSize)},null)},M=O=>{const T=typeof O=="number"?n.modelValue[O]:n.modelValue;return x("div",{ref:a[O??0],role:"slider",class:S(O),tabindex:n.disabled?void 0:0,"aria-valuemin":n.min,"aria-valuenow":T,"aria-valuemax":n.max,"aria-disabled":n.disabled||void 0,"aria-readonly":n.readonly||void 0,"aria-orientation":n.vertical?"vertical":"horizontal",onTouchstartPassive:R=>{typeof O=="number"&&(i=O),C(R)},onTouchend:E,onTouchcancel:E,onClick:Fd},[A(T,O)])};return y(n.modelValue),Rs(()=>n.modelValue),a.forEach(O=>{Se("touchmove",P,{target:O})}),()=>x("div",{ref:o,style:d.value,class:Ko({vertical:n.vertical,disabled:n.disabled}),onClick:w},[x("div",{class:Ko("bar"),style:m.value},[n.range?[M(0),M(1)]:M()])])}});const L$=Z(B$),[$p,j$]=W("space"),z$={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function Iy(n=[]){const t=[];return n.forEach(e=>{Array.isArray(e)?t.push(...e):e.type===Jt?t.push(...Iy(e.children)):t.push(e)}),t.filter(e=>{var i;return!(e&&(e.type===xn||e.type===Jt&&((i=e.children)==null?void 0:i.length)===0||e.type===Ha&&e.children.trim()===""))})}var V$=U({name:$p,props:z$,setup(n,{slots:t}){const e=F(()=>{var r;return(r=n.align)!=null?r:n.direction==="horizontal"?"center":""}),i=r=>typeof r=="number"?r+"px":r,s=r=>{const o={},a=`${i(Array.isArray(n.size)?n.size[0]:n.size)}`,l=`${i(Array.isArray(n.size)?n.size[1]:n.size)}`;return r?n.wrap?{marginBottom:l}:{}:(n.direction==="horizontal"&&(o.marginRight=a),(n.direction==="vertical"||n.wrap)&&(o.marginBottom=l),o)};return()=>{var r;const o=Iy((r=t.default)==null?void 0:r.call(t));return x("div",{class:[j$({[n.direction]:n.direction,[`align-${e.value}`]:e.value,wrap:n.wrap,fill:n.fill})]},[o.map((a,l)=>x("div",{key:`item-${l}`,class:`${$p}-item`,style:s(l===o.length-1)},[a]))])}}});const F$=Z(V$),[Ry,Ip]=W("steps"),H$={active:ut(0),direction:Q("horizontal"),activeIcon:Q("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},Ny=Symbol(Ry);var G$=U({name:Ry,props:H$,emits:["clickStep"],setup(n,{emit:t,slots:e}){const{linkChildren:i}=en(Ny);return i({props:n,onClickStep:r=>t("clickStep",r)}),()=>{var r;return x("div",{class:Ip([n.direction])},[x("div",{class:Ip("items")},[(r=e.default)==null?void 0:r.call(e)])])}}});const[U$,ls]=W("step");var W$=U({name:U$,setup(n,{slots:t}){const{parent:e,index:i}=Xe(Ny);if(!e)return;const s=e.props,r=()=>{const d=+s.active;return i.value<d?"finish":i.value===d?"process":"waiting"},o=()=>r()==="process",a=F(()=>({background:r()==="finish"?s.activeColor:s.inactiveColor})),l=F(()=>{if(o())return{color:s.activeColor};if(r()==="waiting")return{color:s.inactiveColor}}),c=()=>e.onClickStep(i.value),u=()=>{const{iconPrefix:d,finishIcon:h,activeIcon:f,activeColor:g,inactiveIcon:m}=s;return o()?t["active-icon"]?t["active-icon"]():x($t,{class:ls("icon","active"),name:f,color:g,classPrefix:d},null):r()==="finish"&&(h||t["finish-icon"])?t["finish-icon"]?t["finish-icon"]():x($t,{class:ls("icon","finish"),name:h,color:g,classPrefix:d},null):t["inactive-icon"]?t["inactive-icon"]():m?x($t,{class:ls("icon"),name:m,classPrefix:d},null):x("i",{class:ls("circle"),style:a.value},null)};return()=>{var d;const h=r();return x("div",{class:[Ji,ls([s.direction,{[h]:h}])]},[x("div",{class:ls("title",{active:o()}),style:l.value,onClick:c},[(d=t.default)==null?void 0:d.call(t)]),x("div",{class:ls("circle-container"),onClick:c},[u()]),x("div",{class:ls("line"),style:a.value},null)])}}});const q$=Z(W$),[Y$,Al]=W("stepper"),X$=200,Tl=(n,t)=>String(n)===String(t),K$={min:ut(1),max:ut(1/0),name:ut(""),step:ut(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:G,showMinus:G,showInput:G,longPress:G,autoFixed:G,allowEmpty:Boolean,modelValue:Y,inputWidth:Y,buttonSize:Y,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:ut(1),decimalLength:Y};var J$=U({name:Y$,props:K$,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(n,{emit:t}){const e=(S,A=!0)=>{const{min:M,max:O,allowEmpty:T,decimalLength:R}=n;return T&&S===""||(S=Bh(String(S),!n.integer),S=S===""?0:+S,S=Number.isNaN(S)?+M:S,S=A?Math.max(Math.min(+O,S),+M):S,jt(R)&&(S=S.toFixed(+R))),S},i=()=>{var S;const A=(S=n.modelValue)!=null?S:n.defaultValue,M=e(A);return Tl(M,n.modelValue)||t("update:modelValue",M),M};let s;const r=j(),o=j(i()),a=F(()=>n.disabled||n.disableMinus||+o.value<=+n.min),l=F(()=>n.disabled||n.disablePlus||+o.value>=+n.max),c=F(()=>({width:Mt(n.inputWidth),height:Mt(n.buttonSize)})),u=F(()=>Xi(n.buttonSize)),d=()=>{const S=e(o.value);Tl(S,o.value)||(o.value=S)},h=S=>{n.beforeChange?Ns(n.beforeChange,{args:[S],done(){o.value=S}}):o.value=S},f=()=>{if(s==="plus"&&l.value||s==="minus"&&a.value){t("overlimit",s);return}const S=s==="minus"?-n.step:+n.step,A=e(hv(+o.value,S));h(A),t(s)},g=S=>{const A=S.target,{value:M}=A,{decimalLength:O}=n;let T=Bh(String(M),!n.integer);if(jt(O)&&T.includes(".")){const L=T.split(".");T=`${L[0]}.${L[1].slice(0,+O)}`}n.beforeChange?A.value=String(o.value):Tl(M,T)||(A.value=T);const R=T===String(+T);h(R?+T:T)},m=S=>{var A;n.disableInput?(A=r.value)==null||A.blur():t("focus",S)},p=S=>{const A=S.target,M=e(A.value,n.autoFixed);A.value=String(M),o.value=M,_t(()=>{t("blur",S),cv()})};let v,b;const y=()=>{b=setTimeout(()=>{f(),y()},X$)},w=()=>{n.longPress&&(v=!1,clearTimeout(b),b=setTimeout(()=>{v=!0,f(),y()},bv))},C=S=>{n.longPress&&(clearTimeout(b),v&&ie(S))},P=S=>{n.disableInput&&ie(S)},E=S=>({onClick:A=>{ie(A),s=S,f()},onTouchstartPassive:()=>{s=S,w()},onTouchend:C,onTouchcancel:C});return st(()=>[n.max,n.min,n.integer,n.decimalLength],d),st(()=>n.modelValue,S=>{Tl(S,o.value)||(o.value=e(S))}),st(o,S=>{t("update:modelValue",S),t("change",S,{name:n.name})}),Rs(()=>n.modelValue),()=>x("div",{role:"group",class:Al([n.theme])},[De(x("button",Rt({type:"button",style:u.value,class:[Al("minus",{disabled:a.value}),{[pn]:!a.value}],"aria-disabled":a.value||void 0},E("minus")),null),[[Ve,n.showMinus]]),De(x("input",{ref:r,type:n.integer?"tel":"text",role:"spinbutton",class:Al("input"),value:o.value,style:c.value,disabled:n.disabled,readonly:n.disableInput,inputmode:n.integer?"numeric":"decimal",placeholder:n.placeholder,"aria-valuemax":n.max,"aria-valuemin":n.min,"aria-valuenow":o.value,onBlur:p,onInput:g,onFocus:m,onMousedown:P},null),[[Ve,n.showInput]]),De(x("button",Rt({type:"button",style:u.value,class:[Al("plus",{disabled:l.value}),{[pn]:!l.value}],"aria-disabled":l.value||void 0},E("plus")),null),[[Ve,n.showPlus]])])}});const Z$=Z(J$),Q$=Z(G$),[tI,Gn,eI]=W("submit-bar"),nI={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:Q(""),disabled:Boolean,textAlign:String,buttonText:String,buttonType:Q("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:ut(2),safeAreaInsetBottom:G};var iI=U({name:tI,props:nI,emits:["submit"],setup(n,{emit:t,slots:e}){const i=j(),s=tu(i,Gn),r=()=>{const{price:u,label:d,currency:h,textAlign:f,suffixLabel:g,decimalLength:m}=n;if(typeof u=="number"){const p=(u/100).toFixed(+m).split("."),v=m?`.${p[1]}`:"";return x("div",{class:Gn("text"),style:{textAlign:f}},[x("span",null,[d||eI("label")]),x("span",{class:Gn("price")},[h,x("span",{class:Gn("price-integer")},[p[0]]),v]),g&&x("span",{class:Gn("suffix-label")},[g])])}},o=()=>{var u;const{tip:d,tipIcon:h}=n;if(e.tip||d)return x("div",{class:Gn("tip")},[h&&x($t,{class:Gn("tip-icon"),name:h},null),d&&x("span",{class:Gn("tip-text")},[d]),(u=e.tip)==null?void 0:u.call(e)])},a=()=>t("submit"),l=()=>e.button?e.button():x(Qe,{round:!0,type:n.buttonType,text:n.buttonText,class:Gn("button",n.buttonType),color:n.buttonColor,loading:n.loading,disabled:n.disabled,onClick:a},null),c=()=>{var u,d;return x("div",{ref:i,class:[Gn(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(u=e.top)==null?void 0:u.call(e),o(),x("div",{class:Gn("bar")},[(d=e.default)==null?void 0:d.call(e),r(),l()])])};return()=>n.placeholder?s(c):c()}});const sI=Z(iI),[rI,oh]=W("swipe-cell"),oI={name:ut(""),disabled:Boolean,leftWidth:Y,rightWidth:Y,beforeClose:Function,stopPropagation:Boolean};var aI=U({name:rI,props:oI,emits:["open","close","click"],setup(n,{emit:t,slots:e}){let i,s,r,o;const a=j(),l=j(),c=j(),u=de({offset:0,dragging:!1}),d=jn(),h=S=>S.value?Xt(S).width:0,f=F(()=>jt(n.leftWidth)?+n.leftWidth:h(l)),g=F(()=>jt(n.rightWidth)?+n.rightWidth:h(c)),m=S=>{u.offset=S==="left"?f.value:-g.value,i||(i=!0,t("open",{name:n.name,position:S}))},p=S=>{u.offset=0,i&&(i=!1,t("close",{name:n.name,position:S}))},v=S=>{const A=Math.abs(u.offset),M=.15,O=i?1-M:M,T=S==="left"?f.value:g.value;T&&A>T*O?m(S):p(S)},b=S=>{n.disabled||(r=u.offset,d.start(S))},y=S=>{if(n.disabled)return;const{deltaX:A}=d;d.move(S),d.isHorizontal()&&(s=!0,u.dragging=!0,(!i||A.value*r<0)&&ie(S,n.stopPropagation),u.offset=Ue(A.value+r,-g.value,f.value))},w=()=>{u.dragging&&(u.dragging=!1,v(u.offset>0?"left":"right"),setTimeout(()=>{s=!1},0))},C=(S="outside")=>{o||(t("click",S),i&&!s&&(o=!0,Ns(n.beforeClose,{args:[{name:n.name,position:S}],done:()=>{o=!1,p(S)},canceled:()=>o=!1,error:()=>o=!1})))},P=(S,A)=>M=>{A&&M.stopPropagation(),C(S)},E=(S,A)=>{const M=e[S];if(M)return x("div",{ref:A,class:oh(S),onClick:P(S,!0)},[M()])};return Lt({open:m,close:p}),Kc(a,()=>C("outside"),{eventName:"touchstart"}),Se("touchmove",y,{target:a}),()=>{var S;const A={transform:`translate3d(${u.offset}px, 0, 0)`,transitionDuration:u.dragging?"0s":".6s"};return x("div",{ref:a,class:oh(),onClick:P("cell",s),onTouchstartPassive:b,onTouchend:w,onTouchcancel:w},[x("div",{class:oh("wrapper"),style:A},[E("left",l),(S=e.default)==null?void 0:S.call(e),E("right",c)])])}}});const lI=Z(aI),[Dy,Rp]=W("tabbar"),cI={route:Boolean,fixed:G,border:G,zIndex:Y,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:ut(0),safeAreaInsetBottom:{type:Boolean,default:null}},By=Symbol(Dy);var uI=U({name:Dy,props:cI,emits:["change","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(),{linkChildren:s}=en(By),r=tu(i,Rp),o=()=>{var c;return(c=n.safeAreaInsetBottom)!=null?c:n.fixed},a=()=>{var c;const{fixed:u,zIndex:d,border:h}=n;return x("div",{ref:i,role:"tablist",style:Ki(d),class:[Rp({fixed:u}),{[Zc]:h,"van-safe-area-bottom":o()}]},[(c=e.default)==null?void 0:c.call(e)])};return s({props:n,setActive:(c,u)=>{Ns(n.beforeChange,{args:[c],done(){t("update:modelValue",c),t("change",c),u()}})}}),()=>n.fixed&&n.placeholder?r(a):a()}});const hI=Z(uI),[dI,ah]=W("tabbar-item"),fI=St({},Ds,{dot:Boolean,icon:String,name:Y,badge:Y,badgeProps:Object,iconPrefix:String});var gI=U({name:dI,props:fI,emits:["click"],setup(n,{emit:t,slots:e}){const i=vr(),s=ii().proxy,{parent:r,index:o}=Xe(By);if(!r)return;const a=F(()=>{var u;const{route:d,modelValue:h}=r.props;if(d&&"$route"in s){const{$route:f}=s,{to:g}=n,m=Vi(g)?g:{path:g};return!!f.matched.find(p=>{const v="path"in m&&m.path===p.path,b="name"in m&&m.name===p.name;return v||b})}return((u=n.name)!=null?u:o.value)===h}),l=u=>{var d;a.value||r.setActive((d=n.name)!=null?d:o.value,i),t("click",u)},c=()=>{if(e.icon)return e.icon({active:a.value});if(n.icon)return x($t,{name:n.icon,classPrefix:n.iconPrefix},null)};return()=>{var u;const{dot:d,badge:h}=n,{activeColor:f,inactiveColor:g}=r.props,m=a.value?f:g;return x("div",{role:"tab",class:ah({active:a.value}),style:{color:m},tabindex:0,"aria-selected":a.value,onClick:l},[x(yr,Rt({dot:d,class:ah("icon"),content:h},n.badgeProps),{default:c}),x("div",{class:ah("text")},[(u=e.default)==null?void 0:u.call(e,{active:a.value})])])}}});const pI=Z(gI),[mI,Np]=W("text-ellipsis"),bI={rows:ut(1),dots:Q("..."),content:Q(""),expandText:Q(""),collapseText:Q(""),position:Q("end")};var vI=U({name:mI,props:bI,emits:["clickAction"],setup(n,{emit:t,slots:e}){const i=j(""),s=j(!1),r=j(!1),o=j();let a=!1;const l=F(()=>s.value?n.collapseText:n.expandText),c=m=>{if(!m)return 0;const p=m.match(/^\d*(\.\d*)?/);return p?Number(p[0]):0},u=()=>{if(!o.value||!o.value.isConnected)return;const m=window.getComputedStyle(o.value),p=document.createElement("div");return Array.prototype.slice.apply(m).forEach(b=>{p.style.setProperty(b,m.getPropertyValue(b))}),p.style.position="fixed",p.style.zIndex="-9999",p.style.top="-9999px",p.style.height="auto",p.style.minHeight="auto",p.style.maxHeight="auto",p.innerText=n.content,document.body.appendChild(p),p},d=()=>{const m=(C,P)=>{const{content:E,position:S,dots:A}=n,M=E.length,O=()=>{const L=(k,_)=>{if(_-k<=1)return S==="end"?E.slice(0,k)+A:A+E.slice(_,M);const D=Math.round((k+_)/2);return S==="end"?C.innerText=E.slice(0,D)+A+l.value:C.innerText=A+E.slice(D,M)+l.value,C.offsetHeight>P?S==="end"?L(k,D):L(D,_):S==="end"?L(D,_):L(k,D)};C.innerText=L(0,M)},T=(L,k)=>{if(L[1]-L[0]<=1&&k[1]-k[0]<=1)return E.slice(0,L[0])+A+E.slice(k[1],M);const _=Math.floor((L[0]+L[1])/2),D=Math.ceil((k[0]+k[1])/2);return C.innerText=n.content.slice(0,_)+n.dots+n.content.slice(D,M)+n.expandText,C.offsetHeight>=P?T([L[0],_],[D,k[1]]):T([_,L[1]],[k[0],D])},R=0+M>>1;return n.position==="middle"?C.innerText=T([0,R],[R,M]):O(),C.innerText},p=u();if(!p){a=!0;return}const{paddingBottom:v,paddingTop:b,lineHeight:y}=p.style,w=Math.ceil((Number(n.rows)+.5)*c(y)+c(b)+c(v));w<p.offsetHeight?(r.value=!0,i.value=m(p,w)):(r.value=!1,i.value=n.content),document.body.removeChild(p)},h=(m=!s.value)=>{s.value=m},f=m=>{h(),t("clickAction",m)},g=()=>{const m=e.action?e.action({expanded:s.value}):l.value;return x("span",{class:Np("action"),onClick:f},[m])};return be(d),Ei(()=>{a&&(a=!1,d())}),st([Kn,()=>[n.content,n.rows,n.position]],d),Lt({toggle:h}),()=>x("div",{ref:o,class:Np()},[s.value?n.content:i.value,r.value?g():null])}});const yI=Z(vI),[xI]=W("time-picker"),Dp=n=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(n),wI=["hour","minute","second"],CI=St({},Qv,{minHour:ut(0),maxHour:ut(23),minMinute:ut(0),maxMinute:ut(59),minSecond:ut(0),maxSecond:ut(59),minTime:{type:String,validator:Dp},maxTime:{type:String,validator:Dp},columnsType:{type:Array,default:()=>["hour","minute"]},filter:Function});var SI=U({name:xI,props:CI,emits:["confirm","cancel","change","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(n.modelValue),s=c=>{const u=c.split(":");return wI.map((d,h)=>n.columnsType.includes(d)?u[h]:"00")},r=F(()=>{let{minHour:c,maxHour:u,minMinute:d,maxMinute:h,minSecond:f,maxSecond:g}=n;if(n.minTime||n.maxTime){const m={hour:0,minute:0,second:0};n.columnsType.forEach((b,y)=>{var w;m[b]=(w=i.value[y])!=null?w:0});const{hour:p,minute:v}=m;if(n.minTime){const[b,y,w]=s(n.minTime);c=b,d=+p<=+c?y:"00",f=+p<=+c&&+v<=+d?w:"00"}if(n.maxTime){const[b,y,w]=s(n.maxTime);u=b,h=+p>=+u?y:"59",g=+p>=+u&&+v>=+h?w:"59"}}return n.columnsType.map(m=>{const{filter:p,formatter:v}=n;switch(m){case"hour":return Ur(+c,+u,m,v,p,i.value);case"minute":return Ur(+d,+h,m,v,p,i.value);case"second":return Ur(+f,+g,m,v,p,i.value);default:return[]}})});st(i,c=>{bi(c,n.modelValue)||t("update:modelValue",c)}),st(()=>n.modelValue,c=>{c=ny(c,r.value),bi(c,i.value)||(i.value=c)},{immediate:!0});const o=(...c)=>t("change",...c),a=(...c)=>t("cancel",...c),l=(...c)=>t("confirm",...c);return()=>x(su,Rt({modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,columns:r.value,onChange:o,onCancel:a,onConfirm:l},Gt(n,ty)),e)}});const PI=Z(SI),[EI,Br]=W("tree-select"),OI={max:ut(1/0),items:ce(),height:ut(300),selectedIcon:Q("success"),mainActiveIndex:ut(0),activeId:{type:[Number,String,Array],default:0}};var AI=U({name:EI,props:OI,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(n,{emit:t,slots:e}){const i=c=>Array.isArray(n.activeId)?n.activeId.includes(c):n.activeId===c,s=c=>{const u=()=>{if(c.disabled)return;let d;if(Array.isArray(n.activeId)){d=n.activeId.slice();const h=d.indexOf(c.id);h!==-1?d.splice(h,1):d.length<+n.max&&d.push(c.id)}else d=c.id;t("update:activeId",d),t("clickItem",c)};return x("div",{key:c.id,class:["van-ellipsis",Br("item",{active:i(c.id),disabled:c.disabled})],onClick:u},[c.text,i(c.id)&&x($t,{name:n.selectedIcon,class:Br("selected")},null)])},r=c=>{t("update:mainActiveIndex",c)},o=c=>t("clickNav",c),a=()=>{const c=n.items.map(u=>x(My,{dot:u.dot,badge:u.badge,class:[Br("nav-item"),u.className],disabled:u.disabled,onClick:o},{title:()=>e["nav-text"]?e["nav-text"](u):u.text}));return x(Ty,{class:Br("nav"),modelValue:n.mainActiveIndex,onChange:r},{default:()=>[c]})},l=()=>{if(e.content)return e.content();const c=n.items[+n.mainActiveIndex]||{};if(c.children)return c.children.map(s)};return()=>x("div",{class:Br(),style:{height:Mt(n.height)}},[a(),x("div",{class:Br("content")},[l()])])}});const TI=Z(AI),[MI,$e,kI]=W("uploader");function Bp(n,t){return new Promise(e=>{if(t==="file"){e();return}const i=new FileReader;i.onload=s=>{e(s.target.result)},t==="dataUrl"?i.readAsDataURL(n):t==="text"&&i.readAsText(n)})}function Ly(n,t){return ic(n).some(e=>e.file?Kr(t)?t(e.file):e.file.size>+t:!1)}function _I(n,t){const e=[],i=[];return n.forEach(s=>{Ly(s,t)?i.push(s):e.push(s)}),{valid:e,invalid:i}}const $I=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,II=n=>$I.test(n);function jy(n){return n.isImage?!0:n.file&&n.file.type?n.file.type.indexOf("image")===0:n.url?II(n.url):typeof n.content=="string"?n.content.indexOf("data:image")===0:!1}var RI=U({props:{name:Y,item:Me(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(n,{emit:t,slots:e}){const i=()=>{const{status:u,message:d}=n.item;if(u==="uploading"||u==="failed"){const h=u==="failed"?x($t,{name:"close",class:$e("mask-icon")},null):x(si,{class:$e("loading")},null),f=jt(d)&&d!=="";return x("div",{class:$e("mask")},[h,f&&x("div",{class:$e("mask-message")},[d])])}},s=u=>{const{name:d,item:h,index:f,beforeDelete:g}=n;u.stopPropagation(),Ns(g,{args:[h,{name:d,index:f}],done:()=>t("delete")})},r=()=>t("preview"),o=()=>t("reupload"),a=()=>{if(n.deletable&&n.item.status!=="uploading"){const u=e["preview-delete"];return x("div",{role:"button",class:$e("preview-delete",{shadow:!u}),tabindex:0,"aria-label":kI("delete"),onClick:s},[u?u():x($t,{name:"cross",class:$e("preview-delete-icon")},null)])}},l=()=>{if(e["preview-cover"]){const{index:u,item:d}=n;return x("div",{class:$e("preview-cover")},[e["preview-cover"](St({index:u},d))])}},c=()=>{const{item:u,lazyLoad:d,imageFit:h,previewSize:f,reupload:g}=n;return jy(u)?x(au,{fit:h,src:u.objectUrl||u.content||u.url,class:$e("preview-image"),width:Array.isArray(f)?f[0]:f,height:Array.isArray(f)?f[1]:f,lazyLoad:d,onClick:g?o:r},{default:l}):x("div",{class:$e("file"),style:Xi(n.previewSize)},[x($t,{class:$e("file-icon"),name:"description"},null),x("div",{class:[$e("file-name"),"van-ellipsis"]},[u.file?u.file.name:u.url]),l()])};return()=>x("div",{class:$e("preview")},[c(),i(),a()])}});const NI={name:ut(""),accept:Q("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:ut(1/0),imageFit:Q("cover"),resultType:Q("dataUrl"),uploadIcon:Q("photograph"),uploadText:String,deletable:G,reupload:Boolean,afterRead:Function,showUpload:G,modelValue:ce(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:G,previewOptions:Object,previewFullImage:G,maxSize:{type:[Number,String,Function],default:1/0}};var DI=U({name:MI,props:NI,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(n,{emit:t,slots:e}){const i=j(),s=[],r=j(-1),o=j(!1),a=(S=n.modelValue.length)=>({name:n.name,index:S}),l=()=>{i.value&&(i.value.value="")},c=S=>{if(l(),Ly(S,n.maxSize))if(Array.isArray(S)){const A=_I(S,n.maxSize);if(S=A.valid,t("oversize",A.invalid,a()),!S.length)return}else{t("oversize",S,a());return}if(S=de(S),r.value>-1){const A=[...n.modelValue];A.splice(r.value,1,S),t("update:modelValue",A),r.value=-1}else t("update:modelValue",[...n.modelValue,...ic(S)]);n.afterRead&&n.afterRead(S,a())},u=S=>{const{maxCount:A,modelValue:M,resultType:O}=n;if(Array.isArray(S)){const T=+A-M.length;S.length>T&&(S=S.slice(0,T)),Promise.all(S.map(R=>Bp(R,O))).then(R=>{const L=S.map((k,_)=>{const D={file:k,status:"",message:"",objectUrl:URL.createObjectURL(k)};return R[_]&&(D.content=R[_]),D});c(L)})}else Bp(S,O).then(T=>{const R={file:S,status:"",message:"",objectUrl:URL.createObjectURL(S)};T&&(R.content=T),c(R)})},d=S=>{const{files:A}=S.target;if(n.disabled||!A||!A.length)return;const M=A.length===1?A[0]:[].slice.call(A);if(n.beforeRead){const O=n.beforeRead(M,a());if(!O){l();return}if(zd(O)){O.then(T=>{u(T||M)}).catch(l);return}}u(M)};let h;const f=()=>t("closePreview"),g=S=>{if(n.previewFullImage){const A=n.modelValue.filter(jy),M=A.map(O=>(O.objectUrl&&!O.url&&O.status!=="failed"&&(O.url=O.objectUrl,s.push(O.url)),O.url)).filter(Boolean);h=EM(St({images:M,startPosition:A.indexOf(S),onClose:f},n.previewOptions))}},m=()=>{h&&h.close()},p=(S,A)=>{const M=n.modelValue.slice(0);M.splice(A,1),t("update:modelValue",M),t("delete",S,a(A))},v=S=>{o.value=!0,r.value=S,_t(()=>E())},b=()=>{o.value||(r.value=-1),o.value=!1},y=(S,A)=>{const M=["imageFit","deletable","reupload","previewSize","beforeDelete"],O=St(Gt(n,M),Gt(S,M,!0));return x(RI,Rt({item:S,index:A,onClick:()=>t(n.reupload?"clickReupload":"clickPreview",S,a(A)),onDelete:()=>p(S,A),onPreview:()=>g(S),onReupload:()=>v(A)},Gt(n,["name","lazyLoad"]),O),Gt(e,["preview-cover","preview-delete"]))},w=()=>{if(n.previewImage)return n.modelValue.map(y)},C=S=>t("clickUpload",S),P=()=>{if(n.modelValue.length>=+n.maxCount&&!n.reupload)return;const S=n.modelValue.length>=+n.maxCount&&n.reupload,A=n.readonly?null:x("input",{ref:i,type:"file",class:$e("input"),accept:n.accept,capture:n.capture,multiple:n.multiple&&r.value===-1,disabled:n.disabled,onChange:d,onClick:b},null);return e.default?De(x("div",{class:$e("input-wrapper"),onClick:C},[e.default(),A]),[[Ve,!S]]):De(x("div",{class:$e("upload",{readonly:n.readonly}),style:Xi(n.previewSize),onClick:C},[x($t,{name:n.uploadIcon,class:$e("upload-icon")},null),n.uploadText&&x("span",{class:$e("upload-text")},[n.uploadText]),A]),[[Ve,n.showUpload&&!S]])},E=()=>{i.value&&!n.disabled&&i.value.click()};return Ai(()=>{s.forEach(S=>URL.revokeObjectURL(S))}),Lt({chooseFile:E,closeImagePreview:m}),Rs(()=>n.modelValue),()=>x("div",{class:$e()},[x("div",{class:$e("wrapper",{disabled:n.disabled})},[w(),P()])])}});const BI=Z(DI),[LI,Lp]=W("watermark"),jI={gapX:Ee(0),gapY:Ee(0),image:String,width:Ee(100),height:Ee(100),rotate:ut(-22),zIndex:Y,content:String,opacity:Y,fullPage:G,textColor:Q("#dcdee0")};var zI=U({name:LI,props:jI,setup(n,{slots:t}){const e=j(),i=j(""),s=j(""),r=()=>{const l={transformOrigin:"center",transform:`rotate(${n.rotate}deg)`},c=()=>n.image&&!t.content?x("image",{href:s.value,"xlink:href":s.value,x:"0",y:"0",width:n.width,height:n.height,style:l},null):x("foreignObject",{x:"0",y:"0",width:n.width,height:n.height},[x("div",{xmlns:"http://www.w3.org/1999/xhtml",style:l},[t.content?t.content():x("span",{style:{color:n.textColor}},[n.content])])]),u=n.width+n.gapX,d=n.height+n.gapY;return x("svg",{viewBox:`0 0 ${u} ${d}`,width:u,height:d,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{padding:`0 ${n.gapX}px ${n.gapY}px 0`,opacity:n.opacity}},[c()])},o=l=>{const c=document.createElement("canvas"),u=new Image;u.crossOrigin="anonymous",u.referrerPolicy="no-referrer",u.onload=()=>{c.width=u.naturalWidth,c.height=u.naturalHeight;const d=c.getContext("2d");d==null||d.drawImage(u,0,0),s.value=c.toDataURL()},u.src=l},a=l=>{const c=new Blob([l],{type:"image/svg+xml"});return URL.createObjectURL(c)};return Eo(()=>{n.image&&o(n.image)}),st(()=>[s.value,n.content,n.textColor,n.height,n.width,n.rotate,n.gapX,n.gapY],()=>{_t(()=>{e.value&&(i.value&&URL.revokeObjectURL(i.value),i.value=a(e.value.innerHTML))})},{immediate:!0}),Oo(()=>{i.value&&URL.revokeObjectURL(i.value)}),()=>{const l=St({backgroundImage:`url(${i.value})`},Ki(n.zIndex));return x("div",{class:Lp({full:n.fullPage}),style:l},[x("div",{class:Lp("wrapper"),ref:e},[r()])])}}});const VI=Z(zI),FI="4.8.8";function HI(n){[wv,jh,IP,WP,gO,_O,Hv,DO,yr,VO,Qe,eA,lA,fA,oi,bA,ry,EA,_A,jA,HA,YA,XA,QA,iT,lT,gT,Uh,CT,MT,IT,LT,HT,XT,KT,uy,Bi,tM,sM,Jd,lM,dM,mM,$t,au,OM,RM,NM,zM,si,fv,GM,YM,tk,lk,Av,dk,mk,su,bk,p_,ri,y_,E_,nf,tf,k_,j_,z_,U_,Q_,Ty,My,u$,k$,_y,R$,$y,ky,L$,F$,q$,Z$,Q$,Rv,sI,Xd,lI,Kd,Qd,Oa,hI,pI,nu,ou,yI,PI,rO,TI,BI,VI].forEach(e=>{e.install?n.use(e):e.name&&n.component(e.name,e)})}var GI={install:HI,version:FI};typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);typeof window<"u"&&function(n){n.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value(...e){const i=document.createDocumentFragment();e.forEach(s=>{const r=s instanceof Node;i.appendChild(r?s:document.createTextNode(String(s)))}),this.appendChild(i)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);class cn{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(n){function t(){return(e,i,s)=>{const r=s.value,o=e.__proto__;s.value=function(...a){this.disposed||(r.call(this,...a),o.dispose.call(this))}}}n.dispose=t})(cn||(cn={}));class jp{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(t=>{t.dispose()}),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}(function(n){function t(e){const i=new n;return e.forEach(s=>{i.add(s)}),i}n.from=t})(jp||(jp={}));var zy=typeof global=="object"&&global&&global.Object===Object&&global,UI=typeof self=="object"&&self&&self.Object===Object&&self,li=zy||UI||Function("return this")(),Bn=li.Symbol,Vy=Object.prototype,WI=Vy.hasOwnProperty,qI=Vy.toString,Jo=Bn?Bn.toStringTag:void 0;function YI(n){var t=WI.call(n,Jo),e=n[Jo];try{n[Jo]=void 0;var i=!0}catch{}var s=qI.call(n);return i&&(t?n[Jo]=e:delete n[Jo]),s}var XI=Object.prototype,KI=XI.toString;function JI(n){return KI.call(n)}var ZI="[object Null]",QI="[object Undefined]",zp=Bn?Bn.toStringTag:void 0;function Bs(n){return n==null?n===void 0?QI:ZI:zp&&zp in Object(n)?YI(n):JI(n)}function ti(n){return n!=null&&typeof n=="object"}var tR="[object Symbol]";function Si(n){return typeof n=="symbol"||ti(n)&&Bs(n)==tR}function ca(n,t){for(var e=-1,i=n==null?0:n.length,s=Array(i);++e<i;)s[e]=t(n[e],e,n);return s}var tn=Array.isArray,eR=1/0,Vp=Bn?Bn.prototype:void 0,Fp=Vp?Vp.toString:void 0;function Fy(n){if(typeof n=="string")return n;if(tn(n))return ca(n,Fy)+"";if(Si(n))return Fp?Fp.call(n):"";var t=n+"";return t=="0"&&1/n==-eR?"-0":t}var nR=/\s/;function iR(n){for(var t=n.length;t--&&nR.test(n.charAt(t)););return t}var sR=/^\s+/;function rR(n){return n&&n.slice(0,iR(n)+1).replace(sR,"")}function we(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Hp=NaN,oR=/^[-+]0x[0-9a-f]+$/i,aR=/^0b[01]+$/i,lR=/^0o[0-7]+$/i,cR=parseInt;function ua(n){if(typeof n=="number")return n;if(Si(n))return Hp;if(we(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=we(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=rR(n);var e=aR.test(n);return e||lR.test(n)?cR(n.slice(2),e?2:8):oR.test(n)?Hp:+n}function $o(n){return n}var uR="[object AsyncFunction]",hR="[object Function]",dR="[object GeneratorFunction]",fR="[object Proxy]";function cf(n){if(!we(n))return!1;var t=Bs(n);return t==hR||t==dR||t==uR||t==fR}var lh=li["__core-js_shared__"],Gp=function(){var n=/[^.]+$/.exec(lh&&lh.keys&&lh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function gR(n){return!!Gp&&Gp in n}var pR=Function.prototype,mR=pR.toString;function xr(n){if(n!=null){try{return mR.call(n)}catch{}try{return n+""}catch{}}return""}var bR=/[\\^$.*+?()[\]{}|]/g,vR=/^\[object .+?Constructor\]$/,yR=Function.prototype,xR=Object.prototype,wR=yR.toString,CR=xR.hasOwnProperty,SR=RegExp("^"+wR.call(CR).replace(bR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function PR(n){if(!we(n)||gR(n))return!1;var t=cf(n)?SR:vR;return t.test(xr(n))}function ER(n,t){return n==null?void 0:n[t]}function wr(n,t){var e=ER(n,t);return PR(e)?e:void 0}var Xh=wr(li,"WeakMap"),Up=Object.create,OR=function(){function n(){}return function(t){if(!we(t))return{};if(Up)return Up(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function Hy(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function AR(){}function Gy(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var TR=800,MR=16,kR=Date.now;function _R(n){var t=0,e=0;return function(){var i=kR(),s=MR-(i-e);if(e=i,s>0){if(++t>=TR)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function $R(n){return function(){return n}}var dc=function(){try{var n=wr(Object,"defineProperty");return n({},"",{}),n}catch{}}(),IR=dc?function(n,t){return dc(n,"toString",{configurable:!0,enumerable:!1,value:$R(t),writable:!0})}:$o;const RR=IR;var Uy=_R(RR);function NR(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}function DR(n,t,e,i){for(var s=n.length,r=e+(i?1:-1);i?r--:++r<s;)if(t(n[r],r,n))return r;return-1}function BR(n){return n!==n}function LR(n,t,e){for(var i=e-1,s=n.length;++i<s;)if(n[i]===t)return i;return-1}function jR(n,t,e){return t===t?LR(n,t,e):DR(n,BR,e)}function Wy(n,t){var e=n==null?0:n.length;return!!e&&jR(n,t,0)>-1}var zR=9007199254740991,VR=/^(?:0|[1-9]\d*)$/;function uu(n,t){var e=typeof n;return t=t??zR,!!t&&(e=="number"||e!="symbol"&&VR.test(n))&&n>-1&&n%1==0&&n<t}function hu(n,t,e){t=="__proto__"&&dc?dc(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Io(n,t){return n===t||n!==n&&t!==t}var FR=Object.prototype,HR=FR.hasOwnProperty;function uf(n,t,e){var i=n[t];(!(HR.call(n,t)&&Io(i,e))||e===void 0&&!(t in n))&&hu(n,t,e)}function qa(n,t,e,i){var s=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=i?i(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),s?hu(e,a,l):uf(e,a,l)}return e}var Wp=Math.max;function qy(n,t,e){return t=Wp(t===void 0?n.length-1:t,0),function(){for(var i=arguments,s=-1,r=Wp(i.length-t,0),o=Array(r);++s<r;)o[s]=i[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=i[s];return a[t]=e(o),Hy(n,this,a)}}function Ro(n,t){return Uy(qy(n,t,$o),n+"")}var GR=9007199254740991;function hf(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=GR}function Cr(n){return n!=null&&hf(n.length)&&!cf(n)}function fc(n,t,e){if(!we(e))return!1;var i=typeof t;return(i=="number"?Cr(e)&&uu(t,e.length):i=="string"&&t in e)?Io(e[t],n):!1}function Yy(n){return Ro(function(t,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=n.length>3&&typeof r=="function"?(s--,r):void 0,o&&fc(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),t=Object(t);++i<s;){var a=e[i];a&&n(t,a,i,r)}return t})}var UR=Object.prototype;function du(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||UR;return n===e}function WR(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var qR="[object Arguments]";function qp(n){return ti(n)&&Bs(n)==qR}var Xy=Object.prototype,YR=Xy.hasOwnProperty,XR=Xy.propertyIsEnumerable,Zr=qp(function(){return arguments}())?qp:function(n){return ti(n)&&YR.call(n,"callee")&&!XR.call(n,"callee")};function KR(){return!1}var Ky=typeof vn=="object"&&vn&&!vn.nodeType&&vn,Yp=Ky&&typeof yn=="object"&&yn&&!yn.nodeType&&yn,JR=Yp&&Yp.exports===Ky,Xp=JR?li.Buffer:void 0,ZR=Xp?Xp.isBuffer:void 0,Qr=ZR||KR,QR="[object Arguments]",t2="[object Array]",e2="[object Boolean]",n2="[object Date]",i2="[object Error]",s2="[object Function]",r2="[object Map]",o2="[object Number]",a2="[object Object]",l2="[object RegExp]",c2="[object Set]",u2="[object String]",h2="[object WeakMap]",d2="[object ArrayBuffer]",f2="[object DataView]",g2="[object Float32Array]",p2="[object Float64Array]",m2="[object Int8Array]",b2="[object Int16Array]",v2="[object Int32Array]",y2="[object Uint8Array]",x2="[object Uint8ClampedArray]",w2="[object Uint16Array]",C2="[object Uint32Array]",re={};re[g2]=re[p2]=re[m2]=re[b2]=re[v2]=re[y2]=re[x2]=re[w2]=re[C2]=!0;re[QR]=re[t2]=re[d2]=re[e2]=re[f2]=re[n2]=re[i2]=re[s2]=re[r2]=re[o2]=re[a2]=re[l2]=re[c2]=re[u2]=re[h2]=!1;function S2(n){return ti(n)&&hf(n.length)&&!!re[Bs(n)]}function Ya(n){return function(t){return n(t)}}var Jy=typeof vn=="object"&&vn&&!vn.nodeType&&vn,ha=Jy&&typeof yn=="object"&&yn&&!yn.nodeType&&yn,P2=ha&&ha.exports===Jy,ch=P2&&zy.process,to=function(){try{var n=ha&&ha.require&&ha.require("util").types;return n||ch&&ch.binding&&ch.binding("util")}catch{}}(),Kp=to&&to.isTypedArray,E2=Kp?Ya(Kp):S2;const fu=E2;var O2=Object.prototype,A2=O2.hasOwnProperty;function Zy(n,t){var e=tn(n),i=!e&&Zr(n),s=!e&&!i&&Qr(n),r=!e&&!i&&!s&&fu(n),o=e||i||s||r,a=o?WR(n.length,String):[],l=a.length;for(var c in n)(t||A2.call(n,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||uu(c,l)))&&a.push(c);return a}function Qy(n,t){return function(e){return n(t(e))}}var T2=Qy(Object.keys,Object),M2=Object.prototype,k2=M2.hasOwnProperty;function t0(n){if(!du(n))return T2(n);var t=[];for(var e in Object(n))k2.call(n,e)&&e!="constructor"&&t.push(e);return t}function Xa(n){return Cr(n)?Zy(n):t0(n)}function _2(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var $2=Object.prototype,I2=$2.hasOwnProperty;function R2(n){if(!we(n))return _2(n);var t=du(n),e=[];for(var i in n)i=="constructor"&&(t||!I2.call(n,i))||e.push(i);return e}function No(n){return Cr(n)?Zy(n,!0):R2(n)}var N2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D2=/^\w*$/;function df(n,t){if(tn(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||Si(n)?!0:D2.test(n)||!N2.test(n)||t!=null&&n in Object(t)}var Ta=wr(Object,"create");function B2(){this.__data__=Ta?Ta(null):{},this.size=0}function L2(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var j2="__lodash_hash_undefined__",z2=Object.prototype,V2=z2.hasOwnProperty;function F2(n){var t=this.__data__;if(Ta){var e=t[n];return e===j2?void 0:e}return V2.call(t,n)?t[n]:void 0}var H2=Object.prototype,G2=H2.hasOwnProperty;function U2(n){var t=this.__data__;return Ta?t[n]!==void 0:G2.call(t,n)}var W2="__lodash_hash_undefined__";function q2(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ta&&t===void 0?W2:t,this}function cr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}cr.prototype.clear=B2;cr.prototype.delete=L2;cr.prototype.get=F2;cr.prototype.has=U2;cr.prototype.set=q2;function Y2(){this.__data__=[],this.size=0}function gu(n,t){for(var e=n.length;e--;)if(Io(n[e][0],t))return e;return-1}var X2=Array.prototype,K2=X2.splice;function J2(n){var t=this.__data__,e=gu(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():K2.call(t,e,1),--this.size,!0}function Z2(n){var t=this.__data__,e=gu(t,n);return e<0?void 0:t[e][1]}function Q2(n){return gu(this.__data__,n)>-1}function tN(n,t){var e=this.__data__,i=gu(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}function Zi(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Zi.prototype.clear=Y2;Zi.prototype.delete=J2;Zi.prototype.get=Z2;Zi.prototype.has=Q2;Zi.prototype.set=tN;var Ma=wr(li,"Map");function eN(){this.size=0,this.__data__={hash:new cr,map:new(Ma||Zi),string:new cr}}function nN(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function pu(n,t){var e=n.__data__;return nN(t)?e[typeof t=="string"?"string":"hash"]:e.map}function iN(n){var t=pu(this,n).delete(n);return this.size-=t?1:0,t}function sN(n){return pu(this,n).get(n)}function rN(n){return pu(this,n).has(n)}function oN(n,t){var e=pu(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}function Qi(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Qi.prototype.clear=eN;Qi.prototype.delete=iN;Qi.prototype.get=sN;Qi.prototype.has=rN;Qi.prototype.set=oN;var aN="Expected a function";function ff(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(aN);var e=function(){var i=arguments,s=t?t.apply(this,i):i[0],r=e.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return e.cache=r.set(s,o)||r,o};return e.cache=new(ff.Cache||Qi),e}ff.Cache=Qi;var lN=500;function cN(n){var t=ff(n,function(i){return e.size===lN&&e.clear(),i}),e=t.cache;return t}var uN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hN=/\\(\\)?/g,dN=cN(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(uN,function(e,i,s,r){t.push(s?r.replace(hN,"$1"):i||e)}),t});function Ka(n){return n==null?"":Fy(n)}function mu(n,t){return tn(n)?n:df(n,t)?[n]:dN(Ka(n))}var fN=1/0;function Ja(n){if(typeof n=="string"||Si(n))return n;var t=n+"";return t=="0"&&1/n==-fN?"-0":t}function bu(n,t){t=mu(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[Ja(t[e++])];return e&&e==i?n:void 0}function gN(n,t,e){var i=n==null?void 0:bu(n,t);return i===void 0?e:i}function gf(n,t){for(var e=-1,i=t.length,s=n.length;++e<i;)n[s+e]=t[e];return n}var Jp=Bn?Bn.isConcatSpreadable:void 0;function pN(n){return tn(n)||Zr(n)||!!(Jp&&n&&n[Jp])}function Za(n,t,e,i,s){var r=-1,o=n.length;for(e||(e=pN),s||(s=[]);++r<o;){var a=n[r];t>0&&e(a)?t>1?Za(a,t-1,e,i,s):gf(s,a):i||(s[s.length]=a)}return s}function mN(n){var t=n==null?0:n.length;return t?Za(n,1):[]}function bN(n){return Uy(qy(n,void 0,mN),n+"")}var pf=Qy(Object.getPrototypeOf,Object),vN="[object Object]",yN=Function.prototype,xN=Object.prototype,e0=yN.toString,wN=xN.hasOwnProperty,CN=e0.call(Object);function Ti(n){if(!ti(n)||Bs(n)!=vN)return!1;var t=pf(n);if(t===null)return!0;var e=wN.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&e0.call(e)==CN}function SN(n,t,e){var i=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+t];return r}function PN(n,t,e){var i=n.length;return e=e===void 0?i:e,!t&&e>=i?n:SN(n,t,e)}var EN="\\ud800-\\udfff",ON="\\u0300-\\u036f",AN="\\ufe20-\\ufe2f",TN="\\u20d0-\\u20ff",MN=ON+AN+TN,kN="\\ufe0e\\ufe0f",_N="\\u200d",$N=RegExp("["+_N+EN+MN+kN+"]");function n0(n){return $N.test(n)}function IN(n){return n.split("")}var i0="\\ud800-\\udfff",RN="\\u0300-\\u036f",NN="\\ufe20-\\ufe2f",DN="\\u20d0-\\u20ff",BN=RN+NN+DN,LN="\\ufe0e\\ufe0f",jN="["+i0+"]",Kh="["+BN+"]",Jh="\\ud83c[\\udffb-\\udfff]",zN="(?:"+Kh+"|"+Jh+")",s0="[^"+i0+"]",r0="(?:\\ud83c[\\udde6-\\uddff]){2}",o0="[\\ud800-\\udbff][\\udc00-\\udfff]",VN="\\u200d",a0=zN+"?",l0="["+LN+"]?",FN="(?:"+VN+"(?:"+[s0,r0,o0].join("|")+")"+l0+a0+")*",HN=l0+a0+FN,GN="(?:"+[s0+Kh+"?",Kh,r0,o0,jN].join("|")+")",UN=RegExp(Jh+"(?="+Jh+")|"+GN+HN,"g");function WN(n){return n.match(UN)||[]}function qN(n){return n0(n)?WN(n):IN(n)}function c0(n){return function(t){t=Ka(t);var e=n0(t)?qN(t):void 0,i=e?e[0]:t.charAt(0),s=e?PN(e,1).join(""):t.slice(1);return i[n]()+s}}var gc=c0("toUpperCase");function YN(n){return gc(Ka(n).toLowerCase())}function XN(n,t,e,i){var s=-1,r=n==null?0:n.length;for(i&&r&&(e=n[++s]);++s<r;)e=t(e,n[s],s,n);return e}function KN(n){return function(t){return n==null?void 0:n[t]}}var JN={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ZN=KN(JN);const QN=ZN;var tD=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eD="\\u0300-\\u036f",nD="\\ufe20-\\ufe2f",iD="\\u20d0-\\u20ff",sD=eD+nD+iD,rD="["+sD+"]",oD=RegExp(rD,"g");function aD(n){return n=Ka(n),n&&n.replace(tD,QN).replace(oD,"")}var lD=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function cD(n){return n.match(lD)||[]}var uD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hD(n){return uD.test(n)}var u0="\\ud800-\\udfff",dD="\\u0300-\\u036f",fD="\\ufe20-\\ufe2f",gD="\\u20d0-\\u20ff",pD=dD+fD+gD,h0="\\u2700-\\u27bf",d0="a-z\\xdf-\\xf6\\xf8-\\xff",mD="\\xac\\xb1\\xd7\\xf7",bD="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vD="\\u2000-\\u206f",yD=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f0="A-Z\\xc0-\\xd6\\xd8-\\xde",xD="\\ufe0e\\ufe0f",g0=mD+bD+vD+yD,p0="[']",Zp="["+g0+"]",wD="["+pD+"]",m0="\\d+",CD="["+h0+"]",b0="["+d0+"]",v0="[^"+u0+g0+m0+h0+d0+f0+"]",SD="\\ud83c[\\udffb-\\udfff]",PD="(?:"+wD+"|"+SD+")",ED="[^"+u0+"]",y0="(?:\\ud83c[\\udde6-\\uddff]){2}",x0="[\\ud800-\\udbff][\\udc00-\\udfff]",jr="["+f0+"]",OD="\\u200d",Qp="(?:"+b0+"|"+v0+")",AD="(?:"+jr+"|"+v0+")",tm="(?:"+p0+"(?:d|ll|m|re|s|t|ve))?",em="(?:"+p0+"(?:D|LL|M|RE|S|T|VE))?",w0=PD+"?",C0="["+xD+"]?",TD="(?:"+OD+"(?:"+[ED,y0,x0].join("|")+")"+C0+w0+")*",MD="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kD="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_D=C0+w0+TD,$D="(?:"+[CD,y0,x0].join("|")+")"+_D,ID=RegExp([jr+"?"+b0+"+"+tm+"(?="+[Zp,jr,"$"].join("|")+")",AD+"+"+em+"(?="+[Zp,jr+Qp,"$"].join("|")+")",jr+"?"+Qp+"+"+tm,jr+"+"+em,kD,MD,m0,$D].join("|"),"g");function RD(n){return n.match(ID)||[]}function ND(n,t,e){return n=Ka(n),t=e?void 0:t,t===void 0?hD(n)?RD(n):cD(n):n.match(t)||[]}var DD="[']",BD=RegExp(DD,"g");function S0(n){return function(t){return XN(ND(aD(t).replace(BD,"")),n,"")}}var vu=S0(function(n,t,e){return t=t.toLowerCase(),n+(e?YN(t):t)});function LD(n,t,e){return n===n&&(e!==void 0&&(n=n<=e?n:e),t!==void 0&&(n=n>=t?n:t)),n}function dn(n,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=ua(e),e=e===e?e:0),t!==void 0&&(t=ua(t),t=t===t?t:0),LD(ua(n),t,e)}function jD(){this.__data__=new Zi,this.size=0}function zD(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function VD(n){return this.__data__.get(n)}function FD(n){return this.__data__.has(n)}var HD=200;function GD(n,t){var e=this.__data__;if(e instanceof Zi){var i=e.__data__;if(!Ma||i.length<HD-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Qi(i)}return e.set(n,t),this.size=e.size,this}function Zn(n){var t=this.__data__=new Zi(n);this.size=t.size}Zn.prototype.clear=jD;Zn.prototype.delete=zD;Zn.prototype.get=VD;Zn.prototype.has=FD;Zn.prototype.set=GD;function UD(n,t){return n&&qa(t,Xa(t),n)}function WD(n,t){return n&&qa(t,No(t),n)}var P0=typeof vn=="object"&&vn&&!vn.nodeType&&vn,nm=P0&&typeof yn=="object"&&yn&&!yn.nodeType&&yn,qD=nm&&nm.exports===P0,im=qD?li.Buffer:void 0,sm=im?im.allocUnsafe:void 0;function E0(n,t){if(t)return n.slice();var e=n.length,i=sm?sm(e):new n.constructor(e);return n.copy(i),i}function YD(n,t){for(var e=-1,i=n==null?0:n.length,s=0,r=[];++e<i;){var o=n[e];t(o,e,n)&&(r[s++]=o)}return r}function O0(){return[]}var XD=Object.prototype,KD=XD.propertyIsEnumerable,rm=Object.getOwnPropertySymbols,mf=rm?function(n){return n==null?[]:(n=Object(n),YD(rm(n),function(t){return KD.call(n,t)}))}:O0;function JD(n,t){return qa(n,mf(n),t)}var ZD=Object.getOwnPropertySymbols,A0=ZD?function(n){for(var t=[];n;)gf(t,mf(n)),n=pf(n);return t}:O0;function QD(n,t){return qa(n,A0(n),t)}function T0(n,t,e){var i=t(n);return tn(n)?i:gf(i,e(n))}function Zh(n){return T0(n,Xa,mf)}function tB(n){return T0(n,No,A0)}var Qh=wr(li,"DataView"),td=wr(li,"Promise"),qr=wr(li,"Set"),om="[object Map]",eB="[object Object]",am="[object Promise]",lm="[object Set]",cm="[object WeakMap]",um="[object DataView]",nB=xr(Qh),iB=xr(Ma),sB=xr(td),rB=xr(qr),oB=xr(Xh),Xs=Bs;(Qh&&Xs(new Qh(new ArrayBuffer(1)))!=um||Ma&&Xs(new Ma)!=om||td&&Xs(td.resolve())!=am||qr&&Xs(new qr)!=lm||Xh&&Xs(new Xh)!=cm)&&(Xs=function(n){var t=Bs(n),e=t==eB?n.constructor:void 0,i=e?xr(e):"";if(i)switch(i){case nB:return um;case iB:return om;case sB:return am;case rB:return lm;case oB:return cm}return t});const eo=Xs;var aB=Object.prototype,lB=aB.hasOwnProperty;function cB(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&lB.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var pc=li.Uint8Array;function bf(n){var t=new n.constructor(n.byteLength);return new pc(t).set(new pc(n)),t}function uB(n,t){var e=t?bf(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var hB=/\w*$/;function dB(n){var t=new n.constructor(n.source,hB.exec(n));return t.lastIndex=n.lastIndex,t}var hm=Bn?Bn.prototype:void 0,dm=hm?hm.valueOf:void 0;function fB(n){return dm?Object(dm.call(n)):{}}function M0(n,t){var e=t?bf(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var gB="[object Boolean]",pB="[object Date]",mB="[object Map]",bB="[object Number]",vB="[object RegExp]",yB="[object Set]",xB="[object String]",wB="[object Symbol]",CB="[object ArrayBuffer]",SB="[object DataView]",PB="[object Float32Array]",EB="[object Float64Array]",OB="[object Int8Array]",AB="[object Int16Array]",TB="[object Int32Array]",MB="[object Uint8Array]",kB="[object Uint8ClampedArray]",_B="[object Uint16Array]",$B="[object Uint32Array]";function IB(n,t,e){var i=n.constructor;switch(t){case CB:return bf(n);case gB:case pB:return new i(+n);case SB:return uB(n,e);case PB:case EB:case OB:case AB:case TB:case MB:case kB:case _B:case $B:return M0(n,e);case mB:return new i;case bB:case xB:return new i(n);case vB:return dB(n);case yB:return new i;case wB:return fB(n)}}function k0(n){return typeof n.constructor=="function"&&!du(n)?OR(pf(n)):{}}var RB="[object Map]";function NB(n){return ti(n)&&eo(n)==RB}var fm=to&&to.isMap,DB=fm?Ya(fm):NB,BB="[object Set]";function LB(n){return ti(n)&&eo(n)==BB}var gm=to&&to.isSet,jB=gm?Ya(gm):LB,zB=1,VB=2,FB=4,_0="[object Arguments]",HB="[object Array]",GB="[object Boolean]",UB="[object Date]",WB="[object Error]",$0="[object Function]",qB="[object GeneratorFunction]",YB="[object Map]",XB="[object Number]",I0="[object Object]",KB="[object RegExp]",JB="[object Set]",ZB="[object String]",QB="[object Symbol]",tL="[object WeakMap]",eL="[object ArrayBuffer]",nL="[object DataView]",iL="[object Float32Array]",sL="[object Float64Array]",rL="[object Int8Array]",oL="[object Int16Array]",aL="[object Int32Array]",lL="[object Uint8Array]",cL="[object Uint8ClampedArray]",uL="[object Uint16Array]",hL="[object Uint32Array]",te={};te[_0]=te[HB]=te[eL]=te[nL]=te[GB]=te[UB]=te[iL]=te[sL]=te[rL]=te[oL]=te[aL]=te[YB]=te[XB]=te[I0]=te[KB]=te[JB]=te[ZB]=te[QB]=te[lL]=te[cL]=te[uL]=te[hL]=!0;te[WB]=te[$0]=te[tL]=!1;function da(n,t,e,i,s,r){var o,a=t&zB,l=t&VB,c=t&FB;if(e&&(o=s?e(n,i,s,r):e(n)),o!==void 0)return o;if(!we(n))return n;var u=tn(n);if(u){if(o=cB(n),!a)return Gy(n,o)}else{var d=eo(n),h=d==$0||d==qB;if(Qr(n))return E0(n,a);if(d==I0||d==_0||h&&!s){if(o=l||h?{}:k0(n),!a)return l?QD(n,WD(o,n)):JD(n,UD(o,n))}else{if(!te[d])return s?n:{};o=IB(n,d,a)}}r||(r=new Zn);var f=r.get(n);if(f)return f;r.set(n,o),jB(n)?n.forEach(function(p){o.add(da(p,t,e,p,n,r))}):DB(n)&&n.forEach(function(p,v){o.set(v,da(p,t,e,v,n,r))});var g=c?l?tB:Zh:l?No:Xa,m=u?void 0:g(n);return NR(m||n,function(p,v){m&&(v=p,p=n[v]),uf(o,v,da(p,t,e,v,n,r))}),o}var dL=4;function ed(n){return da(n,dL)}var fL=1,gL=4;function ae(n){return da(n,fL|gL)}var pL="__lodash_hash_undefined__";function mL(n){return this.__data__.set(n,pL),this}function bL(n){return this.__data__.has(n)}function no(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Qi;++t<e;)this.add(n[t])}no.prototype.add=no.prototype.push=mL;no.prototype.has=bL;function vL(n,t){for(var e=-1,i=n==null?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1}function vf(n,t){return n.has(t)}var yL=1,xL=2;function R0(n,t,e,i,s,r){var o=e&yL,a=n.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(n),u=r.get(t);if(c&&u)return c==t&&u==n;var d=-1,h=!0,f=e&xL?new no:void 0;for(r.set(n,t),r.set(t,n);++d<a;){var g=n[d],m=t[d];if(i)var p=o?i(m,g,d,t,n,r):i(g,m,d,n,t,r);if(p!==void 0){if(p)continue;h=!1;break}if(f){if(!vL(t,function(v,b){if(!vf(f,b)&&(g===v||s(g,v,e,i,r)))return f.push(b)})){h=!1;break}}else if(!(g===m||s(g,m,e,i,r))){h=!1;break}}return r.delete(n),r.delete(t),h}function wL(n){var t=-1,e=Array(n.size);return n.forEach(function(i,s){e[++t]=[s,i]}),e}function yf(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}var CL=1,SL=2,PL="[object Boolean]",EL="[object Date]",OL="[object Error]",AL="[object Map]",TL="[object Number]",ML="[object RegExp]",kL="[object Set]",_L="[object String]",$L="[object Symbol]",IL="[object ArrayBuffer]",RL="[object DataView]",pm=Bn?Bn.prototype:void 0,uh=pm?pm.valueOf:void 0;function NL(n,t,e,i,s,r,o){switch(e){case RL:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case IL:return!(n.byteLength!=t.byteLength||!r(new pc(n),new pc(t)));case PL:case EL:case TL:return Io(+n,+t);case OL:return n.name==t.name&&n.message==t.message;case ML:case _L:return n==t+"";case AL:var a=wL;case kL:var l=i&CL;if(a||(a=yf),n.size!=t.size&&!l)return!1;var c=o.get(n);if(c)return c==t;i|=SL,o.set(n,t);var u=R0(a(n),a(t),i,s,r,o);return o.delete(n),u;case $L:if(uh)return uh.call(n)==uh.call(t)}return!1}var DL=1,BL=Object.prototype,LL=BL.hasOwnProperty;function jL(n,t,e,i,s,r){var o=e&DL,a=Zh(n),l=a.length,c=Zh(t),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in t:LL.call(t,h)))return!1}var f=r.get(n),g=r.get(t);if(f&&g)return f==t&&g==n;var m=!0;r.set(n,t),r.set(t,n);for(var p=o;++d<l;){h=a[d];var v=n[h],b=t[h];if(i)var y=o?i(b,v,h,t,n,r):i(v,b,h,n,t,r);if(!(y===void 0?v===b||s(v,b,e,i,r):y)){m=!1;break}p||(p=h=="constructor")}if(m&&!p){var w=n.constructor,C=t.constructor;w!=C&&"constructor"in n&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(m=!1)}return r.delete(n),r.delete(t),m}var zL=1,mm="[object Arguments]",bm="[object Array]",Ml="[object Object]",VL=Object.prototype,vm=VL.hasOwnProperty;function FL(n,t,e,i,s,r){var o=tn(n),a=tn(t),l=o?bm:eo(n),c=a?bm:eo(t);l=l==mm?Ml:l,c=c==mm?Ml:c;var u=l==Ml,d=c==Ml,h=l==c;if(h&&Qr(n)){if(!Qr(t))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new Zn),o||fu(n)?R0(n,t,e,i,s,r):NL(n,t,l,e,i,s,r);if(!(e&zL)){var f=u&&vm.call(n,"__wrapped__"),g=d&&vm.call(t,"__wrapped__");if(f||g){var m=f?n.value():n,p=g?t.value():t;return r||(r=new Zn),s(m,p,e,i,r)}}return h?(r||(r=new Zn),jL(n,t,e,i,s,r)):!1}function yu(n,t,e,i,s){return n===t?!0:n==null||t==null||!ti(n)&&!ti(t)?n!==n&&t!==t:FL(n,t,e,i,yu,s)}var HL=1,GL=2;function UL(n,t,e,i){var s=e.length,r=s,o=!i;if(n==null)return!r;for(n=Object(n);s--;){var a=e[s];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++s<r;){a=e[s];var l=a[0],c=n[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in n))return!1}else{var d=new Zn;if(i)var h=i(c,u,l,n,t,d);if(!(h===void 0?yu(u,c,HL|GL,i,d):h))return!1}}return!0}function N0(n){return n===n&&!we(n)}function WL(n){for(var t=Xa(n),e=t.length;e--;){var i=t[e],s=n[i];t[e]=[i,s,N0(s)]}return t}function D0(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==void 0||n in Object(e))}}function qL(n){var t=WL(n);return t.length==1&&t[0][2]?D0(t[0][0],t[0][1]):function(e){return e===n||UL(e,n,t)}}function YL(n,t){return n!=null&&t in Object(n)}function B0(n,t,e){t=mu(t,n);for(var i=-1,s=t.length,r=!1;++i<s;){var o=Ja(t[i]);if(!(r=n!=null&&e(n,o)))break;n=n[o]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&hf(s)&&uu(o,s)&&(tn(n)||Zr(n)))}function L0(n,t){return n!=null&&B0(n,t,YL)}var XL=1,KL=2;function JL(n,t){return df(n)&&N0(t)?D0(Ja(n),t):function(e){var i=gN(e,n);return i===void 0&&i===t?L0(e,n):yu(t,i,XL|KL)}}function ZL(n){return function(t){return t==null?void 0:t[n]}}function QL(n){return function(t){return bu(t,n)}}function tj(n){return df(n)?ZL(Ja(n)):QL(n)}function xf(n){return typeof n=="function"?n:n==null?$o:typeof n=="object"?tn(n)?JL(n[0],n[1]):qL(n):tj(n)}function ej(n,t,e,i){for(var s=-1,r=n==null?0:n.length;++s<r;){var o=n[s];t(i,o,e(o),n)}return i}function nj(n){return function(t,e,i){for(var s=-1,r=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++s];if(e(r[l],l,r)===!1)break}return t}}var j0=nj();function ij(n,t){return n&&j0(n,t,Xa)}function sj(n,t){return function(e,i){if(e==null)return e;if(!Cr(e))return n(e,i);for(var s=e.length,r=t?s:-1,o=Object(e);(t?r--:++r<s)&&i(o[r],r,o)!==!1;);return e}}var z0=sj(ij);function rj(n,t,e,i){return z0(n,function(s,r,o){t(i,s,e(s),o)}),i}function oj(n,t){return function(e,i){var s=tn(e)?ej:rj,r=t?t():{};return s(e,n,xf(i),r)}}var hh=function(){return li.Date.now()},aj="Expected a function",lj=Math.max,cj=Math.min;function wf(n,t,e){var i,s,r,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(aj);t=ua(t)||0,we(e)&&(u=!!e.leading,d="maxWait"in e,r=d?lj(ua(e.maxWait)||0,t):r,h="trailing"in e?!!e.trailing:h);function f(P){var E=i,S=s;return i=s=void 0,c=P,o=n.apply(S,E),o}function g(P){return c=P,a=setTimeout(v,t),u?f(P):o}function m(P){var E=P-l,S=P-c,A=t-E;return d?cj(A,r-S):A}function p(P){var E=P-l,S=P-c;return l===void 0||E>=t||E<0||d&&S>=r}function v(){var P=hh();if(p(P))return b(P);a=setTimeout(v,m(P))}function b(P){return a=void 0,h&&i?f(P):(i=s=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function w(){return a===void 0?o:b(hh())}function C(){var P=hh(),E=p(P);if(i=arguments,s=this,l=P,E){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(v,t),f(l)}return a===void 0&&(a=setTimeout(v,t)),o}return C.cancel=y,C.flush=w,C}var V0=Object.prototype,uj=V0.hasOwnProperty,hj=Ro(function(n,t){n=Object(n);var e=-1,i=t.length,s=i>2?t[2]:void 0;for(s&&fc(t[0],t[1],s)&&(i=1);++e<i;)for(var r=t[e],o=No(r),a=-1,l=o.length;++a<l;){var c=o[a],u=n[c];(u===void 0||Io(u,V0[c])&&!uj.call(n,c))&&(n[c]=r[c])}return n});function nd(n,t,e){(e!==void 0&&!Io(n[t],e)||e===void 0&&!(t in n))&&hu(n,t,e)}function mc(n){return ti(n)&&Cr(n)}function id(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}function dj(n){return qa(n,No(n))}function fj(n,t,e,i,s,r,o){var a=id(n,e),l=id(t,e),c=o.get(l);if(c){nd(n,e,c);return}var u=r?r(a,l,e+"",n,t,o):void 0,d=u===void 0;if(d){var h=tn(l),f=!h&&Qr(l),g=!h&&!f&&fu(l);u=l,h||f||g?tn(a)?u=a:mc(a)?u=Gy(a):f?(d=!1,u=E0(l,!0)):g?(d=!1,u=M0(l,!0)):u=[]:Ti(l)||Zr(l)?(u=a,Zr(a)?u=dj(a):(!we(a)||cf(a))&&(u=k0(l))):d=!1}d&&(o.set(l,u),s(u,l,i,r,o),o.delete(l)),nd(n,e,u)}function xu(n,t,e,i,s){n!==t&&j0(t,function(r,o){if(s||(s=new Zn),we(r))fj(n,t,o,e,xu,i,s);else{var a=i?i(id(n,o),r,o+"",n,t,s):void 0;a===void 0&&(a=r),nd(n,o,a)}},No)}function F0(n,t,e,i,s,r){return we(n)&&we(t)&&(r.set(t,n),xu(n,t,void 0,F0,r),r.delete(t)),n}var gj=Yy(function(n,t,e,i){xu(n,t,e,i)});const pj=gj;var H0=Ro(function(n){return n.push(void 0,F0),Hy(pj,void 0,n)});function G0(n,t,e){for(var i=-1,s=n==null?0:n.length;++i<s;)if(e(t,n[i]))return!0;return!1}var mj=200;function bj(n,t,e,i){var s=-1,r=Wy,o=!0,a=n.length,l=[],c=t.length;if(!a)return l;e&&(t=ca(t,Ya(e))),i?(r=G0,o=!1):t.length>=mj&&(r=vf,o=!1,t=new no(t));t:for(;++s<a;){var u=n[s],d=e==null?u:e(u);if(u=i||u!==0?u:0,o&&d===d){for(var h=c;h--;)if(t[h]===d)continue t;l.push(u)}else r(t,d,i)||l.push(u)}return l}var vj=Ro(function(n,t){return mc(n)?bj(n,Za(t,1,mc,!0)):[]});function yj(n,t){var e=-1,i=Cr(n)?Array(n.length):[];return z0(n,function(s,r,o){i[++e]=t(s,r,o)}),i}var xj=Object.prototype,wj=xj.hasOwnProperty,ym=oj(function(n,t,e){wj.call(n,e)?n[e].push(t):hu(n,e,[t])});function Cj(n,t){return n>t}var Sj=Object.prototype,Pj=Sj.hasOwnProperty;function Ej(n,t){return n!=null&&Pj.call(n,t)}function kl(n,t){return n!=null&&B0(n,t,Ej)}var Oj="[object Map]",Aj="[object Set]",Tj=Object.prototype,Mj=Tj.hasOwnProperty;function U0(n){if(n==null)return!0;if(Cr(n)&&(tn(n)||typeof n=="string"||typeof n.splice=="function"||Qr(n)||fu(n)||Zr(n)))return!n.length;var t=eo(n);if(t==Oj||t==Aj)return!n.size;if(du(n))return!t0(n).length;for(var e in n)if(Mj.call(n,e))return!1;return!0}function vi(n,t){return yu(n,t)}var kj="[object Number]";function xm(n){return typeof n=="number"||ti(n)&&Bs(n)==kj}var _j=c0("toLowerCase");function $j(n,t,e){for(var i=-1,s=n.length;++i<s;){var r=n[i],o=t(r);if(o!=null&&(a===void 0?o===o&&!Si(o):e(o,a)))var a=o,l=r}return l}function Ij(n){return n&&n.length?$j(n,$o,Cj):void 0}var xe=Yy(function(n,t,e){xu(n,t,e)});function Rj(n,t,e,i){if(!we(n))return n;t=mu(t,n);for(var s=-1,r=t.length,o=r-1,a=n;a!=null&&++s<r;){var l=Ja(t[s]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=o){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=we(u)?u:uu(t[s+1])?[]:{})}uf(a,l,c),a=a[l]}return n}function Nj(n,t,e){for(var i=-1,s=t.length,r={};++i<s;){var o=t[i],a=bu(n,o);e(a,o)&&Rj(r,mu(o,n),a)}return r}function Dj(n,t){var e=n.length;for(n.sort(t);e--;)n[e]=n[e].value;return n}function Bj(n,t){if(n!==t){var e=n!==void 0,i=n===null,s=n===n,r=Si(n),o=t!==void 0,a=t===null,l=t===t,c=Si(t);if(!a&&!c&&!r&&n>t||r&&o&&l&&!a&&!c||i&&o&&l||!e&&l||!s)return 1;if(!i&&!r&&!c&&n<t||c&&e&&s&&!i&&!r||a&&e&&s||!o&&s||!l)return-1}return 0}function Lj(n,t,e){for(var i=-1,s=n.criteria,r=t.criteria,o=s.length,a=e.length;++i<o;){var l=Bj(s[i],r[i]);if(l){if(i>=a)return l;var c=e[i];return l*(c=="desc"?-1:1)}}return n.index-t.index}function jj(n,t,e){t.length?t=ca(t,function(r){return tn(r)?function(o){return bu(o,r.length===1?r[0]:r)}:r}):t=[$o];var i=-1;t=ca(t,Ya(xf));var s=yj(n,function(r,o,a){var l=ca(t,function(c){return c(r)});return{criteria:l,index:++i,value:r}});return Dj(s,function(r,o){return Lj(r,o,e)})}function zj(n,t){return Nj(n,t,function(e,i){return L0(n,i)})}var wm=bN(function(n,t){return n==null?{}:zj(n,t)}),W0=Ro(function(n,t){if(n==null)return[];var e=t.length;return e>1&&fc(n,t[0],t[1])?t=[]:e>2&&fc(t[0],t[1],t[2])&&(t=[t[0]]),jj(n,Za(t,1),[])}),Vj=4294967295,Fj=Vj-1,Hj=Math.floor,Gj=Math.min;function q0(n,t,e,i){var s=0,r=n==null?0:n.length;if(r===0)return 0;t=e(t);for(var o=t!==t,a=t===null,l=Si(t),c=t===void 0;s<r;){var u=Hj((s+r)/2),d=e(n[u]),h=d!==void 0,f=d===null,g=d===d,m=Si(d);if(o)var p=i||g;else c?p=g&&(i||h):a?p=g&&h&&(i||!f):l?p=g&&h&&!f&&(i||!m):f||m?p=!1:p=i?d<=t:d<t;p?s=u+1:r=u}return Gj(r,Fj)}var Uj=4294967295,Wj=Uj>>>1;function qj(n,t,e){var i=0,s=n==null?i:n.length;if(typeof t=="number"&&t===t&&s<=Wj){for(;i<s;){var r=i+s>>>1,o=n[r];o!==null&&!Si(o)&&(e?o<=t:o<t)?i=r+1:s=r}return s}return q0(n,t,$o,e)}function Yj(n,t){return qj(n,t)}function Xj(n,t,e){return q0(n,t,xf(e))}var Kj=S0(function(n,t,e){return n+(e?" ":"")+gc(t)}),Jj="Expected a function";function Zj(n,t,e){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(Jj);return we(e)&&(i="leading"in e?!!e.leading:i,s="trailing"in e?!!e.trailing:s),wf(n,t,{leading:i,maxWait:t,trailing:s})}var Qj=1/0,tz=qr&&1/yf(new qr([,-0]))[1]==Qj?function(n){return new qr(n)}:AR,ez=200;function Y0(n,t,e){var i=-1,s=Wy,r=n.length,o=!0,a=[],l=a;if(e)o=!1,s=G0;else if(r>=ez){var c=t?null:tz(n);if(c)return yf(c);o=!1,s=vf,l=new no}else l=t?[]:a;t:for(;++i<r;){var u=n[i],d=t?t(u):u;if(u=e||u!==0?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue t;t&&l.push(d),a.push(u)}else s(l,d,e)||(l!==a&&l.push(d),a.push(u))}return a}var Cm=Ro(function(n){return Y0(Za(n,1,mc,!0))});function X0(n){return n&&n.length?Y0(n):[]}function K0(n,t,e){if(e)switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2]);case 4:return n.call(t,e[0],e[1],e[2],e[3]);case 5:return n.call(t,e[0],e[1],e[2],e[3],e[4]);case 6:return n.call(t,e[0],e[1],e[2],e[3],e[4],e[5]);default:return n.apply(t,e)}return n.call(t)}function yt(n,t,...e){return K0(n,t,e)}function nz(n){return typeof n=="object"&&n.then&&typeof n.then=="function"}function sd(n){return n!=null&&(n instanceof Promise||nz(n))}function Cf(...n){const t=[];if(n.forEach(i=>{Array.isArray(i)?t.push(...i):t.push(i)}),t.some(i=>sd(i))){const i=t.map(s=>sd(s)?s:Promise.resolve(s!==!1));return Promise.all(i).then(s=>s.reduce((r,o)=>o!==!1&&r,!0))}return t.every(i=>i!==!1)}function iz(...n){const t=Cf(n);return typeof t=="boolean"?Promise.resolve(t):t}function dh(n,t){const e=[];for(let i=0;i<n.length;i+=2){const s=n[i],r=n[i+1],o=Array.isArray(t)?t:[t],a=K0(s,r,o);e.push(a)}return Cf(e)}class sz{constructor(){this.listeners={}}on(t,e,i){return e==null?this:(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,i),this)}once(t,e,i){const s=(...r)=>(this.off(t,s),dh([e,i],r));return this.on(t,s,this)}off(t,e,i){if(!(t||e||i))return this.listeners={},this;const s=this.listeners;return(t?[t]:Object.keys(s)).forEach(o=>{const a=s[o];if(a){if(!(e||i)){delete s[o];return}for(let l=a.length-2;l>=0;l-=2)e&&a[l]!==e||i&&a[l+1]!==i||a.splice(l,2)}}),this}trigger(t,...e){let i=!0;if(t!=="*"){const r=this.listeners[t];r!=null&&(i=dh([...r],e))}const s=this.listeners["*"];return s!=null?Cf([i,dh([...s],[t,...e])]):i}emit(t,...e){return this.trigger(t,...e)}}function rz(n,...t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i))})})}const oz=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])};function az(n,t){oz(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}class lz{}const cz=/^\s*class\s+/.test(`${lz}`)||/^\s*class\s*\{/.test(`${class{}}`);function Sf(n,t){let e;return cz?e=class extends t{}:(e=function(){return t.apply(this,arguments)},az(e,t)),Object.defineProperty(e,"name",{value:n}),e}function Sm(n){return n==="__proto__"}function Pf(n,t,e="/"){let i;const s=Array.isArray(t)?t:t.split(e);if(s.length)for(i=n;s.length;){const r=s.shift();if(Object(i)===i&&r&&r in i)i=i[r];else return}return i}function Do(n,t,e,i="/"){const s=Array.isArray(t)?t:t.split(i),r=s.pop();if(r&&!Sm(r)){let o=n;s.forEach(a=>{Sm(a)||(o[a]==null&&(o[a]={}),o=o[a])}),o[r]=e}return n}function Pm(n,t,e="/"){const i=Array.isArray(t)?t.slice():t.split(e),s=i.pop();if(s)if(i.length>0){const r=Pf(n,i);r&&delete r[s]}else delete n[s];return n}var uz=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class pe extends sz{dispose(){this.off()}}uz([cn.dispose()],pe.prototype,"dispose",null);(function(n){n.dispose=cn.dispose})(pe||(pe={}));rz(pe,cn);const J0=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Z0=J0(n=>n.replace(/\B([A-Z])/g,"-$1").toLowerCase()),Ef=J0(n=>Kj(vu(n)).replace(/ /g,""));function fh(n){let t=2166136261,e=!1,i=n;for(let s=0,r=i.length;s<r;s+=1){let o=i.charCodeAt(s);o>127&&!e&&(i=unescape(encodeURIComponent(i)),o=i.charCodeAt(s),e=!0),t^=o,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function bc(){let n="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let e=0,i=t.length;e<i;e+=1){const s=t[e],r=Math.random()*16|0,o=s==="x"?r:s==="y"?r&3|8:s;n+=o.toString(16)}return n}function hz(n,t,e){const i=Math.min(2,Math.floor(n.length*.34));let s=Math.floor(n.length*.4)+1,r,o=!1;const a=n.toLowerCase();for(const l of t){const c=e(l);if(c!==void 0&&Math.abs(c.length-a.length)<=i){const u=c.toLowerCase();if(u===a){if(c===n)continue;return l}if(o||c.length<3)continue;const d=dz(a,u,s-1);if(d===void 0)continue;d<3?(o=!0,r=l):(s=d,r=l)}}return r}function dz(n,t,e){let i=new Array(t.length+1),s=new Array(t.length+1);const r=e+1;for(let a=0;a<=t.length;a+=1)i[a]=a;for(let a=1;a<=n.length;a+=1){const l=n.charCodeAt(a-1),c=a>e?a-e:1,u=t.length>e+a?e+a:t.length;s[0]=a;let d=a;for(let f=1;f<c;f+=1)s[f]=r;for(let f=c;f<=u;f+=1){const g=l===t.charCodeAt(f-1)?i[f-1]:Math.min(i[f]+1,s[f-1]+1,i[f-1]+2);s[f]=g,d=Math.min(d,g)}for(let f=u+1;f<=t.length;f+=1)s[f]=r;if(d>e)return;const h=i;i=s,s=h}const o=i[t.length];return o>e?void 0:o}function fz(n,t){if(t==null)t=n??1,n=0;else if(t<n){const e=n;n=t,t=e}return Math.floor(Math.random()*(t-n+1)+n)}function Ui(n){return typeof n=="string"&&n.slice(-1)==="%"}function wn(n,t){if(n==null)return 0;let e;if(typeof n=="string"){if(e=parseFloat(n),Ui(n)&&(e/=100,Number.isFinite(e)))return e*t}else e=n;return Number.isFinite(e)?e>0&&e<1?e*t:e:0}function yi(n){if(typeof n=="object"){let e=0,i=0,s=0,r=0;return n.vertical!=null&&Number.isFinite(n.vertical)&&(i=r=n.vertical),n.horizontal!=null&&Number.isFinite(n.horizontal)&&(s=e=n.horizontal),n.left!=null&&Number.isFinite(n.left)&&(e=n.left),n.top!=null&&Number.isFinite(n.top)&&(i=n.top),n.right!=null&&Number.isFinite(n.right)&&(s=n.right),n.bottom!=null&&Number.isFinite(n.bottom)&&(r=n.bottom),{top:i,right:s,bottom:r,left:e}}let t=0;return n!=null&&Number.isFinite(n)&&(t=n),{top:t,right:t,bottom:t,left:t}}let Of=!1,Q0=!1,tx=!1,ex=!1,nx=!1,ix=!1,sx=!1,rx=!1,ox=!1,ax=!1,lx=!1,cx=!1,ux=!1,hx=!1,dx=!1,fx=!1;if(typeof navigator=="object"){const n=navigator.userAgent;Of=n.indexOf("Macintosh")>=0,Q0=!!n.match(/(iPad|iPhone|iPod)/g),tx=n.indexOf("Windows")>=0,ex=n.indexOf("MSIE")>=0,nx=!!n.match(/Trident\/7\./),ix=!!n.match(/Edge\//),sx=n.indexOf("Mozilla/")>=0&&n.indexOf("MSIE")<0&&n.indexOf("Edge/")<0,ox=n.indexOf("Chrome/")>=0&&n.indexOf("Edge/")<0,ax=n.indexOf("Opera/")>=0||n.indexOf("OPR/")>=0,lx=n.indexOf("Firefox/")>=0,cx=n.indexOf("AppleWebKit/")>=0&&n.indexOf("Chrome/")<0&&n.indexOf("Edge/")<0,typeof document=="object"&&(fx=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||n.indexOf("Opera/")>=0)}typeof window=="object"&&(rx=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,hx=window.PointerEvent!=null&&!Of);if(typeof document=="object"){ux="ontouchstart"in document.documentElement;try{const n=Object.defineProperty({},"passive",{get(){dx=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},n)}catch{}}var _n;(function(n){n.IS_MAC=Of,n.IS_IOS=Q0,n.IS_WINDOWS=tx,n.IS_IE=ex,n.IS_IE11=nx,n.IS_EDGE=ix,n.IS_NETSCAPE=sx,n.IS_CHROME_APP=rx,n.IS_CHROME=ox,n.IS_OPERA=ax,n.IS_FIREFOX=lx,n.IS_SAFARI=cx,n.SUPPORT_TOUCH=ux,n.SUPPORT_POINTER=hx,n.SUPPORT_PASSIVE=dx,n.NO_FOREIGNOBJECT=fx,n.SUPPORT_FOREIGNOBJECT=!n.NO_FOREIGNOBJECT})(_n||(_n={}));(function(n){function t(){const r=window.module;return r!=null&&r.hot!=null&&r.hot.status!=null?r.hot.status():"unkonwn"}n.getHMRStatus=t;function e(){return t()==="apply"}n.isApplyingHMR=e;const i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function s(r){const o=document.createElement(i[r]||"div"),a=`on${r}`;let l=a in o;return l||(o.setAttribute(a,"return;"),l=typeof o[a]=="function"),l}n.isEventSupported=s})(_n||(_n={}));const Af=/[\t\r\n\f]/g,Tf=/\S+/g,io=n=>` ${n} `;function so(n){return n&&n.getAttribute&&n.getAttribute("class")||""}function Bo(n,t){if(n==null||t==null)return!1;const e=io(so(n)),i=io(t);return n.nodeType===1?e.replace(Af," ").includes(i):!1}function bt(n,t){if(!(n==null||t==null)){if(typeof t=="function")return bt(n,t(so(n)));if(typeof t=="string"&&n.nodeType===1){const e=t.match(Tf)||[],i=io(so(n)).replace(Af," ");let s=e.reduce((r,o)=>r.indexOf(io(o))<0?`${r}${o} `:r,i);s=s.trim(),i!==s&&n.setAttribute("class",s)}}}function Ce(n,t){if(n!=null){if(typeof t=="function")return Ce(n,t(so(n)));if((!t||typeof t=="string")&&n.nodeType===1){const e=(t||"").match(Tf)||[],i=io(so(n)).replace(Af," ");let s=e.reduce((r,o)=>{const a=io(o);return r.indexOf(a)>-1?r.replace(a," "):r},i);s=t?s.trim():"",i!==s&&n.setAttribute("class",s)}}}function fa(n,t,e){if(!(n==null||t==null)){if(e!=null&&typeof t=="string"){e?bt(n,t):Ce(n,t);return}if(typeof t=="function")return fa(n,t(so(n),e),e);typeof t=="string"&&(t.match(Tf)||[]).forEach(s=>{Bo(n,s)?Ce(n,s):bt(n,s)})}}let Em=0;function gz(){return Em+=1,`v${Em}`}function Mf(n){return(n.id==null||n.id==="")&&(n.id=gz()),n.id}function Os(n){return n==null?!1:typeof n.getScreenCTM=="function"&&n instanceof SVGElement}const je={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Om="1.1";function Am(n,t=document){return t.createElement(n)}function kf(n,t=je.xhtml,e=document){return e.createElementNS(t,n)}function ci(n,t=document){return kf(n,je.svg,t)}function vc(n){if(n){const e=`<svg xmlns="${je.svg}" xmlns:xlink="${je.xlink}" version="${Om}">${n}</svg>`,{documentElement:i}=pz(e,{async:!1});return i}const t=document.createElementNS(je.svg,"svg");return t.setAttributeNS(je.xmlns,"xmlns:xlink",je.xlink),t.setAttribute("version",Om),t}function pz(n,t={}){let e;try{const i=new DOMParser;if(t.async!=null){const s=i;s.async=t.async}e=i.parseFromString(n,t.mimeType||"text/xml")}catch{e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${n}`);return e}function mz(n,t=!0){const e=n.nodeName;return t?e.toLowerCase():e.toUpperCase()}function _f(n){let t=0,e=n.previousSibling;for(;e;)e.nodeType===1&&(t+=1),e=e.previousSibling;return t}function bz(n,t){return n.querySelectorAll(t)}function vz(n,t){return n.querySelector(t)}function gx(n,t,e){const i=n.ownerSVGElement;let s=n.parentNode;for(;s&&s!==e&&s!==i;){if(Bo(s,t))return s;s=s.parentNode}return null}function $f(n,t){const e=t&&t.parentNode;return n===e||!!(e&&e.nodeType===1&&n.compareDocumentPosition(e)&16)}function xi(n){n&&(Array.isArray(n)?n:[n]).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}function Qa(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Nn(n,t){(Array.isArray(t)?t:[t]).forEach(i=>{i!=null&&n.appendChild(i)})}function px(n,t){const e=n.firstChild;return e?ka(e,t):Nn(n,t)}function ka(n,t){const e=n.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(s=>{s!=null&&e.insertBefore(s,n)})}function yz(n,t){const e=n.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(s=>{s!=null&&e.insertBefore(s,n.nextSibling)})}function ji(n,t){t!=null&&t.appendChild(n)}function xz(n){return!!n&&n.nodeType===1}function Tm(n){try{return n instanceof HTMLElement}catch{return typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object"}}function wz(n,t){const e=[];let i=n.firstChild;for(;i;i=i.nextSibling)i.nodeType===1&&(!t||Bo(i,t))&&e.push(i);return e}const mx=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function Cz(n,t){return n.getAttribute(t)}function If(n,t){const e=vx(t);e.ns?n.hasAttributeNS(e.ns,e.local)&&n.removeAttributeNS(e.ns,e.local):n.hasAttribute(t)&&n.removeAttribute(t)}function Rf(n,t,e){if(e==null)return If(n,t);const i=vx(t);i.ns&&typeof e=="string"?n.setAttributeNS(i.ns,t,e):t==="id"?n.id=`${e}`:n.setAttribute(t,`${e}`)}function bx(n,t){Object.keys(t).forEach(e=>{Rf(n,e,t[e])})}function Vt(n,t,e){if(t==null){const i=n.attributes,s={};for(let r=0;r<i.length;r+=1)s[i[r].name]=i[r].value;return s}if(typeof t=="string"&&e===void 0)return n.getAttribute(t);typeof t=="object"?bx(n,t):Rf(n,t,e)}function vx(n){if(n.indexOf(":")!==-1){const t=n.split(":");return{ns:je[t[0]],local:t[1]}}return{ns:null,local:n}}function _a(n){const t={};return Object.keys(n).forEach(e=>{const i=mx.includes(e)?e:Z0(e);t[i]=n[e]}),t}function _l(n){const t={};return n.split(";").forEach(i=>{const s=i.trim();if(s){const r=s.split("=");r.length&&(t[r[0].trim()]=r[1]?r[1].trim():"")}}),t}function rd(n,t){return Object.keys(t).forEach(e=>{if(e==="class")n[e]=n[e]?`${n[e]} ${t[e]}`:t[e];else if(e==="style"){const i=typeof n[e]=="object",s=typeof t[e]=="object";let r,o;i&&s?(r=n[e],o=t[e]):i?(r=n[e],o=_l(t[e])):s?(r=_l(n[e]),o=t[e]):(r=_l(n[e]),o=_l(t[e])),n[e]=rd(r,o)}else n[e]=t[e]}),n}function Sz(n,t,e={}){const i=e.offset||0,s=[],r=[];let o,a,l=null;for(let c=0;c<n.length;c+=1){o=r[c]=n[c];for(let u=0,d=t.length;u<d;u+=1){const h=t[u],f=h.start+i,g=h.end+i;c>=f&&c<g&&(typeof o=="string"?o=r[c]={t:n[c],attrs:h.attrs}:o.attrs=rd(rd({},o.attrs),h.attrs),e.includeAnnotationIndices&&(o.annotations==null&&(o.annotations=[]),o.annotations.push(u)))}a=r[c-1],a?we(o)&&we(a)?(l=l,JSON.stringify(o.attrs)===JSON.stringify(a.attrs)?l.t+=o.t:(s.push(l),l=o)):we(o)||we(a)?(l=l,s.push(l),l=o):l=(l||"")+o:l=o}return l!=null&&s.push(l),s}function Pz(n){return n.replace(/ /g,"")}var Mm;(function(n){function t(c){const u="data:";return c.substr(0,u.length)===u}n.isDataUrl=t;function e(c,u){if(!c||t(c)){setTimeout(()=>u(null,c));return}const d=()=>{u(new Error(`Failed to load image: ${c}`))},h=window.FileReader?g=>{if(g.status===200){const m=new FileReader;m.onload=p=>{const v=p.target.result;u(null,v)},m.onerror=d,m.readAsDataURL(g.response)}else d()}:g=>{const m=p=>{const b=[];for(let y=0;y<p.length;y+=32768)b.push(String.fromCharCode.apply(null,p.subarray(y,y+32768)));return b.join("")};if(g.status===200){let p=c.split(".").pop()||"png";p==="svg"&&(p="svg+xml");const v=`data:image/${p};base64,`,b=new Uint8Array(g.response),y=v+btoa(m(b));u(null,y)}else d()},f=new XMLHttpRequest;f.responseType=window.FileReader?"blob":"arraybuffer",f.open("GET",c,!0),f.addEventListener("error",d),f.addEventListener("load",()=>h(f)),f.send()}n.imageToDataUri=e;function i(c){let u=c.replace(/\s/g,"");u=decodeURIComponent(u);const d=u.indexOf(","),h=u.slice(0,d),f=h.split(":")[1].split(";")[0],g=u.slice(d+1);let m;h.indexOf("base64")>=0?m=atob(g):m=unescape(encodeURIComponent(g));const p=new Uint8Array(m.length);for(let v=0;v<m.length;v+=1)p[v]=m.charCodeAt(v);return new Blob([p],{type:f})}n.dataUriToBlob=i;function s(c,u){const d=window.navigator.msSaveBlob;if(d)d(c,u);else{const h=window.URL.createObjectURL(c),f=document.createElement("a");f.href=h,f.download=u,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(h)}}n.downloadBlob=s;function r(c,u){const d=i(c);s(d,u)}n.downloadDataUri=r;function o(c){const u=c.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return u&&u[2]?u[2].replace(/\s+/," ").split(" "):null}function a(c){const u=parseFloat(c);return Number.isNaN(u)?null:u}function l(c,u={}){let d=null;const h=y=>(d==null&&(d=o(c)),d!=null?a(d[y]):null),f=y=>{const w=c.match(y);return w&&w[2]?a(w[2]):null};let g=u.width;if(g==null&&(g=f(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),g==null&&(g=h(2)),g==null)throw new Error("Can not parse width from svg string");let m=u.height;if(m==null&&(m=f(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),m==null&&(m=h(3)),m==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(c).replace(/'/g,"%27").replace(/"/g,"%22")}`}n.svgToDataUrl=l})(Mm||(Mm={}));let Zs;const Ez={px(n){return n},mm(n){return Zs*n},cm(n){return Zs*n*10},in(n){return Zs*n*25.4},pt(n){return Zs*(25.4*n/72)},pc(n){return Zs*(25.4*n/6)}};var km;(function(n){function t(i,s,r){const o=document.createElement("div"),a=o.style;a.display="inline-block",a.position="absolute",a.left="-15000px",a.top="-15000px",a.width=i+(r||"px"),a.height=s+(r||"px"),document.body.appendChild(o);const l=o.getBoundingClientRect(),c={width:l.width||0,height:l.height||0};return document.body.removeChild(o),c}n.measure=t;function e(i,s){Zs==null&&(Zs=t("1","1","mm").width);const r=s?Ez[s]:null;return r?r(i):i}n.toPx=e})(km||(km={}));const Oz=/-(.)/g;function Az(n){return n.replace(Oz,(t,e)=>e.toUpperCase())}const gh={},_m=["webkit","ms","moz","o"],yx=typeof document<"u"?document.createElement("div").style:{};function Tz(n){for(let t=0;t<_m.length;t+=1){const e=_m[t]+n;if(e in yx)return e}return null}function Mz(n){const t=Az(n);if(gh[t]==null){const e=t.charAt(0).toUpperCase()+t.slice(1);gh[t]=t in yx?t:Tz(e)}return gh[t]}function $m(n,t){const e=n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null);return e&&t?e.getPropertyValue(t)||e[t]:e}const kz={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function _z(n){return/^--/.test(n)}function yc(n,t,e){const i=window.getComputedStyle(n,null);return e?i.getPropertyValue(t)||void 0:i[t]||n.style[t]}function $l(n,t){return parseInt(yc(n,t),10)||0}function $z(n,t){return!kz[n]&&typeof t=="number"?`${t}px`:t}function Ht(n,t,e){if(typeof t=="string"){const i=_z(t);if(i||(t=Mz(t)),e===void 0)return yc(n,t,i);i||(e=$z(t,e));const s=n.style;i?s.setProperty(t,e):s[t]=e;return}for(const i in t)Ht(n,i,t[i])}const xc=new WeakMap;function Im(n,t){const e=vu(t),i=xc.get(n);if(i)return i[e]}function Iz(n,t,e){const i=vu(t),s=xc.get(n);s?s[i]=e:xc.set(n,{[i]:e})}function ur(n,t,e){if(!t){const i={};return Object.keys(xc).forEach(s=>{i[s]=Im(n,s)}),i}if(typeof t=="string"){if(e===void 0)return Im(n,t);Iz(n,t,e);return}for(const i in t)ur(n,i,t[i])}const Rz={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function od(n,t,e){if(t){if(typeof t=="string"){if(t=Rz[t]||t,arguments.length<3)return n[t];n[t]=e;return}for(const i in t)od(n,i,t[i])}}class Et{get[Symbol.toStringTag](){return Et.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,i){if(!t)throw new TypeError("Invalid element to create vector");let s;if(Et.isVector(t))s=t.node;else if(typeof t=="string")if(t.toLowerCase()==="svg")s=vc();else if(t[0]==="<"){const r=vc(t);s=document.importNode(r.firstChild,!0)}else s=document.createElementNS(je.svg,t);else s=t;this.node=s,e&&this.setAttributes(e),i&&this.append(i)}transform(t,e){return t==null?ro(this.node):(ro(this.node,t,e),this)}translate(t,e=0,i={}){return t==null?Nm(this.node):(Nm(this.node,t,e,i),this)}rotate(t,e,i,s={}){return t==null?cd(this.node):(cd(this.node,t,e,i,s),this)}scale(t,e){return t==null?ud(this.node):(ud(this.node,t,e),this)}getTransformToElement(t){const e=Et.toNode(t);return pa(this.node,e)}removeAttribute(t){return If(this.node,t),this}getAttribute(t){return Cz(this.node,t)}setAttribute(t,e){return Rf(this.node,t,e),this}setAttributes(t){return bx(this.node,t),this}attr(t,e){return t==null?Vt(this.node):typeof t=="string"&&e===void 0?Vt(this.node,t):(typeof t=="object"?Vt(this.node,t):Vt(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:Et.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?Et.create(e):Et.create("defs").appendTo(t)}text(t,e={}){return wx(this.node,t,e),this}tagName(){return mz(this.node)}clone(){return Et.create(this.node.cloneNode(!0))}remove(){return xi(this.node),this}empty(){return Qa(this.node),this}append(t){return Nn(this.node,Et.toNodes(t)),this}appendTo(t){return ji(this.node,Et.isVector(t)?t.node:t),this}prepend(t){return px(this.node,Et.toNodes(t)),this}before(t){return ka(this.node,Et.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(Et.toNode(t),this.node),Et.create(t)}first(){return this.node.firstChild?Et.create(this.node.firstChild):null}last(){return this.node.lastChild?Et.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?Et.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(Et.toNode(t))}find(t){const e=[],i=bz(this.node,t);if(i)for(let s=0,r=i.length;s<r;s+=1)e.push(Et.create(i[s]));return e}findOne(t){const e=vz(this.node,t);return e?Et.create(e):null}findParentByClass(t,e){const i=gx(this.node,t,e);return i?Et.create(i):null}matches(t){const e=this.node;this.node.matches;const i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}contains(t){return $f(this.node,Et.isVector(t)?t.node:t)}wrap(t){const e=Et.create(t),i=this.node.parentNode;return i!=null&&i.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(e.node.parentNode==null)return null;if(e=Et.create(e.node.parentNode),t==null)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=Et.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let i=0;i<t.length;i+=1)t[i].nodeType===1&&e.push(Et.create(t[i]));return e}eachChild(t,e){const i=this.children();for(let s=0,r=i.length;s<r;s+=1)t.call(i[s],i[s],s,i),e&&i[s].eachChild(t,e);return this}index(){return _f(this.node)}hasClass(t){return Bo(this.node,t)}addClass(t){return bt(this.node,t),this}removeClass(t){return Ce(this.node,t),this}toggleClass(t,e){return fa(this.node,t,e),this}toLocalPoint(t,e){return tV(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?Lz(this.node,t):[]}toPath(){return Et.create(Uz(this.node))}toPathData(){return Ex(this.node)}}(function(n){n.toStringTag=`X6.${n.name}`;function t(o){if(o==null)return!1;if(o instanceof n)return!0;const a=o[Symbol.toStringTag],l=o;return(a==null||a===n.toStringTag)&&l.node instanceof SVGElement&&typeof l.sample=="function"&&typeof l.toPath=="function"}n.isVector=t;function e(o,a,l){return new n(o,a,l)}n.create=e;function i(o){if(o[0]==="<"){const a=vc(o),l=[];for(let c=0,u=a.childNodes.length;c<u;c+=1){const d=a.childNodes[c];l.push(e(document.importNode(d,!0)))}return l}return[e(o)]}n.createVectors=i;function s(o){return t(o)?o.node:o}n.toNode=s;function r(o){return Array.isArray(o)?o.map(a=>s(a)):[s(o)]}n.toNodes=r})(Et||(Et={}));function Nz(n,t){const e=Et.create(t),i=Et.create("textPath"),s=n.d;if(s&&n["xlink:href"]===void 0){const r=Et.create("path").attr("d",s).appendTo(e.defs());i.attr("xlink:href",`#${r.id}`)}return typeof n=="object"&&i.attr(n),i.node}function Dz(n,t,e){const i=e.eol,s=e.baseSize,r=e.lineHeight;let o=0,a;const l={},c=t.length-1;for(let u=0;u<=c;u+=1){let d=t[u],h=null;if(typeof d=="object"){const f=d.attrs,g=Et.create("tspan",f);a=g.node;let m=d.t;i&&u===c&&(m+=i),a.textContent=m;const p=f.class;p&&g.addClass(p),e.includeAnnotationIndices&&g.attr("annotations",d.annotations.join(",")),h=parseFloat(f["font-size"]),h===void 0&&(h=s),h&&h>o&&(o=h)}else i&&u===c&&(d+=i),a=document.createTextNode(d||" "),s&&s>o&&(o=s);n.appendChild(a)}return o&&(l.maxFontSize=o),r?l.lineHeight=r:o&&(l.lineHeight=o*1.2),l}const xx=/em$/;function Il(n,t){const e=parseFloat(n);return xx.test(n)?e*t:e}function Bz(n,t,e,i){if(!Array.isArray(t))return 0;const s=t.length;if(!s)return 0;let r=t[0];const o=Il(r.maxFontSize,e)||e;let a=0;const l=Il(i,e);for(let d=1;d<s;d+=1){r=t[d];const h=Il(r.lineHeight,e)||l;a+=h}const c=Il(r.maxFontSize,e)||e;let u;switch(n){case"middle":u=o/2-.15*c-a/2;break;case"bottom":u=-(.25*c)-a;break;case"top":default:u=.8*o;break}return u}function wx(n,t,e={}){t=Pz(t);const i=e.eol;let s=e.textPath;const r=e.textVerticalAnchor,o=r==="middle"||r==="bottom"||r==="top";let a=e.x;a===void 0&&(a=n.getAttribute("x")||0);const l=e.includeAnnotationIndices;let c=e.annotations;c&&!Array.isArray(c)&&(c=[c]);const u=e.lineHeight,d=u==="auto",h=d?"1.5em":u||"1em";let f=!0;const g=n.childNodes;if(g.length===1){const A=g[0];A&&A.tagName.toUpperCase()==="TITLE"&&(f=!1)}f&&Qa(n),Vt(n,{"xml:space":"preserve",display:t||e.displayEmpty?null:"none"});const m=Vt(n,"font-size");let p=parseFloat(m);p||(p=16,(o||c)&&!m&&Vt(n,"font-size",`${p}`));let v;s?(typeof s=="string"&&(s={d:s}),v=Nz(s,n)):v=document.createDocumentFragment();let b,y=0,w;const C=t.split(`
`),P=[],E=C.length-1;for(let A=0;A<=E;A+=1){b=h;let M="v-line";const O=ci("tspan");let T,R=C[A];if(R)if(c){const L=Sz(R,c,{offset:-y,includeAnnotationIndices:l});T=Dz(O,L,{eol:A!==E&&i,baseSize:p,lineHeight:d?null:h,includeAnnotationIndices:l});const k=T.lineHeight;k&&d&&A!==0&&(b=k),A===0&&(w=T.maxFontSize*.8)}else i&&A!==E&&(R+=i),O.textContent=R;else{O.textContent="-",M+=" v-empty-line";const L=O.style;L.fillOpacity=0,L.strokeOpacity=0,c&&(T={})}T&&P.push(T),A>0&&O.setAttribute("dy",b),(A>0||s)&&O.setAttribute("x",a),O.className.baseVal=M,v.appendChild(O),y+=R.length+1}if(o)if(c)b=Bz(r,P,p,h);else if(r==="top")b="0.8em";else{let A;switch(E>0?(A=parseFloat(h)||1,A*=E,xx.test(h)||(A/=p)):A=0,r){case"middle":b=`${.3-A/2}em`;break;case"bottom":b=`${-A-.3}em`;break}}else r===0?b="0em":r?b=r:(b=0,n.getAttribute("y")==null&&n.setAttribute("y",`${w||"0.8em"}`));v.firstChild.setAttribute("dy",b),n.appendChild(v)}function ga(n,t={}){const e=document.createElement("canvas").getContext("2d");if(!n)return{width:0};const i=[],s=t["font-size"]?`${parseFloat(t["font-size"])}px`:"14px";return i.push(t["font-style"]||"normal"),i.push(t["font-variant"]||"normal"),i.push(t["font-weight"]||400),i.push(s),i.push(t["font-family"]||"sans-serif"),e.font=i.join(" "),e.measureText(n)}function Rm(n,t,e,i={}){if(t>=e)return[n,""];const s=n.length,r={};let o=Math.round(t/e*s-1);for(o<0&&(o=0);o>=0&&o<s;){const a=n.slice(0,o),l=r[a]||ga(a,i).width,c=n.slice(0,o+1),u=r[c]||ga(c,i).width;if(r[a]=l,r[c]=u,l>t)o-=1;else if(u<=t)o+=1;else break}return[n.slice(0,o),n.slice(o)]}function Cx(n,t,e={},i={}){const s=t.width,r=t.height,o=i.eol||`
`,a=e.fontSize||14,l=e.lineHeight?parseFloat(e.lineHeight):Math.ceil(a*1.4),c=Math.floor(r/l);if(n.indexOf(o)>-1){const p=bc(),v=[];return n.split(o).map(b=>{const y=Cx(b,Object.assign(Object.assign({},t),{height:Number.MAX_SAFE_INTEGER}),e,Object.assign(Object.assign({},i),{eol:p}));y&&v.push(...y.split(p))}),v.slice(0,c).join(o)}const{width:u}=ga(n,e);if(u<s)return n;const d=[];let h=n,f=u,g=i.ellipsis,m=0;g&&(typeof g!="string"&&(g=""),m=ga(g,e).width);for(let p=0;p<c;p+=1)if(f>s)if(p===c-1){const[b]=Rm(h,s-m,f,e);d.push(g?`${b}${g}`:b)}else{const[b,y]=Rm(h,s,f,e);d.push(b),h=y,f=ga(h,e).width}else{d.push(h);break}return d.join(o)}const ad=.551784;function qe(n,t,e=NaN){const i=n.getAttribute(t);if(i==null)return e;const s=parseFloat(i);return Number.isNaN(s)?e:s}function Lz(n,t=1){const e=n.getTotalLength(),i=[];let s=0,r;for(;s<e;)r=n.getPointAtLength(s),i.push({distance:s,x:r.x,y:r.y}),s+=t;return i}function jz(n){return["M",qe(n,"x1"),qe(n,"y1"),"L",qe(n,"x2"),qe(n,"y2")].join(" ")}function zz(n){const t=wc(n);return t.length===0?null:`${Sx(t)} Z`}function Vz(n){const t=wc(n);return t.length===0?null:Sx(t)}function Sx(n){return`M ${n.map(e=>`${e.x} ${e.y}`).join(" L")}`}function wc(n){const t=[],e=n.points;if(e)for(let i=0,s=e.numberOfItems;i<s;i+=1)t.push(e.getItem(i));return t}function Fz(n){const t=qe(n,"cx",0),e=qe(n,"cy",0),i=qe(n,"r"),s=i*ad;return["M",t,e-i,"C",t+s,e-i,t+i,e-s,t+i,e,"C",t+i,e+s,t+s,e+i,t,e+i,"C",t-s,e+i,t-i,e+s,t-i,e,"C",t-i,e-s,t-s,e-i,t,e-i,"Z"].join(" ")}function Hz(n){const t=qe(n,"cx",0),e=qe(n,"cy",0),i=qe(n,"rx"),s=qe(n,"ry")||i,r=i*ad,o=s*ad;return["M",t,e-s,"C",t+r,e-s,t+i,e-o,t+i,e,"C",t+i,e+o,t+r,e+s,t,e+s,"C",t-r,e+s,t-i,e+o,t-i,e,"C",t-i,e-o,t-r,e-s,t,e-s,"Z"].join(" ")}function Gz(n){return Px({x:qe(n,"x",0),y:qe(n,"y",0),width:qe(n,"width",0),height:qe(n,"height",0),rx:qe(n,"rx",0),ry:qe(n,"ry",0)})}function Px(n){let t;const e=n.x,i=n.y,s=n.width,r=n.height,o=Math.min(n.rx||n["top-rx"]||0,s/2),a=Math.min(n.rx||n["bottom-rx"]||0,s/2),l=Math.min(n.ry||n["top-ry"]||0,r/2),c=Math.min(n.ry||n["bottom-ry"]||0,r/2);return o||a||l||c?t=["M",e,i+l,"v",r-l-c,"a",a,c,0,0,0,a,c,"h",s-2*a,"a",a,c,0,0,0,a,-c,"v",-(r-c-l),"a",o,l,0,0,0,-o,-l,"h",-(s-2*o),"a",o,l,0,0,0,-o,l,"Z"]:t=["M",e,i,"H",e+s,"V",i+r,"H",e,"V",i,"Z"],t.join(" ")}function Uz(n){const t=ci("path");Vt(t,Vt(n));const e=Ex(n);return e&&t.setAttribute("d",e),t}function Ex(n){const t=n.tagName.toLowerCase();switch(t){case"path":return n.getAttribute("d");case"line":return jz(n);case"polygon":return zz(n);case"polyline":return Vz(n);case"ellipse":return Hz(n);case"circle":return Fz(n);case"rect":return Gz(n)}throw new Error(`"${t}" cannot be converted to svg path element.`)}const Wz=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Ox=/[ ,]+/,qz=/^(\w+)\((.*)\)/;function Yz(n,t){const i=ci("svg").createSVGPoint();return i.x=n,i.y=t,i}function Fe(n){const e=ci("svg").createSVGMatrix();if(n!=null){const i=n,s=e;for(const r in i)s[r]=i[r]}return e}function Qo(n){const t=ci("svg");return n!=null?(n instanceof DOMMatrix||(n=Fe(n)),t.createSVGTransformFromMatrix(n)):t.createSVGTransform()}function $a(n){let t=Fe();const e=n!=null&&n.match(Wz);if(!e)return t;for(let i=0,s=e.length;i<s;i+=1){const o=e[i].match(qz);if(o){let a,l,c,u,d,h=Fe();const f=o[2].split(Ox);switch(o[1].toLowerCase()){case"scale":a=parseFloat(f[0]),l=f[1]===void 0?a:parseFloat(f[1]),h=h.scaleNonUniform(a,l);break;case"translate":c=parseFloat(f[0]),u=parseFloat(f[1]),h=h.translate(c,u);break;case"rotate":d=parseFloat(f[0]),c=parseFloat(f[1])||0,u=parseFloat(f[2])||0,c!==0||u!==0?h=h.translate(c,u).rotate(d).translate(-c,-u):h=h.rotate(d);break;case"skewx":d=parseFloat(f[0]),h=h.skewX(d);break;case"skewy":d=parseFloat(f[0]),h=h.skewY(d);break;case"matrix":h.a=parseFloat(f[0]),h.b=parseFloat(f[1]),h.c=parseFloat(f[2]),h.d=parseFloat(f[3]),h.e=parseFloat(f[4]),h.f=parseFloat(f[5]);break;default:continue}t=t.multiply(h)}}return t}function Lo(n){const t=n||{},e=t.a!=null?t.a:1,i=t.b!=null?t.b:0,s=t.c!=null?t.c:0,r=t.d!=null?t.d:1,o=t.e!=null?t.e:0,a=t.f!=null?t.f:0;return`matrix(${e},${i},${s},${r},${o},${a})`}function wu(n){let t,e,i;if(n){const r=Ox;if(n.trim().indexOf("matrix")>=0){const o=$a(n),a=Xz(o);t=[a.translateX,a.translateY],e=[a.rotation],i=[a.scaleX,a.scaleY];const l=[];(t[0]!==0||t[1]!==0)&&l.push(`translate(${t.join(",")})`),(i[0]!==1||i[1]!==1)&&l.push(`scale(${i.join(",")})`),e[0]!==0&&l.push(`rotate(${e[0]})`),n=l.join(" ")}else{const o=n.match(/translate\((.*?)\)/);o&&(t=o[1].split(r));const a=n.match(/rotate\((.*?)\)/);a&&(e=a[1].split(r));const l=n.match(/scale\((.*?)\)/);l&&(i=l[1].split(r))}}const s=i&&i[0]?parseFloat(i[0]):1;return{raw:n||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:s,sy:i&&i[1]?parseFloat(i[1]):s}}}function ld(n,t){const e=t.x*n.a+t.y*n.c+0,i=t.x*n.b+t.y*n.d+0;return{x:e,y:i}}function Xz(n){const t=ld(n,{x:0,y:1}),e=ld(n,{x:1,y:0}),i=180/Math.PI*Math.atan2(t.y,t.x)-90,s=180/Math.PI*Math.atan2(e.y,e.x);return{skewX:i,skewY:s,translateX:n.e,translateY:n.f,scaleX:Math.sqrt(n.a*n.a+n.b*n.b),scaleY:Math.sqrt(n.c*n.c+n.d*n.d),rotation:i}}function Kz(n){let t,e,i,s;return n?(t=n.a==null?1:n.a,s=n.d==null?1:n.d,e=n.b,i=n.c):t=s=1,{sx:e?Math.sqrt(t*t+e*e):t,sy:i?Math.sqrt(i*i+s*s):s}}function Jz(n){let t={x:0,y:1};n&&(t=ld(n,t));const e=180*Math.atan2(t.y,t.x)/Math.PI%360-90;return{angle:e%360+(e<0?360:0)}}function Zz(n){return{tx:n&&n.e||0,ty:n&&n.f||0}}function ro(n,t,e={}){if(t==null)return $a(Vt(n,"transform"));if(e.absolute){n.setAttribute("transform",Lo(t));return}const i=n.transform,s=Qo(t);i.baseVal.appendItem(s)}function Nm(n,t,e=0,i={}){let s=Vt(n,"transform");const r=wu(s);if(t==null)return r.translation;s=r.raw,s=s.replace(/translate\([^)]*\)/g,"").trim();const o=i.absolute?t:r.translation.tx+t,a=i.absolute?e:r.translation.ty+e,l=`translate(${o},${a})`;n.setAttribute("transform",`${l} ${s}`.trim())}function cd(n,t,e,i,s={}){let r=Vt(n,"transform");const o=wu(r);if(t==null)return o.rotation;r=o.raw,r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;const a=s.absolute?t:o.rotation.angle+t,l=e!=null&&i!=null?`,${e},${i}`:"",c=`rotate(${a}${l})`;n.setAttribute("transform",`${r} ${c}`.trim())}function ud(n,t,e){let i=Vt(n,"transform");const s=wu(i);if(t==null)return s.scale;e=e??t,i=s.raw,i=i.replace(/scale\([^)]*\)/g,"").trim();const r=`scale(${t},${e})`;n.setAttribute("transform",`${i} ${r}`.trim())}function pa(n,t){if(Os(t)&&Os(n)){const e=t.getScreenCTM(),i=n.getScreenCTM();if(e&&i)return e.inverse().multiply(i)}return Fe()}function Qz(n,t){let e=Fe();if(Os(t)&&Os(n)){let i=n;const s=[];for(;i&&i!==t;){const r=i.getAttribute("transform")||null,o=$a(r);s.push(o),i=i.parentNode}s.reverse().forEach(r=>{e=e.multiply(r)})}return e}function tV(n,t,e){const i=n instanceof SVGSVGElement?n:n.ownerSVGElement,s=i.createSVGPoint();s.x=t,s.y=e;try{const r=i.getScreenCTM(),o=s.matrixTransform(r.inverse()),a=pa(n,i).inverse();return o.matrixTransform(a)}catch{return s}}var Mn;(function(n){const t={};function e(r){return t[r]||{}}n.get=e;function i(r,o){t[r]=o}n.register=i;function s(r){delete t[r]}n.unregister=s})(Mn||(Mn={}));var tr;(function(n){const t=new WeakMap;function e(r){return t.has(r)||t.set(r,{events:Object.create(null)}),t.get(r)}n.ensure=e;function i(r){return t.get(r)}n.get=i;function s(r){return t.delete(r)}n.remove=s})(tr||(tr={}));var Tt;(function(n){n.returnTrue=()=>!0,n.returnFalse=()=>!1;function t(s){s.stopPropagation()}n.stopPropagationCallback=t;function e(s,r,o){s.addEventListener!=null&&s.addEventListener(r,o)}n.addEventListener=e;function i(s,r,o){s.removeEventListener!=null&&s.removeEventListener(r,o)}n.removeEventListener=i})(Tt||(Tt={}));(function(n){const t=/[^\x20\t\r\n\f]+/g,e=/^([^.]*)(?:\.(.+)|)/;function i(a){return(a||"").match(t)||[""]}n.splitType=i;function s(a){const l=e.exec(a)||[];return{originType:l[1]?l[1].trim():l[1],namespaces:l[2]?l[2].split(".").map(c=>c.trim()).sort():[]}}n.normalizeType=s;function r(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType}n.isValidTarget=r;function o(a,l){if(l){const c=a;return c.querySelector!=null&&c.querySelector(l)!=null}return!0}n.isValidSelector=o})(Tt||(Tt={}));(function(n){let t=0;const e=new WeakMap;function i(a){return e.has(a)||(e.set(a,t),t+=1),e.get(a)}n.ensureHandlerId=i;function s(a){return e.get(a)}n.getHandlerId=s;function r(a){return e.delete(a)}n.removeHandlerId=r;function o(a,l){return e.set(a,l)}n.setHandlerId=o})(Tt||(Tt={}));(function(n){function t(e,i){const s=[],r=tr.get(e),o=r&&r.events&&r.events[i.type],a=o&&o.handlers||[],l=o?o.delegateCount:0;if(l>0&&!(i.type==="click"&&typeof i.button=="number"&&i.button>=1)){for(let c=i.target;c!==e;c=c.parentNode||e)if(c.nodeType===1&&!(i.type==="click"&&c.disabled===!0)){const u=[],d={};for(let h=0;h<l;h+=1){const f=a[h],g=f.selector;if(g!=null&&d[g]==null){const m=e,p=[];m.querySelectorAll(g).forEach(v=>{p.push(v)}),d[g]=p.includes(c)}d[g]&&u.push(f)}u.length&&s.push({elem:c,handlers:u})}}return l<a.length&&s.push({elem:e,handlers:a.slice(l)}),s}n.getHandlerQueue=t})(Tt||(Tt={}));(function(n){function t(e){return e!=null&&e===e.window}n.isWindow=t})(Tt||(Tt={}));(function(n){function t(e,i){const s=e.nodeType===9?e.documentElement:e,r=i&&i.parentNode;return e===r||!!(r&&r.nodeType===1&&(s.contains?s.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}n.contains=t})(Tt||(Tt={}));class wi{constructor(t,e){this.isDefaultPrevented=Tt.returnFalse,this.isPropagationStopped=Tt.returnFalse,this.isImmediatePropagationStopped=Tt.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const i=this.originalEvent;this.isDefaultPrevented=Tt.returnTrue,i&&!this.isSimulated&&i.preventDefault()},this.stopPropagation=()=>{const i=this.originalEvent;this.isPropagationStopped=Tt.returnTrue,i&&!this.isSimulated&&i.stopPropagation()},this.stopImmediatePropagation=()=>{const i=this.originalEvent;this.isImmediatePropagationStopped=Tt.returnTrue,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()},typeof t=="string"?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Tt.returnTrue:Tt.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}}(function(n){function t(e){return e instanceof n?e:new n(e)}n.create=t})(wi||(wi={}));(function(n){function t(e,i){Object.defineProperty(n.prototype,e,{enumerable:!0,configurable:!0,get:typeof i=="function"?function(){if(this.originalEvent)return i(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(s){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:s})}})}n.addProperty=t})(wi||(wi={}));(function(n){const t={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(t).forEach(e=>n.addProperty(e,t[e]))})(wi||(wi={}));(function(n){Mn.register("load",{noBubble:!0})})();(function(n){Mn.register("beforeunload",{postDispatch(t,e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}})})();(function(n){Mn.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let i;const s=e.relatedTarget,r=e.handleObj;return(!s||s!==t&&!Tt.contains(t,s))&&(e.type=r.originType,i=r.handler.call(t,e),e.type="mouseover"),i}}),Mn.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let i;const s=e.relatedTarget,r=e.handleObj;return(!s||s!==t&&!Tt.contains(t,s))&&(e.type=r.originType,i=r.handler.call(t,e),e.type="mouseout"),i}})})();var eV=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e},Ia;(function(n){let t;function e(o,a,l,c,u){if(!Tt.isValidTarget(o))return;let d;if(typeof l!="function"){const{handler:m,selector:p}=l,v=eV(l,["handler","selector"]);l=m,u=p,d=v}const h=tr.ensure(o);let f=h.handler;f==null&&(f=h.handler=function(m,...p){return t!==m.type?s(o,m,...p):void 0});const g=Tt.ensureHandlerId(l);Tt.splitType(a).forEach(m=>{const{originType:p,namespaces:v}=Tt.normalizeType(m);if(!p)return;let b=p,y=Mn.get(b);b=(u?y.delegateType:y.bindType)||b,y=Mn.get(b);const w=Object.assign({type:b,originType:p,data:c,selector:u,guid:g,handler:l,namespace:v.join(".")},d),C=h.events;let P=C[b];P||(P=C[b]={handlers:[],delegateCount:0},(!y.setup||y.setup(o,c,v,f)===!1)&&Tt.addEventListener(o,b,f)),y.add&&(Tt.removeHandlerId(w.handler),y.add(o,w),Tt.setHandlerId(w.handler,g)),u?(P.handlers.splice(P.delegateCount,0,w),P.delegateCount+=1):P.handlers.push(w)})}n.on=e;function i(o,a,l,c,u){const d=tr.get(o);if(!d)return;const h=d.events;h&&(Tt.splitType(a).forEach(f=>{const{originType:g,namespaces:m}=Tt.normalizeType(f);if(!g){Object.keys(h).forEach(C=>{i(o,C+f,l,c,!0)});return}let p=g;const v=Mn.get(p);p=(c?v.delegateType:v.bindType)||p;const b=h[p];if(!b)return;const y=m.length>0?new RegExp(`(^|\\.)${m.join("\\.(?:.*\\.|)")}(\\.|$)`):null,w=b.handlers.length;for(let C=b.handlers.length-1;C>=0;C-=1){const P=b.handlers[C];(u||g===P.originType)&&(!l||Tt.getHandlerId(l)===P.guid)&&(y==null||P.namespace&&y.test(P.namespace))&&(c==null||c===P.selector||c==="**"&&P.selector)&&(b.handlers.splice(C,1),P.selector&&(b.delegateCount-=1),v.remove&&v.remove(o,P))}w&&b.handlers.length===0&&((!v.teardown||v.teardown(o,m,d.handler)===!1)&&Tt.removeEventListener(o,p,d.handler),delete h[p])}),Object.keys(h).length===0&&tr.remove(o))}n.off=i;function s(o,a,...l){const c=wi.create(a);c.delegateTarget=o;const u=Mn.get(c.type);if(u.preDispatch&&u.preDispatch(o,c)===!1)return;const d=Tt.getHandlerQueue(o,c);for(let h=0,f=d.length;h<f&&!c.isPropagationStopped();h+=1){const g=d[h];c.currentTarget=g.elem;for(let m=0,p=g.handlers.length;m<p&&!c.isImmediatePropagationStopped();m+=1){const v=g.handlers[m];if(c.rnamespace==null||v.namespace&&c.rnamespace.test(v.namespace)){c.handleObj=v,c.data=v.data;const b=Mn.get(v.originType).handle,y=b?b(g.elem,c,...l):v.handler.call(g.elem,c,...l);y!==void 0&&(c.result=y,y===!1&&(c.preventDefault(),c.stopPropagation()))}}}return u.postDispatch&&u.postDispatch(o,c),c.result}n.dispatch=s;function r(o,a,l,c){let u=o,d=typeof o=="string"?o:o.type,h=typeof o=="string"||u.namespace==null?[]:u.namespace.split(".");const f=l;if(f.nodeType===3||f.nodeType===8)return;d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort());const g=d.indexOf(":")<0&&`on${d}`;u=o instanceof wi?o:new wi(d,typeof o=="object"?o:null),u.namespace=h.join("."),u.rnamespace=u.namespace?new RegExp(`(^|\\.)${h.join("\\.(?:.*\\.|)")}(\\.|$)`):null,u.result=void 0,u.target||(u.target=f);const m=[u];Array.isArray(a)?m.push(...a):m.push(a);const p=Mn.get(d);if(!c&&p.trigger&&p.trigger(f,u,a)===!1)return;let v;const b=[f];if(!c&&!p.noBubble&&!Tt.isWindow(f)){v=p.delegateType||d;let w=f,C=f.parentNode;for(;C!=null;)b.push(C),w=C,C=C.parentNode;const P=f.ownerDocument||document;if(w===P){const E=w.defaultView||w.parentWindow||window;b.push(E)}}let y=f;for(let w=0,C=b.length;w<C&&!u.isPropagationStopped();w+=1){const P=b[w];y=P,u.type=w>1?v:p.bindType||d;const E=tr.get(P);E&&E.events[u.type]&&E.handler&&E.handler.call(P,...m);const S=g&&P[g]||null;S&&Tt.isValidTarget(P)&&(u.result=S.call(P,...m),u.result===!1&&u.preventDefault())}if(u.type=d,!c&&!u.isDefaultPrevented()){const w=p.preventDefault;if((w==null||w(b.pop(),u,a)===!1)&&Tt.isValidTarget(f)&&g&&typeof f[d]=="function"&&!Tt.isWindow(f)){const C=f[g];C&&(f[g]=null),t=d,u.isPropagationStopped()&&y.addEventListener(d,Tt.stopPropagationCallback),f[d](),u.isPropagationStopped()&&y.removeEventListener(d,Tt.stopPropagationCallback),t=void 0,C&&(f[g]=C)}}return u.result}n.trigger=r})(Ia||(Ia={}));var Qt;(function(n){function t(r,o,a,l,c){return ma.on(r,o,a,l,c),r}n.on=t;function e(r,o,a,l,c){return ma.on(r,o,a,l,c,!0),r}n.once=e;function i(r,o,a,l){return ma.off(r,o,a,l),r}n.off=i;function s(r,o,a,l){return Ia.trigger(o,a,r,l),r}n.trigger=s})(Qt||(Qt={}));var ma;(function(n){function t(i,s,r,o,a,l){if(typeof s=="object"){typeof r!="string"&&(o=o||r,r=void 0),Object.keys(s).forEach(c=>t(i,c,r,o,s[c],l));return}if(o==null&&a==null?(a=r,o=r=void 0):a==null&&(typeof r=="string"?(a=o,o=void 0):(a=o,o=r,r=void 0)),a===!1)a=Tt.returnFalse;else if(!a)return;if(l){const c=a;a=function(u,...d){return n.off(i,u),c.call(this,u,...d)},Tt.setHandlerId(a,Tt.ensureHandlerId(c))}Ia.on(i,s,a,o,r)}n.on=t;function e(i,s,r,o){const a=s;if(a&&a.preventDefault!=null&&a.handleObj!=null){const l=a.handleObj;e(a.delegateTarget,l.namespace?`${l.originType}.${l.namespace}`:l.originType,l.selector,l.handler);return}if(typeof s=="object"){const l=s;Object.keys(l).forEach(c=>e(i,c,r,l[c]));return}(r===!1||typeof r=="function")&&(o=r,r=void 0),o===!1&&(o=Tt.returnFalse),Ia.off(i,s,o,r)}n.off=e})(ma||(ma={}));class Ax{constructor(t,e,i){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=_n.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=e,this.onWheelGuard=i,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(this.onWheelGuard!=null&&!this.onWheelGuard(t))return;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault();let e;(this.deltaX!==0||this.deltaY!==0)&&(t.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(t)}))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function oo(n){const t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function nV(n){return n.getBoundingClientRect().width}function iV(n){return n.getBoundingClientRect().height}function sV(n){const t=yc(n,"position")==="fixed";let e;if(t){const i=n.getBoundingClientRect();e={left:i.left,top:i.top}}else e=oo(n);if(!t){const i=n.ownerDocument;let s=n.offsetParent||i.documentElement;for(;(s===i.body||s===i.documentElement)&&yc(s,"position")==="static";)s=s.parentNode;if(s!==n&&xz(s)){const r=oo(s);e.top-=r.top+$l(s,"borderTopWidth"),e.left-=r.left+$l(s,"borderLeftWidth")}}return{top:e.top-$l(n,"marginTop"),left:e.left-$l(n,"marginLeft")}}function Tx(n,t=60){let e=null;return(...i)=>{e&&clearTimeout(e),e=window.setTimeout(()=>{n.apply(this,i)},t)}}function rV(n){let t=null,e=[];const i=()=>{if(getComputedStyle(n).position==="static"){const c=n.style;c.position="relative"}const l=document.createElement("object");return l.onload=()=>{l.contentDocument.defaultView.addEventListener("resize",s),s()},l.style.display="block",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.zIndex="-1",l.style.opacity="0",l.setAttribute("tabindex","-1"),l.type="text/html",n.appendChild(l),l.data="about:blank",l},s=Tx(()=>{e.forEach(l=>l(n))}),r=l=>{t||(t=i()),e.indexOf(l)===-1&&e.push(l)},o=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",s),t.parentNode.removeChild(t),t=null,e=[])};return{element:n,bind:r,destroy:o,unbind:l=>{const c=e.indexOf(l);c!==-1&&e.splice(c,1),e.length===0&&t&&o()}}}function oV(n){let t=null,e=[];const i=Tx(()=>{e.forEach(l=>{l(n)})}),s=()=>{const l=new ResizeObserver(i);return l.observe(n),i(),l},r=l=>{t||(t=s()),e.indexOf(l)===-1&&e.push(l)},o=()=>{t&&(t.disconnect(),e=[],t=null)};return{element:n,bind:r,destroy:o,unbind:l=>{const c=e.indexOf(l);c!==-1&&e.splice(c,1),e.length===0&&t&&o()}}}const aV=typeof ResizeObserver<"u"?oV:rV;var Cc;(function(n){const t=new WeakMap;function e(s){let r=t.get(s);return r||(r=aV(s),t.set(s,r),r)}function i(s){s.destroy(),t.delete(s.element)}n.bind=(s,r)=>{const o=e(s);return o.bind(r),()=>o.unbind(r)},n.clear=s=>{const r=e(s);i(r)}})(Cc||(Cc={}));class Ra{constructor(t={}){this.comparator=t.comparator||Ra.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(t,e,i){const s={priority:t,value:e},r=this.data.length;return i&&(s.id=i,this.index[i]=r),this.data.push(s),this.bubbleUp(r),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const i=this.index[t];if(typeof i>"u")throw new Error(`Node with id '${t}' was not found in the heap.`);const s=this.data,r=s[i].priority,o=this.comparator(e,r);o<0?(s[i].priority=e,this.bubbleUp(i)):o>0&&(s[i].priority=e,this.bubbleDown(i))}remove(){const t=this.data,e=t[0],i=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=i,i.id&&(this.index[i.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let i,s,r=t;for(;r>0&&(s=r-1>>>1,this.comparator(e[r].priority,e[s].priority)<0);){i=e[s],e[s]=e[r];let o=e[r].id;o!=null&&(this.index[o]=s),e[r]=i,o=e[r].id,o!=null&&(this.index[o]=r),r=s}}bubbleDown(t){const e=this.data,i=e.length-1;let s=t;for(;;){const r=(s<<1)+1,o=r+1;let a=s;if(r<=i&&this.comparator(e[r].priority,e[a].priority)<0&&(a=r),o<=i&&this.comparator(e[o].priority,e[a].priority)<0&&(a=o),a!==s){const l=e[a];e[a]=e[s];let c=e[s].id;c!=null&&(this.index[c]=a),e[s]=l,c=e[s].id,c!=null&&(this.index[c]=s),s=a}else break}}}(function(n){n.defaultComparator=(t,e)=>t-e})(Ra||(Ra={}));var hd;(function(n){function t(e,i,s=(r,o)=>1){const r={},o={},a={},l=new Ra;for(r[i]=0,Object.keys(e).forEach(c=>{c!==i&&(r[c]=1/0),l.insert(r[c],c,c)});!l.isEmpty();){const c=l.remove();a[c]=!0;const u=e[c]||[];for(let d=0;d<u.length;d+=1){const h=u[d];if(!a[h]){const f=r[c]+s(c,h);f<r[h]&&(r[h]=f,o[h]=c,l.updatePriority(h,f))}}}return o}n.run=t})(hd||(hd={}));class Ni{constructor(t,e,i,s){if(t==null)return this.set(255,255,255,1);if(typeof t=="number")return this.set(t,e,i,s);if(typeof t=="string")return Ni.fromString(t)||this;if(Array.isArray(t))return this.set(t);this.set(t.r,t.g,t.b,t.a==null?1:t.a)}blend(t,e,i){this.set(t.r+(e.r-t.r)*i,t.g+(e.g-t.g)*i,t.b+(e.b-t.b)*i,t.a+(e.a-t.a)*i)}lighten(t){const e=Ni.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,i,s){const r=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:e,a=Array.isArray(t)?t[2]:i,l=Array.isArray(t)?t[3]:s;return this.r=Math.round(dn(r,0,255)),this.g=Math.round(dn(o,0,255)),this.b=Math.round(dn(a,0,255)),this.a=l==null?1:dn(l,0,1),this}toHex(){return`#${["r","g","b"].map(e=>{const i=this[e].toString(16);return i.length<2?`0${i}`:i}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Ni.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return Ni.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(n){function t(y){return new n(y)}n.fromArray=t;function e(y){return new n([...g(y),1])}n.fromHex=e;function i(y){const w=y.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(w){const C=w[1].split(/\s*,\s*/).map(P=>parseInt(P,10));return new n(C)}return null}n.fromRGBA=i;function s(y,w,C){C<0&&++C,C>1&&--C;const P=6*C;return P<1?y+(w-y)*P:2*C<1?w:3*C<2?y+(w-y)*(2/3-C)*6:y}function r(y){const w=y.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(w){const C=w[2].split(/\s*,\s*/),P=(parseFloat(C[0])%360+360)%360/360,E=parseFloat(C[1])/100,S=parseFloat(C[2])/100,A=C[3]==null?1:parseInt(C[3],10);return new n(c(P,E,S,A))}return null}n.fromHSLA=r;function o(y){if(y.startsWith("#"))return e(y);if(y.startsWith("rgb"))return i(y);const w=n.named[y];return w?e(w):r(y)}n.fromString=o;function a(y,w){return n.fromArray([y,y,y,w])}n.makeGrey=a;function l(y,w,C,P){const E=Array.isArray(y)?y[0]:y,S=Array.isArray(y)?y[1]:w,A=Array.isArray(y)?y[2]:C,M=Array.isArray(y)?y[3]:P,O=Math.max(E,S,A),T=Math.min(E,S,A),R=(O+T)/2;let L=0,k=0;if(T!==O){const _=O-T;switch(k=R>.5?_/(2-O-T):_/(O+T),O){case E:L=(S-A)/_+(S<A?6:0);break;case S:L=(A-E)/_+2;break;case A:L=(E-S)/_+4;break}L/=6}return[L,k,R,M??1]}n.rgba2hsla=l;function c(y,w,C,P){const E=Array.isArray(y)?y[0]:y,S=Array.isArray(y)?y[1]:w,A=Array.isArray(y)?y[2]:C,M=Array.isArray(y)?y[3]:P,O=A<=.5?A*(S+1):A+S-A*S,T=2*A-O;return[s(T,O,E+1/3)*256,s(T,O,E)*256,s(T,O,E-1/3)*256,M??1]}n.hsla2rgba=c;function u(y){return new n(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),y?void 0:parseFloat(Math.random().toFixed(2)))}n.random=u;function d(){const y="0123456789ABCDEF";let w="#";for(let C=0;C<6;C+=1)w+=y[Math.floor(Math.random()*16)];return w}n.randomHex=d;function h(y){return u(y).toString()}n.randomRGBA=h;function f(y,w){if(typeof y=="string"){const A=y[0]==="#",[M,O,T]=g(y);return w?M*.299+O*.587+T*.114>186?"#000000":"#ffffff":`${A?"#":""}${m(255-M,255-O,255-T)}`}const C=y[0],P=y[1],E=y[2],S=y[3];return w?C*.299+P*.587+E*.114>186?[0,0,0,S]:[255,255,255,S]:[255-C,255-P,255-E,S]}n.invert=f;function g(y){const w=y.indexOf("#")===0?y:`#${y}`;let C=+`0x${w.substr(1)}`;if(!(w.length===4||w.length===7)||Number.isNaN(C))throw new Error("Invalid hex color.");const P=w.length===4?4:8,E=(1<<P)-1,S=["b","g","r"].map(()=>{const A=C&E;return C>>=P,P===4?17*A:A});return[S[2],S[1],S[0]]}function m(y,w,C){const P=E=>E.length<2?`0${E}`:E;return`${P(y.toString(16))}${P(w.toString(16))}${P(C.toString(16))}`}function p(y,w){return b(y,w)}n.lighten=p;function v(y,w){return b(y,-w)}n.darken=v;function b(y,w){if(typeof y=="string"){const E=y[0]==="#",S=parseInt(E?y.substr(1):y,16),A=dn((S>>16)+w,0,255),M=dn((S>>8&255)+w,0,255),O=dn((S&255)+w,0,255);return`${E?"#":""}${(O|M<<8|A<<16).toString(16)}`}const C=m(y[0],y[1],y[2]),P=g(b(C,w));return[P[0],P[1],P[2],y[3]]}})(Ni||(Ni={}));(function(n){n.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}})(Ni||(Ni={}));class dd{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const i=this.map.get(t);return this.map.delete(t),i}each(t){this.arr.forEach(e=>{const i=this.map.get(e);t(i,e)})}dispose(){this.clear()}}var Wi;(function(n){function t(s){const r=[],o=[];return Array.isArray(s)?r.push(...s):s.split("|").forEach(a=>{a.indexOf("&")===-1?r.push(a):o.push(...a.split("&"))}),{or:r,and:o}}n.parse=t;function e(s,r){if(s!=null&&r!=null){const o=t(s),a=t(r),l=o.or.sort(),c=a.or.sort(),u=o.and.sort(),d=a.and.sort(),h=(f,g)=>f.length===g.length&&(f.length===0||f.every((m,p)=>m===g[p]));return h(l,c)&&h(u,d)}return s==null&&r==null}n.equals=e;function i(s,r,o){if(r==null||Array.isArray(r)&&r.length===0)return o?s.altKey!==!0&&s.ctrlKey!==!0&&s.metaKey!==!0&&s.shiftKey!==!0:!0;const{or:a,and:l}=t(r),c=u=>{const d=`${u.toLowerCase()}Key`;return s[d]===!0};return a.some(u=>c(u))&&l.every(u=>c(u))}n.isMatch=i})(Wi||(Wi={}));var hr;(function(n){n.linear=t=>t,n.quad=t=>t*t,n.cubic=t=>t*t*t,n.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},n.exponential=t=>Math.pow(2,10*(t-1)),n.bounce=t=>{for(let e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11){const s=(11-6*e-11*t)/4;return-s*s+i*i}}})(hr||(hr={}));(function(n){n.decorators={reverse(t){return e=>1-t(1-e)},reflect(t){return e=>.5*(e<.5?t(2*e):2-t(2-2*e))},clamp(t,e=0,i=1){return s=>{const r=t(s);return r<e?e:r>i?i:r}},back(t=1.70158){return e=>e*e*((t+1)*e-t)},elastic(t=1.5){return e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}})(hr||(hr={}));(function(n){function t(k){return-1*Math.cos(k*(Math.PI/2))+1}n.easeInSine=t;function e(k){return Math.sin(k*(Math.PI/2))}n.easeOutSine=e;function i(k){return-.5*(Math.cos(Math.PI*k)-1)}n.easeInOutSine=i;function s(k){return k*k}n.easeInQuad=s;function r(k){return k*(2-k)}n.easeOutQuad=r;function o(k){return k<.5?2*k*k:-1+(4-2*k)*k}n.easeInOutQuad=o;function a(k){return k*k*k}n.easeInCubic=a;function l(k){const _=k-1;return _*_*_+1}n.easeOutCubic=l;function c(k){return k<.5?4*k*k*k:(k-1)*(2*k-2)*(2*k-2)+1}n.easeInOutCubic=c;function u(k){return k*k*k*k}n.easeInQuart=u;function d(k){const _=k-1;return 1-_*_*_*_}n.easeOutQuart=d;function h(k){const _=k-1;return k<.5?8*k*k*k*k:1-8*_*_*_*_}n.easeInOutQuart=h;function f(k){return k*k*k*k*k}n.easeInQuint=f;function g(k){const _=k-1;return 1+_*_*_*_*_}n.easeOutQuint=g;function m(k){const _=k-1;return k<.5?16*k*k*k*k*k:1+16*_*_*_*_*_}n.easeInOutQuint=m;function p(k){return k===0?0:Math.pow(2,10*(k-1))}n.easeInExpo=p;function v(k){return k===1?1:-Math.pow(2,-10*k)+1}n.easeOutExpo=v;function b(k){if(k===0||k===1)return k;const _=k*2,D=_-1;return _<1?.5*Math.pow(2,10*D):.5*(-Math.pow(2,-10*D)+2)}n.easeInOutExpo=b;function y(k){const _=k/1;return-1*(Math.sqrt(1-_*k)-1)}n.easeInCirc=y;function w(k){const _=k-1;return Math.sqrt(1-_*_)}n.easeOutCirc=w;function C(k){const _=k*2,D=_-2;return _<1?-.5*(Math.sqrt(1-_*_)-1):.5*(Math.sqrt(1-D*D)+1)}n.easeInOutCirc=C;function P(k,_=1.70158){return k*k*((_+1)*k-_)}n.easeInBack=P;function E(k,_=1.70158){const D=k/1-1;return D*D*((_+1)*D+_)+1}n.easeOutBack=E;function S(k,_=1.70158){const D=k*2,V=D-2,it=_*1.525;return D<1?.5*D*D*((it+1)*D-it):.5*(V*V*((it+1)*V+it)+2)}n.easeInOutBack=S;function A(k,_=.7){if(k===0||k===1)return k;const V=k/1-1,it=1-_,at=it/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*V)*Math.sin((V-at)*(2*Math.PI)/it))}n.easeInElastic=A;function M(k,_=.7){const D=1-_,V=k*2;if(k===0||k===1)return k;const it=D/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*V)*Math.sin((V-it)*(2*Math.PI)/D)+1}n.easeOutElastic=M;function O(k,_=.65){const D=1-_;if(k===0||k===1)return k;const V=k*2,it=V-1,at=D/(2*Math.PI)*Math.asin(1);return V<1?-.5*(Math.pow(2,10*it)*Math.sin((it-at)*(2*Math.PI)/D)):Math.pow(2,-10*it)*Math.sin((it-at)*(2*Math.PI)/D)*.5+1}n.easeInOutElastic=O;function T(k){const _=k/1;if(_<1/2.75)return 7.5625*_*_;if(_<2/2.75){const D=_-.5454545454545454;return 7.5625*D*D+.75}if(_<2.5/2.75){const D=_-.8181818181818182;return 7.5625*D*D+.9375}{const D=_-.9545454545454546;return 7.5625*D*D+.984375}}n.easeOutBounce=T;function R(k){return 1-T(1-k)}n.easeInBounce=R;function L(k){return k<.5?R(k*2)*.5:T(k*2-1)*.5+.5}n.easeInOutBounce=L})(hr||(hr={}));var er;(function(n){n.number=(t,e)=>{const i=e-t;return s=>t+i*s},n.object=(t,e)=>{const i=Object.keys(t);return s=>{const r={};for(let o=i.length-1;o!==-1;o-=1){const a=i[o];r[a]=t[a]+(e[a]-t[a])*s}return r}},n.unit=(t,e)=>{const i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,s=i.exec(t),r=i.exec(e),o=r?r[1]:"",a=s?+s[1]:0,l=r?+r[1]:0,c=o.indexOf("."),u=c>0?o[1].length-c-1:0,d=l-a,h=s?s[2]:"";return f=>(a+d*f).toFixed(u)+h},n.color=(t,e)=>{const i=parseInt(t.slice(1),16),s=parseInt(e.slice(1),16),r=i&255,o=(s&255)-r,a=i&65280,l=(s&65280)-a,c=i&16711680,u=(s&16711680)-c;return d=>{const h=r+o*d&255,f=a+l*d&65280,g=c+u*d&16711680;return`#${(1<<24|h|f|g).toString(16).slice(1)}`}}})(er||(er={}));const ba=[];function Sr(n,t){const e=ba.find(i=>i.name===n);if(!(e&&(e.loadTimes+=1,e.loadTimes>1))&&!_n.isApplyingHMR()){const i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=t;const s=document.querySelector("head");s&&s.insertBefore(i,s.firstChild),ba.push({name:n,loadTimes:1,styleElement:i})}}function Pr(n){const t=ba.findIndex(e=>e.name===n);if(t>-1){const e=ba[t];if(e.loadTimes-=1,e.loadTimes>0)return;let i=e.styleElement;i&&i.parentNode&&i.parentNode.removeChild(i),i=null,ba.splice(t,1)}}var zt;(function(n){function t(i){return 180*i/Math.PI%360}n.toDeg=t,n.toRad=function(i,s=!1){return(s?i:i%360)*Math.PI/180};function e(i){return i%360+(i<0?360:0)}n.normalize=e})(zt||(zt={}));var qt;(function(n){function t(a,l=0){return Number.isInteger(a)?a:+a.toFixed(l)}n.round=t;function e(a,l){let c,u;if(l==null?(u=a??1,c=0):(u=l,c=a??0),u<c){const d=c;c=u,u=d}return Math.floor(Math.random()*(u-c+1)+c)}n.random=e;function i(a,l,c){return Number.isNaN(a)?NaN:Number.isNaN(l)||Number.isNaN(c)?0:l<c?a<l?l:a>c?c:a:a<c?c:a>l?l:a}n.clamp=i;function s(a,l){return l*Math.round(a/l)}n.snapToGrid=s;function r(a,l){return l!=null&&a!=null&&l.x>=a.x&&l.x<=a.x+a.width&&l.y>=a.y&&l.y<=a.y+a.height}n.containsPoint=r;function o(a,l){const c=a.x-l.x,u=a.y-l.y;return c*c+u*u}n.squaredLength=o})(qt||(qt={}));class Ls{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class $ extends Ls{constructor(t,e){super(),this.x=t??0,this.y=e??0}round(t=0){return this.x=qt.round(this.x,t),this.y=qt.round(this.y,t),this}add(t,e){const i=$.create(t,e);return this.x+=i.x,this.y+=i.y,this}update(t,e){const i=$.create(t,e);return this.x=i.x,this.y=i.y,this}translate(t,e){const i=$.create(t,e);return this.x+=i.x,this.y+=i.y,this}rotate(t,e){const i=$.rotate(this,t,e);return this.x=i.x,this.y=i.y,this}scale(t,e,i=new $){const s=$.create(i);return this.x=s.x+t*(this.x-s.x),this.y=s.y+e*(this.y-s.y),this}closest(t){if(t.length===1)return $.create(t[0]);let e=null,i=1/0;return t.forEach(s=>{const r=this.squaredDistance(s);r<i&&(e=s,i=r)}),e?$.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=$.create(t),i=this.x-e.x,s=this.y-e.y;return i*i+s*s}manhattanDistance(t){const e=$.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new $){const e=$.create(t),i=-(e.y-this.y),s=e.x-this.x;let r=Math.atan2(i,s);return r<0&&(r=2*Math.PI+r),180*r/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let i=this.theta(e)-this.theta(t);return i<0&&(i+=360),i}vectorAngle(t){return new $(0,0).angleBetween(this,t)}toPolar(t){return this.update($.toPolar(this,t)),this}changeInAngle(t,e,i=new $){return this.clone().translate(-t,-e).theta(i)-this.theta(i)}adhereToRect(t){return qt.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}bearing(t){const e=$.create(t),i=zt.toRad(this.y),s=zt.toRad(e.y),r=this.x,o=e.x,a=zt.toRad(o-r),l=Math.sin(a)*Math.cos(s),c=Math.cos(i)*Math.sin(s)-Math.sin(i)*Math.cos(s)*Math.cos(a),u=zt.toDeg(Math.atan2(l,c)),d=["NE","E","SE","S","SW","W","NW","N"];let h=u-22.5;return h<0&&(h+=360),h=parseInt(h/45,10),d[h]}cross(t,e){if(t!=null&&e!=null){const i=$.create(t),s=$.create(e);return(s.x-this.x)*(i.y-this.y)-(s.y-this.y)*(i.x-this.x)}return NaN}dot(t){const e=$.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if(typeof t=="number")return new $(this.x-t,this.y-e);const i=$.create(t);return new $(this.x-i.x,this.y-i.y)}lerp(t,e){const i=$.create(t);return new $((1-e)*this.x+e*i.x,(1-e)*this.y+e*i.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(t,e){const i=$.create(t),s=zt.toRad(i.theta(this));return this.translate(Math.cos(s)*e,-Math.sin(s)*e)}reflection(t){return $.create(t).move(this,this.distance(t))}snapToGrid(t,e){return this.x=qt.snapToGrid(this.x,t),this.y=qt.snapToGrid(this.y,e??t),this}equals(t){const e=$.create(t);return e!=null&&e.x===this.x&&e.y===this.y}clone(){return $.clone(this)}toJSON(){return $.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(n){function t(e){return e!=null&&e instanceof n}n.isPoint=t})($||($={}));(function(n){function t(i){return i!=null&&typeof i=="object"&&typeof i.x=="number"&&typeof i.y=="number"}n.isPointLike=t;function e(i){return i!=null&&Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"}n.isPointData=e})($||($={}));(function(n){function t(d,h){return d==null||typeof d=="number"?new n(d,h):e(d)}n.create=t;function e(d){return n.isPoint(d)?new n(d.x,d.y):Array.isArray(d)?new n(d[0],d[1]):new n(d.x,d.y)}n.clone=e;function i(d){return n.isPoint(d)?{x:d.x,y:d.y}:Array.isArray(d)?{x:d[0],y:d[1]}:{x:d.x,y:d.y}}n.toJSON=i;function s(d,h,f=new n){let g=Math.abs(d*Math.cos(h)),m=Math.abs(d*Math.sin(h));const p=e(f),v=zt.normalize(zt.toDeg(h));return v<90?m=-m:v<180?(g=-g,m=-m):v<270&&(g=-g),new n(p.x+g,p.y+m)}n.fromPolar=s;function r(d,h=new n){const f=e(d),g=e(h),m=f.x-g.x,p=f.y-g.y;return new n(Math.sqrt(m*m+p*p),zt.toRad(g.theta(f)))}n.toPolar=r;function o(d,h){return d===h?!0:d!=null&&h!=null?d.x===h.x&&d.y===h.y:!1}n.equals=o;function a(d,h){if(d==null&&h!=null||d!=null&&h==null||d!=null&&h!=null&&d.length!==h.length)return!1;if(d!=null&&h!=null){for(let f=0,g=d.length;f<g;f+=1)if(!o(d[f],h[f]))return!1}return!0}n.equalPoints=a;function l(d,h,f,g){return new n(qt.random(d,h),qt.random(f,g))}n.random=l;function c(d,h,f){const g=zt.toRad(zt.normalize(-h)),m=Math.sin(g),p=Math.cos(g);return u(d,p,m,f)}n.rotate=c;function u(d,h,f,g=new n){const m=e(d),p=e(g),v=m.x-p.x,b=m.y-p.y,y=v*h-b*f,w=b*h+v*f;return new n(y+p.x,w+p.y)}n.rotateEx=u})($||($={}));class nt extends Ls{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new $(this.x,this.y)}get topLeft(){return new $(this.x,this.y)}get topCenter(){return new $(this.x+this.width/2,this.y)}get topRight(){return new $(this.x+this.width,this.y)}get center(){return new $(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new $(this.x,this.y+this.height)}get bottomCenter(){return new $(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new $(this.x+this.width,this.y+this.height)}get corner(){return new $(this.x+this.width,this.y+this.height)}get rightMiddle(){return new $(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new $(this.x,this.y+this.height/2)}get topLine(){return new gt(this.topLeft,this.topRight)}get rightLine(){return new gt(this.topRight,this.bottomRight)}get bottomLine(){return new gt(this.bottomLeft,this.bottomRight)}get leftLine(){return new gt(this.topLeft,this.bottomLeft)}constructor(t,e,i,s){super(),this.x=t??0,this.y=e??0,this.width=i??0,this.height=s??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(t){if(!t)return this.clone();const e=zt.toRad(t),i=Math.abs(Math.sin(e)),s=Math.abs(Math.cos(e)),r=this.width*s+this.height*i,o=this.width*i+this.height*s;return new nt(this.x+(this.width-r)/2,this.y+(this.height-o)/2,r,o)}round(t=0){return this.x=qt.round(this.x,t),this.y=qt.round(this.y,t),this.width=qt.round(this.width,t),this.height=qt.round(this.height,t),this}add(t,e,i,s){const r=nt.create(t,e,i,s),o=Math.min(this.x,r.x),a=Math.min(this.y,r.y),l=Math.max(this.x+this.width,r.x+r.width),c=Math.max(this.y+this.height,r.y+r.height);return this.x=o,this.y=a,this.width=l-o,this.height=c-a,this}update(t,e,i,s){const r=nt.create(t,e,i,s);return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this}inflate(t,e){const i=t,s=e??t;return this.x-=i,this.y-=s,this.width+=2*i,this.height+=2*s,this}snapToGrid(t,e){const i=this.origin.snapToGrid(t,e),s=this.corner.snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=s.x-i.x,this.height=s.y-i.y,this}translate(t,e){const i=$.create(t,e);return this.x+=i.x,this.y+=i.y,this}scale(t,e,i=new $){const s=this.origin.scale(t,e,i);return this.x=s.x,this.y=s.y,this.width*=t,this.height*=e,this}rotate(t,e=this.getCenter()){if(t!==0){const i=zt.toRad(t),s=Math.cos(i),r=Math.sin(i);let o=this.getOrigin(),a=this.getTopRight(),l=this.getBottomRight(),c=this.getBottomLeft();o=$.rotateEx(o,s,r,e),a=$.rotateEx(a,s,r,e),l=$.rotateEx(l,s,r,e),c=$.rotateEx(c,s,r,e);const u=new nt(o.x,o.y,0,0);u.add(a.x,a.y,0,0),u.add(l.x,l.y,0,0),u.add(c.x,c.y,0,0),this.update(u)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=nt.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const i=nt.clone(t),s=e.x,r=e.y;let o=1/0,a=1/0,l=1/0,c=1/0,u=1/0,d=1/0,h=1/0,f=1/0;const g=i.topLeft;g.x<s&&(o=(this.x-s)/(g.x-s)),g.y<r&&(u=(this.y-r)/(g.y-r));const m=i.bottomRight;m.x>s&&(a=(this.x+this.width-s)/(m.x-s)),m.y>r&&(d=(this.y+this.height-r)/(m.y-r));const p=i.topRight;p.x>s&&(l=(this.x+this.width-s)/(p.x-s)),p.y<r&&(h=(this.y-r)/(p.y-r));const v=i.bottomLeft;return v.x<s&&(c=(this.x-s)/(v.x-s)),v.y>r&&(f=(this.y+this.height-r)/(v.y-r)),{sx:Math.min(o,a,l,c),sy:Math.min(u,d,h,f)}}getMaxUniformScaleToFit(t,e=this.center){const i=this.getMaxScaleToFit(t,e);return Math.min(i.sx,i.sy)}containsPoint(t,e){return qt.containsPoint(this,$.create(t,e))}containsRect(t,e,i,s){const r=nt.create(t,e,i,s),o=this.x,a=this.y,l=this.width,c=this.height,u=r.x,d=r.y,h=r.width,f=r.height;return l===0||c===0||h===0||f===0?!1:u>=o&&d>=a&&u+h<=o+l&&d+f<=a+c}intersectsWithLine(t){const e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],i=[],s=[];return e.forEach(r=>{const o=t.intersectsWithLine(r);o!==null&&s.indexOf(o.toString())<0&&(i.push(o),s.push(o.toString()))}),i.length>0?i:null}intersectsWithLineFromCenterToPoint(t,e){const i=$.clone(t),s=this.center;let r=null;e!=null&&e!==0&&i.rotate(e,s);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new gt(s,i);for(let l=o.length-1;l>=0;l-=1){const c=o[l].intersectsWithLine(a);if(c!==null){r=c;break}}return r&&e!=null&&e!==0&&r.rotate(-e,s),r}intersectsWithRect(t,e,i,s){const r=nt.create(t,e,i,s);if(!this.isIntersectWithRect(r))return null;const o=this.origin,a=this.corner,l=r.origin,c=r.corner,u=Math.max(o.x,l.x),d=Math.max(o.y,l.y);return new nt(u,d,Math.min(a.x,c.x)-u,Math.min(a.y,c.y)-d)}isIntersectWithRect(t,e,i,s){const r=nt.create(t,e,i,s),o=this.origin,a=this.corner,l=r.origin,c=r.corner;return!(c.x<=o.x||c.y<=o.y||l.x>=a.x||l.y>=a.y)}normalize(){let t=this.x,e=this.y,i=this.width,s=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,s=-this.height),this.x=t,this.y=e,this.width=i,this.height=s,this}union(t){const e=nt.clone(t),i=this.origin,s=this.corner,r=e.origin,o=e.corner,a=Math.min(i.x,r.x),l=Math.min(i.y,r.y),c=Math.max(s.x,o.x),u=Math.max(s.y,o.y);return new nt(a,l,c-a,u-l)}getNearestSideToPoint(t){const e=$.clone(t),i=e.x-this.x,s=this.x+this.width-e.x,r=e.y-this.y,o=this.y+this.height-e.y;let a=i,l="left";return s<a&&(a=s,l="right"),r<a&&(a=r,l="top"),o<a&&(l="bottom"),l}getNearestPointToPoint(t){const e=$.clone(t);if(this.containsPoint(e)){const i=this.getNearestSideToPoint(e);if(i==="left")return new $(this.x,e.y);if(i==="top")return new $(e.x,this.y);if(i==="right")return new $(this.x+this.width,e.y);if(i==="bottom")return new $(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new nt(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(n){function t(e){return e!=null&&e instanceof n}n.isRectangle=t})(nt||(nt={}));(function(n){function t(e){return e!=null&&typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"}n.isRectangleLike=t})(nt||(nt={}));(function(n){function t(o,a,l,c){return o==null||typeof o=="number"?new n(o,a,l,c):e(o)}n.create=t;function e(o){return n.isRectangle(o)?o.clone():Array.isArray(o)?new n(o[0],o[1],o[2],o[3]):new n(o.x,o.y,o.width,o.height)}n.clone=e;function i(o){return new n(o.x-o.a,o.y-o.b,2*o.a,2*o.b)}n.fromEllipse=i;function s(o){return new n(0,0,o.width,o.height)}n.fromSize=s;function r(o,a){return new n(o.x,o.y,a.width,a.height)}n.fromPositionAndSize=r})(nt||(nt={}));class gt extends Ls{get center(){return new $((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,i,s){super(),typeof t=="number"&&typeof e=="number"?(this.start=new $(t,e),this.end=new $(i,s)):(this.start=$.create(t),this.end=$.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const i=t/e;return this.scale(i,i,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:i,end:s}=e,r=i.clone().rotate(270,s),o=s.clone().rotate(90,i);return i.move(o,t),s.move(r,t),e}vector(){return new $(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new $(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),i=Math.max(this.start.x,this.end.x),s=Math.max(this.start.y,this.end.y);return new nt(t,e,i-t,s-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new gt(this.start,t).vector()),i=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(i)?0:i}pointAt(t){const e=this.start,i=this.end;return t<=0?e.clone():t>=1?i.clone():e.lerp(i,t)}pointAtLength(t){const e=this.start,i=this.end;let s=!0;t<0&&(s=!1,t=-t);const r=this.length();if(t>=r)return s?i.clone():e.clone();const o=(s?t:r-t)/r;return this.pointAt(o)}divideAt(t){const e=this.pointAt(t);return[new gt(this.start,e),new gt(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new gt(this.start,e),new gt(e,this.end)]}containsPoint(t){const e=this.start,i=this.end;if(e.cross(t,i)!==0)return!1;const s=this.length();return!(new gt(e,t).length()>s||new gt(t,i).length()>s)}intersect(t,e){const i=t.intersectsWithLine(this,e);return i?Array.isArray(i)?i:[i]:null}intersectsWithLine(t){const e=new $(this.end.x-this.start.x,this.end.y-this.start.y),i=new $(t.end.x-t.start.x,t.end.y-t.start.y),s=e.x*i.y-e.y*i.x,r=new $(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*i.y-r.y*i.x,a=r.x*e.y-r.y*e.x;if(s===0||o*s<0||a*s<0)return null;if(s>0){if(o>s||a>s)return null}else if(o<s||a<s)return null;return new $(this.start.x+o*e.x/s,this.start.y+o*e.y/s)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=$.clone(t),i=this.start,s=this.end;return((s.x-i.x)*(e.y-i.y)-(s.y-i.y)*(e.x-i.x))/this.length()}pointSquaredDistance(t,e){const i=$.create(t,e);return this.closestPoint(i).squaredDistance(i)}pointDistance(t,e){const i=$.create(t,e);return this.closestPoint(i).distance(i)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,s=this.pointAt(t),r=new gt(e,i);return r.translate(s.x-e.x,s.y-e.y),r}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,s=this.pointAtLength(t),r=new gt(e,i);return r.translate(s.x-e.x,s.y-e.y),r}relativeCcw(t,e){const i=$.create(t,e);let s=i.x-this.start.x,r=i.y-this.start.y;const o=this.end.x-this.start.x,a=this.end.y-this.start.y;let l=s*a-r*o;return l===0&&(l=s*o+r*a,l>0&&(s-=o,r-=a,l=s*o+r*a,l<0&&(l=0))),l<0?-1:l>0?1:0}equals(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new gt(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(n){function t(e){return e!=null&&e instanceof n}n.isLine=t})(gt||(gt={}));class ei extends Ls{get center(){return new $(this.x,this.y)}constructor(t,e,i,s){super(),this.x=t??0,this.y=e??0,this.a=i??0,this.b=s??0}bbox(){return nt.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const i=t,s=e??t;return this.a+=2*i,this.b+=2*s,this}normalizedDistance(t,e){const i=$.create(t,e),s=i.x-this.x,r=i.y-this.y,o=this.a,a=this.b;return s*s/(o*o)+r*r/(a*a)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],i=this.a,s=this.b,r=t.start,o=t.end,a=t.vector(),l=r.diff(new $(this.x,this.y)),c=new $(a.x/(i*i),a.y/(s*s)),u=new $(l.x/(i*i),l.y/(s*s)),d=a.dot(c),h=a.dot(u),f=l.dot(u)-1,g=h*h-d*f;if(g<0)return null;if(g>0){const m=Math.sqrt(g),p=(-h-m)/d,v=(-h+m)/d;if((p<0||p>1)&&(v<0||v>1))return null;p>=0&&p<=1&&e.push(r.lerp(o,p)),v>=0&&v<=1&&e.push(r.lerp(o,v))}else{const m=-h/d;if(m>=0&&m<=1)e.push(r.lerp(o,m));else return null}return e}intersectsWithLineFromCenterToPoint(t,e=0){const i=$.clone(t);e&&i.rotate(e,this.getCenter());const s=i.x-this.x,r=i.y-this.y;let o;if(s===0)return o=this.bbox().getNearestPointToPoint(i),e?o.rotate(-e,this.getCenter()):o;const a=r/s,l=a*a,c=this.a*this.a,u=this.b*this.b;let d=Math.sqrt(1/(1/c+l/u));d=s<0?-d:d;const h=a*d;return o=new $(this.x+d,this.y+h),e?o.rotate(-e,this.getCenter()):o}tangentTheta(t){const e=$.clone(t),i=e.x,s=e.y,r=this.a,o=this.b,a=this.bbox().center,l=a.x,c=a.y,u=30,d=i>a.x+r/2,h=i<a.x-r/2;let f,g;return d||h?(g=i>a.x?s-u:s+u,f=r*r/(i-l)-r*r*(s-c)*(g-c)/(o*o*(i-l))+l):(f=s>a.y?i+u:i-u,g=o*o/(s-c)-o*o*(i-l)*(f-l)/(r*r*(s-c))+c),new $(f,g).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const i=nt.fromEllipse(this);i.rotate(t,e);const s=ei.fromRect(i);return this.a=s.a,this.b=s.b,this.x=s.x,this.y=s.y,this}translate(t,e){const i=$.create(t,e);return this.x+=i.x,this.y+=i.y,this}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new ei(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(n){function t(e){return e!=null&&e instanceof n}n.isEllipse=t})(ei||(ei={}));(function(n){function t(s,r,o,a){return s==null||typeof s=="number"?new n(s,r,o,a):e(s)}n.create=t;function e(s){return n.isEllipse(s)?s.clone():Array.isArray(s)?new n(s[0],s[1],s[2],s[3]):new n(s.x,s.y,s.a,s.b)}n.parse=e;function i(s){const r=s.center;return new n(r.x,r.y,s.width/2,s.height/2)}n.fromRect=i})(ei||(ei={}));const lV=new RegExp("^[\\s\\dLMCZz,.]*$");function cV(n){return typeof n!="string"?!1:lV.test(n)}function ph(n,t){return(n%t+t)%t}function uV(n,t,e,i,s){const r=[],o=n[n.length-1],a=t!=null&&t>0,l=t||0;if(i&&a){n=n.slice();const d=n[0],h=new $(o.x+(d.x-o.x)/2,o.y+(d.y-o.y)/2);n.splice(0,0,h)}let c=n[0],u=1;for(e?r.push("M",c.x,c.y):r.push("L",c.x,c.y);u<(i?n.length:n.length-1);){let d=n[ph(u,n.length)],h=c.x-d.x,f=c.y-d.y;if(a&&(h!==0||f!==0)&&(s==null||s.indexOf(u-1)<0)){let g=Math.sqrt(h*h+f*f);const m=h*Math.min(l,g/2)/g,p=f*Math.min(l,g/2)/g,v=d.x+m,b=d.y+p;r.push("L",v,b);let y=n[ph(u+1,n.length)];for(;u<n.length-2&&Math.round(y.x-d.x)===0&&Math.round(y.y-d.y)===0;)y=n[ph(u+2,n.length)],u+=1;h=y.x-d.x,f=y.y-d.y,g=Math.max(1,Math.sqrt(h*h+f*f));const w=h*Math.min(l,g/2)/g,C=f*Math.min(l,g/2)/g,P=d.x+w,E=d.y+C;r.push("Q",d.x,d.y,P,E),d=new $(P,E)}else r.push("L",d.x,d.y);c=d,u+=1}return i?r.push("Z"):r.push("L",o.x,o.y),r.map(d=>typeof d=="string"?d:+d.toFixed(3)).join(" ")}function Mx(n,t={}){const e=[];return n&&n.length&&n.forEach(i=>{Array.isArray(i)?e.push({x:i[0],y:i[1]}):e.push({x:i.x,y:i.y})}),uV(e,t.round,t.initialMove==null||t.initialMove,t.close,t.exclude)}function Sc(n,t,e,i,s=0,r=0,o=0,a,l){if(e===0||i===0)return[];a-=n,l-=t,e=Math.abs(e),i=Math.abs(i);const c=-a/2,u=-l/2,d=Math.cos(s*Math.PI/180),h=Math.sin(s*Math.PI/180),f=d*c+h*u,g=-1*h*c+d*u,m=f*f,p=g*g,v=e*e,b=i*i,y=m/v+p/b;let w;if(y>1)e=Math.sqrt(y)*e,i=Math.sqrt(y)*i,w=0;else{let B=1;r===o&&(B=-1),w=B*Math.sqrt((v*b-v*p-b*m)/(v*p+b*m))}const C=w*e*g/i,P=-1*w*i*f/e,E=d*C-h*P+a/2,S=h*C+d*P+l/2;let A=Math.atan2((g-P)/i,(f-C)/e)-Math.atan2(0,1),M=A>=0?A:2*Math.PI+A;A=Math.atan2((-g-P)/i,(-f-C)/e)-Math.atan2((g-P)/i,(f-C)/e);let O=A>=0?A:2*Math.PI+A;o===0&&O>0?O-=2*Math.PI:o!==0&&O<0&&(O+=2*Math.PI);const T=O*2/Math.PI,R=Math.ceil(T<0?-1*T:T),L=O/R,k=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),_=d*e,D=d*i,V=h*e,it=h*i;let at=Math.cos(M),z=Math.sin(M),q=-k*(_*z+it*at),lt=-k*(V*z-D*at),mt=0,X=0;const ft=[];for(let B=0;B<R;B+=1){M+=L,at=Math.cos(M),z=Math.sin(M),mt=_*at-it*z+E,X=V*at+D*z+S;const ht=-k*(_*z+it*at),vt=-k*(V*z-D*at),xt=B*6;ft[xt]=Number(q+n),ft[xt+1]=Number(lt+t),ft[xt+2]=Number(mt-ht+n),ft[xt+3]=Number(X-vt+t),ft[xt+4]=Number(mt+n),ft[xt+5]=Number(X+t),q=mt+ht,lt=X+vt}return ft.map(B=>+B.toFixed(2))}function hV(n,t,e,i,s=0,r=0,o=0,a,l){const c=[],u=Sc(n,t,e,i,s,r,o,a,l);if(u!=null)for(let d=0,h=u.length;d<h;d+=6)c.push("C",u[d],u[d+1],u[d+2],u[d+3],u[d+4],u[d+5]);return c.join(" ")}class Oe extends Ls{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),t!=null){if(typeof t=="string")return Oe.parse(t);this.points=t.map(e=>$.create(e))}else this.points=[]}scale(t,e,i=new $){return this.points.forEach(s=>s.scale(t,e,i)),this}rotate(t,e){return this.points.forEach(i=>i.rotate(t,e)),this}translate(t,e){const i=$.create(t,e);return this.points.forEach(s=>s.translate(i.x,i.y)),this}round(t=0){return this.points.forEach(e=>e.round(t)),this}bbox(){if(this.points.length===0)return new nt;let t=1/0,e=-1/0,i=1/0,s=-1/0;const r=this.points;for(let o=0,a=r.length;o<a;o+=1){const l=r[o],c=l.x,u=l.y;c<t&&(t=c),c>e&&(e=c),u<i&&(i=u),u>s&&(s=u)}return new nt(t,i,e-t,s-i)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,i=e.length;if(i===0||i===1)return 0;let s=0,r=0,o=1/0;for(let a=0,l=i-1;a<l;a+=1){const c=new gt(e[a],e[a+1]),u=c.length(),d=c.closestPointNormalizedLength(t),f=c.pointAt(d).squaredDistance(t);f<o&&(o=f,r=s+d*u),s+=u}return r}closestPointNormalizedLength(t){const e=this.length();return e===0?0:this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(this.points.length===0)return!1;const e=$.clone(t),i=e.x,s=e.y,r=this.points,o=r.length;let a=o-1,l=0;for(let c=0;c<o;c+=1){const u=r[a],d=r[c];if(e.equals(u))return!0;const h=new gt(u,d);if(h.containsPoint(t))return!0;if(s<=u.y&&s>d.y||s>u.y&&s<=d.y){const f=u.x-i>d.x-i?u.x-i:d.x-i;if(f>=0){const g=new $(i+f,s),m=new gt(t,g);h.intersectsWithLine(m)&&(l+=1)}}a=c}return l%2===1}intersectsWithLine(t){const e=[];for(let i=0,s=this.points.length-1;i<s;i+=1){const r=this.points[i],o=this.points[i+1],a=t.intersectsWithLine(new gt(r,o));a&&e.push(a)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1){const i=this.points[t],s=this.points[t+1];if(new gt(i,s).isDifferentiable())return!0}return!1}length(){let t=0;for(let e=0,i=this.points.length-1;e<i;e+=1){const s=this.points[e],r=this.points[e+1];t+=s.distance(r)}return t}pointAt(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1||t<=0)return e[0].clone();if(t>=1)return e[i-1].clone();const r=this.length()*t;return this.pointAtLength(r)}pointAtLength(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1)return e[0].clone();let s=!0;t<0&&(s=!1,t=-t);let r=0;for(let a=0,l=i-1;a<l;a+=1){const c=s?a:l-1-a,u=e[c],d=e[c+1],h=new gt(u,d),f=u.distance(d);if(t<=r+f)return h.pointAtLength((s?1:-1)*(t-r));r+=f}return(s?e[i-1]:e[0]).clone()}tangentAt(t){const i=this.points.length;if(i===0||i===1)return null;t<0&&(t=0),t>1&&(t=1);const r=this.length()*t;return this.tangentAtLength(r)}tangentAtLength(t){const e=this.points,i=e.length;if(i===0||i===1)return null;let s=!0;t<0&&(s=!1,t=-t);let r,o=0;for(let a=0,l=i-1;a<l;a+=1){const c=s?a:l-1-a,u=e[c],d=e[c+1],h=new gt(u,d),f=u.distance(d);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((s?1:-1)*(t-o));r=h}o+=f}if(r){const a=s?1:0;return r.tangentAt(a)}return null}simplify(t={}){const e=this.points;if(e.length<3)return this;const i=t.threshold||0;let s=0;for(;e[s+2];){const r=s,o=s+1,a=s+2,l=e[r],c=e[o],u=e[a];new gt(l,u).closestPoint(c).distance(c)<=i?e.splice(o,1):s+=1}return this}toHull(){const t=this.points,e=t.length;if(e===0)return new Oe;let i=t[0];for(let h=1;h<e;h+=1)(t[h].y<i.y||t[h].y===i.y&&t[h].x>i.x)&&(i=t[h]);const s=[];for(let h=0;h<e;h+=1){let f=i.theta(t[h]);f===0&&(f=360),s.push([t[h],h,f])}if(s.sort((h,f)=>{let g=h[2]-f[2];return g===0&&(g=f[1]-h[1]),g}),s.length>2){const h=s[s.length-1];s.unshift(h)}const r={},o=[],a=h=>`${h[0].toString()}@${h[1]}`;for(;s.length!==0;){const h=s.pop(),f=h[0];if(r[a(h)])continue;let g=!1;for(;!g;)if(o.length<2)o.push(h),g=!0;else{const m=o.pop(),p=m[0],v=o.pop(),b=v[0],y=b.cross(p,f);if(y<0)o.push(v),o.push(m),o.push(h),g=!0;else if(y===0){const C=p.angleBetween(b,f);Math.abs(C-180)<1e-10||p.equals(f)||b.equals(p)?(r[a(m)]=p,o.push(v)):Math.abs((C+1)%360-1)<1e-10&&(o.push(v),s.push(m))}else r[a(m)]=p,o.push(v)}}o.length>2&&o.pop();let l,c=-1;for(let h=0,f=o.length;h<f;h+=1){const g=o[h][1];(l===void 0||g<l)&&(l=g,c=h)}let u=[];if(c>0){const h=o.slice(c),f=o.slice(0,c);u=h.concat(f)}else u=o;const d=[];for(let h=0,f=u.length;h<f;h+=1)d.push(u[h][0]);return new Oe(d)}equals(t){return t==null||t.points.length!==this.points.length?!1:t.points.every((e,i)=>e.equals(this.points[i]))}clone(){return new Oe(this.points.map(t=>t.clone()))}toJSON(){return this.points.map(t=>t.toJSON())}serialize(){return this.points.map(t=>`${t.serialize()}`).join(" ")}}(function(n){function t(e){return e!=null&&e instanceof n}n.isPolyline=t})(Oe||(Oe={}));(function(n){function t(e){const i=e.trim();if(i==="")return new n;const s=[],r=i.split(/\s*,\s*|\s+/);for(let o=0,a=r.length;o<a;o+=2)s.push({x:+r[o],y:+r[o+1]});return new n(s)}n.parse=t})(Oe||(Oe={}));class ye extends Ls{constructor(t,e,i,s){super(),this.PRECISION=3,this.start=$.create(t),this.controlPoint1=$.create(e),this.controlPoint2=$.create(i),this.end=$.create(s)}bbox(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,s=this.end,r=t.x,o=t.y,a=e.x,l=e.y,c=i.x,u=i.y,d=s.x,h=s.y,f=[],g=[[],[]];let m,p,v,b,y,w,C,P;for(let _=0;_<2;_+=1){if(_===0?(p=6*r-12*a+6*c,m=-3*r+9*a-9*c+3*d,v=3*a-3*r):(p=6*o-12*l+6*u,m=-3*o+9*l-9*u+3*h,v=3*l-3*o),Math.abs(m)<1e-12){if(Math.abs(p)<1e-12)continue;b=-v/p,b>0&&b<1&&f.push(b);continue}C=p*p-4*v*m,P=Math.sqrt(C),!(C<0)&&(y=(-p+P)/(2*m),y>0&&y<1&&f.push(y),w=(-p-P)/(2*m),w>0&&w<1&&f.push(w))}let E,S,A,M=f.length;const O=M;for(;M;)M-=1,b=f[M],A=1-b,E=A*A*A*r+3*A*A*b*a+3*A*b*b*c+b*b*b*d,g[0][M]=E,S=A*A*A*o+3*A*A*b*l+3*A*b*b*u+b*b*b*h,g[1][M]=S;f[O]=0,f[O+1]=1,g[0][O]=r,g[1][O]=o,g[0][O+1]=d,g[1][O+1]=h,f.length=O+2,g[0].length=O+2,g[1].length=O+2;const T=Math.min.apply(null,g[0]),R=Math.min.apply(null,g[1]),L=Math.max.apply(null,g[0]),k=Math.max.apply(null,g[1]);return new nt(T,R,L-T,k-R)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const i=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,i),i)}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),s=this.closestPointLength(t,i);if(!s)return 0;const r=this.length(i);return r===0?0:s/r}closestPointT(t,e={}){const i=this.getPrecision(e),s=this.getDivisions(e),r=Math.pow(10,-i);let o=null,a=0,l=0,c=0,u=0,d=0,h=null;const f=s.length;let g=f>0?1/f:0;for(s.forEach((m,p)=>{const v=m.start.distance(t),b=m.end.distance(t),y=v+b;(h==null||y<h)&&(o=m,a=p*g,l=(p+1)*g,c=v,u=b,h=y,d=m.endpointDistance())});;){const m=c?Math.abs(c-u)/c:0,p=u!=null?Math.abs(c-u)/u:0,v=m<r||p<r,b=c?c<d*r:!0,y=u?u<d*r:!0;if(v||(b||y))return c<=u?a:l;const C=o.divide(.5);g/=2;const P=C[0].start.distance(t),E=C[0].end.distance(t),S=P+E,A=C[1].start.distance(t),M=C[1].end.distance(t),O=A+M;S<=O?(o=C[0],l-=g,c=P,u=E):(o=C[1],a+=g,c=A,u=M)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const i=this.tAt(t,e);return this.divideAtT(i)}divideAtLength(t,e={}){const i=this.tAtLength(t,e);return this.divideAtT(i)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,i=this.controlPoint1,s=this.controlPoint2,r=this.end;if(t<=0)return[new ye(e,e,e,e),new ye(e,i,s,r)];if(t>=1)return[new ye(e,i,s,r),new ye(r,r,r,r)];const o=this.getSkeletonPoints(t),a=o.startControlPoint1,l=o.startControlPoint2,c=o.divider,u=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new ye(e,a,l,c),new ye(c,u,d,r)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,i=this.controlPoint1,s=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:s.clone()};if(t>=1)return{startControlPoint1:i.clone(),startControlPoint2:s.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};const o=new gt(e,i).pointAt(t),a=new gt(i,s).pointAt(t),l=new gt(s,r).pointAt(t),c=new gt(o,a).pointAt(t),u=new gt(a,l).pointAt(t),d=new gt(c,u).pointAt(t);return{startControlPoint1:o,startControlPoint2:c,divider:d,dividerControlPoint1:u,dividerControlPoint2:l}}getSubdivisions(t={}){const e=this.getPrecision(t);let i=[new ye(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(e===0)return i;let s=this.endpointDistance();const r=Math.pow(10,-e);let o=0;for(;;){o+=1;const a=[];i.forEach(u=>{const d=u.divide(.5);a.push(d[0],d[1])});const l=a.reduce((u,d)=>u+d.endpointDistance(),0),c=l!==0?(l-s)/l:0;if(o>1&&c<r)return a;i=a,s=l}}length(t={}){return this.getDivisions(t).reduce((i,s)=>i+s.endpointDistance(),0)}lengthAtT(t,e={}){if(t<=0)return 0;const i=e.precision===void 0?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.tAt(t,e);return this.pointAtT(i)}pointAtLength(t,e={}){const i=this.tAtLength(t,e);return this.pointAtT(i)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,s=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(s))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const i=this.tAt(t,e);return this.tangentAtT(i)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const i=this.tAtLength(t,e);return this.tangentAtT(i)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),i=e.startControlPoint2,s=e.dividerControlPoint1,r=e.divider,o=new gt(i,s);return o.translate(r.x-i.x,r.y-i.y),o}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getDivisions(t={}){if(t.subdivisions!=null)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){const e=this.getPrecision(t),i=this.getDivisions(t);return{precision:e,subdivisions:i}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const i=this.getOptions(e),r=this.length(i)*t;return this.tAtLength(r,i)}tAtLength(t,e={}){let i=!0;t<0&&(i=!1,t=-t);const s=this.getPrecision(e),r=this.getDivisions(e),o={precision:s,subdivisions:r};let a=null,l,c,u=0,d=0,h=0;const f=r.length;let g=f>0?1/f:0;for(let v=0;v<f;v+=1){const b=i?v:f-1-v,y=r[v],w=y.endpointDistance();if(t<=h+w){a=y,l=b*g,c=(b+1)*g,u=i?t-h:w+h-t,d=i?w+h-t:t-h;break}h+=w}if(a==null)return i?1:0;const m=this.length(o),p=Math.pow(10,-s);for(;;){let v;if(v=m!==0?u/m:0,v<p)return l;if(v=m!==0?d/m:0,v<p)return c;let b,y;const w=a.divide(.5);g/=2;const C=w[0].endpointDistance(),P=w[1].endpointDistance();u<=C?(a=w[0],c-=g,b=u,y=C-b):(a=w[1],l+=g,b=u-C,y=P-b),u=b,d=y}}toPoints(t={}){const e=this.getDivisions(t),i=[e[0].start.clone()];return e.forEach(s=>i.push(s.end.clone())),i}toPolyline(t={}){return new Oe(this.toPoints(t))}scale(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new ye(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(n){function t(e){return e!=null&&e instanceof n}n.isCurve=t})(ye||(ye={}));(function(n){function t(s){const r=s.length,o=[],a=[];let l=2;o[0]=s[0]/l;for(let c=1;c<r;c+=1)a[c]=1/l,l=(c<r-1?4:3.5)-a[c],o[c]=(s[c]-o[c-1])/l;for(let c=1;c<r;c+=1)o[r-c-1]-=a[r-c]*o[r-c];return o}function e(s){const r=s.map(h=>$.clone(h)),o=[],a=[],l=r.length-1;if(l===1)return o[0]=new $((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),a[0]=new $(2*o[0].x-r[0].x,2*o[0].y-r[0].y),[o,a];const c=[];for(let h=1;h<l-1;h+=1)c[h]=4*r[h].x+2*r[h+1].x;c[0]=r[0].x+2*r[1].x,c[l-1]=(8*r[l-1].x+r[l].x)/2;const u=t(c);for(let h=1;h<l-1;h+=1)c[h]=4*r[h].y+2*r[h+1].y;c[0]=r[0].y+2*r[1].y,c[l-1]=(8*r[l-1].y+r[l].y)/2;const d=t(c);for(let h=0;h<l;h+=1)o.push(new $(u[h],d[h])),h<l-1?a.push(new $(2*r[h+1].x-u[h+1],2*r[h+1].y-d[h+1])):a.push(new $((r[l].x+u[l-1])/2,(r[l].y+d[l-1])/2));return[o,a]}function i(s){if(s==null||Array.isArray(s)&&s.length<2)throw new Error("At least 2 points are required");const r=e(s),o=[];for(let a=0,l=r[0].length;a<l;a+=1){const c=new $(r[0][a].x,r[0][a].y),u=new $(r[1][a].x,r[1][a].y);o.push(new n(s[a],c,u,s[a+1]))}return o}n.throughPoints=i})(ye||(ye={}));class Cu extends Ls{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const i=this.length();return t>=1?i:i*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Je extends Cu{constructor(t,e){super(),gt.isLine(t)?this.endPoint=t.end.clone().round(2):this.endPoint=$.create(t,e).round(2)}get type(){return"L"}get line(){return new gt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new Je(e[0]),new Je(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new Je(e[0]),new Je(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new Je(this.end)}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(n){function t(...e){const i=e.length,s=e[0];if(gt.isLine(s))return new n(s);if($.isPointLike(s))return i===1?new n(s):e.map(o=>new n(o));if(i===2)return new n(+e[0],+e[1]);const r=[];for(let o=0;o<i;o+=2){const a=+e[o],l=+e[o+1];r.push(new n(a,l))}return r}n.create=t})(Je||(Je={}));class ao extends Cu{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new gt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new Je(e[0]):this.clone(),new Je(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new Je(e[0]):this.clone(),new Je(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new ao}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(n){function t(){return new n}n.create=t})(ao||(ao={}));class lo extends Cu{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,gt.isLine(t)||ye.isCurve(t)?this.endPoint=t.end.clone().round(2):this.endPoint=$.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}clone(){return new lo(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(n){function t(...e){const i=e.length,s=e[0];if(gt.isLine(s))return new n(s);if(ye.isCurve(s))return new n(s);if($.isPointLike(s)){if(i===1)return new n(s);const o=[];for(let a=0;a<i;a+=1)a===0?o.push(new n(e[a])):o.push(new Je(e[a]));return o}if(i===2)return new n(+e[0],+e[1]);const r=[];for(let o=0;o<i;o+=2){const a=+e[o],l=+e[o+1];o===0?r.push(new n(a,l)):r.push(new Je(a,l))}return r}n.create=t})(lo||(lo={}));class Tn extends Cu{constructor(t,e,i,s,r,o){super(),ye.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):typeof t=="number"?(this.controlPoint1=new $(t,e).round(2),this.controlPoint2=new $(i,s).round(2),this.endPoint=new $(r,o).round(2)):(this.controlPoint1=$.create(t).round(2),this.controlPoint2=$.create(e).round(2),this.endPoint=$.create(i).round(2))}get type(){return"C"}get curve(){return new ye(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const i=this.curve.divideAt(t,e);return[new Tn(i[0]),new Tn(i[1])]}divideAtLength(t,e={}){const i=this.curve.divideAtLength(t,e);return[new Tn(i[0]),new Tn(i[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new Tn(e[0]),new Tn(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.start,e=this.controlPoint1,i=this.controlPoint2,s=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(s))}scale(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new Tn(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,i=this.end;return[this.type,t.x,t.y,e.x,e.y,i.x,i.y].join(" ")}}(function(n){function t(...e){const i=e.length,s=e[0];if(ye.isCurve(s))return new n(s);if($.isPointLike(s)){if(i===3)return new n(e[0],e[1],e[2]);const o=[];for(let a=0;a<i;a+=3)o.push(new n(e[a],e[a+1],e[a+2]));return o}if(i===6)return new n(e[0],e[1],e[2],e[3],e[4],e[5]);const r=[];for(let o=0;o<i;o+=6)r.push(new n(e[o],e[o+1],e[o+2],e[o+3],e[o+4],e[o+5]));return r}n.create=t})(Tn||(Tn={}));function Rl(n,t,e){return{x:n*Math.cos(e)-t*Math.sin(e),y:n*Math.sin(e)+t*Math.cos(e)}}function Dm(n,t,e,i,s,r){const o=.3333333333333333,a=2/3;return[o*n+a*e,o*t+a*i,o*s+a*e,o*r+a*i,s,r]}function kx(n,t,e,i,s,r,o,a,l,c){const u=Math.PI*120/180,d=Math.PI/180*(+s||0);let h=[],f,g,m,p,v;if(c)g=c[0],m=c[1],p=c[2],v=c[3];else{f=Rl(n,t,-d),n=f.x,t=f.y,f=Rl(a,l,-d),a=f.x,l=f.y;const L=(n-a)/2,k=(t-l)/2;let _=L*L/(e*e)+k*k/(i*i);_>1&&(_=Math.sqrt(_),e=_*e,i=_*i);const D=e*e,V=i*i,it=(r===o?-1:1)*Math.sqrt(Math.abs((D*V-D*k*k-V*L*L)/(D*k*k+V*L*L)));p=it*e*k/i+(n+a)/2,v=it*-i*L/e+(t+l)/2,g=Math.asin((t-v)/i),m=Math.asin((l-v)/i),g=n<p?Math.PI-g:g,m=a<p?Math.PI-m:m,g<0&&(g=Math.PI*2+g),m<0&&(m=Math.PI*2+m),o&&g>m&&(g-=Math.PI*2),!o&&m>g&&(m-=Math.PI*2)}let b=m-g;if(Math.abs(b)>u){const L=m,k=a,_=l;m=g+u*(o&&m>g?1:-1),a=p+e*Math.cos(m),l=v+i*Math.sin(m),h=kx(a,l,e,i,s,0,o,k,_,[m,L,p,v])}b=m-g;const y=Math.cos(g),w=Math.sin(g),C=Math.cos(m),P=Math.sin(m),E=Math.tan(b/4),S=4/3*(e*E),A=4/3*(i*E),M=[n,t],O=[n+S*w,t-A*y],T=[a+S*P,l-A*C],R=[a,l];if(O[0]=2*M[0]-O[0],O[1]=2*M[1]-O[1],c)return[O,T,R].concat(h);{h=[O,T,R].concat(h).join().split(",");const L=[],k=h.length;for(let _=0;_<k;_+=1)L[_]=_%2?Rl(+h[_-1],+h[_],d).y:Rl(+h[_],+h[_+1],d).x;return L}}function dV(n){if(!n)return null;const t=`	
\v\f\r \u2028\u2029`,e=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),i=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return n.replace(e,(o,a,l)=>{const c=[];let u=a.toLowerCase();l.replace(i,(h,f)=>(f&&c.push(+f),h)),u==="m"&&c.length>2&&(r.push([a,...c.splice(0,2)]),u="l",a=a==="m"?"l":"L");const d=s[u];for(;c.length>=d&&(r.push([a,...c.splice(0,d)]),!!d););return o}),r}function fV(n){const t=dV(n);if(!t||!t.length)return[["M",0,0]];let e=0,i=0,s=0,r=0;const o=[];for(let a=0,l=t.length;a<l;a+=1){const c=[];o.push(c);const u=t[a],d=u[0];if(d!==d.toUpperCase())switch(c[0]=d.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+e,c[7]=+u[7]+i;break;case"V":c[1]=+u[1]+i;break;case"H":c[1]=+u[1]+e;break;case"M":s=+u[1]+e,r=+u[2]+i;for(let h=1,f=u.length;h<f;h+=1)c[h]=+u[h]+(h%2?e:i);break;default:for(let h=1,f=u.length;h<f;h+=1)c[h]=+u[h]+(h%2?e:i);break}else for(let h=0,f=u.length;h<f;h+=1)c[h]=u[h];switch(c[0]){case"Z":e=+s,i=+r;break;case"H":e=c[1];break;case"V":i=c[1];break;case"M":s=c[c.length-2],r=c[c.length-1],e=c[c.length-2],i=c[c.length-1];break;default:e=c[c.length-2],i=c[c.length-1];break}}return o}function gV(n){const t=fV(n),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(l,c,u){let d,h;if(!l)return["C",c.x,c.y,c.x,c.y,c.x,c.y];switch(l[0]in{T:1,Q:1}||(c.qx=null,c.qy=null),l[0]){case"M":c.X=l[1],c.Y=l[2];break;case"A":return parseFloat(l[1])===0||parseFloat(l[2])===0?["L",l[6],l[7]]:["C"].concat(kx.apply(0,[c.x,c.y].concat(l.slice(1))));case"S":return u==="C"||u==="S"?(d=c.x*2-c.bx,h=c.y*2-c.by):(d=c.x,h=c.y),["C",d,h].concat(l.slice(1));case"T":return u==="Q"||u==="T"?(c.qx=c.x*2-c.qx,c.qy=c.y*2-c.qy):(c.qx=c.x,c.qy=c.y),["C"].concat(Dm(c.x,c.y,c.qx,c.qy,l[1],l[2]));case"Q":return c.qx=l[1],c.qy=l[2],["C"].concat(Dm(c.x,c.y,l[1],l[2],l[3],l[4]));case"H":return["L"].concat(l[1],c.y);case"V":return["L"].concat(c.x,l[1])}return l}function s(l,c){if(l[c].length>7){l[c].shift();const u=l[c];for(;u.length;)r[c]="A",c+=1,l.splice(c,0,["C"].concat(u.splice(0,6)));l.splice(c,1),a=t.length}}const r=[];let o="",a=t.length;for(let l=0;l<a;l+=1){let c="";t[l]&&(c=t[l][0]),c!=="C"&&(r[l]=c,l>0&&(o=r[l-1])),t[l]=i(t[l],e,o),r[l]!=="A"&&c==="C"&&(r[l]="C"),s(t,l);const u=t[l],d=u.length;e.x=u[d-2],e.y=u[d-1],e.bx=parseFloat(u[d-4])||e.x,e.by=parseFloat(u[d-3])||e.y}return(!t[0][0]||t[0][0]!=="M")&&t.unshift(["M",0,0]),t}function pV(n){return gV(n).map(t=>t.map(e=>typeof e=="string"?e:qt.round(e,2))).join(",").split(",").join(" ")}class wt extends Ls{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if(gt.isLine(t[0])||ye.isCurve(t[0])){let e=null;t.forEach((s,r)=>{r===0&&this.appendSegment(wt.createSegment("M",s.start)),e!=null&&!e.end.equals(s.start)&&this.appendSegment(wt.createSegment("M",s.start)),gt.isLine(s)?this.appendSegment(wt.createSegment("L",s.end)):ye.isCurve(s)&&this.appendSegment(wt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),e=s})}else t.forEach(i=>{i.isSegment&&this.appendSegment(i)});else t!=null&&(gt.isLine(t)?(this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("L",t.end))):ye.isCurve(t)?(this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Oe.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((e,i)=>{const s=i===0?wt.createSegment("M",e):wt.createSegment("L",e);this.appendSegment(s)}):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=0;i<e;i+=1){const s=t[i];if(s.isVisible)return s.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=e-1;i>=0;i-=1){const s=t[i];if(s.isVisible)return s.end}return t[e-1].end}moveTo(...t){return this.appendSegment(lo.create.call(null,...t))}lineTo(...t){return this.appendSegment(Je.create.call(null,...t))}curveTo(...t){return this.appendSegment(Tn.create.call(null,...t))}arcTo(t,e,i,s,r,o,a){const l=this.end||new $,c=typeof o=="number"?Sc(l.x,l.y,t,e,i,s,r,o,a):Sc(l.x,l.y,t,e,i,s,r,o.x,o.y);if(c!=null)for(let u=0,d=c.length;u<d;u+=6)this.curveTo(c[u],c[u+1],c[u+2],c[u+3],c[u+4],c[u+5]);return this}quadTo(t,e,i,s){const r=this.end||new $,o=["M",r.x,r.y];if(typeof t=="number")o.push("Q",t,e,i,s);else{const l=e;o.push("Q",t.x,t.y,l.x,l.y)}const a=wt.parse(o.join(" "));return this.appendSegment(a.segments.slice(1)),this}close(){return this.appendSegment(ao.create())}drawPoints(t,e={}){const i=Mx(t,e),s=wt.parse(i);s&&s.segments&&this.appendSegment(s.segments)}bbox(){const t=this.segments,e=t.length;if(e===0)return null;let i;for(let r=0;r<e;r+=1){const o=t[r];if(o.isVisible){const a=o.bbox();a!=null&&(i=i?i.union(a):a)}}if(i!=null)return i;const s=t[e-1];return new nt(s.end.x,s.end.y,0,0)}appendSegment(t){const e=this.segments.length;let i=e!==0?this.segments[e-1]:null,s;const r=null;if(Array.isArray(t))for(let o=0,a=t.length;o<a;o+=1){const l=t[o];s=this.prepareSegment(l,i,r),this.segments.push(s),i=s}else t!=null&&t.isSegment&&(s=this.prepareSegment(t,i,r),this.segments.push(s));return this}insertSegment(t,e){const i=this.segments.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");let s,r=null,o=null;if(i!==0&&(t>=1?(r=this.segments[t-1],o=r.nextSegment):(r=null,o=this.segments[0])),!Array.isArray(e))s=this.prepareSegment(e,r,o),this.segments.splice(t,0,s);else for(let a=0,l=e.length;a<l;a+=1){const c=e[a];s=this.prepareSegment(c,r,o),this.segments.splice(t+a,0,s),r=s}return this}removeSegment(t){const e=this.fixIndex(t),i=this.segments.splice(e,1)[0],s=i.previousSegment,r=i.nextSegment;return s&&(s.nextSegment=r),r&&(r.previousSegment=s),i.isSubpathStart&&r&&this.updateSubpathStartSegment(r),i}replaceSegment(t,e){const i=this.fixIndex(t);let s;const r=this.segments[i];let o=r.previousSegment;const a=r.nextSegment;let l=r.isSubpathStart;if(!Array.isArray(e))s=this.prepareSegment(e,o,a),this.segments.splice(i,1,s),l&&s.isSubpathStart&&(l=!1);else{this.segments.splice(t,1);for(let c=0,u=e.length;c<u;c+=1){const d=e[c];s=this.prepareSegment(d,o,a),this.segments.splice(t+c,0,s),o=s,l&&s.isSubpathStart&&(l=!1)}}l&&a&&this.updateSubpathStartSegment(a)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(e===0)throw new Error("Path has no segments.");let i=t;for(;i<0;)i=e+i;if(i>=e||i<0)throw new Error("Index out of range.");return i}segmentAt(t,e={}){const i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null}segmentAtLength(t,e={}){const i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null}segmentIndexAt(t,e={}){if(this.segments.length===0)return null;const i=qt.clamp(t,0,1),s=this.getOptions(e),o=this.length(s)*i;return this.segmentIndexAtLength(o,s)}segmentIndexAtLength(t,e={}){const i=this.segments.length;if(i===0)return null;let s=!0;t<0&&(s=!1,t=-t);const r=this.getPrecision(e),o=this.getSubdivisions(e);let a=0,l=null;for(let c=0;c<i;c+=1){const u=s?c:i-1-c,d=this.segments[u],h=o[u],f=d.length({precision:r,subdivisions:h});if(d.isVisible){if(t<=a+f)return u;l=u}a+=f}return l}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),i=[];for(let s=0,r=this.segments.length;s<r;s+=1){const a=this.segments[s].getSubdivisions({precision:e});i.push(a)}return i}updateSubpathStartSegment(t){let e=t.previousSegment,i=t;for(;i&&!i.isSubpathStart;)e!=null?i.subpathStartSegment=e.subpathStartSegment:i.subpathStartSegment=null,e=i,i=i.nextSegment}prepareSegment(t,e,i){t.previousSegment=e,t.nextSegment=i,e!=null&&(e.nextSegment=t),i!=null&&(i.previousSegment=t);let s=t;return t.isSubpathStart&&(t.subpathStartSegment=t,s=i),s!=null&&this.updateSubpathStartSegment(s),t}closestPoint(t,e={}){const i=this.closestPointT(t,e);return i?this.pointAtT(i):null}closestPointLength(t,e={}){const i=this.getOptions(e),s=this.closestPointT(t,i);return s?this.lengthAtT(s,i):0}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),s=this.closestPointLength(t,i);if(s===0)return 0;const r=this.length(i);return r===0?0:s/r}closestPointT(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),s=this.getSubdivisions(e);let r,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a],u=s[a];if(c.isVisible){const d=c.closestPointT(t,{precision:i,subdivisions:u}),h=c.pointAtT(d),f=qt.squaredLength(h,t);f<o&&(r={segmentIndex:a,value:d},o=f)}}return r||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),s=this.getSubdivisions(e);let r,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a],u=s[a];if(c.isDifferentiable()){const d=c.closestPointT(t,{precision:i,subdivisions:u}),h=c.pointAtT(d),f=qt.squaredLength(h,t);f<o&&(r=c.tangentAtT(d),o=f)}}return r||null}containsPoint(t,e={}){const i=this.toPolylines(e);if(!i)return!1;let s=0;for(let r=0,o=i.length;r<o;r+=1)i[r].containsPoint(t)&&(s+=1);return s%2===1}pointAt(t,e={}){if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.getOptions(e),r=this.length(i)*t;return this.pointAtLength(r,i)}pointAtLength(t,e={}){if(this.segments.length===0)return null;if(t===0)return this.start.clone();let i=!0;t<0&&(i=!1,t=-t);const s=this.getPrecision(e),r=this.getSubdivisions(e);let o,a=0;for(let c=0,u=this.segments.length;c<u;c+=1){const d=i?c:u-1-c,h=this.segments[d],f=r[d],g=h.length({precision:s,subdivisions:f});if(h.isVisible){if(t<=a+g)return h.pointAtLength((i?1:-1)*(t-a),{precision:s,subdivisions:f});o=h}a+=g}return o?i?o.end:o.start:this.segments[this.segments.length-1].end.clone()}pointAtT(t){const e=this.segments,i=e.length;if(i===0)return null;const s=t.segmentIndex;if(s<0)return e[0].pointAtT(0);if(s>=i)return e[i-1].pointAtT(1);const r=qt.clamp(t.value,0,1);return e[s].pointAtT(r)}divideAt(t,e={}){if(this.segments.length===0)return null;const i=qt.clamp(t,0,1),s=this.getOptions(e),o=this.length(s)*i;return this.divideAtLength(o,s)}divideAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const s=this.getPrecision(e),r=this.getSubdivisions(e);let o=0,a,l,c,u,d;for(let C=0,P=this.segments.length;C<P;C+=1){const E=i?C:P-1-C,S=this.getSegment(E),A=r[E],M={precision:s,subdivisions:A},O=S.length(M);if(S.isDifferentiable()&&(c=S,u=E,t<=o+O)){l=E,a=S.divideAtLength((i?1:-1)*(t-o),M);break}o+=O}if(!c)return null;a||(l=u,d=i?1:0,a=c.divideAtT(d));const h=this.clone(),f=l;h.replaceSegment(f,a);const g=f;let m=f+1,p=f+2;a[0].isDifferentiable()||(h.removeSegment(g),m-=1,p-=1);const v=h.getSegment(m).start;h.insertSegment(m,wt.createSegment("M",v)),p+=1,a[1].isDifferentiable()||(h.removeSegment(p-1),p-=1);const b=p-g-1;for(let C=p,P=h.segments.length;C<P;C+=1){const E=this.getSegment(C-b),S=h.getSegment(C);if(S.type==="Z"&&!E.subpathStartSegment.end.equals(S.subpathStartSegment.end)){const A=wt.createSegment("L",E.end);h.replaceSegment(C,A)}}const y=new wt(h.segments.slice(0,m)),w=new wt(h.segments.slice(m));return[y,w]}intersectsWithLine(t,e={}){const i=this.toPolylines(e);if(i==null)return null;let s=null;for(let r=0,o=i.length;r<o;r+=1){const a=i[r],l=t.intersect(a);l&&(s==null&&(s=[]),Array.isArray(l)?s.push(...l):s.push(l))}return s}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1}isValid(){const t=this.segments;return t.length===0||t[0].type==="M"}length(t={}){if(this.segments.length===0)return 0;const e=this.getSubdivisions(t);let i=0;for(let s=0,r=this.segments.length;s<r;s+=1){const o=this.segments[s],a=e[s];i+=o.length({subdivisions:a})}return i}lengthAtT(t,e={}){const i=this.segments.length;if(i===0)return 0;let s=t.segmentIndex;if(s<0)return 0;let r=qt.clamp(t.value,0,1);s>=i&&(s=i-1,r=1);const o=this.getPrecision(e),a=this.getSubdivisions(e);let l=0;for(let d=0;d<s;d+=1){const h=this.segments[d],f=a[d];l+=h.length({precision:o,subdivisions:f})}const c=this.segments[s],u=a[s];return l+=c.lengthAtT(r,{precision:o,subdivisions:u}),l}tangentAt(t,e={}){if(this.segments.length===0)return null;const i=qt.clamp(t,0,1),s=this.getOptions(e),o=this.length(s)*i;return this.tangentAtLength(o,s)}tangentAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const s=this.getPrecision(e),r=this.getSubdivisions(e);let o,a=0;for(let l=0,c=this.segments.length;l<c;l+=1){const u=i?l:c-1-l,d=this.segments[u],h=r[u],f=d.length({precision:s,subdivisions:h});if(d.isDifferentiable()){if(t<=a+f)return d.tangentAtLength((i?1:-1)*(t-a),{precision:s,subdivisions:h});o=d}a+=f}if(o){const l=i?1:0;return o.tangentAtT(l)}return null}tangentAtT(t){const e=this.segments.length;if(e===0)return null;const i=t.segmentIndex;if(i<0)return this.segments[0].tangentAtT(0);if(i>=e)return this.segments[e-1].tangentAtT(1);const s=qt.clamp(t.value,0,1);return this.segments[i].tangentAtT(s)}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getSubdivisions(t={}){if(t.segmentSubdivisions==null){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){const e=this.getPrecision(t),i=this.getSubdivisions(t);return{precision:e,segmentSubdivisions:i}}toPoints(t={}){const e=this.segments,i=e.length;if(i===0)return null;const s=this.getSubdivisions(t),r=[];let o=[];for(let a=0;a<i;a+=1){const l=e[a];if(l.isVisible){const c=s[a];c.length>0?c.forEach(u=>o.push(u.start)):o.push(l.start)}else o.length>0&&(o.push(e[a-1].end),r.push(o),o=[])}return o.length>0&&(o.push(this.end),r.push(o)),r}toPolylines(t={}){const e=this.toPoints(t);return e?e.map(i=>new Oe(i)):null}scale(t,e,i){return this.segments.forEach(s=>s.scale(t,e,i)),this}rotate(t,e){return this.segments.forEach(i=>i.rotate(t,e)),this}translate(t,e){return typeof t=="number"?this.segments.forEach(i=>i.translate(t,e)):this.segments.forEach(i=>i.translate(t)),this}clone(){const t=new wt;return this.segments.forEach(e=>t.appendSegment(e.clone())),t}equals(t){if(t==null)return!1;const e=this.segments,i=t.segments,s=e.length;if(i.length!==s)return!1;for(let r=0;r<s;r+=1){const o=e[r],a=i[r];if(o.type!==a.type||!o.equals(a))return!1}return!0}toJSON(){return this.segments.map(t=>t.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(t=>t.serialize()).join(" ")}toString(){return this.serialize()}}(function(n){function t(e){return e!=null&&e instanceof n}n.isPath=t})(wt||(wt={}));(function(n){function t(i){if(!i)return new n;const s=new n,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,o=n.normalize(i).match(r);if(o!=null)for(let a=0,l=o.length;a<l;a+=1){const c=o[a],u=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,d=c.match(u);if(d!=null){const h=d[0],f=d.slice(1).map(m=>+m),g=e.call(null,h,...f);s.appendSegment(g)}}return s}n.parse=t;function e(i,...s){if(i==="M")return lo.create.call(null,...s);if(i==="L")return Je.create.call(null,...s);if(i==="C")return Tn.create.call(null,...s);if(i==="z"||i==="Z")return ao.create();throw new Error(`Invalid path segment type "${i}"`)}n.createSegment=e})(wt||(wt={}));(function(n){n.normalize=pV,n.isValid=cV,n.drawArc=hV,n.drawPoints=Mx,n.arcToCurves=Sc})(wt||(wt={}));class Te{constructor(t){this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(t,e,i=!1){if(typeof t=="object"){Object.entries(t).forEach(([o,a])=>{this.register(o,a,e)});return}this.exist(t)&&!i&&!_n.isApplyingHMR()&&this.onDuplicated(t);const s=this.options.process,r=s?yt(s,this,t,e):e;return this.data[t]=r,r}unregister(t){const e=t?this.data[t]:null;return delete this.data[t],e}get(t){return t?this.data[t]:null}exist(t){return t?this.data[t]!=null:!1}onDuplicated(t){try{throw this.options.onConflict&&yt(this.options.onConflict,this,t),new Error(`${gc(this.options.type)} with name '${t}' already registered.`)}catch(e){throw e}}onNotFound(t,e){throw new Error(this.getSpellingSuggestion(t,e))}getSpellingSuggestion(t,e){const i=this.getSpellingSuggestionForName(t),s=e?`${e} ${_j(this.options.type)}`:this.options.type;return`${gc(s)} with name '${t}' does not exist.${i?` Did you mean '${i}'?`:""}`}getSpellingSuggestionForName(t){return hz(t,Object.keys(this.data),e=>e)}}(function(n){function t(e){return new n(e)}n.create=t})(Te||(Te={}));const mV={color:"#aaaaaa",thickness:1,markup:"rect",update(n,t){const e=t.thickness*t.sx,i=t.thickness*t.sy;Vt(n,{width:e,height:i,rx:e,ry:i,fill:t.color})}},bV={color:"#aaaaaa",thickness:1,markup:"rect",update(n,t){const e=t.sx<=1?t.thickness*t.sx:t.thickness;Vt(n,{width:e,height:e,rx:e,ry:e,fill:t.color})}},vV={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,t){let e;const i=t.width,s=t.height,r=t.thickness;i-r>=0&&s-r>=0?e=["M",i,0,"H0 M0 0 V0",s].join(" "):e="M 0 0 0 0",Vt(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}},yV=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,t){let e;const i=t.width,s=t.height,r=t.thickness;i-r>=0&&s-r>=0?e=["M",i,0,"H0 M0 0 V0",s].join(" "):e="M 0 0 0 0",Vt(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(n,t){let e;const i=t.factor||1,s=t.width*i,r=t.height*i,o=t.thickness;s-o>=0&&r-o>=0?e=["M",s,0,"H0 M0 0 V0",r].join(" "):e="M 0 0 0 0",t.width=s,t.height=r,Vt(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}}],xV=Object.freeze(Object.defineProperty({__proto__:null,dot:mV,doubleMesh:yV,fixedDot:bV,mesh:vV},Symbol.toStringTag,{value:"Module"}));class ys{constructor(){this.patterns={},this.root=Et.create(vc(),{width:"100%",height:"100%"},[ci("defs")]).node}add(t,e){const i=this.root.childNodes[0];i&&i.appendChild(e),this.patterns[t]=e,Et.create("rect",{width:"100%",height:"100%",fill:`url(#${t})`}).appendTo(this.root)}get(t){return this.patterns[t]}has(t){return this.patterns[t]!=null}}(function(n){n.presets=xV,n.registry=Te.create({type:"grid"}),n.registry.register(n.presets,!0)})(ys||(ys={}));const _x=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=e*2,t.height=i;const s=t.getContext("2d");return s.drawImage(n,0,0,e,i),s.translate(2*e,0),s.scale(-1,1),s.drawImage(n,0,0,e,i),t},$x=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=e,t.height=i*2;const s=t.getContext("2d");return s.drawImage(n,0,0,e,i),s.translate(0,2*i),s.scale(1,-1),s.drawImage(n,0,0,e,i),t},Ix=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=2*e,t.height=2*i;const s=t.getContext("2d");return s.drawImage(n,0,0,e,i),s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(n,0,0,e,i),s.setTransform(-1,0,0,1,t.width,0),s.drawImage(n,0,0,e,i),s.setTransform(1,0,0,-1,0,t.height),s.drawImage(n,0,0,e,i),t},wV=function(n,t){const e=n.width,i=n.height,s=document.createElement("canvas");s.width=e*3,s.height=i*3;const r=s.getContext("2d"),o=t.angle!=null?-t.angle:-20,a=zt.toRad(o),l=s.width/4,c=s.height/4;for(let u=0;u<4;u+=1)for(let d=0;d<4;d+=1)(u+d)%2>0&&(r.setTransform(1,0,0,1,(2*u-1)*l,(2*d-1)*c),r.rotate(a),r.drawImage(n,-e/2,-i/2,e,i));return s},CV=Object.freeze(Object.defineProperty({__proto__:null,flipX:_x,flipXY:Ix,flipY:$x,watermark:wV},Symbol.toStringTag,{value:"Module"}));var Na;(function(n){n.presets=Object.assign({},CV),n.presets["flip-x"]=_x,n.presets["flip-y"]=$x,n.presets["flip-xy"]=Ix,n.registry=Te.create({type:"background pattern"}),n.registry.register(n.presets,!0)})(Na||(Na={}));function Nf(n,t){return n??t}function ze(n,t){return n!=null&&Number.isFinite(n)?n:t}function SV(n={}){const t=Nf(n.color,"blue"),e=ze(n.width,1),i=ze(n.margin,2),s=ze(n.opacity,1),r=i,o=i+e;return`
    <filter>
      <feFlood flood-color="${t}" flood-opacity="${s}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${o}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${r}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function PV(n={}){const t=Nf(n.color,"red"),e=ze(n.blur,0),i=ze(n.width,1),s=ze(n.opacity,1);return`
      <filter>
        <feFlood flood-color="${t}" flood-opacity="${s}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${i}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${e}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function EV(n={}){const t=ze(n.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${n.y!=null&&Number.isFinite(n.y)?[t,n.y]:t}"/>
    </filter>
  `.trim()}function OV(n={}){const t=ze(n.dx,0),e=ze(n.dy,0),i=Nf(n.color,"black"),s=ze(n.blur,4),r=ze(n.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${s}" dx="${t}" dy="${e}" flood-color="${i}" flood-opacity="${r}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${s}" />
         <feOffset dx="${t}" dy="${e}" result="offsetblur" />
         <feFlood flood-color="${i}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${r}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function AV(n={}){const t=ze(n.amount,1),e=.2126+.7874*(1-t),i=.7152-.7152*(1-t),s=.0722-.0722*(1-t),r=.2126-.2126*(1-t),o=.7152+.2848*(1-t),a=.0722-.0722*(1-t),l=.2126-.2126*(1-t),c=.0722+.9278*(1-t);return`
    <filter>
      <feColorMatrix type="matrix" values="${e} ${i} ${s} 0 0 ${r} ${o} ${a} 0 0 ${l} ${i} ${c} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function TV(n={}){const t=ze(n.amount,1),e=.393+.607*(1-t),i=.769-.769*(1-t),s=.189-.189*(1-t),r=.349-.349*(1-t),o=.686+.314*(1-t),a=.168-.168*(1-t),l=.272-.272*(1-t),c=.534-.534*(1-t),u=.131+.869*(1-t);return`
      <filter>
        <feColorMatrix type="matrix" values="${e} ${i} ${s} 0 0 ${r} ${o} ${a} 0 0 ${l} ${c} ${u} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function MV(n={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-ze(n.amount,1)}"/>
      </filter>
    `.trim()}function kV(n={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${ze(n.angle,0)}"/>
      </filter>
    `.trim()}function _V(n={}){const t=ze(n.amount,1),e=1-t;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${t} ${e}"/>
          <feFuncG type="table" tableValues="${t} ${e}"/>
          <feFuncB type="table" tableValues="${t} ${e}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function $V(n={}){const t=ze(n.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${t}"/>
        <feFuncG type="linear" slope="${t}"/>
        <feFuncB type="linear" slope="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function IV(n={}){const t=ze(n.amount,1),e=.5-t/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${t}" intercept="${e}"/>
        <feFuncG type="linear" slope="${t}" intercept="${e}"/>
        <feFuncB type="linear" slope="${t}" intercept="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}const RV=Object.freeze(Object.defineProperty({__proto__:null,blur:EV,brightness:$V,contrast:IV,dropShadow:OV,grayScale:AV,highlight:PV,hueRotate:kV,invert:_V,outline:SV,saturate:MV,sepia:TV},Symbol.toStringTag,{value:"Module"}));var co;(function(n){n.presets=RV,n.registry=Te.create({type:"filter"}),n.registry.register(n.presets,!0)})(co||(co={}));const NV={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},DV={},Rx={position:Su("x","width","origin")},Nx={position:Su("y","height","origin")},BV={position:Su("x","width","corner")},LV={position:Su("y","height","corner")},Dx={set:As("width","width")},Bx={set:As("height","height")},jV={set:As("rx","width")},zV={set:As("ry","height")},Lx={set:(n=>{const t=As(n,"width"),e=As(n,"height");return function(i,s){const r=s.refBBox,o=r.height>r.width?t:e;return yt(o,this,i,s)}})("r")},VV={set(n,{refBBox:t}){let e=parseFloat(n);const i=Ui(n);i&&(e/=100);const s=Math.sqrt(t.height*t.height+t.width*t.width);let r;return Number.isFinite(e)&&(i||e>=0&&e<=1?r=e*s:r=Math.max(e+s,0)),{r}}},FV={set:As("cx","width")},HV={set:As("cy","height")},jx={set:Fx({resetOffset:!0})},GV={set:Fx({resetOffset:!1})},zx={set:Hx({resetOffset:!0})},UV={set:Hx({resetOffset:!1})},WV=Lx,qV=jx,YV=zx,XV=Rx,KV=Nx,JV=Dx,ZV=Bx;function Su(n,t,e){return(i,{refBBox:s})=>{if(i==null)return null;let r=parseFloat(i);const o=Ui(i);o&&(r/=100);let a;if(Number.isFinite(r)){const c=s[e];o||r>0&&r<1?a=c[n]+s[t]*r:a=c[n]+r}const l=new $;return l[n]=a||0,l}}function As(n,t){return function(e,{refBBox:i}){let s=parseFloat(e);const r=Ui(e);r&&(s/=100);const o={};if(Number.isFinite(s)){const a=r||s>=0&&s<=1?s*i[t]:Math.max(s+i[t],0);o[n]=a}return o}}function Vx(n,t){const e="x6-shape",i=t&&t.resetOffset;return function(s,{elem:r,refBBox:o}){let a=ur(r,e);if(!a||a.value!==s){const m=n(s);a={value:s,shape:m,shapeBBox:m.bbox()},ur(r,e,a)}const l=a.shape.clone(),c=a.shapeBBox.clone(),u=c.getOrigin(),d=o.getOrigin();c.x=d.x,c.y=d.y;const h=o.getMaxScaleToFit(c,d),f=c.width===0||o.width===0?1:h.sx,g=c.height===0||o.height===0?1:h.sy;return l.scale(f,g,u),i&&l.translate(-u.x,-u.y),l}}function Fx(n){function t(i){return wt.parse(i)}const e=Vx(t,n);return(i,s)=>({d:e(i,s).serialize()})}function Hx(n){const t=Vx(e=>new Oe(e),n);return(e,i)=>({points:t(e,i).serialize()})}const QV={qualify:Ti,set(n,{view:t}){return`url(#${t.graph.defineGradient(n)})`}},t3={qualify:Ti,set(n,{view:t}){const e=t.cell,i=Object.assign({},n);if(e.isEdge()&&i.type==="linearGradient"){const s=t,r=s.sourcePoint,o=s.targetPoint;i.id=`gradient-${i.type}-${e.id}`,i.attrs=Object.assign(Object.assign({},i.attrs),{x1:r.x,y1:r.y,x2:o.x,y2:o.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(i.id)}return`url(#${t.graph.defineGradient(i)})`}},Gx={qualify(n,{attrs:t}){return t.textWrap==null||!Ti(t.textWrap)},set(n,{view:t,elem:e,attrs:i}){const s="x6-text",r=ur(e,s),o=u=>{try{return JSON.parse(u)}catch{return u}},a={x:i.x,eol:i.eol,annotations:o(i.annotations),textPath:o(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:(i["display-empty"]||i.displayEmpty)==="true",lineHeight:i["line-height"]||i.lineHeight},l=i["font-size"]||i.fontSize,c=JSON.stringify([n,a]);if(l&&e.setAttribute("font-size",l),r==null||r!==c){const u=a.textPath;if(u!=null&&typeof u=="object"){const d=u.selector;if(typeof d=="string"){const h=t.find(d)[0];h instanceof SVGPathElement&&(Mf(h),a.textPath=Object.assign({"xlink:href":`#${h.id}`},u))}}wx(e,`${n}`,a),ur(e,s,c)}}},e3={qualify:Ti,set(n,{view:t,elem:e,attrs:i,refBBox:s}){const r=n,o=r.width||0;Ui(o)?s.width*=parseFloat(o)/100:o<=0?s.width+=o:s.width=o;const a=r.height||0;Ui(a)?s.height*=parseFloat(a)/100:a<=0?s.height+=a:s.height=a;let l,c=r.text;c==null&&(c=i.text||(e==null?void 0:e.textContent)),c!=null?l=Cx(`${c}`,s,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{ellipsis:r.ellipsis}):l="",yt(Gx.set,this,l,{view:t,elem:e,attrs:i,refBBox:s,cell:t.cell})}},jo=(n,{attrs:t})=>t.text!==void 0,n3={qualify:jo},i3={qualify:jo},s3={qualify:jo},r3={qualify:jo},o3={qualify:jo},a3={qualify:jo},l3={qualify(n,{elem:t}){return t instanceof SVGElement},set(n,{elem:t}){const e="x6-title",i=`${n}`,s=ur(t,e);if(s==null||s!==i){ur(t,e,i);const r=t.firstChild;if(r&&r.tagName.toUpperCase()==="TITLE"){const o=r;o.textContent=i}else{const o=document.createElementNS(t.namespaceURI,"title");o.textContent=i,t.insertBefore(o,r)}}}},c3={offset:Ux("x","width","right")},u3={offset:Ux("y","height","bottom")},h3={offset(n,{refBBox:t}){return n?{x:-t.x,y:-t.y}:{x:0,y:0}}};function Ux(n,t,e){return(i,{refBBox:s})=>{const r=new $;let o;return i==="middle"?o=s[t]/2:i===e?o=s[t]:typeof i=="number"&&Number.isFinite(i)?o=i>-1&&i<1?-s[t]*i:-i:Ui(i)?o=s[t]*parseFloat(i)/100:o=0,r[n]=-(s[n]+o),r}}const d3={qualify:Ti,set(n,{elem:t}){Ht(t,n)}},f3={set(n,{elem:t}){t.innerHTML=`${n}`}},g3={qualify:Ti,set(n,{view:t}){return`url(#${t.graph.defineFilter(n)})`}},p3={set(n){return n!=null&&typeof n=="object"&&n.id?n.id:n}};function js(n,t,e){let i,s;typeof t=="object"?(i=t.x,s=t.y):(i=t,s=e);const r=wt.parse(n),o=r.bbox();if(o){let a=-o.height/2-o.y,l=-o.width/2-o.x;typeof i=="number"&&(l-=i),typeof s=="number"&&(a-=s),r.translate(l,a)}return r.serialize()}var Wx=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const m3=n=>{var{size:t,width:e,height:i,offset:s,open:r}=n,o=Wx(n,["size","width","height","offset","open"]);return qx({size:t,width:e,height:i,offset:s},r===!0,!0,void 0,o)},b3=n=>{var{size:t,width:e,height:i,offset:s,factor:r}=n,o=Wx(n,["size","width","height","offset","factor"]);return qx({size:t,width:e,height:i,offset:s},!1,!1,r,o)};function qx(n,t,e,i=3/4,s={}){const r=n.size||10,o=n.width||r,a=n.height||r,l=new wt,c={};if(t)l.moveTo(o,0).lineTo(0,a/2).lineTo(o,a),c.fill="none";else{if(l.moveTo(0,a/2),l.lineTo(o,0),!e){const u=dn(i,0,1);l.lineTo(o*u,a/2)}l.lineTo(o,a),l.close()}return Object.assign(Object.assign(Object.assign({},c),s),{tagName:"path",d:js(l.serialize(),{x:n.offset!=null?n.offset:-o/2})})}var v3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const y3=n=>{var{size:t,width:e,height:i,offset:s}=n,r=v3(n,["size","width","height","offset"]);const o=t||10,a=e||o,l=i||o,c=new wt;return c.moveTo(0,l/2).lineTo(a/2,0).lineTo(a,l/2).lineTo(a/2,l).close(),Object.assign(Object.assign({},r),{tagName:"path",d:js(c.serialize(),s??-a/2)})};var x3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const w3=n=>{var{d:t,offsetX:e,offsetY:i}=n,s=x3(n,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},s),{tagName:"path",d:js(t,e,i)})};var C3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const S3=n=>{var{size:t,width:e,height:i,offset:s}=n,r=C3(n,["size","width","height","offset"]);const o=t||10,a=e||o,l=i||o,c=new wt;return c.moveTo(0,0).lineTo(a,l).moveTo(0,l).lineTo(a,0),Object.assign(Object.assign({},r),{tagName:"path",fill:"none",d:js(c.serialize(),s||-a/2)})};var P3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const E3=n=>{var{width:t,height:e,offset:i,open:s,flip:r}=n,o=P3(n,["width","height","offset","open","flip"]);let a=e||6;const l=t||10,c=s===!0,u=r===!0,d=Object.assign(Object.assign({},o),{tagName:"path"});u&&(a=-a);const h=new wt;return h.moveTo(0,a).lineTo(l,0),c?d.fill="none":(h.lineTo(l,a),h.close()),d.d=js(h.serialize(),{x:i||-l/2,y:a/2}),d};var Yx=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const Xx=n=>{var{r:t}=n,e=Yx(n,["r"]);const i=t||5;return Object.assign(Object.assign({cx:i},e),{tagName:"circle",r:i})},O3=n=>{var{r:t}=n,e=Yx(n,["r"]);const i=t||5,s=new wt;return s.moveTo(i,0).lineTo(i,i*2),s.moveTo(0,i).lineTo(i*2,i),{children:[Object.assign(Object.assign({},Xx({r:i})),{fill:"none"}),Object.assign(Object.assign({},e),{tagName:"path",d:js(s.serialize(),-i)})]}};var A3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const T3=n=>{var{rx:t,ry:e}=n,i=A3(n,["rx","ry"]);const s=t||5,r=e||5;return Object.assign(Object.assign({cx:s},i),{tagName:"ellipse",rx:s,ry:r})},M3=Object.freeze(Object.defineProperty({__proto__:null,async:E3,block:m3,circle:Xx,circlePlus:O3,classic:b3,cross:S3,diamond:y3,ellipse:T3,path:w3},Symbol.toStringTag,{value:"Module"}));var Ts;(function(n){n.presets=M3,n.registry=Te.create({type:"marker"}),n.registry.register(n.presets,!0)})(Ts||(Ts={}));(function(n){n.normalize=js})(Ts||(Ts={}));var k3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};function Df(n){return typeof n=="string"||Ti(n)}const _3={qualify:Df,set(n,{view:t,attrs:e}){return Bf("marker-start",n,t,e)}},$3={qualify:Df,set(n,{view:t,attrs:e}){return Bf("marker-end",n,t,e,{transform:"rotate(180)"})}},I3={qualify:Df,set(n,{view:t,attrs:e}){return Bf("marker-mid",n,t,e)}};function Bf(n,t,e,i,s={}){const r=typeof t=="string"?{name:t}:t,{name:o,args:a}=r,l=k3(r,["name","args"]);let c=l;if(o&&typeof o=="string"){const d=Ts.registry.get(o);if(d)c=d(Object.assign(Object.assign({},l),a));else return Ts.registry.onNotFound(o)}const u=Object.assign(Object.assign(Object.assign({},R3(i,n)),s),c);return{[n]:`url(#${e.graph.defineMarker(u)})`}}function R3(n,t){const e={},i=n.stroke;typeof i=="string"&&(e.stroke=i,e.fill=i);let s=n.strokeOpacity;if(s==null&&(s=n["stroke-opacity"]),s==null&&(s=n.opacity),s!=null&&(e["stroke-opacity"]=s,e["fill-opacity"]=s),t!=="marker-mid"){const r=parseFloat(n.strokeWidth||n["stroke-width"]);if(Number.isFinite(r)&&r>1){const o=Math.ceil(r/2);e.refX=t==="marker-start"?o:-o}}return e}const tl=(n,{view:t})=>t.cell.isEdge(),N3={qualify:tl,set(n,t){var e,i,s,r;const o=t.view,a=n.reverse||!1,l=n.stubs||0;let c;if(Number.isFinite(l)&&l!==0)if(a){let u,d;const h=o.getConnectionLength()||0;l<0?(u=(h+l)/2,d=-l):(u=l,d=h-l*2);const f=o.getConnection();c=(r=(s=(i=(e=f==null?void 0:f.divideAtLength(u))===null||e===void 0?void 0:e[1])===null||i===void 0?void 0:i.divideAtLength(d))===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.serialize()}else{let u;l<0?u=((o.getConnectionLength()||0)+l)/2:u=l;const d=o.getConnection();if(d){const h=d.divideAtLength(u),f=d.divideAtLength(-u);h&&f&&(c=`${h[0].serialize()} ${f[1].serialize()}`)}}return{d:c||o.getConnectionPathData()}}},Kx={qualify:tl,set:Pu("getTangentAtLength",{rotate:!0})},D3={qualify:tl,set:Pu("getTangentAtLength",{rotate:!1})},Jx={qualify:tl,set:Pu("getTangentAtRatio",{rotate:!0})},B3={qualify:tl,set:Pu("getTangentAtRatio",{rotate:!1})},L3=Kx,j3=Jx;function Pu(n,t){const e={x:1,y:0};return(i,s)=>{let r,o;const a=s.view,l=a[n](Number(i));return l?(o=t.rotate?l.vector().vectorAngle(e):0,r=l.start):(r=a.path.start,o=0),o===0?{transform:`translate(${r.x},${r.y}')`}:{transform:`translate(${r.x},${r.y}') rotate(${o})`}}}const z3=Object.freeze(Object.defineProperty({__proto__:null,annotations:r3,atConnectionLength:L3,atConnectionLengthIgnoreGradient:D3,atConnectionLengthKeepGradient:Kx,atConnectionRatio:j3,atConnectionRatioIgnoreGradient:B3,atConnectionRatioKeepGradient:Jx,connection:N3,displayEmpty:a3,eol:o3,fill:QV,filter:g3,html:f3,lineHeight:n3,port:p3,ref:DV,refCx:FV,refCy:HV,refD:qV,refDKeepOffset:GV,refDResetOffset:jx,refDx:BV,refDy:LV,refHeight:Bx,refHeight2:ZV,refPoints:YV,refPointsKeepOffset:UV,refPointsResetOffset:zx,refR:WV,refRCircumscribed:VV,refRInscribed:Lx,refRx:jV,refRy:zV,refWidth:Dx,refWidth2:JV,refX:Rx,refX2:XV,refY:Nx,refY2:KV,resetOffset:h3,sourceMarker:_3,stroke:t3,style:d3,targetMarker:$3,text:Gx,textPath:s3,textVerticalAnchor:i3,textWrap:e3,title:l3,vertexMarker:I3,xAlign:c3,yAlign:u3},Symbol.toStringTag,{value:"Module"}));var Pi;(function(n){function t(e,i,s){return!!(e!=null&&(typeof e=="string"||typeof e.qualify!="function"||yt(e.qualify,this,i,s)))}n.isValidDefinition=t})(Pi||(Pi={}));(function(n){n.presets=Object.assign(Object.assign({},NV),z3),n.registry=Te.create({type:"attribute definition"}),n.registry.register(n.presets,!0)})(Pi||(Pi={}));const Ln={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(n){return`${Ln.prefixCls}-${n}`}},Bm=Ln.prefix("highlighted"),V3={highlight(n,t,e){const i=e&&e.className||Bm;bt(t,i)},unhighlight(n,t,e){const i=e&&e.className||Bm;Ce(t,i)}},Lm=Ln.prefix("highlight-opacity"),F3={highlight(n,t){bt(t,Lm)},unhighlight(n,t){Ce(t,Lm)}};var Yt;(function(n){n.normalizeMarker=js;function t(h,f){const g=Yz(h.x,h.y).matrixTransform(f);return new $(g.x,g.y)}n.transformPoint=t;function e(h,f){return new gt(t(h.start,f),t(h.end,f))}n.transformLine=e;function i(h,f){let g=h instanceof Oe?h.points:h;return Array.isArray(g)||(g=[]),new Oe(g.map(m=>t(m,f)))}n.transformPolyline=i;function s(h,f){const m=ci("svg").createSVGPoint();m.x=h.x,m.y=h.y;const p=m.matrixTransform(f);m.x=h.x+h.width,m.y=h.y;const v=m.matrixTransform(f);m.x=h.x+h.width,m.y=h.y+h.height;const b=m.matrixTransform(f);m.x=h.x,m.y=h.y+h.height;const y=m.matrixTransform(f),w=Math.min(p.x,v.x,b.x,y.x),C=Math.max(p.x,v.x,b.x,y.x),P=Math.min(p.y,v.y,b.y,y.y),E=Math.max(p.y,v.y,b.y,y.y);return new nt(w,P,C-w,E-P)}n.transformRectangle=s;function r(h,f,g){let m;const p=h.ownerSVGElement;if(!p)return new nt(0,0,0,0);try{m=h.getBBox()}catch{m={x:h.clientLeft,y:h.clientTop,width:h.clientWidth,height:h.clientHeight}}if(f)return nt.create(m);const v=pa(h,g||p);return s(m,v)}n.bbox=r;function o(h,f={}){let g;if(!h.ownerSVGElement||!Os(h)){if(Tm(h)){const{left:b,top:y,width:w,height:C}=a(h);return new nt(b,y,w,C)}return new nt(0,0,0,0)}let p=f.target;if(!f.recursive){try{g=h.getBBox()}catch{g={x:h.clientLeft,y:h.clientTop,width:h.clientWidth,height:h.clientHeight}}if(!p)return nt.create(g);const b=pa(h,p);return s(g,b)}{const b=h.childNodes,y=b.length;if(y===0)return o(h,{target:p});p||(p=h);for(let w=0;w<y;w+=1){const C=b[w];let P;C.childNodes.length===0?P=o(C,{target:p}):P=o(C,{target:p,recursive:!0}),g?g=g.union(P):g=P}return g}}n.getBBox=o;function a(h){let f=0,g=0,m=0,p=0;if(h){let v=h;for(;v;)f+=v.offsetLeft,g+=v.offsetTop,v=v.offsetParent,v&&(f+=parseInt($m(v,"borderLeft"),10),g+=parseInt($m(v,"borderTop"),10));m=h.offsetWidth,p=h.offsetHeight}return{left:f,top:g,width:m,height:p}}n.getBoundingOffsetRect=a;function l(h){const f=g=>{const m=h.getAttribute(g),p=m?parseFloat(m):0;return Number.isNaN(p)?0:p};switch(h instanceof SVGElement&&h.nodeName.toLowerCase()){case"rect":return new nt(f("x"),f("y"),f("width"),f("height"));case"circle":return new ei(f("cx"),f("cy"),f("r"),f("r"));case"ellipse":return new ei(f("cx"),f("cy"),f("rx"),f("ry"));case"polyline":{const g=wc(h);return new Oe(g)}case"polygon":{const g=wc(h);return g.length>1&&g.push(g[0]),new Oe(g)}case"path":{let g=h.getAttribute("d");return wt.isValid(g)||(g=wt.normalize(g)),wt.parse(g)}case"line":return new gt(f("x1"),f("y1"),f("x2"),f("y2"))}return o(h)}n.toGeometryShape=l;function c(h,f,g,m){const p=$.create(f),v=$.create(g);m||(m=h instanceof SVGSVGElement?h:h.ownerSVGElement);const b=ud(h);h.setAttribute("transform","");const y=o(h,{target:m}).scale(b.sx,b.sy),w=Qo();w.setTranslate(-y.x-y.width/2,-y.y-y.height/2);const C=Qo(),P=p.angleBetween(v,p.clone().translate(1,0));P&&C.setRotate(P,0,0);const E=Qo(),S=p.clone().move(v,y.width/2);E.setTranslate(2*p.x-S.x,2*p.y-S.y);const A=pa(h,m),M=Qo();M.setMatrix(E.matrix.multiply(C.matrix.multiply(w.matrix.multiply(A.scale(b.sx,b.sy))))),h.setAttribute("transform",Lo(M.matrix))}n.translateAndAutoOrient=c;function u(h){if(h==null)return null;let f=h;do{let g=f.tagName;if(typeof g!="string")return null;if(g=g.toUpperCase(),Bo(f,"x6-port"))f=f.nextElementSibling;else if(g==="G")f=f.firstElementChild;else if(g==="TITLE")f=f.nextElementSibling;else break}while(f);return f}n.findShapeNode=u;function d(h){const f=u(h);if(!Os(f)){if(Tm(h)){const{left:p,top:v,width:b,height:y}=a(h);return new nt(p,v,b,y)}return new nt(0,0,0,0)}return l(f).bbox()||nt.create()}n.getBBoxV2=d})(Yt||(Yt={}));const H3={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},G3={highlight(n,t,e){const i=ps.getHighlighterId(t,e);if(ps.hasCache(i))return;e=H0({},e,H3);const s=Et.create(t);let r,o;try{r=s.toPathData()}catch{o=Yt.bbox(s.node,!0),r=Px(Object.assign(Object.assign({},e),o))}const a=ci("path");if(Vt(a,Object.assign({d:r,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},e.attrs?_a(e.attrs):null)),n.isEdgeElement(t))Vt(a,"d",n.getConnectionPathData());else{let u=s.getTransformToElement(n.container);const d=e.padding;if(d){o==null&&(o=Yt.bbox(s.node,!0));const h=o.x+o.width/2,f=o.y+o.height/2;o=Yt.transformRectangle(o,u);const g=Math.max(o.width,1),m=Math.max(o.height,1),p=(g+d)/g,v=(m+d)/m,b=Fe({a:p,b:0,c:0,d:v,e:h-p*h,f:f-v*f});u=u.multiply(b)}ro(a,u)}bt(a,Ln.prefix("highlight-stroke"));const l=n.cell,c=()=>ps.removeHighlighter(i);l.on("removed",c),l.model&&l.model.on("reseted",c),n.container.appendChild(a),ps.setCache(i,a)},unhighlight(n,t,e){ps.removeHighlighter(ps.getHighlighterId(t,e))}};var ps;(function(n){function t(o,a){return Mf(o),o.id+JSON.stringify(a)}n.getHighlighterId=t;const e={};function i(o,a){e[o]=a}n.setCache=i;function s(o){return e[o]!=null}n.hasCache=s;function r(o){const a=e[o];a&&(xi(a),delete e[o])}n.removeHighlighter=r})(ps||(ps={}));const U3=Object.freeze(Object.defineProperty({__proto__:null,className:V3,opacity:F3,stroke:G3},Symbol.toStringTag,{value:"Module"}));var zi;(function(n){function t(e,i){if(typeof i.highlight!="function")throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if(typeof i.unhighlight!="function")throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)}n.check=t})(zi||(zi={}));(function(n){n.presets=U3,n.registry=Te.create({type:"highlighter"}),n.registry.register(n.presets,!0)})(zi||(zi={}));function fd(n,t={}){return new $(wn(t.x,n.width),wn(t.y,n.height))}function Lf(n,t,e){return Object.assign({angle:t,position:n.toJSON()},e)}const W3=(n,t)=>n.map(({x:e,y:i,angle:s})=>Lf(fd(t,{x:e,y:i}),s||0)),q3=(n,t,e)=>{const i=e.start||0,s=e.step||20;return Zx(n,t,i,(r,o)=>(r+.5-o/2)*s)},Y3=(n,t,e)=>{const i=e.start||0,s=e.step||360/n.length;return Zx(n,t,i,r=>r*s)};function Zx(n,t,e,i){const s=t.getCenter(),r=t.getTopCenter(),o=t.width/t.height,a=ei.fromRect(t),l=n.length;return n.map((c,u)=>{const d=e+i(u,l),h=r.clone().rotate(-d,s).scale(o,1,s),f=c.compensateRotate?-a.tangentTheta(h):0;return(c.dx||c.dy)&&h.translate(c.dx||0,c.dy||0),c.dr&&h.move(s,c.dr),Lf(h.round(),f,c)})}var X3=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const K3=(n,t,e)=>{const i=fd(t,e.start||t.getOrigin()),s=fd(t,e.end||t.getCorner());return el(n,i,s,e)},J3=(n,t,e)=>el(n,t.getTopLeft(),t.getBottomLeft(),e),Z3=(n,t,e)=>el(n,t.getTopRight(),t.getBottomRight(),e),Q3=(n,t,e)=>el(n,t.getTopLeft(),t.getTopRight(),e),tF=(n,t,e)=>el(n,t.getBottomLeft(),t.getBottomRight(),e);function el(n,t,e,i){const s=new gt(t,e),r=n.length;return n.map((o,a)=>{var{strict:l}=o,c=X3(o,["strict"]);const u=l||i.strict?(a+1)/(r+1):(a+.5)/r,d=s.pointAt(u);return(c.dx||c.dy)&&d.translate(c.dx||0,c.dy||0),Lf(d.round(),0,c)})}const eF=Object.freeze(Object.defineProperty({__proto__:null,absolute:W3,bottom:tF,ellipse:q3,ellipseSpread:Y3,left:J3,line:K3,right:Z3,top:Q3},Symbol.toStringTag,{value:"Module"}));var rr;(function(n){n.presets=eF,n.registry=Te.create({type:"port layout"}),n.registry.register(n.presets,!0)})(rr||(rr={}));const nF={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function zs(n,t){const{x:e,y:i,angle:s,attrs:r}=t||{};return H0({},{angle:s,attrs:r,position:{x:e,y:i}},n,nF)}const iF=(n,t,e)=>zs({position:t.getTopLeft()},e),sF=(n,t,e)=>zs({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},e),rF=(n,t,e)=>zs({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},e),oF=(n,t,e)=>zs({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},e),aF=(n,t,e)=>zs({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},e),lF=(n,t,e)=>Qx(n,t,!1,e),cF=(n,t,e)=>Qx(n,t,!0,e),uF=(n,t,e)=>tw(n,t,!1,e),hF=(n,t,e)=>tw(n,t,!0,e);function Qx(n,t,e,i){const s=i.offset!=null?i.offset:15,r=t.getCenter().theta(n),o=ew(t);let a,l,c,u,d=0;return r<o[1]||r>o[2]?(a=".3em",l=s,c=0,u="start"):r<o[0]?(a="0",l=0,c=-s,e?(d=-90,u="start"):u="middle"):r<o[3]?(a=".3em",l=-s,c=0,u="end"):(a=".6em",l=0,c=s,e?(d=90,u="start"):u="middle"),zs({position:{x:Math.round(l),y:Math.round(c)},angle:d,attrs:{".":{y:a,"text-anchor":u}}},i)}function tw(n,t,e,i){const s=i.offset!=null?i.offset:15,r=t.getCenter().theta(n),o=ew(t);let a,l,c,u,d=0;return r<o[1]||r>o[2]?(a=".3em",l=-s,c=0,u="end"):r<o[0]?(a=".6em",l=0,c=s,e?(d=90,u="start"):u="middle"):r<o[3]?(a=".3em",l=s,c=0,u="start"):(a="0em",l=0,c=-s,e?(d=-90,u="start"):u="middle"),zs({position:{x:Math.round(l),y:Math.round(c)},angle:d,attrs:{".":{y:a,"text-anchor":u}}},i)}function ew(n){const t=n.getCenter(),e=t.theta(n.getTopLeft()),i=t.theta(n.getBottomLeft()),s=t.theta(n.getBottomRight()),r=t.theta(n.getTopRight());return[e,r,s,i]}const dF=(n,t,e)=>nw(n.diff(t.getCenter()),!1,e),fF=(n,t,e)=>nw(n.diff(t.getCenter()),!0,e);function nw(n,t,e){const i=e.offset!=null?e.offset:20,s=new $(0,0),r=-n.theta(s),o=n.clone().move(s,i).diff(n).round();let a=".3em",l,c=r;return(r+90)%180===0?(l=t?"end":"middle",!t&&r===-270&&(a="0em")):r>-270&&r<-90?(l="start",c=r-180):l="end",zs({position:o.round().toJSON(),angle:t?c:0,attrs:{".":{y:a,"text-anchor":l}}},e)}const gF=Object.freeze(Object.defineProperty({__proto__:null,bottom:aF,inside:uF,insideOriented:hF,left:sF,manual:iF,outside:lF,outsideOriented:cF,radial:dF,radialOriented:fF,right:rF,top:oF},Symbol.toStringTag,{value:"Module"}));var uo;(function(n){n.presets=gF,n.registry=Te.create({type:"port label layout"}),n.registry.register(n.presets,!0)})(uo||(uo={}));var pF=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Dt extends pe{get priority(){return 2}get disposeContainer(){return!0}constructor(){super(),this.cid=gd.uniqueId(),Dt.views[this.cid]=this}confirmUpdate(t,e){return 0}empty(t=this.container){return Qa(t),this}unmount(t=this.container){return xi(t),this}remove(t=this.container){return t===this.container?(this.removeEventListeners(document),this.onRemove(),delete Dt.views[this.cid],this.disposeContainer&&this.unmount(t)):this.unmount(t),this}onRemove(){}setClass(t,e=this.container){e.classList.value=Array.isArray(t)?t.join(" "):t}addClass(t,e=this.container){return bt(e,Array.isArray(t)?t.join(" "):t),this}removeClass(t,e=this.container){return Ce(e,Array.isArray(t)?t.join(" "):t),this}setStyle(t,e=this.container){return Ht(e,t),this}setAttrs(t,e=this.container){return t!=null&&e!=null&&Vt(e,t),this}findAttr(t,e=this.container){let i=e;for(;i&&i.nodeType===1;){const s=i.getAttribute(t);if(s!=null)return s;if(i===this.container)return null;i=i.parentNode}return null}find(t,e=this.container,i=this.selectors){return Dt.find(t,e,i).elems}findOne(t,e=this.container,i=this.selectors){const s=this.find(t,e,i);return s.length>0?s[0]:null}findByAttr(t,e=this.container){let i=e;for(;i&&i.getAttribute;){const s=i.getAttribute(t);if((s!=null||i===this.container)&&s!=="false")return i;i=i.parentNode}return null}getSelector(t,e){let i;if(t===this.container)return typeof e=="string"&&(i=`> ${e}`),i;if(t){const s=_f(t)+1;i=`${t.tagName.toLowerCase()}:nth-child(${s})`,e&&(i+=` > ${e}`),i=this.getSelector(t.parentNode,i)}return i}prefixClassName(t){return Ln.prefix(t)}delegateEvents(t,e){if(t==null)return this;e||this.undelegateEvents();const i=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(s=>{const r=s.match(i);if(r==null)return;const o=this.getEventHandler(t[s]);typeof o=="function"&&this.delegateEvent(r[1],r[2],o)}),this}undelegateEvents(){return Qt.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(t,e){return this.addEventListeners(document,t,e),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(t,e,i){return Qt.on(this.container,t+this.getEventNamespace(),e,i),this}undelegateEvent(t,e,i){const s=t+this.getEventNamespace();return e==null?Qt.off(this.container,s):typeof e=="string"?Qt.off(this.container,s,e,i):Qt.off(this.container,s,e),this}addEventListeners(t,e,i){if(e==null)return this;const s=this.getEventNamespace();return Object.keys(e).forEach(r=>{const o=this.getEventHandler(e[r]);typeof o=="function"&&Qt.on(t,r+s,i,o)}),this}removeEventListeners(t){return t!=null&&Qt.off(t,this.getEventNamespace()),this}getEventNamespace(){return`.${Ln.prefixCls}-event-${this.cid}`}getEventHandler(t){let e;if(typeof t=="string"){const i=this[t];typeof i=="function"&&(e=(...s)=>i.call(this,...s))}else e=(...i)=>t.call(this,...i);return e}getEventTarget(t,e={}){const{target:i,type:s,clientX:r=0,clientY:o=0}=t;return e.fromPoint||s==="touchmove"||s==="touchend"?document.elementFromPoint(r,o):i}stopPropagation(t){return this.setEventData(t,{propagationStopped:!0}),this}isPropagationStopped(t){return this.getEventData(t).propagationStopped===!0}getEventData(t){return this.eventData(t)}setEventData(t,e){return this.eventData(t,e)}eventData(t,e){if(t==null)throw new TypeError("Event object required");let i=t.data;const s=`__${this.cid}__`;return e==null?i==null?{}:i[s]||{}:(i==null&&(i=t.data={}),i[s]==null?i[s]=Object.assign({},e):i[s]=Object.assign(Object.assign({},i[s]),e),i[s])}normalizeEvent(t){return Dt.normalizeEvent(t)}dispose(){this.remove()}}pF([Dt.dispose()],Dt.prototype,"dispose",null);(function(n){function t(s,r){return r?ci(s||"g"):kf(s||"div")}n.createElement=t;function e(s,r,o){if(!s||s===".")return{elems:[r]};if(o){const a=o[s];if(a)return{elems:Array.isArray(a)?a:[a]}}{const a=s.includes(">")?`:scope ${s}`:s;return{isCSSSelector:!0,elems:Array.prototype.slice.call(r.querySelectorAll(a))}}}n.find=e;function i(s){let r=s;const o=s.originalEvent,a=o&&o.changedTouches&&o.changedTouches[0];if(a){for(const l in s)a[l]===void 0&&(a[l]=s[l]);r=a}return r}n.normalizeEvent=i})(Dt||(Dt={}));(function(n){n.views={};function t(e){return n.views[e]||null}n.getView=t})(Dt||(Dt={}));var gd;(function(n){let t=0;function e(){const i=`v${t}`;return t+=1,i}n.uniqueId=e})(gd||(gd={}));class mF{constructor(t){this.view=t,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new dd,this.pathCache={}}get(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}getData(t){const e=this.get(t);return e.data||(e.data={}),e.data}getMatrix(t){const e=this.get(t);if(e.matrix==null){const i=this.view.container;e.matrix=Qz(t,i)}return Fe(e.matrix)}getShape(t){const e=this.get(t);return e.shape==null&&(e.shape=Yt.toGeometryShape(t)),e.shape.clone()}getBoundingRect(t){const e=this.get(t);return e.boundingRect==null&&(e.boundingRect=Yt.getBBoxV2(t)),e.boundingRect.clone()}}var ee;(function(n){function t(c){return c!=null&&!e(c)}n.isJSONMarkup=t;function e(c){return c!=null&&typeof c=="string"}n.isStringMarkup=e;function i(c){return c==null||e(c)?c:ae(c)}n.clone=i;function s(c){return`${c}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}n.sanitize=s;function r(c,u={ns:je.svg}){const d=document.createDocumentFragment(),h={},f={},g=[{markup:Array.isArray(c)?c:[c],parent:d,ns:u.ns}];for(;g.length>0;){const m=g.pop();let p=m.ns||je.svg;const v=m.markup,b=m.parent;v.forEach(y=>{const w=y.tagName;if(!w)throw new TypeError("Invalid tagName");y.ns&&(p=y.ns);const C=p?kf(w,p):Am(w),P=y.attrs;P&&Vt(C,_a(P));const E=y.style;E&&Ht(C,E);const S=y.className;S!=null&&C.setAttribute("class",Array.isArray(S)?S.join(" "):S),y.textContent&&(C.textContent=y.textContent);const A=y.selector;if(A!=null){if(f[A])throw new TypeError("Selector must be unique");f[A]=C}if(y.groupSelector){let O=y.groupSelector;Array.isArray(O)||(O=[O]),O.forEach(T=>{h[T]||(h[T]=[]),h[T].push(C)})}b.appendChild(C);const M=y.children;Array.isArray(M)&&g.push({ns:p,markup:M,parent:C})})}return Object.keys(h).forEach(m=>{if(f[m])throw new Error("Ambiguous group selector");f[m]=h[m]}),{fragment:d,selectors:f,groups:h}}n.parseJSONMarkup=r;function o(c){return c instanceof SVGElement?ci("g"):Am("div")}function a(c){if(e(c)){const f=Et.createVectors(c),g=f.length;if(g===1)return{elem:f[0].node};if(g>1){const m=o(f[0].node);return f.forEach(p=>{m.appendChild(p.node)}),{elem:m}}return{}}const u=r(c),d=u.fragment;let h=null;return d.childNodes.length>1?(h=o(d.firstChild),h.appendChild(d)):h=d.firstChild,{elem:h,selectors:u.selectors}}n.renderMarkup=a;function l(c){const u=Et.createVectors(c),d=document.createDocumentFragment();for(let h=0,f=u.length;h<f;h+=1){const g=u[h].node;d.appendChild(g)}return{fragment:d,selectors:{}}}n.parseLabelStringMarkup=l})(ee||(ee={}));(function(n){function t(e,i,s){if(e!=null){let r;const o=e.tagName.toLowerCase();if(e===i)return typeof s=="string"?r=`> ${o} > ${s}`:r=`> ${o}`,r;const a=e.parentNode;if(a&&a.childNodes.length>1){const l=_f(e)+1;r=`${o}:nth-child(${l})`}else r=o;return s&&(r+=` > ${s}`),t(e.parentNode,i,r)}return s}n.getSelector=t})(ee||(ee={}));(function(n){function t(){return"g"}n.getPortContainerMarkup=t;function e(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}n.getPortMarkup=e;function i(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}n.getPortLabelMarkup=i})(ee||(ee={}));(function(n){function t(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}n.getEdgeMarkup=t})(ee||(ee={}));(function(n){function t(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:je.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:je.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}n.getForeignObjectMarkup=t})(ee||(ee={}));class iw{constructor(t){this.view=t}get cell(){return this.view.cell}getDefinition(t){return this.cell.getAttrDefinition(t)}processAttrs(t,e){let i,s,r,o;const a=[];return Object.keys(e).forEach(l=>{const c=e[l],u=this.getDefinition(l),d=yt(Pi.isValidDefinition,this.view,u,c,{elem:t,attrs:e,cell:this.cell,view:this.view});if(u&&d)typeof u=="string"?(i==null&&(i={}),i[u]=c):c!==null&&a.push({name:l,definition:u});else{i==null&&(i={});const h=mx.includes(l)?l:Z0(l);i[h]=c}}),a.forEach(({name:l,definition:c})=>{const u=e[l];typeof c.set=="function"&&(s==null&&(s={}),s[l]=u),typeof c.offset=="function"&&(r==null&&(r={}),r[l]=u),typeof c.position=="function"&&(o==null&&(o={}),o[l]=u)}),{raw:e,normal:i,set:s,offset:r,position:o}}mergeProcessedAttrs(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);const i=t.normal&&t.normal.transform;i!=null&&e.normal&&(e.normal.transform=i),t.normal=e.normal}findAttrs(t,e,i,s){const r=[],o=new dd;return Object.keys(t).forEach(a=>{const l=t[a];if(!Ti(l))return;const{isCSSSelector:c,elems:u}=Dt.find(a,e,s);i[a]=u;for(let d=0,h=u.length;d<h;d+=1){const f=u[d],g=s&&s[a]===f,m=o.get(f);if(m){m.array||(r.push(f),m.array=!0,m.attrs=[m.attrs],m.priority=[m.priority]);const p=m.attrs,v=m.priority;if(g)p.unshift(l),v.unshift(-1);else{const b=Yj(v,c?-1:h);p.splice(b,0,l),v.splice(b,0,h)}}else o.set(f,{elem:f,attrs:l,priority:g?-1:h,array:!1})}}),r.forEach(a=>{const l=o.get(a),c=l.attrs;l.attrs=c.reduceRight((u,d)=>xe(u,d),{})}),o}updateRelativeAttrs(t,e,i){const s=e.raw||{};let r=e.normal||{};const o=e.set,a=e.position,l=e.offset,c=()=>({elem:t,cell:this.cell,view:this.view,attrs:s,refBBox:i.clone()});if(o!=null&&Object.keys(o).forEach(p=>{const v=o[p],b=this.getDefinition(p);if(b!=null){const y=yt(b.set,this.view,v,c());typeof y=="object"?r=Object.assign(Object.assign({},r),y):y!=null&&(r[p]=y)}}),t instanceof HTMLElement){this.view.setAttrs(r,t);return}const u=r.transform,d=u?`${u}`:null,h=$a(d),f=new $(h.e,h.f);u&&(delete r.transform,h.e=0,h.f=0);let g=!1;a!=null&&Object.keys(a).forEach(p=>{const v=a[p],b=this.getDefinition(p);if(b!=null){const y=yt(b.position,this.view,v,c());y!=null&&(g=!0,f.translate($.create(y)))}}),this.view.setAttrs(r,t);let m=!1;if(l!=null){const p=this.view.getBoundingRectOfElement(t);if(p.width>0&&p.height>0){const v=Yt.transformRectangle(p,h);Object.keys(l).forEach(b=>{const y=l[b],w=this.getDefinition(b);if(w!=null){const C=yt(w.offset,this.view,y,{elem:t,cell:this.cell,view:this.view,attrs:s,refBBox:v});C!=null&&(m=!0,f.translate($.create(C)))}})}}(u!=null||g||m)&&(f.round(1),h.e=f.x,h.f=f.y,t.setAttribute("transform",Lo(h)))}update(t,e,i){const s={},r=this.findAttrs(i.attrs||e,t,s,i.selectors),o=i.attrs?this.findAttrs(e,t,s,i.selectors):r,a=[];r.each(u=>{const d=u.elem,h=u.attrs,f=this.processAttrs(d,h);if(f.set==null&&f.position==null&&f.offset==null)this.view.setAttrs(f.normal,d);else{const g=o.get(d),m=g?g.attrs:null,p=m&&h.ref==null?m.ref:h.ref;let v;if(p){if(v=(s[p]||this.view.find(p,t,i.selectors))[0],!v)throw new Error(`"${p}" reference does not exist.`)}else v=null;const b={node:d,refNode:v,attributes:m,processedAttributes:f},y=a.findIndex(w=>w.refNode===d);y>-1?a.splice(y,0,b):a.push(b)}});const l=new dd;let c;a.forEach(u=>{const d=u.node,h=u.refNode;let f;const g=h!=null&&i.rotatableNode!=null&&$f(i.rotatableNode,h);if(h&&(f=l.get(h)),!f){const v=g?i.rotatableNode:t;f=h?Yt.getBBox(h,{target:v}):i.rootBBox,h&&l.set(h,f)}let m;i.attrs&&u.attributes?(m=this.processAttrs(d,u.attributes),this.mergeProcessedAttrs(m,u.processedAttributes)):m=u.processedAttributes;let p=f;g&&i.rotatableNode!=null&&!i.rotatableNode.contains(d)&&(c||(c=$a(Vt(i.rotatableNode,"transform"))),p=Yt.transformRectangle(f,c)),this.updateRelativeAttrs(d,m,p)})}}class sw{get cell(){return this.view.cell}constructor(t,e,i=[]){this.view=t;const s={},r={};let o=0;Object.keys(e).forEach(l=>{let c=e[l];Array.isArray(c)||(c=[c]),c.forEach(u=>{let d=s[u];d||(o+=1,d=s[u]=1<<o),r[l]|=d})});let a=i;if(Array.isArray(a)||(a=[a]),a.forEach(l=>{s[l]||(o+=1,s[l]=1<<o)}),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=s,this.attrs=r,this.bootstrap=i}getFlag(t){const e=this.flags;return e==null?0:Array.isArray(t)?t.reduce((i,s)=>i|e[s],0):e[t]|0}hasAction(t,e){return t&this.getFlag(e)}removeAction(t,e){return t^t&this.getFlag(e)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let t=0;return this.attrs&&Object.keys(this.attrs).forEach(e=>{this.cell.hasChanged(e)&&(t|=this.attrs[e])}),t}}var bF=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},vF=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Ae extends Dt{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const e=(c,u)=>u!=null?X0([...Array.isArray(c)?c:[c],...Array.isArray(u)?u:[u]]):Array.isArray(c)?[...c]:[c],i=ae(this.getDefaults()),{bootstrap:s,actions:r,events:o,documentEvents:a}=t,l=vF(t,["bootstrap","actions","events","documentEvents"]);return s&&(i.bootstrap=e(i.bootstrap,s)),r&&Object.entries(r).forEach(([c,u])=>{const d=i.actions[c];u&&d?i.actions[c]=e(d,u):u&&(i.actions[c]=e(u))}),o&&(i.events=Object.assign(Object.assign({},i.events),o)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),a)),xe(i,l)}get[Symbol.toStringTag](){return Ae.toStringTag}constructor(t,e={}){super(),this.cell=t,this.options=this.ensureOptions(e),this.graph=this.options.graph,this.attr=new iw(this),this.flag=new sw(this,this.options.actions,this.options.bootstrap),this.cache=new mF(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Dt.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);const e=this.getContainerAttrs();e!=null&&this.setAttrs(e,t);const i=this.getContainerStyle();i!=null&&this.setStyle(i,t);const s=this.getContainerClassName();s!=null&&this.addClass(s,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,e={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,e){return this.flag.hasAction(t,e)}removeAction(t,e){return this.flag.removeAction(t,e)}handleAction(t,e,i,s){if(this.hasAction(t,e)){i();const r=[e];return s&&(typeof s=="string"?r.push(s):r.push(...s)),this.removeAction(t,r)}return t}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:t}){this.onAttrsChange(t)}onAttrsChange(t){let e=this.flag.getChangedFlag();t.updated||!e||(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,e,t))}parseJSONMarkup(t,e){const i=ee.parseJSONMarkup(t),s=i.selectors,r=this.rootSelector;if(e&&r){if(s[r])throw new Error("Invalid root selector");s[r]=e}return i}can(t){let e=this.graph.options.interacting;if(typeof e=="function"&&(e=yt(e,this.graph,this)),typeof e=="object"){let i=e[t];return typeof i=="function"&&(i=yt(i,this.graph,this)),i!==!1}return typeof e=="boolean"?e:!1}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootRotatedMatrix(),r=this.getRootTranslatedMatrix();return Yt.transformRectangle(e,r.multiply(s).multiply(i))}getUnrotatedBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootTranslatedMatrix();return Yt.transformRectangle(e,s.multiply(i))}getBBox(t={}){let e;if(t.useCellGeometry){const i=this.cell,s=i.isNode()?i.getAngle():0;e=i.getBBox().bbox(s)}else e=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(e)}getRootTranslatedMatrix(){const t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return Fe().translate(e.x,e.y)}getRootRotatedMatrix(){let t=Fe();const e=this.cell,i=e.isNode()?e.getAngle():0;if(i){const s=e.getBBox(),r=s.width/2,o=s.height/2;t=t.translate(r,o).rotate(i).translate(-r,-o)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,e,i={}){i.rootBBox==null&&(i.rootBBox=new nt),i.selectors==null&&(i.selectors=this.selectors),this.attr.update(t,e,i)}isEdgeElement(t){return this.cell.isEdge()&&(t==null||t===this.container)}prepareHighlight(t,e={}){const i=t||this.container;return e.partial=i===this.container,i}highlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,e){}getEdgeTerminal(t,e,i,s,r){const o=this.cell,a=this.findAttr("port",t),l=t.getAttribute("data-selector"),c={cell:o.id};return l!=null&&(c.magnet=l),a!=null?(c.port=a,o.isNode()&&!o.hasPort(a)&&l==null&&(c.selector=this.getSelector(t))):l==null&&this.container!==t&&(c.selector=this.getSelector(t)),c}getMagnetFromEdgeTerminal(t){const e=this.cell,i=this.container,s=t.port;let r=t.magnet,o;return s!=null&&e.isNode()&&e.hasPort(s)?o=this.findPortElem(s,r)||i:(r||(r=t.selector),!r&&s!=null&&(r=`[port="${s}"]`),o=this.findOne(r,i,this.selectors)),o}hasTools(t){const e=this.tools;return e==null?!1:t==null?!0:e.name===t}addTools(t){if(this.removeTools(),t){if(!this.can("toolsAddable"))return this;const e=ke.isToolsView(t)?t:new ke(t);this.tools=e,e.config({view:this}),e.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this}getEventArgs(t,e,i){const s=this,r=s.cell;return e==null||i==null?{e:t,view:s,cell:r}:{e:t,x:e,y:i,view:s,cell:r}}onClick(t,e,i){this.notify("cell:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){this.notify("cell:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){this.notify("cell:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,i))}onMouseUp(t,e,i){this.notify("cell:mouseup",this.getEventArgs(t,e,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,e,i){this.notify("cell:mousemove",this.getEventArgs(t,e,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,s){this.notify("cell:mousewheel",Object.assign({delta:s},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,s){this.notify("cell:customevent",Object.assign({name:e},this.getEventArgs(t,i,s))),this.notify(e,Object.assign({},this.getEventArgs(t,i,s)))}onMagnetMouseDown(t,e,i,s){}onMagnetDblClick(t,e,i,s){}onMagnetContextMenu(t,e,i,s){}onLabelMouseDown(t,e,i){}checkMouseleave(t){const e=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(e);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}Ae.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}};bF([Ae.dispose()],Ae.prototype,"dispose",null);(function(n){n.Flag=sw,n.Attr=iw})(Ae||(Ae={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNodeView=="function"&&typeof s.isEdgeView=="function"&&typeof s.confirmUpdate=="function"}n.isCellView=t})(Ae||(Ae={}));(function(n){function t(i){return function(s){s.config({priority:i})}}n.priority=t;function e(i){return function(s){s.config({bootstrap:i})}}n.bootstrap=e})(Ae||(Ae={}));(function(n){n.registry=Te.create({type:"view"})})(Ae||(Ae={}));class ke extends Dt{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return ke.toStringTag}constructor(t={}){super(),this.svgContainer=this.createContainer(!0,t),this.htmlContainer=this.createContainer(!1,t),this.config(t)}createContainer(t,e){const i=t?Dt.createElement("g",!0):Dt.createElement("div",!1);return bt(i,this.prefixClassName("cell-tools")),e.className&&bt(i,e.className),i}config(t){if(this.options=Object.assign(Object.assign({},this.options),t),!Ae.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(bt(this.svgContainer,this.prefixClassName("edge-tools")),bt(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(bt(this.svgContainer,this.prefixClassName("node-tools")),bt(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];const i=[];e.forEach(s=>{ke.ToolItem.isToolItem(s)?s.name==="vertices"?i.unshift(s):i.push(s):(typeof s=="object"?s.name:s)==="vertices"?i.unshift(s):i.push(s)});for(let s=0;s<i.length;s+=1){const r=i[s];let o;if(ke.ToolItem.isToolItem(r))o=r;else{const a=typeof r=="object"?r.name:r,l=typeof r=="object"?r.args||{}:{};if(a){if(this.cell.isNode()){const c=fo.registry.get(a);if(c)o=new c(l);else return fo.registry.onNotFound(a)}else if(this.cell.isEdge()){const c=go.registry.get(a);if(c)o=new c(l);else return go.registry.onNotFound(a)}}}o&&(o.config(this.cellView,this),o.render(),(o.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(o.container),this.tools.push(o))}return this}update(t={}){const e=this.tools;return e&&e.forEach(i=>{t.toolId!==i.cid&&i.isVisible()&&i.update()}),this}focus(t){const e=this.tools;return e&&e.forEach(i=>{t===i?i.show():i.hide()}),this}blur(t){const e=this.tools;return e&&e.forEach(i=>{i!==t&&!i.isVisible()&&(i.show(),i.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const t=this.tools;return t&&(t.forEach(e=>e.remove()),this.tools=null),xi(this.svgContainer),xi(this.htmlContainer),super.remove()}mount(){const t=this.tools,e=this.cellView;if(e&&t){const i=t.some(r=>r.options.isSVGElement!==!1),s=t.some(r=>r.options.isSVGElement===!1);i&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),s&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&s.graph!=null&&s.cell!=null&&typeof s.config=="function"&&typeof s.update=="function"&&typeof s.focus=="function"&&typeof s.blur=="function"&&typeof s.show=="function"&&typeof s.hide=="function"}n.isToolsView=t})(ke||(ke={}));(function(n){class t extends Dt{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return xe(ae(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=Dt.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),bt(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&bt(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,s){return this.cellView=i,this.parent=s,this.stamp(this.container),this.cell.isEdge()?bt(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&bt(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const s=ee.parseJSONMarkup(i);this.container.appendChild(s.fragment),this.childNodes=s.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return i!=null&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(i,this.cellView)}}t.defaults={isSVGElement:!0,tagName:"g"},n.ToolItem=t,function(e){let i=0;function s(o){return o?Ef(o):(i+=1,`CustomTool${i}`)}function r(o){const a=Sf(s(o.name),this);return a.config(o),a}e.define=r}(t=n.ToolItem||(n.ToolItem={})),function(e){e.toStringTag=`X6.${e.name}`;function i(s){if(s==null)return!1;if(s instanceof e)return!0;const r=s[Symbol.toStringTag],o=s;return(r==null||r===e.toStringTag)&&o.graph!=null&&o.cell!=null&&typeof o.config=="function"&&typeof o.update=="function"&&typeof o.focus=="function"&&typeof o.blur=="function"&&typeof o.show=="function"&&typeof o.hide=="function"&&typeof o.isVisible=="function"}e.isToolItem=i}(t=n.ToolItem||(n.ToolItem={}))})(ke||(ke={}));const yF=n=>n;function jm(n,t){return t===0?"0%":`${Math.round(n/t*100)}%`}function rw(n){return(e,i,s,r)=>i.isEdgeElement(s)?wF(n,e,i,s,r):xF(n,e,i,s,r)}function xF(n,t,e,i,s){const r=e.cell,o=r.getAngle(),a=e.getUnrotatedBBoxOfElement(i),l=r.getBBox().getCenter(),c=$.create(s).rotate(o,l);let u=c.x-a.x,d=c.y-a.y;return n&&(u=jm(u,a.width),d=jm(d,a.height)),t.anchor={name:"topLeft",args:{dx:u,dy:d,rotate:!0}},t}function wF(n,t,e,i,s){const r=e.getConnection();if(!r)return t;const o=r.closestPointLength(s);if(n){const a=r.length();t.anchor={name:"ratio",args:{ratio:o/a}}}else t.anchor={name:"length",args:{length:o}};return t}const CF=rw(!0),SF=rw(!1),PF=Object.freeze(Object.defineProperty({__proto__:null,noop:yF,pinAbsolute:SF,pinRelative:CF},Symbol.toStringTag,{value:"Module"}));var pd;(function(n){n.presets=PF,n.registry=Te.create({type:"connection strategy"}),n.registry.register(n.presets,!0)})(pd||(pd={}));function ow(n,t,e,i){return yt(pd.presets.pinRelative,this.graph,{},t,e,n,this.cell,i,{}).anchor}function aw(n,t){return t?n.cell.getBBox():n.cell.isEdge()?n.getConnection().bbox():n.getUnrotatedBBoxOfElement(n.container)}class Ms extends ke.ToolItem{onRender(){bt(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();ro(this.container,e,{absolute:!0})}getNodeMatrix(){const t=this.cellView,e=this.options;let{x:i=0,y:s=0}=e;const{offset:r,useCellGeometry:o,rotate:a}=e;let l=aw(t,o);const c=t.cell.getAngle();a||(l=l.bbox(c));let u=0,d=0;typeof r=="number"?(u=r,d=r):typeof r=="object"&&(u=r.x,d=r.y),i=wn(i,l.width),s=wn(s,l.height);let h=Fe().translate(l.x+l.width/2,l.y+l.height/2);return a&&(h=h.rotate(c)),h=h.translate(i+u-l.width/2,s+d-l.height/2),h}getEdgeMatrix(){const t=this.cellView,e=this.options,{offset:i=0,distance:s=0,rotate:r}=e;let o,a,l;const c=wn(s,1);c>=0&&c<=1?o=t.getTangentAtRatio(c):o=t.getTangentAtLength(c),o?(a=o.start,l=o.vector().vectorAngle(new $(1,0))||0):(a=t.getConnection().start,l=0);let u=Fe().translate(a.x,a.y).rotate(l);return typeof i=="object"?u=u.translate(i.x||0,i.y||0):u=u.translate(0,i),r||(u=u.rotate(-l)),u}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.options.onClick;typeof e=="function"&&yt(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(n){n.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Ms||(Ms={}));(function(n){n.Remove=n.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:t,btn:e}){e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})})(Ms||(Ms={}));var EF=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Pc extends ke.ToolItem{onRender(){if(bt(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const t=this.options.attrs,{class:e}=t,i=EF(t,["class"]);Vt(this.container,_a(i)),e&&bt(this.container,e)}this.update()}update(){const t=this.cellView,e=this.options,{useCellGeometry:i,rotate:s}=e,r=yi(e.padding);let o=aw(t,i).moveAndExpand({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom});const a=t.cell;if(a.isNode()){const l=a.getAngle();if(l)if(s){const c=a.getBBox().getCenter();cd(this.container,l,c.x,c.y,{absolute:!0})}else o=o.bbox(l)}return Vt(this.container,o.toJSON()),this}}(function(n){n.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(Pc||(Pc={}));class Da extends ke.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}renderHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const s=t[e],r=this.options.createHandle,o=this.options.processHandle,a=r({index:e,graph:this.graph,guard:l=>this.guard(l),attrs:this.options.attrs||{}});o&&o(a),a.updatePosition(s.x,s.y),this.stamp(a.container),this.container.appendChild(a.container),this.handles.push(a),this.startHandleListening(a)}}updateHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const s=t[e],r=this.handles[e];r&&r.updatePosition(s.x,s.y)}}updatePath(){const t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}stopHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}getNeighborPoints(t){const e=this.cellView,i=this.vertices,s=t>0?i[t-1]:e.sourceAnchor,r=t<i.length-1?i[t+1]:e.targetAnchor;return{prev:$.create(s),next:$.create(r)}}getMouseEventArgs(t){const e=this.normalizeEvent(t),{x:i,y:s}=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:i,y:s}}onHandleChange({e:t}){this.focus();const e=this.cellView;if(e.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:i,x:s,y:r}=this.getMouseEventArgs(t);this.eventData(i,{start:{x:s,y:r}}),e.notifyMouseDown(i,s,r)}}onHandleChanging({handle:t,e}){const i=this.cellView,s=t.options.index,{e:r,x:o,y:a}=this.getMouseEventArgs(e),l={x:o,y:a};this.snapVertex(l,s),i.cell.setVertexAt(s,l,{ui:!0,toolId:this.cid}),t.updatePosition(l.x,l.y),this.options.stopPropagation||i.notifyMouseMove(r,o,a)}stopBatch(t){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),t&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e:t}){const e=this.options,i=this.cellView;if(e.addable&&this.updatePath(),!e.removeRedundancies){this.stopBatch(this.eventData(t).vertexAdded);return}i.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(t).vertexAdded);const{e:r,x:o,y:a}=this.getMouseEventArgs(t);if(!this.options.stopPropagation){i.notifyMouseUp(r,o,a);const{start:l}=this.eventData(r);if(l){const{x:c,y:u}=l;c===o&&u===a&&i.onClick(r,o,a)}}i.checkMouseleave(r),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}snapVertex(t,e){const i=this.options.snapRadius||0;if(i>0){const s=this.getNeighborPoints(e),r=s.prev,o=s.next;Math.abs(t.x-r.x)<i?t.x=r.x:Math.abs(t.x-o.x)<i&&(t.x=o.x),Math.abs(t.y-r.y)<i?t.y=s.prev.y:Math.abs(t.y-o.y)<i&&(t.y=o.y)}}onHandleRemove({handle:t,e}){if(this.options.removable){const i=t.options.index,s=this.cellView;s.cell.removeVertexAt(i,{ui:!0}),this.options.addable&&this.updatePath(),s.checkMouseleave(this.normalizeEvent(e))}}allowAddVertex(t){const e=this.guard(t),i=this.options.addable&&this.cellView.can("vertexAddable"),s=this.options.modifiers?Wi.isMatch(t,this.options.modifiers):!0;return!e&&i&&s}onPathMouseDown(t){const e=this.cellView;if(!this.allowAddVertex(t))return;t.stopPropagation(),t.preventDefault();const i=this.normalizeEvent(t),s=this.graph.snapToGrid(i.clientX,i.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const r=e.getVertexIndex(s.x,s.y);this.snapVertex(s,r),e.cell.insertVertex(s,r,{ui:!0,toolId:this.cid}),this.render();const o=this.handles[r];this.eventData(i,{vertexAdded:!0}),o.onMouseDown(i)}onRemove(){this.resetHandles()}}(function(n){class t extends Dt{get graph(){return this.options.graph}constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Dt.createElement("circle",!0);const i=this.options.attrs;if(typeof i=="function"){const s=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(i,s){this.setAttrs({cx:i,cy:s})}onMouseDown(i){this.options.guard(i)||(i.stopPropagation(),i.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data),this.emit("change",{e:i,handle:this}))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(i){this.emit("remove",{e:i,handle:this})}}n.Handle=t})(Da||(Da={}));(function(n){const t=Ln.prefix("edge-tool-vertex-path");n.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:e=>new n.Handle(e),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})})(Da||(Da={}));class Ba extends ke.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){bt(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,e=[...this.vertices];e.unshift(t.sourcePoint),e.push(t.targetPoint);for(let i=0,s=e.length;i<s-1;i+=1){const r=e[i],o=e[i+1],a=this.renderHandle(r,o,i);this.stamp(a.container),this.handles.push(a)}return this}renderHandle(t,e,i){const s=this.options.createHandle({index:i,graph:this.graph,guard:r=>this.guard(r),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(s),this.updateHandle(s,t,e),this.container.appendChild(s.container),this.startHandleListening(s),s}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}shiftHandleIndexes(t){const e=this.handles;for(let i=0,s=e.length;i<s;i+=1)e[i].options.index+=t}resetAnchor(t,e){const i=this.cellView.cell,s={ui:!0,toolId:this.cid};e?i.prop([t,"anchor"],e,s):i.removeProp([t,"anchor"],s)}snapHandle(t,e,i){const s=t.options.axis,r=t.options.index,l=this.cellView.cell.getVertices(),c=l[r-2]||i.sourceAnchor,u=l[r+1]||i.targetAnchor,d=this.options.snapRadius;return Math.abs(e[s]-c[s])<d?e[s]=c[s]:Math.abs(e[s]-u[s])<d&&(e[s]=u[s]),e}onHandleChanging({handle:t,e}){const i=this.graph,s=this.options,r=this.cellView,o=s.anchor,a=t.options.axis,l=t.options.index-1,c=this.getEventData(e),u=this.normalizeEvent(e),d=i.snapToGrid(u.clientX,u.clientY),h=this.snapHandle(t,d.clone(),c),f=ae(this.vertices);let g=f[l],m=f[l+1];const p=r.sourceView,v=r.sourceBBox;let b=!1,y=!1;if(g?l===0?v.containsPoint(g)?(f.shift(),this.shiftHandleIndexes(-1),b=!0):(g[a]=h[a],y=!0):g[a]=h[a]:(g=r.sourceAnchor.toJSON(),g[a]=h[a],v.containsPoint(g)?b=!0:(f.unshift(g),this.shiftHandleIndexes(1),y=!0)),typeof o=="function"&&p){if(b){const S=c.sourceAnchor.clone();S[a]=h[a];const A=yt(o,r,S,p,r.sourceMagnet||p.container,"source",r,this);this.resetAnchor("source",A)}y&&this.resetAnchor("source",c.sourceAnchorDef)}const w=r.targetView,C=r.targetBBox;let P=!1,E=!1;if(m?l===f.length-2?C.containsPoint(m)?(f.pop(),P=!0):(m[a]=h[a],E=!0):m[a]=h[a]:(m=r.targetAnchor.toJSON(),m[a]=h[a],C.containsPoint(m)?P=!0:(f.push(m),E=!0)),typeof o=="function"&&w){if(P){const S=c.targetAnchor.clone();S[a]=h[a];const A=yt(o,r,S,w,r.targetMagnet||w.container,"target",r,this);this.resetAnchor("target",A)}E&&this.resetAnchor("target",c.targetAnchorDef)}$.equalPoints(f,this.vertices)||this.cellView.cell.setVertices(f,{ui:!0,toolId:this.cid}),this.updateHandle(t,g,m,0),s.stopPropagation||r.notifyMouseMove(u,d.x,d.y)}onHandleChange({handle:t,e}){const i=this.options,s=this.handles,r=this.cellView,o=t.options.index;if(Array.isArray(s)){for(let a=0,l=s.length;a<l;a+=1)a!==o&&s[a].hide();if(this.focus(),this.setEventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:ae(this.cell.prop(["source","anchor"])),targetAnchorDef:ae(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!i.stopPropagation){const a=this.normalizeEvent(e),l=this.graph.snapToGrid(a.clientX,a.clientY);r.notifyMouseDown(a,l.x,l.y)}}}onHandleChanged({e:t}){const e=this.options,i=this.cellView;e.removeRedundancies&&i.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const s=this.normalizeEvent(t),r=this.graph.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),e.stopPropagation||i.notifyMouseUp(s,r.x,r.y),i.checkMouseleave(s),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}updateHandle(t,e,i,s=0){const r=this.options.precision||0,o=Math.abs(e.x-i.x)<r,a=Math.abs(e.y-i.y)<r;if(o||a){const l=new gt(e,i);if(l.length()<this.options.threshold)t.hide();else{const u=l.getCenter(),d=o?"x":"y";u[d]+=s||0;const h=l.vector().vectorAngle(new $(1,0));t.updatePosition(u.x,u.y,h,this.cellView),t.show(),t.options.axis=d}}else t.hide()}onRemove(){this.resetHandles()}}(function(n){class t extends Dt{constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Dt.createElement("rect",!0);const i=this.options.attrs;if(typeof i=="function"){const s=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(i,s,r,o){const a=o.getClosestPoint(new $(i,s))||new $(i,s);let l=Fe().translate(a.x,a.y);if(a.equals({x:i,y:s}))l=l.rotate(r);else{let u=new gt(i,s,a.x,a.y).vector().vectorAngle(new $(1,0));u!==0&&(u+=90),l=l.rotate(u)}this.setAttrs({transform:Lo(l),cursor:r%180===0?"row-resize":"col-resize"})}onMouseDown(i){this.options.guard(i)||(this.trigger("change",{e:i,handle:this}),i.stopPropagation(),i.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}n.Handle=t})(Ba||(Ba={}));(function(n){n.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new n.Handle(t),anchor:ow})})(Ba||(Ba={}));class Ec extends ke.ToolItem{get type(){return this.options.type}onRender(){bt(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const t=this.childNodes;if(!t)return;const e=t.anchor;if(!e)return;const i=this.type,s=this.cellView,r=this.options,o=s.getTerminalAnchor(i),a=s.cell.prop([i,"anchor"]);e.setAttribute("transform",`translate(${o.x}, ${o.y})`);const l=a?r.customAnchorAttrs:r.defaultAnchorAttrs;l&&Object.keys(l).forEach(c=>{e.setAttribute(c,l[c])})}updateArea(){const t=this.childNodes;if(!t)return;const e=t.area;if(!e)return;const i=this.type,s=this.cellView,r=s.getTerminalView(i);if(r){const o=r.cell,a=s.getTerminalMagnet(i);let l=this.options.areaPadding||0;Number.isFinite(l)||(l=0);let c,u,d;r.isEdgeElement(a)?(c=r.getBBox(),u=0,d=c.getCenter()):(c=r.getUnrotatedBBoxOfElement(a),u=o.getAngle(),d=c.getCenter(),u&&d.rotate(-u,o.getBBox().getCenter())),c.inflate(l),Vt(e,{x:-c.width/2,y:-c.height/2,width:c.width,height:c.height,transform:`translate(${d.x}, ${d.y}) rotate(${u})`})}}toggleArea(t){if(this.childNodes){const e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}onMouseDown(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(t){const e=this.type,i=this.cell;t?i.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):i.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(t){const e=this.type,i=this.cellView,s=i.getTerminalView(e);if(s==null)return;const r=this.normalizeEvent(t),o=s.cell,a=i.getTerminalMagnet(e);let l=this.graph.coord.clientToLocalPoint(r.clientX,r.clientY);const c=this.options.snap;if(typeof c=="function"){const h=yt(c,i,l,s,a,e,i,this);l=$.create(h)}if(this.options.restrictArea)if(s.isEdgeElement(a)){const h=s.getClosestPoint(l);h&&(l=h)}else{const h=s.getUnrotatedBBoxOfElement(a),f=o.getAngle(),g=o.getBBox().getCenter(),m=l.clone().rotate(f,g);h.containsPoint(m)||(l=h.getNearestPointToPoint(m).rotate(-f,g))}let u;const d=this.options.anchor;typeof d=="function"&&(u=yt(d,i,l,s,a,e,i,this)),this.resetAnchor(u),this.update()}onMouseUp(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const t=this.options.resetAnchor;t&&this.resetAnchor(t===!0?void 0:t),this.update()}}(function(n){n.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:ow,snap(t,e,i,s,r,o){const a=o.options.snapRadius||0,l=s==="source",c=l?0:-1,u=this.cell.getVertexAt(c)||this.getTerminalAnchor(l?"target":"source");return u&&(Math.abs(u.x-t.x)<a&&(t.x=u.x),Math.abs(u.y-t.y)<a&&(t.y=u.y)),t}})})(Ec||(Ec={}));const OF=Ec.define({name:"source-anchor",type:"source"}),AF=Ec.define({name:"target-anchor",type:"target"});var TF=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Oc extends ke.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const t=this.options.attrs,{class:e}=t,i=TF(t,["class"]);this.setAttrs(i,this.container),e&&bt(this.container,e)}}onRender(){bt(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const t=this.ratio,e=this.cellView,i=e.getTangentAtRatio(t),s=i?i.start:e.getPointAtRatio(t),r=i&&i.vector().vectorAngle(new $(1,0))||0;if(!s)return this;const o=Fe().translate(s.x,s.y).rotate(r);return ro(this.container,o,{absolute:!0}),this}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const i=this.graph.snapToGrid(t.clientX,t.clientY),s=e.prepareArrowheadDragging(this.type,{x:i.x,y:i.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,s),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(t){const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,i.x,i.y),this.update()}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.cellView,s=this.graph.snapToGrid(e.clientX,e.clientY);i.onMouseUp(e,s.x,s.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",i.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(n){n.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(Oc||(Oc={}));const MF=Oc.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),kF=Oc.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class ho extends ke.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const t=this.cellView;t&&t.on("cell:dblclick",this.dblClick)}createElement(){const t=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=ke.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:t,editor:e}=this;if(!e)return;const{style:i}=e;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();const{attrs:s}=this.options;i.fontSize=`${s.fontSize}px`,i.fontFamily=s.fontFamily,i.color=s.color,i.backgroundColor=s.backgroundColor;const r=this.getCellText()||"";return e.innerText=r,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:t,cell:e,editor:i}=this;if(!i)return;let s=$.create(),r=20,o="",{x:a,y:l}=this.options;const{width:c,height:u}=this.options;if(typeof a<"u"&&typeof l<"u"){const f=e.getBBox();a=wn(a,f.width),l=wn(l,f.height),s=f.topLeft.translate(a,l),r=f.width-a*2}else{const f=e.getBBox();s=f.center,r=f.width-4,o="translate(-50%, -50%)"}const d=t.scale(),{style:h}=i;s=t.localToGraph(s),h.left=`${s.x}px`,h.top=`${s.y}px`,h.transform=`scale(${d.sx}, ${d.sy}) ${o}`,h.minWidth=`${r}px`,typeof c=="number"&&(h.width=`${c}px`),typeof u=="number"&&(h.height=`${u}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:t,editor:e}=this;if(!e)return;let i=$.create(),s=20;const{style:r}=e,o=this.event.target,a=o.parentElement;if(a&&Bo(a,this.prefixClassName("edge-label"))){const u=a.getAttribute("data-index")||"0";this.labelIndex=parseInt(u,10);const d=a.getAttribute("transform"),{translation:h}=wu(d);i=new $(h.tx,h.ty),s=Yt.getBBox(o).width}else{if(!this.options.labelAddable)return this;i=t.clientToLocal($.create(this.event.clientX,this.event.clientY));const d=this.cellView.path.closestPointLength(i);this.distance=d,this.labelIndex=-1}i=t.localToGraph(i);const c=t.scale();r.left=`${i.x}px`,r.top=`${i.y}px`,r.minWidth=`${s}px`,r.transform=`scale(${c.sx}, ${c.sy}) translate(-50%, -50%)`}onDocumentMouseUp(t){if(this.editor&&t.target!==this.editor){const e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(e!==""?e:null),this.removeElement()}}onCellDblClick({e:t}){this.editor||(t.stopPropagation(),this.removeElement(),this.event=t,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(t){t.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}getCellText(){const{getText:t}=this.options;if(typeof t=="function")return yt(t,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof t=="string"){if(this.cell.isNode())return this.cell.attr(t);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${t}`)}}setCellText(t){const e=this.options.setText;if(typeof e=="function"){yt(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance});return}if(typeof e=="string"){if(this.cell.isNode()){t!==null&&this.cell.attr(e,t);return}if(this.cell.isEdge()){const i=this.cell;if(this.labelIndex===-1){if(t){const s={position:{distance:this.distance},attrs:{}};Do(s,`attrs/${e}`,t),i.appendLabel(s)}}else t!==null?i.prop(`labels/${this.labelIndex}/attrs/${e}`,t):typeof this.labelIndex=="number"&&i.removeLabelAt(this.labelIndex)}}}onRemove(){const t=this.cellView;t&&t.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(n){n.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})})(ho||(ho={}));(function(n){n.NodeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),n.EdgeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})})(ho||(ho={}));var lw=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e},fo;(function(n){n.presets={boundary:Pc,button:Ms,"button-remove":Ms.Remove,"node-editor":ho.NodeEditor},n.registry=Te.create({type:"node tool",process(t,e){if(typeof e=="function")return e;let i=ke.ToolItem;const{inherit:s}=e,r=lw(e,["inherit"]);if(s){const o=this.get(s);o==null?this.onNotFound(s,"inherited"):i=o}return r.name==null&&(r.name=t),i.define.call(i,r)}}),n.registry.register(n.presets,!0)})(fo||(fo={}));var go;(function(n){n.presets={boundary:Pc,vertices:Da,segments:Ba,button:Ms,"button-remove":Ms.Remove,"source-anchor":OF,"target-anchor":AF,"source-arrowhead":MF,"target-arrowhead":kF,"edge-editor":ho.EdgeEditor},n.registry=Te.create({type:"edge tool",process(t,e){if(typeof e=="function")return e;let i=ke.ToolItem;const{inherit:s}=e,r=lw(e,["inherit"]);if(s){const o=this.get(s);o==null?this.onNotFound(s,"inherited"):i=o}return r.name==null&&(r.name=t),i.define.call(i,r)}}),n.registry.register(n.presets,!0)})(go||(go={}));const _F=ts("center"),$F=ts("topCenter"),IF=ts("bottomCenter"),RF=ts("leftMiddle"),NF=ts("rightMiddle"),DF=ts("topLeft"),BF=ts("topRight"),LF=ts("bottomLeft"),jF=ts("bottomRight");function ts(n){return function(t,e,i,s={}){const r=s.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),o=r[n];o.x+=wn(s.dx,r.width),o.y+=wn(s.dy,r.height);const a=t.cell;return s.rotate?o.rotate(-a.getAngle(),a.getBBox().getCenter()):o}}function Eu(n){return function(t,e,i,s){if(i instanceof Element){const r=this.graph.findViewByElem(i);let o;if(r)if(r.isEdgeElement(i)){const a=s.fixedAt!=null?s.fixedAt:"50%";o=cw(r,a)}else o=r.getBBoxOfElement(i).getCenter();else o=new $;return n.call(this,t,e,o,s)}return n.apply(this,arguments)}}function cw(n,t){const e=Ui(t),i=typeof t=="string"?parseFloat(t):t;return e?n.getPointAtRatio(i/100):n.getPointAtLength(i)}const zF=function(n,t,e,i){const s=zt.normalize(n.cell.getAngle()),r=n.getBBoxOfElement(t),o=r.getCenter(),a=r.getTopLeft(),l=r.getBottomRight();let c=i.padding;if(Number.isFinite(c)||(c=0),a.y+c<=e.y&&e.y<=l.y-c){const u=e.y-o.y;o.x+=s===0||s===180?0:u*1/Math.tan(zt.toRad(s)),o.y+=u}else if(a.x+c<=e.x&&e.x<=l.x-c){const u=e.x-o.x;o.y+=s===90||s===270?0:u*Math.tan(zt.toRad(s)),o.x+=u}return o},VF=Eu(zF),FF=function(n,t,e,i,s){const r=n.cell.getConnectionPoint(this.cell,s);return(i.dx||i.dy)&&r.translate(i.dx||0,i.dy||0),r},HF=function(n,t,e,i){let s,r=0,o;const a=n.cell;i.rotate?(s=n.getUnrotatedBBoxOfElement(t),o=a.getBBox().getCenter(),r=a.getAngle()):s=n.getBBoxOfElement(t);const l=i.padding;l!=null&&Number.isFinite(l)&&s.inflate(l),i.rotate&&e.rotate(r,o);const c=s.getNearestSideToPoint(e);let u;switch(c){case"left":u=s.getLeftMiddle();break;case"right":u=s.getRightMiddle();break;case"top":u=s.getTopCenter();break;case"bottom":u=s.getBottomCenter();break}const d=i.direction;return d==="H"?(c==="top"||c==="bottom")&&(e.x<=s.x+s.width?u=s.getLeftMiddle():u=s.getRightMiddle()):d==="V"&&(e.y<=s.y+s.height?u=s.getTopCenter():u=s.getBottomCenter()),i.rotate?u.rotate(-r,o):u},GF=Eu(HF),UF=Object.freeze(Object.defineProperty({__proto__:null,bottom:IF,bottomLeft:LF,bottomRight:jF,center:_F,left:RF,midSide:GF,nodeCenter:FF,orth:VF,right:NF,top:$F,topLeft:DF,topRight:BF},Symbol.toStringTag,{value:"Module"}));var po;(function(n){n.presets=UF,n.registry=Te.create({type:"node endpoint"}),n.registry.register(n.presets,!0)})(po||(po={}));const WF=function(n,t,e,i){let s=i.ratio!=null?i.ratio:.5;return s>1&&(s/=100),n.getPointAtRatio(s)},qF=function(n,t,e,i){const s=i.length!=null?i.length:20;return n.getPointAtLength(s)},uw=function(n,t,e,i){const s=n.getClosestPoint(e);return s??new $},YF=Eu(uw),XF=function(n,t,e,i){const r=n.getConnection(),o=n.getConnectionSubdivisions(),a=new gt(e.clone().translate(0,1e6),e.clone().translate(0,-1e6)),l=new gt(e.clone().translate(1e6,0),e.clone().translate(-1e6,0)),c=a.intersect(r,{segmentSubdivisions:o}),u=l.intersect(r,{segmentSubdivisions:o}),d=[];return c&&d.push(...c),u&&d.push(...u),d.length>0?e.closest(d):i.fallbackAt!=null?cw(n,i.fallbackAt):yt(uw,this,n,t,e,i)},KF=Eu(XF),JF=Object.freeze(Object.defineProperty({__proto__:null,closest:YF,length:qF,orth:KF,ratio:WF},Symbol.toStringTag,{value:"Module"}));var mo;(function(n){n.presets=JF,n.registry=Te.create({type:"edge endpoint"}),n.registry.register(n.presets,!0)})(mo||(mo={}));function Ou(n,t,e){let i;if(typeof e=="object"){if(Number.isFinite(e.y)){const r=new gt(t,n),{start:o,end:a}=r.parallel(e.y);t=o,n=a}i=e.x}else i=e;if(i==null||!Number.isFinite(i))return n;const s=n.distance(t);return i===0&&s>0?n:n.move(t,-Math.min(i,s-1))}function Ac(n){const t=n.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function ZF(n){if(n==null)return null;let t=n;do{let e=t.tagName;if(typeof e!="string")return null;if(e=e.toUpperCase(),e==="G")t=t.firstElementChild;else if(e==="TITLE")t=t.nextElementSibling;else break}while(t);return t}const hw=function(n,t,e,i){const s=t.getBBoxOfElement(e);i.stroked&&s.inflate(Ac(e)/2);const r=n.intersect(s),o=r&&r.length?n.start.closest(r):n.end;return Ou(o,n.start,i.offset)},QF=function(n,t,e,i,s){const r=t.cell,o=r.isNode()?r.getAngle():0;if(o===0)return yt(hw,this,n,t,e,i,s);const a=t.getUnrotatedBBoxOfElement(e);i.stroked&&a.inflate(Ac(e)/2);const l=a.getCenter(),c=n.clone().rotate(o,l),u=c.setLength(1e6).intersect(a),d=u&&u.length?c.start.closest(u).rotate(-o,l):n.end;return Ou(d,n.start,i.offset)},t6=function(n,t,e,i){let s,r;const o=n.end,a=i.selector;if(typeof a=="string"?s=t.findOne(a):Array.isArray(a)?s=Pf(e,a):s=ZF(e),!Os(s)){if(s===e||!Os(e))return o;s=e}const l=t.getShapeOfElement(s),c=t.getMatrixOfElement(s),u=t.getRootTranslatedMatrix(),d=t.getRootRotatedMatrix(),h=u.multiply(d).multiply(c),f=h.inverse(),g=Yt.transformLine(n,f),m=g.start.clone(),p=t.getDataOfElement(s);if(i.insideout===!1){p.shapeBBox==null&&(p.shapeBBox=l.bbox());const w=p.shapeBBox;if(w!=null&&w.containsPoint(m))return o}i.extrapolate===!0&&g.setLength(1e6);let v;if(wt.isPath(l)){const w=i.precision||2;p.segmentSubdivisions==null&&(p.segmentSubdivisions=l.getSegmentSubdivisions({precision:w})),v={precision:w,segmentSubdivisions:p.segmentSubdivisions},r=g.intersect(l,v)}else r=g.intersect(l);r?Array.isArray(r)&&(r=m.closest(r)):i.sticky===!0&&(nt.isRectangle(l)?r=l.getNearestPointToPoint(m):ei.isEllipse(l)?r=l.intersectsWithLineFromCenterToPoint(m):r=l.closestPoint(m,v));const b=r?Yt.transformPoint(r,h):o;let y=i.offset||0;return i.stroked!==!1&&(typeof y=="object"?(y=Object.assign({},y),y.x==null&&(y.x=0),y.x+=Ac(s)/2):y+=Ac(s)/2),Ou(b,n.start,y)};function e6(n,t,e=0){const{start:i,end:s}=n;let r,o,a,l;switch(t){case"left":l="x",r=s,o=i,a=-1;break;case"right":l="x",r=i,o=s,a=1;break;case"top":l="y",r=s,o=i,a=-1;break;case"bottom":l="y",r=i,o=s,a=1;break;default:return}i[l]<s[l]?r[l]=o[l]:o[l]=r[l],Number.isFinite(e)&&(r[l]+=a*e,o[l]+=a*e)}const n6=function(n,t,e,i){const{alignOffset:s,align:r}=i;return r&&e6(n,r,s),Ou(n.end,n.start,i.offset)},i6=Object.freeze(Object.defineProperty({__proto__:null,anchor:n6,bbox:hw,boundary:t6,rect:QF},Symbol.toStringTag,{value:"Module"}));var bo;(function(n){n.presets=i6,n.registry=Te.create({type:"connection point"}),n.registry.register(n.presets,!0)})(bo||(bo={}));const s6=function(n){return[...n]},r6=function(n,t,e){const i=t.side||"bottom",s=yi(t.padding||40),r=e.sourceBBox,o=e.targetBBox,a=r.getCenter(),l=o.getCenter();let c,u,d;switch(i){case"top":d=-1,c="y",u="height";break;case"left":d=-1,c="x",u="width";break;case"right":d=1,c="x",u="width";break;case"bottom":default:d=1,c="y",u="height";break}return a[c]+=d*(r[u]/2+s[i]),l[c]+=d*(o[u]/2+s[i]),d*(a[c]-l[c])>0?l[c]=a[c]:a[c]=l[c],[a.toJSON(),...n,l.toJSON()]};function Nl(n){return new nt(n.x,n.y,0,0)}function Tc(n={}){const t=yi(n.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function dw(n,t={}){return n.sourceBBox.clone().moveAndExpand(Tc(t))}function fw(n,t={}){return n.targetBBox.clone().moveAndExpand(Tc(t))}function o6(n,t={}){return n.sourceAnchor?n.sourceAnchor:dw(n,t).getCenter()}function a6(n,t={}){return n.targetAnchor?n.targetAnchor:fw(n,t).getCenter()}const gw=function(n,t,e){let i=dw(e,t),s=fw(e,t);const r=o6(e,t),o=a6(e,t);i=i.union(Nl(r)),s=s.union(Nl(o));const a=n.map(u=>$.create(u));a.unshift(r),a.push(o);let l=null;const c=[];for(let u=0,d=a.length-1;u<d;u+=1){let h=null;const f=a[u],g=a[u+1],m=An.getBearing(f,g)!=null;if(u===0)u+1===d?i.intersectsWithRect(s.clone().inflate(1))?h=An.insideNode(f,g,i,s):m||(h=An.nodeToNode(f,g,i,s)):i.containsPoint(g)?h=An.insideNode(f,g,i,Nl(g).moveAndExpand(Tc(t))):m||(h=An.nodeToVertex(f,g,i));else if(u+1===d){const p=m&&An.getBearing(g,f)===l;s.containsPoint(f)||p?h=An.insideNode(f,g,Nl(f).moveAndExpand(Tc(t)),s,l):m||(h=An.vertexToNode(f,g,s,l))}else m||(h=An.vertexToVertex(f,g,l));h?(c.push(...h.points),l=h.direction):l=An.getBearing(f,g),u+1<d&&c.push(g)}return c};var An;(function(n){const t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(d,h,f){let g=new $(d.x,h.y);return f.containsPoint(g)&&(g=new $(h.x,d.y)),g}function s(d,h){return d[h==="W"||h==="E"?"width":"height"]}n.getBBoxSize=s;function r(d,h){return d.x===h.x?d.y>h.y?"N":"S":d.y===h.y?d.x>h.x?"W":"E":null}n.getBearing=r;function o(d,h,f){const g=new $(d.x,h.y),m=new $(h.x,d.y),p=r(d,g),v=r(d,m),b=f?t[f]:null,y=p===f||p!==b&&(v===b||v!==f)?g:m;return{points:[y],direction:r(y,h)}}n.vertexToVertex=o;function a(d,h,f){const g=i(d,h,f);return{points:[g],direction:r(g,h)}}n.nodeToVertex=a;function l(d,h,f,g){const m=[new $(d.x,h.y),new $(h.x,d.y)],p=m.filter(y=>!f.containsPoint(y)),v=p.filter(y=>r(y,d)!==g);let b;if(v.length>0)return b=v.filter(y=>r(d,y)===g).pop(),b=b||v[0],{points:[b],direction:r(b,h)};{b=vj(m,p)[0];const y=$.create(h).move(b,-s(f,g)/2);return{points:[i(y,d,f),y],direction:r(y,h)}}}n.vertexToNode=l;function c(d,h,f,g){let m=a(h,d,g);const p=m.points[0];if(f.containsPoint(p)){m=a(d,h,f);const v=m.points[0];if(g.containsPoint(v)){const b=$.create(d).move(v,-s(f,r(d,v))/2),y=$.create(h).move(p,-s(g,r(h,p))/2),w=new gt(b,y).getCenter(),C=a(d,w,f),P=o(w,h,C.direction);m.points=[C.points[0],P.points[0]],m.direction=P.direction}}return m}n.nodeToNode=c;function u(d,h,f,g,m){const p=f.union(g).inflate(1),v=p.getCenter(),b=v.distance(h)>v.distance(d),y=b?h:d,w=b?d:h;let C,P,E;m?(C=$.fromPolar(p.width+p.height,e[m],y),C=p.getNearestPointToPoint(C).move(C,-1)):C=p.getNearestPointToPoint(y).move(y,1),P=i(C,w,p);let S;C.round().equals(P.round())?(P=$.fromPolar(p.width+p.height,zt.toRad(C.theta(y))+Math.PI/2,w),P=p.getNearestPointToPoint(P).move(w,1).round(),E=i(C,P,p),S=b?[P,E,C]:[C,E,P]):S=b?[P,C]:[C,P];const A=r(b?C:P,h);return{points:S,direction:A}}n.insideNode=u})(An||(An={}));const l6={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return bs(this.step,this)},directions(){const n=bs(this.step,this),t=bs(this.cost,this);return[{cost:t,offsetX:n,offsetY:0},{cost:t,offsetX:-n,offsetY:0},{cost:t,offsetX:0,offsetY:n},{cost:t,offsetX:0,offsetY:-n}]},penalties(){const n=bs(this.step,this);return{0:0,45:n/2,90:n/2}},paddingBox(){const n=bs(this.step,this);return{x:-n,y:-n,width:2*n,height:2*n}},fallbackRouter:gw,draggingRouter:null,snapToGrid:!0};function bs(n,t){return typeof n=="function"?n.call(t):n}function c6(n){const t=Object.keys(n).reduce((e,i)=>{const s=e;return i==="fallbackRouter"||i==="draggingRouter"||i==="fallbackRoute"?s[i]=n[i]:s[i]=bs(n[i],n),e},{});if(t.padding){const e=yi(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach(e=>{const i=new $(0,0),s=new $(e.offsetX,e.offsetY);e.angle=zt.normalize(i.theta(s))}),t}const zm=1,Vm=2;class u6{constructor(){this.items=[],this.hash={},this.values={}}add(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=zm,this.values[t]=e;const i=Xj(this.items,t,s=>this.values[s]);this.items.splice(i,0,t)}pop(){const t=this.items.shift();return t&&(this.hash[t]=Vm),t}isOpen(t){return this.hash[t]===zm}isClose(t){return this.hash[t]===Vm}isEmpty(){return this.items.length===0}}class h6{constructor(t){this.options=t,this.mapGridSize=100,this.map={}}build(t,e){const i=this.options,s=i.excludeTerminals.reduce((c,u)=>{const d=e[u];if(d){const h=t.getCell(d.cell);h&&c.push(h)}return c},[]);let r=[];const o=t.getCell(e.getSourceCellId());o&&(r=Cm(r,o.getAncestors().map(c=>c.id)));const a=t.getCell(e.getTargetCellId());a&&(r=Cm(r,a.getAncestors().map(c=>c.id)));const l=this.mapGridSize;return t.getNodes().reduce((c,u)=>{const d=s.some(p=>p.id===u.id),h=u.shape?i.excludeShapes.includes(u.shape):!1,f=i.excludeNodes.some(p=>typeof p=="string"?u.id===p:p===u),g=r.includes(u.id),m=h||d||f||g;if(u.isVisible()&&!m){const p=u.getBBox().moveAndExpand(i.paddingBox),v=p.getOrigin().snapToGrid(l),b=p.getCorner().snapToGrid(l);for(let y=v.x;y<=b.x;y+=l)for(let w=v.y;w<=b.y;w+=l){const C=new $(y,w).toString();c[C]==null&&(c[C]=[]),c[C].push(p)}}return c},this.map),this}isAccessible(t){const e=t.clone().snapToGrid(this.mapGridSize).toString(),i=this.map[e];return i?i.every(s=>!s.containsPoint(t)):!0}}function pw(n,t){const e=n.sourceBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function mw(n,t){const e=n.targetBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function bw(n,t){return n.sourceAnchor?n.sourceAnchor:pw(n,t).getCenter()}function d6(n,t){return n.targetAnchor?n.targetAnchor:mw(n,t).getCenter()}function mh(n,t,e,i,s){const r=360/e,o=n.theta(f6(n,t,i,s)),a=zt.normalize(o+r/2);return r*Math.floor(a/r)}function f6(n,t,e,i){const s=i.step,r=t.x-n.x,o=t.y-n.y,a=r/e.x,l=o/e.y,c=a*s,u=l*s;return new $(n.x+c,n.y+u)}function Fm(n,t){const e=Math.abs(n-t);return e>180?360-e:e}function g6(n,t){const e=t.step;return t.directions.forEach(i=>{i.gridOffsetX=i.offsetX/e*n.x,i.gridOffsetY=i.offsetY/e*n.y}),t.directions}function p6(n,t,e){return{source:t.clone(),x:Hm(e.x-t.x,n),y:Hm(e.y-t.y,n)}}function Hm(n,t){if(!n)return t;const e=Math.abs(n),i=Math.round(e/t);if(!i)return e;const s=i*t,o=(e-s)/i;return t+o}function m6(n,t){const e=t.source,i=qt.snapToGrid(n.x-e.x,t.x)+e.x,s=qt.snapToGrid(n.y-e.y,t.y)+e.y;return new $(i,s)}function ta(n,t){return n.round(t)}function Xl(n,t,e){return ta(m6(n.clone(),t),e)}function va(n){return n.toString()}function bh(n){return new $(n.x===0?0:Math.abs(n.x)/n.x,n.y===0?0:Math.abs(n.y)/n.y)}function Gm(n,t){let e=1/0;for(let i=0,s=t.length;i<s;i+=1){const r=n.manhattanDistance(t[i]);r<e&&(e=r)}return e}function Um(n,t,e,i,s){const r=s.precision,o=s.directionMap,a=n.diff(t.getCenter()),l=Object.keys(o).reduce((c,u)=>{if(e.includes(u)){const d=o[u],h=new $(n.x+d.x*(Math.abs(a.x)+t.width),n.y+d.y*(Math.abs(a.y)+t.height)),g=new gt(n,h).intersect(t)||[];let m,p=null;for(let v=0;v<g.length;v+=1){const b=g[v],y=n.squaredDistance(b);(m==null||y>m)&&(m=y,p=b)}if(p){let v=Xl(p,i,r);t.containsPoint(v)&&(v=Xl(v.translate(d.x*i.x,d.y*i.y),i,r)),c.push(v)}}return c},[]);return t.containsPoint(n)||l.push(Xl(n,i,r)),l}function b6(n,t,e,i,s){const r=[];let o=bh(s.diff(e)),a=va(e),l=n[a],c;for(;l;){c=t[a];const h=bh(c.diff(l));h.equals(o)||(r.unshift(c),o=h),a=va(l),l=n[a]}const u=t[a];return bh(u.diff(i)).equals(o)||r.unshift(u),r}function v6(n,t,e,i,s){const r=s.precision;let o,a;nt.isRectangle(t)?o=ta(bw(n,s).clone(),r):o=ta(t.clone(),r),nt.isRectangle(e)?a=ta(d6(n,s).clone(),r):a=ta(e.clone(),r);const l=p6(s.step,o,a),c=o,u=a;let d,h;if(nt.isRectangle(t)?d=Um(c,t,s.startDirections,l,s):d=[c],nt.isRectangle(e)?h=Um(a,e,s.endDirections,l,s):h=[u],d=d.filter(f=>i.isAccessible(f)),h=h.filter(f=>i.isAccessible(f)),d.length>0&&h.length>0){const f=new u6,g={},m={},p={};for(let M=0,O=d.length;M<O;M+=1){const T=d[M],R=va(T);f.add(R,Gm(T,h)),g[R]=T,p[R]=0}const v=s.previousDirectionAngle,b=v===void 0;let y,w;const C=g6(l,s),P=C.length,E=h.reduce((M,O)=>{const T=va(O);return M.push(T),M},[]),S=$.equalPoints(d,h);let A=s.maxLoopCount;for(;!f.isEmpty()&&A>0;){const M=f.pop(),O=g[M],T=m[M],R=p[M],L=O.equals(c),k=T==null;let _;if(k?b?L?_=null:_=mh(c,O,P,l,s):_=v:_=mh(T,O,P,l,s),!(k&&S)&&E.indexOf(M)>=0)return s.previousDirectionAngle=_,b6(m,g,O,c,u);for(let V=0;V<P;V+=1){y=C[V];const it=y.angle;if(w=Fm(_,it),!(b&&L)&&w>s.maxDirectionChange)continue;const at=Xl(O.clone().translate(y.gridOffsetX||0,y.gridOffsetY||0),l,r),z=va(at);if(f.isClose(z)||!i.isAccessible(at))continue;if(E.indexOf(z)>=0&&!at.equals(u)){const ft=mh(at,u,P,l,s);if(Fm(it,ft)>s.maxDirectionChange)continue}const q=y.cost,lt=L?0:s.penalties[w],mt=R+q+lt;(!f.isOpen(z)||mt<p[z])&&(g[z]=at,m[z]=O,p[z]=mt,f.add(z,mt+Gm(at,h)))}A-=1}}return s.fallbackRoute?yt(s.fallbackRoute,this,c,u,s):null}function y6(n,t=10){if(n.length<=1)return n;for(let e=0,i=n.length;e<i-1;e+=1){const s=n[e],r=n[e+1];if(s.x===r.x){const o=t*Math.round(s.x/t);s.x!==o&&(s.x=o,r.x=o)}else if(s.y===r.y){const o=t*Math.round(s.y/t);s.y!==o&&(s.y=o,r.y=o)}}return n}const x6=function(n,t,e){const i=c6(t),s=pw(e,i),r=mw(e,i),o=bw(e,i),a=new h6(i).build(e.graph.model,e.cell),l=n.map(f=>$.create(f)),c=[];let u=o,d,h;for(let f=0,g=l.length;f<=g;f+=1){let m=null;if(d=h||s,h=l[f],h==null){h=r;const v=e.cell;if((v.getSourceCellId()==null||v.getTargetCellId()==null)&&typeof i.draggingRouter=="function"){const y=d===s?o:d,w=h.getOrigin();m=yt(i.draggingRouter,e,y,w,i)}}if(m==null&&(m=v6(e,d,h,a,i)),m===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),yt(i.fallbackRouter,this,n,i,e);const p=m[0];p&&p.equals(u)&&m.shift(),u=m[m.length-1]||u,c.push(...m)}return i.snapToGrid?y6(c,e.graph.grid.getGridSize()):c},vw=function(n,t,e){return yt(x6,this,n,Object.assign(Object.assign({},l6),t),e)},w6={maxDirectionChange:45,directions(){const n=bs(this.step,this),t=bs(this.cost,this),e=Math.ceil(Math.sqrt(n*n<<1));return[{cost:t,offsetX:n,offsetY:0},{cost:e,offsetX:n,offsetY:n},{cost:t,offsetX:0,offsetY:n},{cost:e,offsetX:-n,offsetY:n},{cost:t,offsetX:-n,offsetY:0},{cost:e,offsetX:-n,offsetY:-n},{cost:t,offsetX:0,offsetY:-n},{cost:e,offsetX:n,offsetY:-n}]},fallbackRoute(n,t,e){const i=n.theta(t),s=[];let r={x:t.x,y:n.y},o={x:n.x,y:t.y};if(i%180>90){const y=r;r=o,o=y}const a=i%90<45?r:o,l=new gt(n,a),c=90*Math.ceil(i/90),u=$.fromPolar(l.squaredLength(),zt.toRad(c+135),a),d=new gt(t,u),h=l.intersectsWithLine(d),f=h||t,g=h?f:n,m=360/e.directions.length,p=g.theta(t),v=zt.normalize(p+m/2),b=m*Math.floor(v/m);return e.previousDirectionAngle=b,f&&s.push(f.round()),s.push(t),s}},C6=function(n,t,e){return yt(vw,this,n,Object.assign(Object.assign({},w6),t),e)},S6=function(n,t,e){const i=t.offset||32,s=t.min==null?16:t.min;let r=0,o=t.direction;const a=e.sourceBBox,l=e.targetBBox,c=a.getCenter(),u=l.getCenter();if(typeof i=="number"&&(r=i),o==null){let v=l.left-a.right,b=l.top-a.bottom;v>=0&&b>=0?o=v>=b?"L":"T":v<=0&&b>=0?(v=a.left-l.right,v>=0?o=v>=b?"R":"T":o="T"):v>=0&&b<=0?(b=a.top-l.bottom,b>=0?o=v>=b?"L":"B":o="L"):(v=a.left-l.right,b=a.top-l.bottom,v>=0&&b>=0?o=v>=b?"R":"B":v<=0&&b>=0?o="B":v>=0&&b<=0?o="R":o=Math.abs(v)>Math.abs(b)?"R":"B")}o==="H"?o=u.x-c.x>=0?"L":"R":o==="V"&&(o=u.y-c.y>=0?"T":"B"),i==="center"&&(o==="L"?r=(l.left-a.right)/2:o==="R"?r=(a.left-l.right)/2:o==="T"?r=(l.top-a.bottom)/2:o==="B"&&(r=(a.top-l.bottom)/2));let d,h,f;const g=o==="L"||o==="R";if(g){if(u.y===c.y)return[...n];f=o==="L"?1:-1,d="x",h="width"}else{if(u.x===c.x)return[...n];f=o==="T"?1:-1,d="y",h="height"}const m=c.clone(),p=u.clone();if(m[d]+=f*(a[h]/2+r),p[d]-=f*(l[h]/2+r),g){const v=m.x,b=p.x,y=a.width/2+s,w=l.width/2+s;u.x>c.x?b<=v&&(m.x=Math.max(b,c.x+y),p.x=Math.min(v,u.x-w)):b>=v&&(m.x=Math.min(b,c.x-y),p.x=Math.max(v,u.x+w))}else{const v=m.y,b=p.y,y=a.height/2+s,w=l.height/2+s;u.y>c.y?b<=v&&(m.y=Math.max(b,c.y+y),p.y=Math.min(v,u.y-w)):b>=v&&(m.y=Math.min(b,c.y-y),p.y=Math.max(v,u.y+w))}return[m.toJSON(),...n,p.toJSON()]};function Lr(n,t){if(t!=null&&t!==!1){const e=typeof t=="boolean"?0:t;if(e>0){const i=$.create(n[1]).move(n[2],e),s=$.create(n[1]).move(n[0],e);return[i.toJSON(),...n,s.toJSON()]}{const i=n[1];return[Object.assign({},i),...n,Object.assign({},i)]}}return n}const P6=function(n,t,e){const i=t.width||50,r=(t.height||80)/2,o=t.angle||"auto",a=e.sourceAnchor,l=e.targetAnchor,c=e.sourceBBox,u=e.targetBBox;if(a.equals(l)){const d=v=>{const b=zt.toRad(v),y=Math.sin(b),w=Math.cos(b),C=new $(a.x+w*i,a.y+y*i),P=new $(C.x-w*r,C.y-y*r),E=P.clone().rotate(-90,C),S=P.clone().rotate(90,C);return[E.toJSON(),C.toJSON(),S.toJSON()]},h=v=>{const b=a.clone().move(v,-1),y=new gt(b,v);return!c.containsPoint(v)&&!c.intersectsWithLine(y)},f=[0,90,180,270,45,135,225,315];if(typeof o=="number")return Lr(d(o),t.merge);const g=c.getCenter();if(g.equals(a))return Lr(d(0),t.merge);const m=g.angleBetween(a,g.clone().translate(1,0));let p=d(m);if(h(p[1]))return Lr(p,t.merge);for(let v=1,b=f.length;v<b;v+=1)if(p=d(m+f[v]),h(p[1]))return Lr(p,t.merge);return Lr(p,t.merge)}{const d=new gt(a,l);let h=d.parallel(-i),f=h.getCenter(),g=h.start.clone().move(h.end,r),m=h.end.clone().move(h.start,r);const p=d.parallel(-1),v=new gt(p.start,f),b=new gt(p.end,f);if((c.containsPoint(f)||u.containsPoint(f)||c.intersectsWithLine(v)||c.intersectsWithLine(b)||u.intersectsWithLine(v)||u.intersectsWithLine(b))&&(h=d.parallel(i),f=h.getCenter(),g=h.start.clone().move(h.end,r),m=h.end.clone().move(h.start,r)),t.merge){const y=new gt(a,l),w=new gt(f,y.center).setLength(Number.MAX_SAFE_INTEGER),C=c.intersectsWithLine(w),P=u.intersectsWithLine(w),E=C?Array.isArray(C)?C:[C]:[];P&&(Array.isArray(P)?E.push(...P):E.push(P));const S=y.center.closest(E);S?(e.sourceAnchor=S.clone(),e.targetAnchor=S.clone()):(e.sourceAnchor=y.center.clone(),e.targetAnchor=y.center.clone())}return Lr([g.toJSON(),f.toJSON(),m.toJSON()],t.merge)}},E6=Object.freeze(Object.defineProperty({__proto__:null,er:S6,loop:P6,manhattan:vw,metro:C6,normal:s6,oneSide:r6,orth:gw},Symbol.toStringTag,{value:"Module"}));var xs;(function(n){n.presets=E6,n.registry=Te.create({type:"router"}),n.registry.register(n.presets,!0)})(xs||(xs={}));const O6=function(n,t,e,i={}){const s=[n,...e,t],r=new Oe(s),o=new wt(r);return i.raw?o:o.serialize()},A6=function(n,t,e,i={}){const s=e.length===3?0:1,r=$.create(e[0+s]),o=$.create(e[2+s]),a=$.create(e[1+s]);if(!$.equals(n,t)){const c=new $((n.x+t.x)/2,(n.y+t.y)/2),u=c.angleBetween($.create(n).rotate(90,c),a);u>1&&(r.rotate(180-u,c),o.rotate(180-u,c),a.rotate(180-u,c))}const l=`
     M ${n.x} ${n.y}
     Q ${r.x} ${r.y} ${a.x} ${a.y}
     Q ${o.x} ${o.y} ${t.x} ${t.y}
  `;return i.raw?wt.parse(l):l},T6=function(n,t,e,i={}){const s=new wt;s.appendSegment(wt.createSegment("M",n));const r=1/3,o=2/3,a=i.radius||10;let l,c;for(let u=0,d=e.length;u<d;u+=1){const h=$.create(e[u]),f=e[u-1]||n,g=e[u+1]||t;l=c||h.distance(f)/2,c=h.distance(g)/2;const m=-Math.min(a,l),p=-Math.min(a,c),v=h.clone().move(f,m).round(),b=h.clone().move(g,p).round(),y=new $(r*v.x+o*h.x,o*h.y+r*v.y),w=new $(r*b.x+o*h.x,o*h.y+r*b.y);s.appendSegment(wt.createSegment("L",v)),s.appendSegment(wt.createSegment("C",y,w,b))}return s.appendSegment(wt.createSegment("L",t)),i.raw?s:s.serialize()},M6=function(n,t,e,i={}){let s,r=i.direction;if(e&&e.length!==0){const o=[n,...e,t],a=ye.throughPoints(o);s=new wt(a)}else if(s=new wt,s.appendSegment(wt.createSegment("M",n)),r||(r=Math.abs(n.x-t.x)>=Math.abs(n.y-t.y)?"H":"V"),r==="H"){const o=(n.x+t.x)/2;s.appendSegment(wt.createSegment("C",o,n.y,o,t.y,t.x,t.y))}else{const o=(n.y+t.y)/2;s.appendSegment(wt.createSegment("C",n.x,o,t.x,o,t.x,t.y))}return i.raw?s:s.serialize()},Wm=1,Dl=1/3,Bl=2/3;function k6(n){let t=n.graph._jumpOverUpdateList;if(t==null&&(t=n.graph._jumpOverUpdateList=[],n.graph.on("cell:mouseup",()=>{const e=n.graph._jumpOverUpdateList;setTimeout(()=>{for(let i=0;i<e.length;i+=1)e[i].update()})}),n.graph.on("model:reseted",()=>{t=n.graph._jumpOverUpdateList=[]})),t.indexOf(n)<0){t.push(n);const e=()=>t.splice(t.indexOf(n),1);n.cell.once("change:connector",e),n.cell.once("removed",e)}}function vh(n,t,e=[]){const i=[n,...e,t],s=[];return i.forEach((r,o)=>{const a=i[o+1];a!=null&&s.push(new gt(r,a))}),s}function _6(n,t){const e=[];return t.forEach(i=>{const s=n.intersectsWithLine(i);s&&e.push(s)}),e}function qm(n,t){return new gt(n,t).squaredLength()}function $6(n,t,e){return t.reduce((i,s,r)=>{if(Mc.includes(s))return i;const o=i.pop()||n,a=$.create(s).move(o.start,-e);let l=$.create(s).move(o.start,+e);const c=t[r+1];if(c!=null){const h=l.distance(c);h<=e&&(l=c.move(o.start,h),Mc.push(c))}else if(a.distance(o.end)<e*2+Wm)return i.push(o),i;if(l.distance(o.start)<e*2+Wm)return i.push(o),i;const d=new gt(a,l);return La.push(d),i.push(new gt(o.start,a),d,new gt(l,o.end)),i},[])}function Ym(n,t,e,i){const s=new wt;let r;return r=wt.createSegment("M",n[0].start),s.appendSegment(r),n.forEach((o,a)=>{if(La.includes(o)){let l,c,u,d;if(e==="arc"){l=-90,c=o.start.diff(o.end),(c.x<0||c.x===0&&c.y<0)&&(l+=180);const f=o.getCenter(),g=new gt(f,o.end).rotate(l,f);let m;m=new gt(o.start,f),u=m.pointAt(2/3).rotate(l,o.start),d=g.pointAt(1/3).rotate(-l,g.end),r=wt.createSegment("C",u,d,g.end),s.appendSegment(r),m=new gt(f,o.end),u=g.pointAt(1/3).rotate(l,g.end),d=m.pointAt(1/3).rotate(-l,o.end),r=wt.createSegment("C",u,d,o.end),s.appendSegment(r)}else if(e==="gap")r=wt.createSegment("M",o.end),s.appendSegment(r);else if(e==="cubic"){l=o.start.theta(o.end);const h=t*.6;let f=t*1.35;c=o.start.diff(o.end),(c.x<0||c.x===0&&c.y<0)&&(f*=-1),u=new $(o.start.x+h,o.start.y+f).rotate(l,o.start),d=new $(o.end.x-h,o.end.y+f).rotate(l,o.end),r=wt.createSegment("C",u,d,o.end),s.appendSegment(r)}}else{const l=n[a+1];i===0||!l||La.includes(l)?(r=wt.createSegment("L",o.end),s.appendSegment(r)):I6(i,s,o.end,o.start,l.end)}}),s}function I6(n,t,e,i,s){const r=e.distance(i)/2,o=e.distance(s)/2,a=-Math.min(n,r),l=-Math.min(n,o),c=e.clone().move(i,a).round(),u=e.clone().move(s,l).round(),d=new $(Dl*c.x+Bl*e.x,Bl*e.y+Dl*c.y),h=new $(Dl*u.x+Bl*e.x,Bl*e.y+Dl*u.y);let f;f=wt.createSegment("L",c),t.appendSegment(f),f=wt.createSegment("C",d,h,u),t.appendSegment(f)}let La,Mc;const R6=function(n,t,e,i={}){La=[],Mc=[],k6(this);const s=i.size||5,r=i.type||"arc",o=i.radius||0,a=i.ignoreConnectors||["smooth"],l=this.graph,u=l.model.getEdges();if(u.length===1)return Ym(vh(n,t,e),s,r,o);const d=this.cell,h=u.indexOf(d),f=l.options.connecting.connector||{},g=u.filter((w,C)=>{const P=w.getConnector()||f;return a.includes(P.name)?!1:C>h?P.name!=="jumpover":!0}),m=g.map(w=>l.findViewByCell(w)),p=vh(n,t,e),v=m.map(w=>w==null?[]:w===this?p:vh(w.sourcePoint,w.targetPoint,w.routePoints)),b=[];p.forEach(w=>{const C=g.reduce((P,E,S)=>{if(E!==d){const A=_6(w,v[S]);P.push(...A)}return P},[]).sort((P,E)=>qm(w.start,P)-qm(w.start,E));C.length>0?b.push(...$6(w,C,s)):b.push(w)});const y=Ym(b,s,r,o);return La=[],Mc=[],i.raw?y:y.serialize()},N6=Object.freeze(Object.defineProperty({__proto__:null,jumpover:R6,loop:A6,normal:O6,rounded:T6,smooth:M6},Symbol.toStringTag,{value:"Module"}));var or;(function(n){n.presets=N6,n.registry=Te.create({type:"connector"}),n.registry.register(n.presets,!0)})(or||(or={}));var D6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class yw extends pe{constructor(t={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(ae(t)),this.changed={}}mutate(t,e={}){const i=e.unset===!0,s=e.silent===!0,r=[],o=this.changing;this.changing=!0,o||(this.previous=ae(this.data),this.changed={});const a=this.data,l=this.previous,c=this.changed;if(Object.keys(t).forEach(u=>{const d=u,h=t[d];vi(a[d],h)||r.push(d),vi(l[d],h)?delete c[d]:c[d]=h,i?delete a[d]:a[d]=h}),!s&&r.length>0&&(this.pending=!0,this.pendingOptions=e,r.forEach(u=>{this.emit("change:*",{key:u,options:e,store:this,current:a[u],previous:l[u]})})),o)return this;if(!s)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(t,e){if(t==null)return this.data;const i=this.data[t];return i??e}getPrevious(t){if(this.previous){const e=this.previous[t];return e??void 0}}set(t,e,i){return t!=null&&(typeof t=="object"?this.mutate(t,e):this.mutate({[t]:e},i)),this}remove(t,e){const s={};let r;if(typeof t=="string")s[t]=void 0,r=e;else if(Array.isArray(t))t.forEach(o=>s[o]=void 0),r=e;else{for(const o in this.data)s[o]=void 0;r=t}return this.mutate(s,Object.assign(Object.assign({},r),{unset:!0})),this}getByPath(t){return Pf(this.data,t,"/")}setByPath(t,e,i={}){const s="/",r=Array.isArray(t)?[...t]:t.split(s),o=Array.isArray(t)?t.join(s):t,a=r[0],l=r.length;if(i.propertyPath=o,i.propertyValue=e,i.propertyPathArray=r,l===1)this.set(a,e,i);else{const c={};let u=c,d=a;for(let g=1;g<l;g+=1){const m=r[g],p=Number.isFinite(Number(m));u=u[d]=p?[]:{},d=m}Do(c,r,e,s);const h=ae(this.data);i.rewrite&&Pm(h,t,s);const f=xe(h,c);this.set(a,f[a],i)}return this}removeByPath(t,e){const i=Array.isArray(t)?t:t.split("/"),s=i[0];if(i.length===1)this.remove(s,e);else{const r=i.slice(1),o=ae(this.get(s));o&&Pm(o,r),this.set(s,o,e)}return this}hasChanged(t){return t==null?Object.keys(this.changed).length>0:t in this.changed}getChanges(t){if(t==null)return this.hasChanged()?ae(this.changed):null;const e=this.changing?this.previous:this.data,i={};let s;for(const r in t){const o=t[r];vi(e[r],o)||(i[r]=o,s=!0)}return s?ae(i):null}toJSON(){return ae(this.data)}clone(){const t=this.constructor;return new t(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}D6([pe.dispose()],yw.prototype,"dispose",null);class ja{constructor(t){this.cell=t,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(t,e,i={},s="/"){const r=this.cell.getPropByPath(t),o=hj(i,ja.defaultOptions),a=this.getTiming(o.timing),l=this.getInterp(o.interp,r,e);let c=0;const u=Array.isArray(t)?t.join(s):t,d=Array.isArray(t)?t:t.split(s),h=()=>{const f=new Date().getTime();c===0&&(c=f);let m=(f-c)/o.duration;m<1?this.ids[u]=requestAnimationFrame(h):m=1;const p=l(a(m));this.cell.setPropByPath(d,p),i.progress&&i.progress(Object.assign({progress:m,currentValue:p},this.getArgs(u))),m===1&&(this.cell.notify("transition:complete",this.getArgs(u)),i.complete&&i.complete(this.getArgs(u)),this.cell.notify("transition:finish",this.getArgs(u)),i.finish&&i.finish(this.getArgs(u)),this.clean(u))};return setTimeout(()=>{this.stop(t,void 0,s),this.cache[u]={startValue:r,targetValue:e,options:o},this.ids[u]=requestAnimationFrame(h),this.cell.notify("transition:start",this.getArgs(u)),i.start&&i.start(this.getArgs(u))},i.delay),this.stop.bind(this,t,s,i)}stop(t,e={},i="/"){const s=Array.isArray(t)?t:t.split(i);return Object.keys(this.ids).filter(r=>vi(s,r.split(i).slice(0,s.length))).forEach(r=>{cancelAnimationFrame(this.ids[r]);const o=this.cache[r],a=this.getArgs(r),l=Object.assign(Object.assign({},o.options),e),c=l.jumpedToEnd;c&&o.targetValue!=null&&(this.cell.setPropByPath(r,o.targetValue),this.cell.notify("transition:end",Object.assign({},a)),this.cell.notify("transition:complete",Object.assign({},a)),l.complete&&l.complete(Object.assign({},a)));const u=Object.assign({jumpedToEnd:c},a);this.cell.notify("transition:stop",Object.assign({},u)),l.stop&&l.stop(Object.assign({},u)),this.cell.notify("transition:finish",Object.assign({},a)),l.finish&&l.finish(Object.assign({},a)),this.clean(r)}),this}clean(t){delete this.ids[t],delete this.cache[t]}getTiming(t){return typeof t=="string"?hr[t]:t}getInterp(t,e,i){return t?t(e,i):typeof i=="number"?er.number(e,i):typeof i=="string"?i[0]==="#"?er.color(e,i):er.unit(e,i):er.object(e,i)}getArgs(t){const e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}(function(n){n.defaultOptions={delay:10,duration:100,timing:"linear"}})(ja||(ja={}));var B6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},xw=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Nt extends pe{static config(t){const{markup:e,propHooks:i,attrHooks:s}=t,r=xw(t,["markup","propHooks","attrHooks"]);e!=null&&(this.markup=e),i&&(this.propHooks=this.propHooks.slice(),Array.isArray(i)?this.propHooks.push(...i):typeof i=="function"?this.propHooks.push(i):Object.values(i).forEach(o=>{typeof o=="function"&&this.propHooks.push(o)})),s&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),s)),this.defaults=xe({},this.defaults,r)}static getMarkup(){return this.markup}static getDefaults(t){return t?this.defaults:ae(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(t,e){return this.propHooks.reduce((i,s)=>s?yt(s,t,i):i,e)}get[Symbol.toStringTag](){return Nt.toStringTag}constructor(t={}){super();const i=this.constructor.getDefaults(!0),s=xe({},this.preprocess(i),this.preprocess(t));this.id=s.id||bc(),this.store=new yw(s),this.animation=new ja(this),this.setup(),this.init(),this.postprocess(t)}init(){}get model(){return this._model}set model(t){this._model!==t&&(this._model=t)}preprocess(t,e){const i=t.id,r=this.constructor.applyPropHooks(this,t);return i==null&&e!==!0&&(r.id=bc()),r}postprocess(t){}setup(){this.store.on("change:*",t=>{const{key:e,current:i,previous:s,options:r}=t;this.notify("change:*",{key:e,options:r,current:i,previous:s,cell:this}),this.notify(`change:${e}`,{options:r,current:i,previous:s,cell:this});const o=e;(o==="source"||o==="target")&&this.notify("change:terminal",{type:o,current:i,previous:s,options:r,cell:this})}),this.store.on("changed",({options:t})=>this.notify("changed",{options:t,cell:this}))}notify(t,e){this.trigger(t,e);const i=this.model;return i&&(i.notify(`cell:${t}`,e),this.isNode()?i.notify(`node:${t}`,Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&i.notify(`edge:${t}`,Object.assign(Object.assign({},e),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(t){return this.store===t.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(t,e){return t==null?this.store.get():this.store.get(t,e)}setProp(t,e,i){if(typeof t=="string")this.store.set(t,e,i);else{const s=this.preprocess(t,!0);this.store.set(xe({},this.getProp(),s),e),this.postprocess(t)}return this}removeProp(t,e){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}hasChanged(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}getPropByPath(t){return this.store.getByPath(t)}setPropByPath(t,e,i={}){return this.model&&(t==="children"?this._children=e?e.map(s=>this.model.getCell(s)).filter(s=>s!=null):null:t==="parent"&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,i),this}removePropByPath(t,e={}){const i=Array.isArray(t)?t:t.split("/");return i[0]==="attrs"&&(e.dirty=!0),this.store.removeByPath(i,e),this}prop(t,e,i){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):e==null?this.removePropByPath(t,i||{}):this.setPropByPath(t,e,i||{}):this.setProp(t,e||{})}previous(t){return this.store.getPrevious(t)}get zIndex(){return this.getZIndex()}set zIndex(t){t==null?this.removeZIndex():this.setZIndex(t)}getZIndex(){return this.store.get("zIndex")}setZIndex(t,e={}){return this.store.set("zIndex",t,e),this}removeZIndex(t={}){return this.store.remove("zIndex",t),this}toFront(t={}){const e=this.model;if(e){let i=e.getMaxZIndex(),s;t.deep?(s=this.getDescendants({deep:!0,breadthFirst:!0}),s.unshift(this)):s=[this],i=i-s.length+1;const r=e.total();let o=e.indexOf(this)!==r-s.length;o||(o=s.some((a,l)=>a.getZIndex()!==i+l)),o&&this.batchUpdate("to-front",()=>{i+=s.length,s.forEach((a,l)=>{a.setZIndex(i+l,t)})})}return this}toBack(t={}){const e=this.model;if(e){let i=e.getMinZIndex(),s;t.deep?(s=this.getDescendants({deep:!0,breadthFirst:!0}),s.unshift(this)):s=[this];let r=e.indexOf(this)!==0;r||(r=s.some((o,a)=>o.getZIndex()!==i+a)),r&&this.batchUpdate("to-back",()=>{i-=s.length,s.forEach((o,a)=>{o.setZIndex(i+a,t)})})}return this}get markup(){return this.getMarkup()}set markup(t){t==null?this.removeMarkup():this.setMarkup(t)}getMarkup(){let t=this.store.get("markup");return t==null&&(t=this.constructor.getMarkup()),t}setMarkup(t,e={}){return this.store.set("markup",t,e),this}removeMarkup(t={}){return this.store.remove("markup",t),this}get attrs(){return this.getAttrs()}set attrs(t){t==null?this.removeAttrs():this.setAttrs(t)}getAttrs(){const t=this.store.get("attrs");return t?Object.assign({},t):{}}setAttrs(t,e={}){if(t==null)this.removeAttrs(e);else{const i=s=>this.store.set("attrs",s,e);if(e.overwrite===!0)i(t);else{const s=this.getAttrs();e.deep===!1?i(Object.assign(Object.assign({},s),t)):i(xe({},s,t))}}return this}replaceAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}removeAttrs(t={}){return this.store.remove("attrs",t),this}getAttrDefinition(t){if(!t)return null;const i=this.constructor.getAttrHooks()||{};let s=i[t]||Pi.registry.get(t);if(!s){const r=vu(t);s=i[r]||Pi.registry.get(r)}return s||null}getAttrByPath(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}setAttrByPath(t,e,i={}){return this.setPropByPath(this.prefixAttrPath(t),e,i),this}removeAttrByPath(t,e={}){return this.removePropByPath(this.prefixAttrPath(t),e),this}prefixAttrPath(t){return Array.isArray(t)?["attrs"].concat(t):`attrs/${t}`}attr(t,e,i){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):e==null?this.removeAttrByPath(t,i||{}):this.setAttrByPath(t,e,i||{}):this.setAttrs(t,e||{})}get visible(){return this.isVisible()}set visible(t){this.setVisible(t)}setVisible(t,e={}){return this.store.set("visible",t,e),this}isVisible(){return this.store.get("visible")!==!1}show(t={}){return this.isVisible()||this.setVisible(!0,t),this}hide(t={}){return this.isVisible()&&this.setVisible(!1,t),this}toggleVisible(t,e={}){const i=typeof t=="boolean"?t:!this.isVisible(),s=typeof t=="boolean"?e:t;return i?this.show(s):this.hide(s),this}get data(){return this.getData()}set data(t){this.setData(t)}getData(){return this.store.get("data")}setData(t,e={}){if(t==null)this.removeData(e);else{const i=s=>this.store.set("data",s,e);if(e.overwrite===!0)i(t);else{const s=this.getData();e.deep===!1?i(typeof t=="object"?Object.assign(Object.assign({},s),t):t):i(xe({},s,t))}}return this}replaceData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}removeData(t={}){return this.store.remove("data",t),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const t=this.getParentId();if(t&&this.model){const e=this.model.getCell(t);return this._parent=e,e}return null}getChildren(){const t=this.store.get("children");if(t&&t.length&&this.model){const e=t.map(i=>{var s;return(s=this.model)===null||s===void 0?void 0:s.getCell(i)}).filter(i=>i!=null);return this._children=e,[...e]}return null}hasParent(){return this.parent!=null}isParentOf(t){return t!=null&&t.getParent()===this}isChildOf(t){return t!=null&&this.getParent()===t}eachChild(t,e){return this.children&&this.children.forEach(t,e),this}filterChild(t,e){return this.children?this.children.filter(t,e):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(t){return this.children==null?-1:this.children.indexOf(t)}getChildAt(t){return this.children!=null&&t>=0?this.children[t]:null}getAncestors(t={}){const e=[];let i=this.getParent();for(;i;)e.push(i),i=t.deep!==!1?i.getParent():null;return e}getDescendants(t={}){if(t.deep!==!1){if(t.breadthFirst){const e=[],i=this.getChildren()||[];for(;i.length>0;){const s=i.shift(),r=s.getChildren();e.push(s),r&&i.push(...r)}return e}{const e=this.getChildren()||[];return e.forEach(i=>{e.push(...i.getDescendants(t))}),e}}return this.getChildren()||[]}isDescendantOf(t,e={}){if(t==null)return!1;if(e.deep!==!1){let i=this.getParent();for(;i;){if(i===t)return!0;i=i.getParent()}return!1}return this.isChildOf(t)}isAncestorOf(t,e={}){return t==null?!1:t.isDescendantOf(this,e)}contains(t){return this.isAncestorOf(t)}getCommonAncestor(...t){return Nt.getCommonAncestor(this,...t)}setParent(t,e={}){return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}setChildren(t,e={}){return this._children=t,t!=null?this.store.set("children",t.map(i=>i.id),e):this.store.remove("children",e),this}unembed(t,e={}){const i=this.children;if(i!=null&&t!=null){const s=this.getChildIndex(t);s!==-1&&(i.splice(s,1),t.setParent(null,e),this.setChildren(i,e))}return this}embed(t,e={}){return t.addTo(this,e),this}addTo(t,e={}){return Nt.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}insertTo(t,e,i={}){return t.insertChild(this,e,i),this}addChild(t,e={}){return this.insertChild(t,void 0,e)}insertChild(t,e,i={}){if(t!=null&&t!==this){const s=t.getParent(),r=this!==s;let o=e;if(o==null&&(o=this.getChildCount(),r||(o-=1)),s){const l=s.getChildren();if(l){const c=l.indexOf(t);c>=0&&(t.setParent(null,i),l.splice(c,1),s.setChildren(l,i))}}let a=this.children;if(a==null?(a=[],a.push(t)):a.splice(o,0,t),t.setParent(this,i),this.setChildren(a,i),r&&this.model){const l=this.model.getIncomingEdges(this),c=this.model.getOutgoingEdges(this);l&&l.forEach(u=>u.updateParent(i)),c&&c.forEach(u=>u.updateParent(i))}this.model&&this.model.addCell(t,i)}return this}removeFromParent(t={}){const e=this.getParent();if(e!=null){const i=e.getChildIndex(this);e.removeChildAt(i,t)}return this}removeChild(t,e={}){const i=this.getChildIndex(t);return this.removeChildAt(i,e)}removeChildAt(t,e={}){const i=this.getChildAt(t);return this.children!=null&&i!=null&&(this.unembed(i,e),i.remove(e)),i}remove(t={}){return this.batchUpdate("remove",()=>{const e=this.getParent();e&&e.removeChild(this,t),t.deep!==!1&&this.eachChild(i=>i.remove(t)),this.model&&this.model.removeCell(this,t)}),this}transition(t,e,i={},s="/"){return this.animation.start(t,e,i,s)}stopTransition(t,e,i="/"){return this.animation.stop(t,e,i),this}getTransitions(){return this.animation.get()}translate(t,e,i){return this}scale(t,e,i,s){return this}addTools(t,e,i){const s=Array.isArray(t)?t:[t],r=typeof e=="string"?e:null,o=typeof e=="object"?e:typeof i=="object"?i:{};if(o.reset)return this.setTools({name:r,items:s,local:o.local},o);let a=ae(this.getTools());if(a==null||r==null||a.name===r)return a==null&&(a={}),a.items||(a.items=[]),a.name=r,a.items=[...a.items,...s],this.setTools(Object.assign({},a),o)}setTools(t,e={}){return t==null?this.removeTools():this.store.set("tools",Nt.normalizeTools(t),e),this}getTools(){return this.store.get("tools")}removeTools(t={}){return this.store.remove("tools",t),this}hasTools(t){const e=this.getTools();return e==null?!1:t==null?!0:e.name===t}hasTool(t){const e=this.getTools();return e==null?!1:e.items.some(i=>typeof i=="string"?i===t:i.name===t)}removeTool(t,e={}){const i=ae(this.getTools());if(i){let s=!1;const r=i.items.slice(),o=a=>{r.splice(a,1),s=!0};if(typeof t=="number")o(t);else for(let a=r.length-1;a>=0;a-=1){const l=r[a];(typeof l=="string"?l===t:l.name===t)&&o(a)}s&&(i.items=r,this.setTools(i,e))}return this}getBBox(t){return new nt}getConnectionPoint(t,e){return new $}toJSON(t={}){const e=Object.assign({},this.store.get()),i=Object.prototype.toString,s=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!e.shape){const g=this.constructor;throw new Error(`Unable to serialize ${s} missing "shape" prop, check the ${s} "${g.name||i.call(g)}"`)}const r=this.constructor,o=t.diff===!0,a=e.attrs||{},l=r.getDefaults(!0),c=o?this.preprocess(l,!0):l,u=c.attrs||{},d={};Object.entries(e).forEach(([g,m])=>{if(m!=null&&!Array.isArray(m)&&typeof m=="object"&&!Ti(m))throw new Error(`Can only serialize ${s} with plain-object props, but got a "${i.call(m)}" type of key "${g}" on ${s} "${this.id}"`);if(g!=="attrs"&&g!=="shape"&&o){const p=c[g];vi(m,p)&&delete e[g]}}),Object.keys(a).forEach(g=>{const m=a[g],p=u[g];Object.keys(m).forEach(v=>{const b=m[v],y=p?p[v]:null;b!=null&&typeof b=="object"&&!Array.isArray(b)?Object.keys(b).forEach(w=>{const C=b[w];if(p==null||y==null||!we(y)||!vi(y[w],C)){d[g]==null&&(d[g]={}),d[g][v]==null&&(d[g][v]={});const P=d[g][v];P[w]=C}}):(p==null||!vi(y,b))&&(d[g]==null&&(d[g]={}),d[g][v]=b)})});const h=Object.assign(Object.assign({},e),{attrs:U0(d)?void 0:d});h.attrs==null&&delete h.attrs;const f=h;return f.angle===0&&delete f.angle,ae(f)}clone(t={}){if(!t.deep){const i=Object.assign({},this.store.get());t.keepId||delete i.id,delete i.parent,delete i.children;const s=this.constructor;return new s(i)}return Nt.deepClone(this)[this.id]}findView(t){return t.findViewByCell(this)}startBatch(t,e={},i=this.model){return this.notify("batch:start",{name:t,data:e,cell:this}),i&&i.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}stopBatch(t,e={},i=this.model){return i&&i.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}batchUpdate(t,e,i){const s=this.model;this.startBatch(t,i,s);const r=e();return this.stopBatch(t,i,s),r}dispose(){this.removeFromParent(),this.store.dispose()}}Nt.defaults={};Nt.attrHooks={};Nt.propHooks=[];B6([pe.dispose()],Nt.prototype,"dispose",null);(function(n){function t(e){return typeof e=="string"?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}n.normalizeTools=t})(Nt||(Nt={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNode=="function"&&typeof s.isEdge=="function"&&typeof s.prop=="function"&&typeof s.attr=="function"}n.isCell=t})(Nt||(Nt={}));(function(n){function t(...r){const o=r.filter(l=>l!=null).map(l=>l.getAncestors()).sort((l,c)=>l.length-c.length);return o.shift().find(l=>o.every(c=>c.includes(l)))||null}n.getCommonAncestor=t;function e(r,o={}){let a=null;for(let l=0,c=r.length;l<c;l+=1){const u=r[l];let d=u.getBBox(o);if(d){if(u.isNode()){const h=u.getAngle();h!=null&&h!==0&&(d=d.bbox(h))}a=a==null?d:a.union(d)}}return a}n.getCellsBBox=e;function i(r){const o=[r,...r.getDescendants({deep:!0})];return n.cloneCells(o)}n.deepClone=i;function s(r){const o=X0(r),a=o.reduce((l,c)=>(l[c.id]=c.clone(),l),{});return o.forEach(l=>{const c=a[l.id];if(c.isEdge()){const h=c.getSourceCellId(),f=c.getTargetCellId();h&&a[h]&&c.setSource(Object.assign(Object.assign({},c.getSource()),{cell:a[h].id})),f&&a[f]&&c.setTarget(Object.assign(Object.assign({},c.getTarget()),{cell:a[f].id}))}const u=l.getParent();u&&a[u.id]&&c.setParent(a[u.id]);const d=l.getChildren();if(d&&d.length){const h=d.reduce((f,g)=>(a[g.id]&&f.push(a[g.id]),f),[]);h.length>0&&c.setChildren(h)}}),a}n.cloneCells=s})(Nt||(Nt={}));(function(n){n.config({propHooks(t){var{tools:e}=t,i=xw(t,["tools"]);return e&&(i.tools=n.normalizeTools(e)),i}})})(Nt||(Nt={}));var vo;(function(n){let t,e;function i(o,a){return a?t!=null&&t.exist(o):e!=null&&e.exist(o)}n.exist=i;function s(o){t=o}n.setEdgeRegistry=s;function r(o){e=o}n.setNodeRegistry=r})(vo||(vo={}));class L6{constructor(t){this.ports=[],this.groups={},this.init(ae(t))}getPorts(){return this.ports}getGroup(t){return t!=null?this.groups[t]:null}getPortsByGroup(t){return this.ports.filter(e=>e.group===t||e.group==null&&t==null)}getPortsLayoutByGroup(t,e){const i=this.getPortsByGroup(t),s=t?this.getGroup(t):null,r=s?s.position:null,o=r?r.name:null;let a;if(o!=null){const d=rr.registry.get(o);if(d==null)return rr.registry.onNotFound(o);a=d}else a=rr.presets.left;const l=i.map(d=>d&&d.position&&d.position.args||{}),c=r&&r.args||{};return a(l,e,c).map((d,h)=>{const f=i[h];return{portLayout:d,portId:f.id,portSize:f.size,portAttrs:f.attrs,labelSize:f.label.size,labelLayout:this.getPortLabelLayout(f,$.create(d.position),e)}})}init(t){const{groups:e,items:i}=t;e!=null&&Object.keys(e).forEach(s=>{this.groups[s]=this.parseGroup(e[s])}),Array.isArray(i)&&i.forEach(s=>{this.ports.push(this.parsePort(s))})}parseGroup(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}parsePort(t){const e=Object.assign({},t),i=this.getGroup(t.group)||{};return e.markup=e.markup||i.markup,e.attrs=xe({},i.attrs,e.attrs),e.position=this.createPosition(i,e),e.label=xe({},i.label,this.getLabel(e)),e.zIndex=this.getZIndex(i,e),e.size=Object.assign(Object.assign({},i.size),e.size),e}getZIndex(t,e){return typeof e.zIndex=="number"?e.zIndex:typeof t.zIndex=="number"||t.zIndex==="auto"?t.zIndex:"auto"}createPosition(t,e){return xe({name:"left",args:{}},t.position,{args:e.args})}getPortPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if(typeof t=="object")return t}return{args:{}}}getPortLabelPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(typeof t=="object")return t}return{args:{}}}getLabel(t,e=!1){const i=t.label||{};return i.position=this.getPortLabelPosition(i.position,e),i}getPortLabelLayout(t,e,i){const s=t.label.position.name||"left",r=t.label.position.args||{},o=uo.registry.get(s)||uo.presets.left;return o?o(e,i,r):null}}var Au=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};let me=class ww extends Nt{get[Symbol.toStringTag](){return ww.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,e){const{x:i,y:s,width:r,height:o}=t,a=Au(t,["x","y","width","height"]);if(i!=null||s!=null){const l=a.position;a.position=Object.assign(Object.assign({},l),{x:i??(l?l.x:0),y:s??(l?l.y:0)})}if(r!=null||o!=null){const l=a.size;a.size=Object.assign(Object.assign({},l),{width:r??(l?l.width:0),height:o??(l?l.height:0)})}return super.preprocess(a,e)}isNode(){return!0}size(t,e,i){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,e,i):this.setSize(t,e)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,e,i){return typeof t=="object"?this.resize(t.width,t.height,e):this.resize(t,e,i),this}resize(t,e,i={}){this.startBatch("resize",i);const s=i.direction;if(s){const r=this.getSize();switch(s){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}let a={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[s];const l=zt.normalize(this.getAngle()||0);i.absolute&&(a+=Math.floor((l+45)/90),a%=4);const c=this.getBBox();let u;a===0?u=c.getBottomLeft():a===1?u=c.getCorner():a===2?u=c.getTopRight():u=c.getOrigin();const d=u.clone().rotate(-l,c.getCenter()),h=Math.sqrt(t*t+e*e)/2;let f=a*Math.PI/2;f+=Math.atan(a%2===0?e/t:t/e),f-=zt.toRad(l);const m=$.fromPolar(h,f,d).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},i),this.setPosition(m.x,m.y,i)}else this.store.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this}scale(t,e,i,s={}){const r=this.getBBox().scale(t,e,i??void 0);return this.startBatch("scale",s),this.setPosition(r.x,r.y,s),this.resize(r.width,r.height,s),this.stopBatch("scale"),this}position(t,e,i){return typeof t=="number"?this.setPosition(t,e,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(i!=null&&i.isNode()){const s=this.getPosition(),r=i.getPosition();return{x:s.x-r.x,y:s.y-r.y}}}const e=this.store.get("position");return e?Object.assign({},e):{x:0,y:0}}setPosition(t,e,i={}){let s,r,o;if(typeof t=="object"?(s=t.x,r=t.y,o=e||{}):(s=t,r=e,o=i||{}),o.relative){const a=this.getParent();if(a!=null&&a.isNode()){const l=a.getPosition();s+=l.x,r+=l.y}}if(o.deep){const a=this.getPosition();this.translate(s-a.x,r-a.y,o)}else this.store.set("position",{x:s,y:r},o);return this}translate(t=0,e=0,i={}){if(t===0&&e===0)return this;i.translateBy=i.translateBy||this.id;const s=this.getPosition();if(i.restrict!=null&&i.translateBy===this.id){const o=this.getBBox({deep:!0}),a=i.restrict,l=s.x-o.x,c=s.y-o.y,u=Math.max(a.x+l,Math.min(a.x+a.width+l-o.width,s.x+t)),d=Math.max(a.y+c,Math.min(a.y+a.height+c-o.height,s.y+e));t=u-s.x,e=d-s.y}const r={x:s.x+t,y:s.y+e};return i.tx=t,i.ty=e,i.transition?(typeof i.transition!="object"&&(i.transition={}),this.transition("position",r,Object.assign(Object.assign({},i.transition),{interp:er.object})),this.eachChild(o=>{var a;((a=i.exclude)===null||a===void 0?void 0:a.includes(o))||o.translate(t,e,i)})):(this.startBatch("translate",i),this.store.set("position",r,i),this.eachChild(o=>{var a;((a=i.exclude)===null||a===void 0?void 0:a.includes(o))||o.translate(t,e,i)}),this.stopBatch("translate",i)),this}angle(t,e){return t==null?this.getAngle():this.rotate(t,e)}getAngle(){return this.store.get("angle",0)}rotate(t,e={}){const i=this.getAngle();if(e.center){const s=this.getSize(),r=this.getPosition(),o=this.getBBox().getCenter();o.rotate(i-t,e.center);const a=o.x-s.width/2-r.x,l=o.y-s.height/2-r.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(r.x+a,r.y+l,e),this.rotate(t,Object.assign(Object.assign({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(i+t)%360,e);return this}getBBox(t={}){if(t.deep){const e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),Nt.getCellsBBox(e)}return nt.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,e){const i=this.getBBox(),s=i.getCenter(),r=t.getTerminal(e);if(r==null)return s;const o=r.port;if(!o||!this.hasPort(o))return s;const a=this.getPort(o);if(!a||!a.group)return s;const c=this.getPortsPosition(a.group)[o].position,u=$.create(c).translate(i.getOrigin()),d=this.getAngle();return d&&u.rotate(-d,s),u}fit(t={}){const i=(this.getChildren()||[]).filter(c=>c.isNode());if(i.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(c=>c.fit(t));let{x:s,y:r,width:o,height:a}=Nt.getCellsBBox(i);const l=yi(t.padding);return s-=l.left,r-=l.top,o+=l.left+l.right,a+=l.bottom+l.top,this.store.set({position:{x:s,y:r},size:{width:o,height:a}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||ee.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,e={}){return this.store.set("portContainerMarkup",ee.clone(t),e),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||ee.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,e={}){return this.store.set("portMarkup",ee.clone(t),e),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||ee.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,e={}){return this.store.set("portLabelMarkup",ee.clone(t),e),this}get ports(){const t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}getPorts(){return ae(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(e=>e.group===t)}getPort(t){return ae(this.ports.items.find(e=>e.id&&e.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return this.getPortIndex(t)!==-1}getPortIndex(t){const e=typeof t=="string"?t:t.id;return e!=null?this.ports.items.findIndex(i=>i.id===e):-1}getPortsPosition(t){const e=this.getSize();return this.port.getPortsLayoutByGroup(t,new nt(0,0,e.width,e.height)).reduce((s,r)=>{const o=r.portLayout;return s[r.portId]={position:Object.assign({},o.position),angle:o.angle||0},s},{})}getPortProp(t,e){return this.getPropByPath(this.prefixPortPath(t,e))}setPortProp(t,e,i,s){if(typeof e=="string"||Array.isArray(e)){const a=this.prefixPortPath(t,e),l=i;return this.setPropByPath(a,l,s)}const r=this.prefixPortPath(t),o=e;return this.setPropByPath(r,o,i)}removePortProp(t,e,i){return typeof e=="string"||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),i):this.removePropByPath(this.prefixPortPath(t),e)}portProp(t,e,i,s){return e==null?this.getPortProp(t):typeof e=="string"||Array.isArray(e)?arguments.length===2?this.getPortProp(t,e):i==null?this.removePortProp(t,e,s):this.setPortProp(t,e,i,s):this.setPortProp(t,e,i)}prefixPortPath(t,e){const i=this.getPortIndex(t);if(i===-1)throw new Error(`Unable to find port with id: "${t}"`);return e==null||e===""?["ports","items",`${i}`]:Array.isArray(e)?["ports","items",`${i}`,...e]:`ports/items/${i}/${e}`}addPort(t,e){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,e),this}addPorts(t,e){return this.setPropByPath("ports/items",[...this.ports.items,...t],e),this}insertPort(t,e,i){const s=[...this.ports.items];return s.splice(t,0,e),this.setPropByPath("ports/items",s,i),this}removePort(t,e={}){return this.removePortAt(this.getPortIndex(t),e)}removePortAt(t,e={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",i,e)}return this}removePorts(t,e){let i;if(Array.isArray(t)){if(i=e||{},t.length){i.rewrite=!0;const r=[...this.ports.items].filter(o=>!t.some(a=>{const l=typeof a=="string"?a:a.id;return o.id===l}));this.setPropByPath("ports/items",r,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,e){return this.port.getPortsLayoutByGroup(t,e)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const t=this.ports,e={};t.items.forEach(o=>{o.id&&(e[o.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(o=>{o.id&&!e[o.id]&&(i[o.id]=!0)});const r=this.model;r&&!U0(i)&&(r.getConnectedEdges(this,{incoming:!0}).forEach(l=>{const c=l.getTargetPortId();c&&i[c]&&l.remove()}),r.getConnectedEdges(this,{outgoing:!0}).forEach(l=>{const c=l.getSourcePortId();c&&i[c]&&l.remove()}))}validatePorts(){const t={},e=[];return this.ports.items.forEach(i=>{typeof i!="object"&&e.push(`Invalid port ${i}.`),i.id==null&&(i.id=this.generatePortId()),t[i.id]&&e.push("Duplicitied port id."),t[i.id]=!0}),e}generatePortId(){return bc()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const e=this.port?this.port.getPorts():null;this.port=new L6(this.ports);const i=this.port.getPorts(),s=e?i.filter(o=>e.find(a=>a.id===o.id)?null:o):[...i],r=e?e.filter(o=>i.find(a=>a.id===o.id)?null:o):[];s.length>0&&this.notify("ports:added",{added:s,cell:this,node:this}),r.length>0&&this.notify("ports:removed",{removed:r,cell:this,node:this})}};me.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}};(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNode=="function"&&typeof s.isEdge=="function"&&typeof s.prop=="function"&&typeof s.attr=="function"&&typeof s.size=="function"&&typeof s.position=="function"}n.isNode=t})(me||(me={}));(function(n){n.config({propHooks(t){var{ports:e}=t,i=Au(t,["ports"]);return e&&(i.ports=Array.isArray(e)?{items:e}:e),i}})})(me||(me={}));(function(n){n.registry=Te.create({type:"node",process(t,e){if(vo.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if(typeof e=="function")return e.config({shape:t}),e;let i=n;const{inherit:s}=e,r=Au(e,["inherit"]);if(s)if(typeof s=="string"){const a=this.get(s);a==null?this.onNotFound(s,"inherited"):i=a}else i=s;r.constructorName==null&&(r.constructorName=t);const o=i.define.call(i,r);return o.config({shape:t}),o}}),vo.setNodeRegistry(n.registry)})(me||(me={}));(function(n){let t=0;function e(r){return r?Ef(r):(t+=1,`CustomNode${t}`)}function i(r){const{constructorName:o,overwrite:a}=r,l=Au(r,["constructorName","overwrite"]),c=Sf(e(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c}n.define=i;function s(r){const o=r.shape||"rect",a=n.registry.get(o);return a?new a(r):n.registry.onNotFound(o)}n.create=s})(me||(me={}));var Tu=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};let Pe=class Cw extends Nt{get[Symbol.toStringTag](){return Cw.toStringTag}constructor(t={}){super(t)}preprocess(t,e){const{source:i,sourceCell:s,sourcePort:r,sourcePoint:o,target:a,targetCell:l,targetPort:c,targetPoint:u}=t,h=Tu(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),f=g=>typeof g=="string"||typeof g=="number";if(i!=null)if(Nt.isCell(i))h.source={cell:i.id};else if(f(i))h.source={cell:i};else if($.isPoint(i))h.source=i.toJSON();else if(Array.isArray(i))h.source={x:i[0],y:i[1]};else{const g=i.cell;Nt.isCell(g)?h.source=Object.assign(Object.assign({},i),{cell:g.id}):h.source=i}if(s!=null||r!=null){let g=h.source;if(s!=null){const m=f(s)?s:s.id;g?g.cell=m:g=h.source={cell:m}}r!=null&&g&&(g.port=r)}else o!=null&&(h.source=$.create(o).toJSON());if(a!=null)if(Nt.isCell(a))h.target={cell:a.id};else if(f(a))h.target={cell:a};else if($.isPoint(a))h.target=a.toJSON();else if(Array.isArray(a))h.target={x:a[0],y:a[1]};else{const g=a.cell;Nt.isCell(g)?h.target=Object.assign(Object.assign({},a),{cell:g.id}):h.target=a}if(l!=null||c!=null){let g=h.target;if(l!=null){const m=f(l)?l:l.id;g?g.cell=m:g=h.target={cell:m}}c!=null&&g&&(g.port=c)}else u!=null&&(h.target=$.create(u).toJSON());return super.preprocess(h,e)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,e,i={}){return this.setTerminal("source",t,e,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,e,i={}){return this.setTerminal("target",t,e,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,e,i,s={}){if(Nt.isCell(e))return this.store.set(t,xe({},i,{cell:e.id}),s),this;const r=e;return $.isPoint(e)||r.x!=null&&r.y!=null?(this.store.set(t,xe({},i,{x:r.x,y:r.y}),s),this):(this.store.set(t,ae(e),s),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const e=this[t];if($.isPointLike(e))return $.create(e);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new $}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const e=t==="source"?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let e=this;const i={};for(;e&&e.isEdge();){if(i[e.id])return null;i[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null}get router(){return this.getRouter()}set router(t){t==null?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,e,i){return typeof t=="object"?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){t==null?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,e,i){return typeof t=="object"?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,e=this.store.get("defaultLabel")||t.defaultLabel||{};return ae(e)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,e={}){return this.store.set("labels",Array.isArray(t)?t:[t],e),this}insertLabel(t,e,i={}){const s=this.getLabels(),r=s.length;let o=e!=null&&Number.isFinite(e)?e:r;return o<0&&(o=r+o+1),s.splice(o,0,this.parseLabel(t)),this.setLabels(s,i)}appendLabel(t,e={}){return this.insertLabel(t,-1,e)}getLabelAt(t){const e=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(e[t]):null}setLabelAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const s=this.getLabels();s[t]=this.parseLabel(e),this.setLabels(s,i)}return this}removeLabelAt(t,e={}){const i=this.getLabels(),s=t!=null&&Number.isFinite(t)?t:-1,r=i.splice(s,1);return this.setLabels(i,e),r.length?r[0]:null}parseLabel(t){return typeof t=="string"?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:e}){const i=t&&e?e.filter(r=>t.find(o=>r===o||vi(r,o))?null:r):e?[...e]:[],s=t&&e?t.filter(r=>e.find(o=>r===o||vi(r,o))?null:r):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("labels:removed",{removed:s,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,e={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(s=>$.toJSON(s)),e),this}insertVertex(t,e,i={}){const s=this.getVertices(),r=s.length;let o=e!=null&&Number.isFinite(e)?e:r;return o<0&&(o=r+o+1),s.splice(o,0,$.toJSON(t)),this.setVertices(s,i)}appendVertex(t,e={}){return this.insertVertex(t,-1,e)}getVertexAt(t){return t!=null&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const s=this.getVertices();s[t]=e,this.setVertices(s,i)}return this}removeVertexAt(t,e={}){const i=this.getVertices(),s=t!=null&&Number.isFinite(t)?t:-1;return i.splice(s,1),this.setVertices(i,e)}onVertexsChanged({previous:t,current:e}){const i=t&&e?e.filter(r=>t.find(o=>$.equals(r,o))?null:r):e?[...e]:[],s=t&&e?t.filter(r=>e.find(o=>$.equals(r,o))?null:r):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("vertexs:removed",{removed:s,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||ee.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,e,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints(s=>({x:(s.x||0)+t,y:(s.y||0)+e}),i)}scale(t,e,i,s={}){return this.applyToPoints(r=>$.create(r).scale(t,e,i).toJSON(),s)}applyToPoints(t,e={}){const i={},s=this.getSource(),r=this.getTarget();$.isPointLike(s)&&(i.source=t(s)),$.isPointLike(r)&&(i.target=t(r));const o=this.getVertices();return o.length>0&&(i.vertices=o.map(t)),this.store.set(i,e),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(e=>$.create(e)),this.getTargetPoint()];return new Oe(t)}updateParent(t){let e=null;const i=this.getSourceCell(),s=this.getTargetCell(),r=this.getParent();return i&&s&&(i===s||i.isDescendantOf(s)?e=s:s.isDescendantOf(i)?e=i:e=Nt.getCommonAncestor(i,s)),r&&e&&e.id!==r.id&&r.unembed(this,t),e&&(!r||r.id!==e.id)&&e.embed(this,t),e}hasLoop(t={}){const e=this.getSource(),i=this.getTarget(),s=e.cell,r=i.cell;if(!s||!r)return!1;let o=s===r;if(!o&&t.deep&&this._model){const a=this.getSourceCell(),l=this.getTargetCell();a&&l&&(o=a.isAncestorOf(l,t)||l.isAncestorOf(a,t))}return o}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(e=>e!=null);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))}};Pe.defaults={};(function(n){function t(e,i){const s=e,r=i;return s.cell===r.cell?s.port===r.port||s.port==null&&r.port==null:!1}n.equalTerminals=t})(Pe||(Pe={}));(function(n){n.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function t(e){return{attrs:{label:{text:e}}}}n.parseStringLabel=t})(Pe||(Pe={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNode=="function"&&typeof s.isEdge=="function"&&typeof s.prop=="function"&&typeof s.attr=="function"&&typeof s.disconnect=="function"&&typeof s.getSource=="function"&&typeof s.getTarget=="function"}n.isEdge=t})(Pe||(Pe={}));(function(n){n.registry=Te.create({type:"edge",process(t,e){if(vo.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if(typeof e=="function")return e.config({shape:t}),e;let i=n;const{inherit:s="edge"}=e,r=Tu(e,["inherit"]);if(typeof s=="string"){const a=this.get(s||"edge");a==null&&s?this.onNotFound(s,"inherited"):i=a}else i=s;r.constructorName==null&&(r.constructorName=t);const o=i.define.call(i,r);return o.config({shape:t}),o}}),vo.setEdgeRegistry(n.registry)})(Pe||(Pe={}));(function(n){let t=0;function e(r){return r?Ef(r):(t+=1,`CustomEdge${t}`)}function i(r){const{constructorName:o,overwrite:a}=r,l=Tu(r,["constructorName","overwrite"]),c=Sf(e(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c}n.define=i;function s(r){const o=r.shape||"edge",a=n.registry.get(o);return a?new a(r):n.registry.onNotFound(o)}n.create=s})(Pe||(Pe={}));(function(n){const t="basic.edge";n.config({shape:t,propHooks(e){const{label:i,vertices:s}=e,r=Tu(e,["label","vertices"]);if(i){r.labels==null&&(r.labels=[]);const o=typeof i=="string"?n.parseStringLabel(i):i;r.labels.push(o)}return s&&Array.isArray(s)&&(r.vertices=s.map(o=>$.create(o).toJSON())),r}}),n.registry.register(t,n)})(Pe||(Pe={}));var j6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class kc extends pe{constructor(t,e={}){super(),this.length=0,this.comparator=e.comparator||"zIndex",this.clean(),t&&this.reset(t,{silent:!0})}toJSON(){return this.cells.map(t=>t.toJSON())}add(t,e,i){let s,r;typeof e=="number"?(s=e,r=Object.assign({merge:!1},i)):(s=this.length,r=Object.assign({merge:!1},e)),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);const o=Array.isArray(t)?t:[t],a=this.comparator&&typeof e!="number"&&r.sort!==!1,l=this.comparator||null;let c=!1;const u=[],d=[];return o.forEach(h=>{const f=this.get(h);f?r.merge&&!h.isSameStore(f)&&(f.setProp(h.getProp(),i),d.push(f),a&&!c&&(l==null||typeof l=="function"?c=f.hasChanged():typeof l=="string"?c=f.hasChanged(l):c=l.some(g=>f.hasChanged(g)))):(u.push(h),this.reference(h))}),u.length&&(a&&(c=!0),this.cells.splice(s,0,...u),this.length=this.cells.length),c&&this.sort({silent:!0}),r.silent||(u.forEach((h,f)=>{const g={cell:h,index:s+f,options:r};this.trigger("added",g),r.dryrun||h.notify("added",Object.assign({},g))}),c&&this.trigger("sorted"),(u.length||d.length)&&this.trigger("updated",{added:u,merged:d,removed:[],options:r})),this}remove(t,e={}){const i=Array.isArray(t)?t:[t],s=this.removeCells(i,e);return!e.silent&&s.length>0&&this.trigger("updated",{options:e,removed:s,added:[],merged:[]}),Array.isArray(t)?s:s[0]}removeCells(t,e){const i=[];for(let s=0;s<t.length;s+=1){const r=this.get(t[s]);if(r==null)continue;const o=this.cells.indexOf(r);this.cells.splice(o,1),this.length-=1,delete this.map[r.id],i.push(r),this.unreference(r),e.dryrun||r.remove(),e.silent||(this.trigger("removed",{cell:r,index:o,options:e}),e.dryrun||r.notify("removed",{cell:r,index:o,options:e}))}return i}reset(t,e={}){const i=this.cells.slice();if(i.forEach(s=>this.unreference(s)),this.clean(),this.add(t,Object.assign({silent:!0},e)),!e.silent){const s=this.cells.slice();this.trigger("reseted",{options:e,previous:i,current:s});const r=[],o=[];s.forEach(a=>{i.some(c=>c.id===a.id)||r.push(a)}),i.forEach(a=>{s.some(c=>c.id===a.id)||o.push(a)}),this.trigger("updated",{options:e,added:r,removed:o,merged:[]})}return this}push(t,e){return this.add(t,this.length,e)}pop(t){const e=this.at(this.length-1);return this.remove(e,t)}unshift(t,e){return this.add(t,0,e)}shift(t){const e=this.at(0);return this.remove(e,t)}get(t){if(t==null)return null;const e=typeof t=="string"||typeof t=="number"?t:t.id;return this.map[e]||null}has(t){return this.get(t)!=null}at(t){return t<0&&(t+=this.length),this.cells[t]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(t){return this.cells.indexOf(t)}toArray(){return this.cells.slice()}sort(t={}){return this.comparator!=null&&(this.cells=W0(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}clone(){const t=this.constructor;return new t(this.cells.slice(),{comparator:this.comparator})}reference(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}unreference(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}notifyCellEvent(t,e){const i=e.cell;this.trigger(`cell:${t}`,e),i&&(i.isNode()?this.trigger(`node:${t}`,Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.trigger(`edge:${t}`,Object.assign(Object.assign({},e),{edge:i})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}j6([kc.dispose()],kc.prototype,"dispose",null);var z6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class fn extends pe{get[Symbol.toStringTag](){return fn.toStringTag}constructor(t=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new kc(t),this.setup()}notify(t,e){this.trigger(t,e);const i=this.graph;return i&&(t==="sorted"||t==="reseted"||t==="updated"?i.trigger(`model:${t}`,e):i.trigger(t,e)),this}setup(){const t=this.collection;t.on("sorted",()=>this.notify("sorted",null)),t.on("updated",e=>this.notify("updated",e)),t.on("cell:change:zIndex",()=>this.sortOnChangeZ()),t.on("added",({cell:e})=>{this.onCellAdded(e)}),t.on("removed",e=>{const i=e.cell;this.onCellRemoved(i,e.options),this.notify("cell:removed",e),i.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:i}))}),t.on("reseted",e=>{this.onReset(e.current),this.notify("reseted",e)}),t.on("edge:change:source",({edge:e})=>this.onEdgeTerminalChanged(e,"source")),t.on("edge:change:target",({edge:e})=>{this.onEdgeTerminalChanged(e,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(t){const e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}onCellRemoved(t,e){const i=t.id;if(t.isEdge()){delete this.edges[i];const s=t.getSource(),r=t.getTarget();if(s&&s.cell){const o=this.outgoings[s.cell],a=o?o.indexOf(i):-1;a>=0&&(o.splice(a,1),o.length===0&&delete this.outgoings[s.cell])}if(r&&r.cell){const o=this.incomings[r.cell],a=o?o.indexOf(i):-1;a>=0&&(o.splice(a,1),o.length===0&&delete this.incomings[r.cell])}}else delete this.nodes[i];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}onReset(t){this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(e=>this.onCellAdded(e))}onEdgeTerminalChanged(t,e){const i=e==="source"?this.outgoings:this.incomings,s=t.previous(e);if(s&&s.cell){const o=Nt.isCell(s.cell)?s.cell.id:s.cell,a=i[o],l=a?a.indexOf(t.id):-1;l>=0&&(a.splice(l,1),a.length===0&&delete i[o])}const r=t.getTerminal(e);if(r&&r.cell){const o=Nt.isCell(r.cell)?r.cell.id:r.cell,a=i[o]||[];a.indexOf(t.id)===-1&&a.push(t.id),i[o]=a}}prepareCell(t,e){return!t.model&&(!e||!e.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}resetCells(t,e={}){return t.map(i=>this.prepareCell(i,Object.assign(Object.assign({},e),{dryrun:!0}))),this.collection.reset(t,e),t.map(i=>this.prepareCell(i,{options:e})),this}clear(t={}){const e=this.getCells();if(e.length===0)return this;const i=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",()=>{const s=e.sort((r,o)=>{const a=r.isEdge()?1:2,l=o.isEdge()?1:2;return a-l});for(;s.length>0;){const r=s.shift();r&&r.remove(i)}},i),this}addNode(t,e={}){const i=me.isNode(t)?t:this.createNode(t);return this.addCell(i,e),i}updateNode(t,e={}){const i=this.createNode(t),s=i.getProp();return i.dispose(),this.updateCell(s,e)}createNode(t){return me.create(t)}addEdge(t,e={}){const i=Pe.isEdge(t)?t:this.createEdge(t);return this.addCell(i,e),i}createEdge(t){return Pe.create(t)}updateEdge(t,e={}){const i=this.createEdge(t),s=i.getProp();return i.dispose(),this.updateCell(s,e)}addCell(t,e={}){return Array.isArray(t)?this.addCells(t,e):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(i=>this.addCell(i,e)),this.addings.delete(t)),this)}addCells(t,e={}){const i=t.length;if(i===0)return this;const s=Object.assign(Object.assign({},e),{position:i-1,maxPosition:i-1});return this.startBatch("add",Object.assign(Object.assign({},s),{cells:t})),t.forEach(r=>{this.addCell(r,s),s.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},s),{cells:t})),this}updateCell(t,e={}){const i=t.id&&this.getCell(t.id);return i?this.batchUpdate("update",()=>(Object.entries(t).forEach(([s,r])=>i.setProp(s,r,e)),!0),t):!1}removeCell(t,e={}){const i=typeof t=="string"?this.getCell(t):t;return i&&this.has(i)?this.collection.remove(i,e):null}updateCellId(t,e){if(t.id===e)return;this.startBatch("update",{id:e}),t.prop("id",e);const i=t.clone({keepId:!0});return this.addCell(i),this.getConnectedEdges(t).forEach(r=>{const o=r.getSourceCell(),a=r.getTargetCell();o===t&&r.setSource(Object.assign(Object.assign({},r.getSource()),{cell:e})),a===t&&r.setTarget(Object.assign(Object.assign({},r.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),i}removeCells(t,e={}){return t.length?this.batchUpdate("remove",()=>t.map(i=>this.removeCell(i,e))):[]}removeConnectedEdges(t,e={}){const i=this.getConnectedEdges(t);return i.forEach(s=>{s.remove(e)}),i}disconnectConnectedEdges(t,e={}){const i=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(s=>{const r=s.getSourceCellId(),o=s.getTargetCellId();r===i&&s.setSource({x:0,y:0},e),o===i&&s.setTarget({x:0,y:0},e)})}has(t){return this.collection.has(t)}total(){return this.collection.length}indexOf(t){return this.collection.indexOf(t)}getCell(t){return this.collection.get(t)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const t=this.collection.first();return t&&t.getZIndex()||0}getMaxZIndex(){const t=this.collection.last();return t&&t.getZIndex()||0}getCellsFromCache(t){return t?Object.keys(t).map(e=>this.getCell(e)).filter(e=>e!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(t){const e=typeof t=="string"?t:t.id,i=this.outgoings[e];return i?i.map(s=>this.getCell(s)).filter(s=>s&&s.isEdge()):null}getIncomingEdges(t){const e=typeof t=="string"?t:t.id,i=this.incomings[e];return i?i.map(s=>this.getCell(s)).filter(s=>s&&s.isEdge()):null}getConnectedEdges(t,e={}){const i=[],s=typeof t=="string"?this.getCell(t):t;if(s==null)return i;const r={},o=e.indirect;let a=e.incoming,l=e.outgoing;a==null&&l==null&&(a=l=!0);const c=(u,d)=>{const h=d?this.getOutgoingEdges(u):this.getIncomingEdges(u);if(h!=null&&h.forEach(f=>{r[f.id]||(i.push(f),r[f.id]=!0,o&&(a&&c(f,!1),l&&c(f,!0)))}),o&&u.isEdge()){const f=d?u.getTargetCell():u.getSourceCell();f&&f.isEdge()&&(r[f.id]||(i.push(f),c(f,d)))}};if(l&&c(s,!0),a&&c(s,!1),e.deep){const u=s.getDescendants({deep:!0}),d={};u.forEach(f=>{f.isNode()&&(d[f.id]=!0)});const h=(f,g)=>{const m=g?this.getOutgoingEdges(f.id):this.getIncomingEdges(f.id);m!=null&&m.forEach(p=>{if(!r[p.id]){const v=p.getSourceCell(),b=p.getTargetCell();if(!e.enclosed&&v&&d[v.id]&&b&&d[b.id])return;i.push(p),r[p.id]=!0}})};u.forEach(f=>{f.isEdge()||(l&&h(f,!0),a&&h(f,!1))})}return i}isBoundary(t,e){const i=typeof t=="string"?this.getCell(t):t,s=e?this.getIncomingEdges(i):this.getOutgoingEdges(i);return s==null||s.length===0}getBoundaryNodes(t){const e=[];return Object.keys(this.nodes).forEach(i=>{if(this.isBoundary(i,t)){const s=this.getCell(i);s&&e.push(s)}}),e}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(t){return this.isBoundary(t,!0)}isLeaf(t){return this.isBoundary(t,!1)}getNeighbors(t,e={}){let i=e.incoming,s=e.outgoing;i==null&&s==null&&(i=s=!0);const o=this.getConnectedEdges(t,e).reduce((a,l)=>{const c=l.hasLoop(e),u=l.getSourceCell(),d=l.getTargetCell();return i&&u&&u.isNode()&&!a[u.id]&&(c||u!==t&&(!e.deep||!u.isDescendantOf(t)))&&(a[u.id]=u),s&&d&&d.isNode()&&!a[d.id]&&(c||d!==t&&(!e.deep||!d.isDescendantOf(t)))&&(a[d.id]=d),a},{});if(t.isEdge()){if(i){const a=t.getSourceCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}if(s){const a=t.getTargetCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}}return Object.keys(o).map(a=>o[a])}isNeighbor(t,e,i={}){let s=i.incoming,r=i.outgoing;return s==null&&r==null&&(s=r=!0),this.getConnectedEdges(t,i).some(o=>{const a=o.getSourceCell(),l=o.getTargetCell();return!!(s&&a&&a.id===e.id||r&&l&&l.id===e.id)})}getSuccessors(t,e={}){const i=[];return this.search(t,(s,r)=>{s!==t&&this.matchDistance(r,e.distance)&&i.push(s)},Object.assign(Object.assign({},e),{outgoing:!0})),i}isSuccessor(t,e,i={}){let s=!1;return this.search(t,(r,o)=>{if(r===e&&r!==t&&this.matchDistance(o,i.distance))return s=!0,!1},Object.assign(Object.assign({},i),{outgoing:!0})),s}getPredecessors(t,e={}){const i=[];return this.search(t,(s,r)=>{s!==t&&this.matchDistance(r,e.distance)&&i.push(s)},Object.assign(Object.assign({},e),{incoming:!0})),i}isPredecessor(t,e,i={}){let s=!1;return this.search(t,(r,o)=>{if(r===e&&r!==t&&this.matchDistance(o,i.distance))return s=!0,!1},Object.assign(Object.assign({},i),{incoming:!0})),s}matchDistance(t,e){return e==null?!0:typeof e=="function"?e(t):Array.isArray(e)&&e.includes(t)?!0:t===e}getCommonAncestor(...t){const e=[];return t.forEach(i=>{i&&(Array.isArray(i)?e.push(...i):e.push(i))}),Nt.getCommonAncestor(...e)}getSubGraph(t,e={}){const i=[],s={},r=[],o=[],a=l=>{s[l.id]||(i.push(l),s[l.id]=l,l.isEdge()&&o.push(l),l.isNode()&&r.push(l))};return t.forEach(l=>{a(l),e.deep&&l.getDescendants({deep:!0}).forEach(u=>a(u))}),o.forEach(l=>{const c=l.getSourceCell(),u=l.getTargetCell();c&&!s[c.id]&&(i.push(c),s[c.id]=c,c.isNode()&&r.push(c)),u&&!s[u.id]&&(i.push(u),s[u.id]=u,u.isNode()&&r.push(u))}),r.forEach(l=>{this.getConnectedEdges(l,e).forEach(u=>{const d=u.getSourceCell(),h=u.getTargetCell();!s[u.id]&&d&&s[d.id]&&h&&s[h.id]&&(i.push(u),s[u.id]=u)})}),i}cloneSubGraph(t,e={}){const i=this.getSubGraph(t,e);return this.cloneCells(i)}cloneCells(t){return Nt.cloneCells(t)}getNodesFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e||0}:t;return this.getNodes().filter(s=>s.getBBox().containsPoint(i))}getNodesInArea(t,e,i,s,r){const o=typeof t=="number"?new nt(t,e,i,s):nt.create(t),a=typeof t=="number"?r:e,l=a&&a.strict;return this.getNodes().filter(c=>{const u=c.getBBox();return l?o.containsRect(u):o.isIntersectWithRect(u)})}getEdgesInArea(t,e,i,s,r){const o=typeof t=="number"?new nt(t,e,i,s):nt.create(t),a=typeof t=="number"?r:e,l=a&&a.strict;return this.getEdges().filter(c=>{const u=c.getBBox();return u.width===0?u.inflate(1,0):u.height===0&&u.inflate(0,1),l?o.containsRect(u):o.isIntersectWithRect(u)})}getNodesUnderNode(t,e={}){const i=t.getBBox();return(e.by==null||e.by==="bbox"?this.getNodesInArea(i):this.getNodesFromPoint(i[e.by])).filter(r=>t.id!==r.id&&!r.isDescendantOf(t))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(t,e={}){return Nt.getCellsBBox(t,e)}search(t,e,i={}){i.breadthFirst?this.breadthFirstSearch(t,e,i):this.depthFirstSearch(t,e,i)}breadthFirstSearch(t,e,i={}){const s=[],r={},o={};for(s.push(t),o[t.id]=0;s.length>0;){const a=s.shift();if(a==null||r[a.id]||(r[a.id]=!0,yt(e,this,a,o[a.id])===!1))continue;this.getNeighbors(a,i).forEach(c=>{o[c.id]=o[a.id]+1,s.push(c)})}}depthFirstSearch(t,e,i={}){const s=[],r={},o={};for(s.push(t),o[t.id]=0;s.length>0;){const a=s.pop();if(a==null||r[a.id]||(r[a.id]=!0,yt(e,this,a,o[a.id])===!1))continue;const l=this.getNeighbors(a,i),c=s.length;l.forEach(u=>{o[u.id]=o[a.id]+1,s.splice(c,0,u)})}}getShortestPath(t,e,i={}){const s={};this.getEdges().forEach(c=>{const u=c.getSourceCellId(),d=c.getTargetCellId();u&&d&&(s[u]||(s[u]=[]),s[d]||(s[d]=[]),s[u].push(d),i.directed||s[d].push(u))});const r=typeof t=="string"?t:t.id,o=hd.run(s,r,i.weight),a=[];let l=typeof e=="string"?e:e.id;for(o[l]&&a.push(l);l=o[l];)a.unshift(l);return a}translate(t,e,i){return this.getCells().filter(s=>!s.hasParent()).forEach(s=>s.translate(t,e,i)),this}resize(t,e,i){return this.resizeCells(t,e,this.getCells(),i)}resizeCells(t,e,i,s={}){const r=this.getCellsBBox(i);if(r){const o=Math.max(t/r.width,0),a=Math.max(e/r.height,0),l=r.getOrigin();i.forEach(c=>c.scale(o,a,l,s))}return this}toJSON(t={}){return fn.toJSON(this.getCells(),t)}parseJSON(t){return fn.fromJSON(t)}fromJSON(t,e={}){const i=this.parseJSON(t);return this.resetCells(i,e),this}startBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}stopBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}batchUpdate(t,e,i={}){this.startBatch(t,i);const s=e();return this.stopBatch(t,i),s}hasActiveBatch(t=Object.keys(this.batches)){return(Array.isArray(t)?t:[t]).some(i=>this.batches[i]>0)}dispose(){this.collection.dispose()}}z6([fn.dispose()],fn.prototype,"dispose",null);(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.addNode=="function"&&typeof s.addEdge=="function"&&s.collection!=null}n.isModel=t})(fn||(fn={}));(function(n){function t(i,s={}){return{cells:i.map(r=>r.toJSON(s))}}n.toJSON=t;function e(i){const s=[];return Array.isArray(i)?s.push(...i):(i.cells&&s.push(...i.cells),i.nodes&&i.nodes.forEach(r=>{r.shape==null&&(r.shape="rect"),s.push(r)}),i.edges&&i.edges.forEach(r=>{r.shape==null&&(r.shape="edge"),s.push(r)})),s.map(r=>{const o=r.shape;if(o){if(me.registry.exist(o))return me.create(r);if(Pe.registry.exist(o))return Pe.create(r)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}n.fromJSON=e})(fn||(fn={}));var V6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};let ks=class extends me{get label(){return this.getLabel()}set label(t){this.setLabel(t)}getLabel(){return this.getAttrByPath("text/text")}setLabel(t,e){return t==null?this.removeLabel():this.setAttrByPath("text/text",t,e),this}removeLabel(){return this.removeAttrByPath("text/text"),this}};(function(n){n.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},n.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},n.config({attrs:{text:Object.assign({},n.labelAttr)},propHooks(t){const{label:e}=t,i=V6(t,["label"]);return e&&Do(i,"attrs/text/text",e),i},visible:!0})})(ks||(ks={}));var F6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};function H6(n,t="body"){return[{tagName:n,selector:t},{tagName:"text",selector:"label"}]}function G6(n="xlink:href"){return e=>{const{imageUrl:i,imageWidth:s,imageHeight:r}=e,o=F6(e,["imageUrl","imageWidth","imageHeight"]);if(i!=null||s!=null||r!=null){const a=()=>{if(o.attrs){const l=o.attrs.image;i!=null&&(l[n]=i),s!=null&&(l.width=s),r!=null&&(l.height=r),o.attrs.image=l}};o.attrs?(o.attrs.image==null&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}function zo(n,t,e={}){const i={constructorName:n,markup:H6(n,e.selector),attrs:{[n]:Object.assign({},ks.bodyAttr)}};return(e.parent||ks).define(xe(i,t,{shape:n}))}zo("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const Sw=Pe.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});zo("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var U6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class yo extends ks{get points(){return this.getPoints()}set points(t){this.setPoints(t)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(t,e){return t==null?this.removePoints():this.setAttrByPath("body/refPoints",yo.pointsToString(t),e),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(n){function t(e){return typeof e=="string"?e:e.map(i=>Array.isArray(i)?i.join(","):$.isPointLike(i)?`${i.x}, ${i.y}`:"").join(" ")}n.pointsToString=t,n.config({propHooks(e){const{points:i}=e,s=U6(e,["points"]);if(i){const r=t(i);r&&Do(s,"attrs/body/refPoints",r)}return s}})})(yo||(yo={}));zo("polygon",{},{parent:yo});zo("polyline",{},{parent:yo});var W6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};ks.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(n){const{path:t}=n,e=W6(n,["path"]);return t&&Do(e,"attrs/body/refD",t),e}});var q6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};ks.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},_n.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:je.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},ks.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(n){const{text:t}=n,e=q6(n,["text"]);return t&&Do(e,"attrs/label/text",t),e},attrHooks:{text:{set(n,{cell:t,view:e,refBBox:i,elem:s,attrs:r}){if(s instanceof HTMLElement)s.textContent=n;else{const o=r.style||{},a={text:n,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},o),c=Pi.presets.textWrap;return yt(c.set,this,a,{cell:t,view:e,elem:s,refBBox:i,attrs:l}),{fill:o.color||null}}},position(n,{refBBox:t,elem:e}){if(e instanceof SVGElement)return t.getCenter()}}}});zo("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:G6()},{selector:"image"});zo("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class Sn extends Ae{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return Sn.toStringTag}getContainerClassName(){const t=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}updateClassName(t){const e=t.target;if(e.hasAttribute("magnet")){const i=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?Ce(e,i):bt(e,i)}else{const i=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(i):this.addClass(i)}}isNodeView(){return!0}confirmUpdate(t,e={}){let i=t;return this.hasAction(i,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","resize","translate","rotate","ports","tools"])):(i=this.handleAction(i,"resize",()=>this.resize(),"update"),i=this.handleAction(i,"update",()=>this.update(),"ports"),i=this.handleAction(i,"translate",()=>this.translate()),i=this.handleAction(i,"rotate",()=>this.rotate()),i=this.handleAction(i,"ports",()=>this.renderPorts()),i=this.handleAction(i,"tools",()=>{this.getFlag("tools")===t?this.renderTools():this.updateTools(e)})),i}update(t){this.cleanCache(),this.removePorts();const e=this.cell,i=e.getSize(),s=e.getAttrs();this.updateAttrs(this.container,s,{attrs:t===s?null:t,rootBBox:new nt(0,0,i.width,i.height),selectors:this.selectors}),this.renderPorts()}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const t=this.cell.getPosition();return`translate(${t.x},${t.y})`}getRotationString(){const t=this.cell.getAngle();if(t){const e=this.cell.getSize();return`rotate(${t},${e.width/2},${e.height/2})`}}updateTransform(){let t=this.getTranslationString();const e=this.getRotationString();e&&(t+=` ${e}`),this.container.setAttribute("transform",t)}findPortElem(t,e){const i=t?this.portsCache[t]:null;if(!i)return null;const s=i.portContentElement,r=i.portContentSelectors||{};return this.findOne(e,s,r)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(t=>{xi(t.portElement)})}renderPorts(){const t=this.container,e=[];t.childNodes.forEach(o=>{e.push(o)});const i=this.cell.getParsedPorts(),s=ym(i,"zIndex"),r="auto";s[r]&&s[r].forEach(o=>{const a=this.getPortElement(o);t.append(a),e.push(a)}),Object.keys(s).forEach(o=>{if(o!==r){const a=parseInt(o,10);this.appendPorts(s[o],a,e)}}),this.updatePorts()}appendPorts(t,e,i){const s=t.map(r=>this.getPortElement(r));i[e]||e<0?ka(i[Math.max(e,0)],s):Nn(this.container,s)}getPortElement(t){const e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}createPortElement(t){let e=ee.renderMarkup(this.cell.getPortContainerMarkup());const i=e.elem;if(i==null)throw new Error("Invalid port container markup.");e=ee.renderMarkup(this.getPortMarkup(t));const s=e.elem,r=e.selectors;if(s==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},s);let o="x6-port";t.group&&(o+=` x6-port-${t.group}`),bt(i,o),bt(i,"x6-port"),bt(s,"x6-port-body"),i.appendChild(s);let a=r,l,c;if(this.existPortLabel(t)){if(e=ee.renderMarkup(this.getPortLabelMarkup(t.label)),l=e.elem,c=e.selectors,l==null)throw new Error("Invalid port label markup.");if(r&&c){for(const d in c)if(r[d]&&d!==this.rootSelector)throw new Error("Selectors within port must be unique.");a=Object.assign(Object.assign({},r),c)}bt(l,"x6-port-label"),i.appendChild(l)}return this.portsCache[t.id]={portElement:i,portSelectors:a,portLabelElement:l,portLabelSelectors:c,portContentElement:s,portContentSelectors:r},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:i,selectors:a,labelContainer:l,labelSelectors:c,contentContainer:s,contentSelectors:r}),i}updatePorts(){const t=this.cell.getParsedGroups(),e=Object.keys(t);e.length===0?this.updatePortGroup():e.forEach(i=>this.updatePortGroup(i))}updatePortGroup(t){const e=nt.fromSize(this.cell.getSize()),i=this.cell.getPortsLayoutByGroup(t,e);for(let s=0,r=i.length;s<r;s+=1){const o=i[s],a=o.portId,l=this.portsCache[a]||{},c=o.portLayout;if(this.applyPortTransform(l.portElement,c),o.portAttrs!=null){const d={selectors:l.portSelectors||{}};o.portSize&&(d.rootBBox=nt.fromSize(o.portSize)),this.updateAttrs(l.portElement,o.portAttrs,d)}const u=o.labelLayout;if(u&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,u,-(c.angle||0)),u.attrs)){const d={selectors:l.portLabelSelectors||{}};o.labelSize&&(d.rootBBox=nt.fromSize(o.labelSize)),this.updateAttrs(l.portLabelElement,u.attrs,d)}}}applyPortTransform(t,e,i=0){const s=e.angle,r=e.position,o=Fe().rotate(i).translate(r.x||0,r.y||0).rotate(s||0);ro(t,o,{absolute:!0})}getPortMarkup(t){return t.markup||this.cell.portMarkup}getPortLabelMarkup(t){return t.markup||this.cell.portLabelMarkup}existPortLabel(t){return t.attrs&&t.attrs.text}getEventArgs(t,e,i){const s=this,r=s.cell,o=r;return e==null||i==null?{e:t,view:s,node:r,cell:o}:{e:t,x:e,y:i,view:s,node:r,cell:o}}getPortEventArgs(t,e,i){const s=this,r=s.cell,o=r;return i?{e:t,x:i.x,y:i.y,view:s,node:r,cell:o,port:e}:{e:t,view:s,node:r,cell:o,port:e}}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("node:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("node:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("node:mouseup",this.getEventArgs(t,e,i))}notifyPortEvent(t,e,i){const s=this.findAttr("port",e.target);if(s){const r=e.type;t==="node:port:mouseenter"?e.type="mouseenter":t==="node:port:mouseleave"&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,s,i)),e.type=r}}onClick(t,e,i){super.onClick(t,e,i),this.notify("node:click",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:click",t,{x:e,y:i})}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("node:dblclick",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:i})}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("node:contextmenu",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:i})}onMouseDown(t,e,i){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,i),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:i}),this.startNodeDragging(t,e,i))}onMouseMove(t,e,i){const s=this.getEventData(t),r=s.action;if(r==="magnet")this.dragMagnet(t,e,i);else{if(r==="move"){const a=s.targetView||this;a.dragNode(t,e,i),a.notify("node:moving",{e:t,x:e,y:i,view:a,cell:a.cell,node:a.cell})}this.notifyMouseMove(t,e,i),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:i})}this.setEventData(t,s)}onMouseUp(t,e,i){const s=this.getEventData(t),r=s.action;r==="magnet"?this.stopMagnetDragging(t,e,i):(this.notifyMouseUp(t,e,i),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:i}),r==="move"&&(s.targetView||this).stopNodeDragging(t,e,i));const o=s.targetMagnet;o&&this.onMagnetClick(t,o,e,i),this.checkMouseleave(t)}onMouseOver(t){super.onMouseOver(t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}onMouseOut(t){super.onMouseOut(t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}onMouseEnter(t){this.updateClassName(t),super.onMouseEnter(t),this.notify("node:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("node:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,s){super.onMouseWheel(t,e,i,s),this.notify("node:mousewheel",Object.assign({delta:s},this.getEventArgs(t,e,i)))}onMagnetClick(t,e,i,s){const r=this.graph;r.view.getMouseMovedCount(t)>r.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,i,s)))}onMagnetDblClick(t,e,i,s){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,i,s)))}onMagnetContextMenu(t,e,i,s){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,i,s)))}onMagnetMouseDown(t,e,i,s){this.startMagnetDragging(t,i,s)}onCustomEvent(t,e,i,s){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,i,s))),super.onCustomEvent(t,e,i,s)}prepareEmbedding(t){const e=this.graph,s=this.getEventData(t).cell||this.cell,r=e.findViewByCell(s),o=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:s,view:r,cell:s,x:o.x,y:o.y,currentParent:s.getParent()})}processEmbedding(t,e){const i=e.cell||this.cell,s=e.graph||this.graph,r=s.options.embedding,o=r.findParent;let a=typeof o=="function"?yt(o,s,{view:this,node:this.cell}).filter(h=>Nt.isCell(h)&&this.cell.id!==h.id&&!h.isDescendantOf(this.cell)):s.model.getNodesUnderNode(i,{by:o});if(r.frontOnly&&a.length>0){const h=ym(a,"zIndex"),f=Ij(Object.keys(h).map(g=>parseInt(g,10)));f&&(a=h[f])}a=a.filter(h=>h.visible);let l=null;const c=e.candidateEmbedView,u=r.validate;for(let h=a.length-1;h>=0;h-=1){const f=a[h];if(c&&c.cell.id===f.id){l=c;break}else{const g=f.findView(s);if(u&&yt(u,s,{child:this.cell,parent:g.cell,childView:this,parentView:g})){l=g;break}}}this.clearEmbedding(e),l&&l.highlight(null,{type:"embedding"}),e.candidateEmbedView=l;const d=s.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:i,node:i,view:s.findViewByCell(i),x:d.x,y:d.y,currentParent:i.getParent(),candidateParent:l?l.cell:null})}clearEmbedding(t){const e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}finalizeEmbedding(t,e){this.graph.startBatch("embedding");const i=e.cell||this.cell,s=e.graph||this.graph,r=s.findViewByCell(i),o=i.getParent(),a=e.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(o==null||o.id!==a.cell.id)&&a.cell.insertChild(i,void 0,{ui:!0})):o&&o.unembed(i,{ui:!0}),s.model.getConnectedEdges(i,{deep:!0}).forEach(l=>{l.updateParent({ui:!0})}),r&&a){const l=s.snapToGrid(t.clientX,t.clientY);r.notify("node:embedded",{e:t,cell:i,x:l.x,y:l.y,node:i,view:s.findViewByCell(i),previousParent:o,currentParent:i.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let t=this.cell,e=this;for(;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}validateMagnet(t,e,i){if(e.getAttribute("magnet")!=="passive"){const s=this.graph.options.connecting.validateMagnet;return s?yt(s,this.graph,{e:i,magnet:e,view:t,cell:t.cell}):!0}return!1}startMagnetDragging(t,e,i){if(!this.can("magnetConnectable"))return;t.stopPropagation();const s=t.currentTarget,r=this.graph;this.setEventData(t,{targetMagnet:s}),this.validateMagnet(this,s,t)?(r.options.magnetThreshold<=0&&this.startConnectting(t,s,e,i),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,i),r.view.delegateDragEvents(t,this)}startConnectting(t,e,i,s){this.graph.model.startBatch("add-edge");const r=this.createEdgeFromMagnet(e,i,s);r.setEventData(t,r.prepareArrowheadDragging("target",{x:i,y:s,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:r}),r.notifyMouseDown(t,i,s)}getDefaultEdge(t,e){let i;const s=this.graph.options.connecting.createEdge;return s&&(i=yt(s,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),i}createEdgeFromMagnet(t,e,i){const s=this.graph,r=s.model,o=this.getDefaultEdge(this,t);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(t,e,i,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:e,y:i})),o.addTo(r,{async:!1,ui:!0}),o.findView(s)}dragMagnet(t,e,i){const s=this.getEventData(t),r=s.edgeView;if(r)r.onMouseMove(t,e,i),this.autoScrollGraph(t.clientX,t.clientY);else{const o=this.graph,a=o.options.magnetThreshold,l=this.getEventTarget(t),c=s.targetMagnet;if(a==="onleave"){if(c===l||c.contains(l))return}else if(o.view.getMouseMovedCount(t)<=a)return;this.startConnectting(t,c,e,i)}}stopMagnetDragging(t,e,i){const r=this.eventData(t).edgeView;r&&(r.onMouseUp(t,e,i),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(t,e,i){this.notify("node:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(t,e,i,s,r){let o=[r];const a=this.graph.getPlugin("selection");if(a&&a.isSelectionMovable()){const l=a.getSelectedCells();l.includes(r)&&(o=l.filter(c=>c.isNode()))}o.forEach(l=>{this.notify(t,{e,x:i,y:s,cell:l,node:l,view:l.findView(this.graph)})})}getRestrictArea(t){const e=this.graph.options.translating.restrict,i=typeof e=="function"?yt(e,this.graph,t):e;return typeof i=="number"?this.graph.transform.getGraphArea().inflate(i):i===!0?this.graph.transform.getGraphArea():i||null}startNodeDragging(t,e,i){const s=this.getDelegatedView();if(s==null||!s.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,i);this.setEventData(t,{targetView:s,action:"move"});const r=$.create(s.cell.getPosition());s.setEventData(t,{moving:!1,offset:r.diff(e,i),restrict:this.getRestrictArea(s)})}dragNode(t,e,i){const s=this.cell,r=this.graph,o=r.getGridSize(),a=this.getEventData(t),l=a.offset,c=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,i,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);const u=qt.snapToGrid(e+l.x,o),d=qt.snapToGrid(i+l.y,o);s.setPosition(u,d,{restrict:c,deep:!0,ui:!0}),r.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(t),a.embedding=!0),this.processEmbedding(t,a))}stopNodeDragging(t,e,i){const s=this.getEventData(t);s.embedding&&this.finalizeEmbedding(t,s),s.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,i,this.cell)),s.moving=!1,s.embedding=!1}autoScrollGraph(t,e){const i=this.graph.getPlugin("scroller");i&&i.autoScroll(t,e)}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNodeView=="function"&&typeof s.isEdgeView=="function"&&typeof s.confirmUpdate=="function"&&typeof s.update=="function"&&typeof s.findPortElem=="function"&&typeof s.resize=="function"&&typeof s.rotate=="function"&&typeof s.translate=="function"}n.isNodeView=t})(Sn||(Sn={}));Sn.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}});Sn.registry.register("node",Sn,!0);var Y6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class qi extends Ae{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.labelDestroyFn={}}get[Symbol.toStringTag](){return qi.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const t=this.sourceView;if(!t){const i=this.cell.getSource();return new nt(i.x,i.y)}const e=this.sourceMagnet;return t.isEdgeElement(e)?new nt(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)}get targetBBox(){const t=this.targetView;if(!t){const i=this.cell.getTarget();return new nt(i.x,i.y)}const e=this.targetMagnet;return t.isEdgeElement(e)?new nt(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)}isEdgeView(){return!0}confirmUpdate(t,e={}){let i=t;if(this.hasAction(i,"source")){if(!this.updateTerminalProperties("source"))return i;i=this.removeAction(i,"source")}if(this.hasAction(i,"target")){if(!this.updateTerminalProperties("target"))return i;i=this.removeAction(i,"target")}return this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","labels","tools"]),i):(i=this.handleAction(i,"update",()=>this.update(e)),i=this.handleAction(i,"labels",()=>this.onLabelsChange(e)),i=this.handleAction(i,"tools",()=>this.renderTools()),i)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}customizeLabels(){if(this.labelContainer){const t=this.cell,e=t.labels;for(let i=0,s=e.length;i<s;i+=1){const r=e[i],o=this.labelCache[i],a=this.labelSelectors[i],l=this.graph.options.onEdgeLabelRendered;if(l){const c=l({edge:t,label:r,container:o,selectors:a});c&&(this.labelDestroyFn[i]=c)}}}}destroyCustomizeLabels(){const t=this.cell.labels;if(this.labelCache&&this.labelSelectors&&this.labelDestroyFn)for(let e=0,i=t.length;e<i;e+=1){const s=this.labelDestroyFn[e],r=this.labelCache[e],o=this.labelSelectors[e];s&&r&&o&&s({edge:this.cell,label:t[e],container:r,selectors:o})}this.labelDestroyFn={}}renderLabels(){const t=this.cell,e=t.getLabels(),i=e.length;let s=this.labelContainer;if(this.labelCache={},this.labelSelectors={},i<=0)return s&&s.parentNode&&s.parentNode.removeChild(s),this;s?this.empty(s):(s=ci("g"),this.addClass(this.prefixClassName("edge-labels"),s),this.labelContainer=s);for(let r=0,o=e.length;r<o;r+=1){const a=e[r],l=this.normalizeLabelMarkup(this.parseLabelMarkup(a.markup));let c,u;if(l)c=l.node,u=l.selectors;else{const h=t.getDefaultLabel(),f=this.normalizeLabelMarkup(this.parseLabelMarkup(h.markup));c=f.node,u=f.selectors}c.setAttribute("data-index",`${r}`),s.appendChild(c);const d=this.rootSelector;if(u[d])throw new Error("Ambiguous label root selector.");u[d]=c,this.labelCache[r]=c,this.labelSelectors[r]=u}return s.parentNode==null&&this.container.appendChild(s),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(t={}){this.destroyCustomizeLabels(),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(t={}){const e=this.cell.previous("labels");if(e==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){const i=t.propertyPathArray||[],s=i.length;if(s>1){const r=i[1];if(e[r]){if(s===2)return typeof t.propertyValue=="object"&&kl(t.propertyValue,"markup");if(i[2]!=="markup")return!1}}}return!0}parseLabelMarkup(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}parseLabelStringMarkup(t){const e=Et.createVectors(t),i=document.createDocumentFragment();for(let s=0,r=e.length;s<r;s+=1){const o=e[s].node;i.appendChild(o)}return{fragment:i,selectors:{}}}normalizeLabelMarkup(t){if(t==null)return;const e=t.fragment;if(!(e instanceof DocumentFragment)||!e.hasChildNodes())throw new Error("Invalid label markup.");let i;const s=e.childNodes;return s.length>1||s[0].nodeName.toUpperCase()!=="G"?i=Et.create("g").append(e):i=Et.create(s[0]),i.addClass(this.prefixClassName("edge-label")),{node:i.node,selectors:t.selectors}}updateLabels(){if(this.labelContainer){const t=this.cell,e=t.labels,i=this.can("edgeLabelMovable"),s=t.getDefaultLabel();for(let r=0,o=e.length;r<o;r+=1){const a=this.labelCache[r],l=this.labelSelectors[r];a.setAttribute("cursor",i?"move":"default");const c=e[r],u=xe({},s.attrs,c.attrs);this.updateAttrs(a,u,{selectors:l,rootBBox:c.size?nt.fromSize(c.size):void 0})}}}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}update(t={}){this.cleanCache(),this.updateConnection(t);const e=this.cell.getAttrs(),i=Y6(e,["text"]);return i!=null&&this.updateAttrs(this.container,i,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}removeRedundantLinearVertices(t={}){const e=this.cell,i=e.getVertices(),s=[this.sourceAnchor,...i,this.targetAnchor],r=s.length,o=new Oe(s);o.simplify({threshold:.01});const a=o.points.map(c=>c.toJSON()),l=a.length;return r===l?0:(e.setVertices(a.slice(1,l-1),t),r-l)}getTerminalView(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalAnchor(t){switch(t){case"source":return $.create(this.sourceAnchor);case"target":return $.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalConnectionPoint(t){switch(t){case"source":return $.create(this.sourcePoint);case"target":return $.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalMagnet(t,e={}){switch(t){case"source":{if(e.raw)return this.sourceMagnet;const i=this.sourceView;return i?this.sourceMagnet||i.container:null}case"target":{if(e.raw)return this.targetMagnet;const i=this.targetView;return i?this.targetMagnet||i.container:null}default:throw new Error(`Unknown terminal type '${t}'`)}}updateConnection(t={}){const e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){const i=t.tx||0,s=t.ty||0;this.routePoints=new Oe(this.routePoints).translate(i,s).points,this.translateConnectionPoints(i,s),this.path.translate(i,s)}else{const i=e.getVertices(),s=this.findAnchors(i);this.sourceAnchor=s.source,this.targetAnchor=s.target,this.routePoints=this.findRoutePoints(i);const r=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=r.source,this.targetPoint=r.target;const o=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,o.source||this.sourcePoint,o.target||this.targetPoint)}this.cleanCache()}findAnchors(t){const e=this.cell,i=e.source,s=e.target,r=t[0],o=t[t.length-1];return s.priority&&!i.priority?this.findAnchorsOrdered("target",o,"source",r):this.findAnchorsOrdered("source",r,"target",o)}findAnchorsOrdered(t,e,i,s){let r,o;const a=this.cell,l=a[t],c=a[i],u=this.getTerminalView(t),d=this.getTerminalView(i),h=this.getTerminalMagnet(t),f=this.getTerminalMagnet(i);if(u){let g;e?g=$.create(e):d?g=f:g=$.create(c),r=this.getAnchor(l.anchor,u,h,g,t)}else r=$.create(l);if(d){const g=$.create(s||r);o=this.getAnchor(c.anchor,d,f,g,i)}else o=$.isPointLike(c)?$.create(c):new $;return{[t]:r,[i]:o}}getAnchor(t,e,i,s,r){const o=e.isEdgeElement(i),a=this.graph.options.connecting;let l=typeof t=="string"?{name:t}:t;if(!l){const d=o?(r==="source"?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:(r==="source"?a.sourceAnchor:a.targetAnchor)||a.anchor;l=typeof d=="string"?{name:d}:d}if(!l)throw new Error("Anchor should be specified.");let c;const u=l.name;if(o){const d=mo.registry.get(u);if(typeof d!="function")return mo.registry.onNotFound(u);c=yt(d,this,e,i,s,l.args||{},r)}else{const d=po.registry.get(u);if(typeof d!="function")return po.registry.onNotFound(u);c=yt(d,this,e,i,s,l.args||{},r)}return c?c.round(this.POINT_ROUNDING):new $}findRoutePoints(t=[]){const e=this.graph.options.connecting.router||xs.presets.normal,i=this.cell.getRouter()||e;let s;if(typeof i=="function")s=yt(i,this,t,{},this);else{const r=typeof i=="string"?i:i.name,o=typeof i=="string"?{}:i.args||{},a=r?xs.registry.get(r):xs.presets.normal;if(typeof a!="function")return xs.registry.onNotFound(r);s=yt(a,this,t,o,this)}return s==null?t.map(r=>$.create(r)):s.map(r=>$.create(r))}findConnectionPoints(t,e,i){const s=this.cell,r=this.graph.options.connecting,o=s.getSource(),a=s.getTarget(),l=this.sourceView,c=this.targetView,u=t[0],d=t[t.length-1];let h;if(l&&!l.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||l.container,m=u||i,p=new gt(m,e),v=o.connectionPoint||r.sourceConnectionPoint||r.connectionPoint;h=this.getConnectionPoint(v,l,g,p,"source")}else h=e;let f;if(c&&!c.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||c.container,m=a.connectionPoint||r.targetConnectionPoint||r.connectionPoint,p=d||e,v=new gt(p,i);f=this.getConnectionPoint(m,c,g,v,"target")}else f=i;return{source:h,target:f}}getConnectionPoint(t,e,i,s,r){const o=s.end;if(t==null)return o;const a=typeof t=="string"?t:t.name,l=typeof t=="string"?{}:t.args,c=bo.registry.get(a);if(typeof c!="function")return bo.registry.onNotFound(a);const u=yt(c,this,s,e,i,l||{},r);return u?u.round(this.POINT_ROUNDING):o}findMarkerPoints(t,e,i){const s=d=>{const h=this.cell.getAttrs(),f=Object.keys(h);for(let g=0,m=f.length;g<m;g+=1){const p=h[f[g]];if(p[`${d}Marker`]||p[`${d}-marker`]){const v=p.strokeWidth||p["stroke-width"];if(v)return parseFloat(v);break}}return null},r=t[0],o=t[t.length-1];let a,l;const c=s("source");c&&(a=e.clone().move(r||i,-c));const u=s("target");return u&&(l=i.clone().move(o||e,-u)),this.sourceMarkerPoint=a||e.clone(),this.targetMarkerPoint=l||i.clone(),{source:a,target:l}}findPath(t,e,i){const s=this.cell.getConnector()||this.graph.options.connecting.connector;let r,o,a;if(typeof s=="string"?r=s:(r=s.name,o=s.args),r){const c=or.registry.get(r);if(typeof c!="function")return or.registry.onNotFound(r);a=c}else a=or.presets.normal;const l=yt(a,this,e,i,t,Object.assign(Object.assign({},o),{raw:!0}),this);return typeof l=="string"?wt.parse(l):l}translateConnectionPoints(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const e=this.cell,i=e.getLabels();if(i.length===0)return this;const s=e.getDefaultLabel(),r=this.normalizeLabelPosition(s.position);for(let o=0,a=i.length;o<a;o+=1){const l=i[o],c=this.labelCache[o];if(!c)continue;const u=this.normalizeLabelPosition(l.position),d=xe({},r,u),h=this.getLabelTransformationMatrix(d);c.setAttribute("transform",Lo(h))}return this}updateTerminalProperties(t){const e=this.cell,i=this.graph,s=e[t],r=s&&s.cell,o=`${t}View`;if(!r)return this[o]=null,this.updateTerminalMagnet(t),!0;const a=i.getCellById(r);if(!a)throw new Error(`Edge's ${t} node with id "${r}" not exists`);const l=a.findView(i);return l?(this[o]=l,this.updateTerminalMagnet(t),!0):!1}updateTerminalMagnet(t){const e=`${t}Magnet`,i=this.getTerminalView(t);if(i){let s=i.getMagnetFromEdgeTerminal(this.cell[t]);s===i.container&&(s=null),this[e]=s}else this[e]=null}getLabelPositionAngle(t){const e=this.cell.getLabelAt(t);return e&&e.position&&typeof e.position=="object"&&e.position.angle||0}getLabelPositionArgs(t){const e=this.cell.getLabelAt(t);if(e&&e.position&&typeof e.position=="object")return e.position.options}getDefaultLabelPositionArgs(){const t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}mergeLabelPositionArgs(t,e){return t===null?null:t===void 0?e===null?null:e:xe({},e,t)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const t=this.cache.pathCache;return kl(t,"data")||(t.data=this.path.serialize()),t.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const t=this.cache.pathCache;return kl(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const t=this.cache.pathCache;return kl(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}getPointAtLength(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(t){return this.path==null?null:(Ui(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(t,e,i,s){const r={distance:0};let o=0,a;typeof i=="number"?(o=i,a=s):a=i,a!=null&&(r.options=a);const l=a&&a.absoluteOffset,c=!(a&&a.absoluteDistance),u=a&&a.absoluteDistance&&a.reverseDistance,d=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},f=new $(t,e),g=d.closestPointT(f,h),m=this.getConnectionLength()||0;let p=d.lengthAtT(g,h);c&&(p=m>0?p/m:0),u&&(p=-1*(m-p)||1),r.distance=p;let v;l||(v=d.tangentAtT(g));let b;if(v)b=v.pointOffset(f);else{const y=d.pointAtT(g),w=f.diff(y);b={x:w.x,y:w.y}}return r.offset=b,r.angle=o,r}normalizeLabelPosition(t){return typeof t=="number"?{distance:t}:t}getLabelTransformationMatrix(t){const e=this.normalizeLabelPosition(t),i=e.options||{},s=e.angle||0,r=e.distance,o=r>0&&r<=1;let a=0;const l={x:0,y:0},c=e.offset;c&&(typeof c=="number"?a=c:(c.x!=null&&(l.x=c.x),c.y!=null&&(l.y=c.y)));const u=l.x!==0||l.y!==0||a===0,d=i.keepGradient,h=i.ensureLegibility,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},m=o?r*this.getConnectionLength():r,p=f.tangentAtLength(m,g);let v,b=s;if(p){if(u)v=p.start,v.translate(l);else{const y=p.clone();y.rotate(-90,p.start),y.setLength(a),v=y.end}d&&(b=p.angle()+s,h&&(b=zt.normalize((b+90)%180-90)))}else v=f.start,u&&v.translate(l);return Fe().translate(v.x,v.y).rotate(b)}getVertexIndex(t,e){const s=this.cell.getVertices(),r=this.getClosestPointLength(new $(t,e));let o=0;if(r!=null)for(const a=s.length;o<a;o+=1){const l=s[o],c=this.getClosestPointLength(l);if(c!=null&&r<c)break}return o}getEventArgs(t,e,i){const s=this,r=s.cell,o=r;return e==null||i==null?{e:t,view:s,edge:r,cell:o}:{e:t,x:e,y:i,view:s,edge:r,cell:o}}notifyUnhandledMouseDown(t,e,i){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("edge:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("edge:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("edge:mouseup",this.getEventArgs(t,e,i))}onClick(t,e,i){super.onClick(t,e,i),this.notify("edge:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("edge:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("edge:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startEdgeDragging(t,e,i)}onMouseMove(t,e,i){const s=this.getEventData(t);switch(s.action){case"drag-label":{this.dragLabel(t,e,i);break}case"drag-arrowhead":{this.dragArrowhead(t,e,i);break}case"drag-edge":{this.dragEdge(t,e,i);break}}return this.notifyMouseMove(t,e,i),s}onMouseUp(t,e,i){const s=this.getEventData(t);switch(s.action){case"drag-label":{this.stopLabelDragging(t,e,i);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,e,i);break}case"drag-edge":{this.stopEdgeDragging(t,e,i);break}}return this.notifyMouseUp(t,e,i),this.checkMouseleave(t),s}onMouseOver(t){super.onMouseOver(t),this.notify("edge:mouseover",this.getEventArgs(t))}onMouseOut(t){super.onMouseOut(t),this.notify("edge:mouseout",this.getEventArgs(t))}onMouseEnter(t){super.onMouseEnter(t),this.notify("edge:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("edge:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,s){super.onMouseWheel(t,e,i,s),this.notify("edge:mousewheel",Object.assign({delta:s},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,s){if(gx(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if(e==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,s)))}this.notifyMouseDown(t,i,s)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,s))),super.onCustomEvent(t,e,i,s)}onLabelMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startLabelDragging(t,e,i),this.getEventData(t).stopPropagation&&t.stopPropagation()}startEdgeDragging(t,e,i){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,e,i);return}this.setEventData(t,{x:e,y:i,moving:!1,action:"drag-edge"})}dragEdge(t,e,i){const s=this.getEventData(t);s.moving||(s.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-s.x,i-s.y,{ui:!0}),this.setEventData(t,{x:e,y:i}),this.notify("edge:moving",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(t,e,i){const s=this.getEventData(t);s.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),s.moving=!1}prepareArrowheadDragging(t,e){const i=this.getTerminalMagnet(t),s={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:e.isNewEdge===!0,terminalType:t,initialMagnet:i,initialTerminal:ed(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(s),s}createValidateConnectionArgs(t){const e=[];e[4]=t,e[5]=this;let i,s=0,r=0;t==="source"?(s=2,i="target"):(r=2,i="source");const o=this.cell[i],a=o.cell;if(a){let l;const c=e[s]=this.graph.findViewByCell(a);c&&(l=c.getMagnetFromEdgeTerminal(o),l===c.container&&(l=void 0)),e[s+1]=l}return(l,c)=>(e[r]=l,e[r+1]=l.container===c?void 0:c,e)}beforeArrowheadDragging(t){t.zIndex=this.cell.zIndex,this.cell.toFront();const e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}afterArrowheadDragging(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);const e=this.container;e.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}validateConnection(t,e,i,s,r,o,a){const l=this.graph.options.connecting,c=l.allowLoop,u=l.allowNode,d=l.allowEdge,h=l.allowPort,f=l.allowMulti,g=l.validateConnection,m=o?o.cell:null,p=r==="target"?i:t,v=r==="target"?s:e;let b=!0;const y=w=>{const C=r==="source"?a?a.port:null:m?m.getSourcePortId():null,P=r==="target"?a?a.port:null:m?m.getTargetPortId():null;return yt(w,this.graph,{edge:m,edgeView:o,sourceView:t,targetView:i,sourcePort:C,targetPort:P,sourceMagnet:e,targetMagnet:s,sourceCell:t?t.cell:null,targetCell:i?i.cell:null,type:r})};if(c!=null&&(typeof c=="boolean"?!c&&t===i&&(b=!1):b=y(c)),b&&h!=null&&(typeof h=="boolean"?!h&&v&&(b=!1):b=y(h)),b&&d!=null&&(typeof d=="boolean"?!d&&qi.isEdgeView(p)&&(b=!1):b=y(d)),b&&u!=null&&v==null&&(typeof u=="boolean"?!u&&Sn.isNodeView(p)&&(b=!1):b=y(u)),b&&f!=null&&o){const w=o.cell,C=r==="source"?a:w.getSource(),P=r==="target"?a:w.getTarget(),E=a?this.graph.getCellById(a.cell):null;if(C&&P&&C.cell&&P.cell&&E)if(typeof f=="function")b=y(f);else{const S=this.graph.model.getConnectedEdges(E,{outgoing:r==="source",incoming:r==="target"});S.length&&(f==="withPort"?S.some(M=>{const O=M.getSource(),T=M.getTarget();return O&&T&&O.cell===C.cell&&T.cell===P.cell&&O.port!=null&&O.port===C.port&&T.port!=null&&T.port===P.port})&&(b=!1):f||S.some(M=>{const O=M.getSource(),T=M.getTarget();return O&&T&&O.cell===C.cell&&T.cell===P.cell})&&(b=!1))}}return b&&g!=null&&(b=y(g)),b}allowConnectToBlank(t){const e=this.graph,s=e.options.connecting.allowBlank;if(typeof s!="function")return!!s;const r=e.findViewByCell(t),o=t.getSourceCell(),a=t.getTargetCell(),l=e.findViewByCell(o),c=e.findViewByCell(a);return yt(s,e,{edge:t,edgeView:r,sourceCell:o,targetCell:a,sourceView:l,targetView:c,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})}validateEdge(t,e,i){const s=this.graph;if(!this.allowConnectToBlank(t)){const o=t.getSourceCellId(),a=t.getTargetCellId();if(!(o&&a))return!1}const r=s.options.connecting.validateEdge;return r?yt(r,s,{edge:t,type:e,previous:i}):!0}arrowheadDragging(t,e,i,s){s.x=e,s.y=i,s.currentTarget!==t&&(s.currentMagnet&&s.currentView&&s.currentView.unhighlight(s.currentMagnet,{type:"magnetAdsorbed"}),s.currentView=this.graph.findViewByElem(t),s.currentView?(s.currentMagnet=s.currentView.findMagnet(t),s.currentMagnet&&this.validateConnection(...s.getValidateConnectionArgs(s.currentView,s.currentMagnet),s.currentView.getEdgeTerminal(s.currentMagnet,e,i,this.cell,s.terminalType))?s.currentView.highlight(s.currentMagnet,{type:"magnetAdsorbed"}):s.currentMagnet=null):s.currentMagnet=null),s.currentTarget=t,this.cell.prop(s.terminalType,{x:e,y:i},Object.assign(Object.assign({},s.options),{ui:!0}))}arrowheadDragged(t,e,i){const s=t.currentView,r=t.currentMagnet;if(!r||!s)return;s.unhighlight(r,{type:"magnetAdsorbed"});const o=t.terminalType,a=s.getEdgeTerminal(r,e,i,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}snapArrowhead(t,e,i){const s=this.graph,{snap:r,allowEdge:o}=s.options.connecting,a=typeof r=="object"&&r.radius||50,l=typeof r=="object"&&r.anchor||"center",c=s.renderer.findViewsInArea({x:t-a,y:e-a,width:2*a,height:2*a},{nodeOnly:!0});if(o){const w=s.renderer.findEdgeViewsFromPoint({x:t,y:e},a).filter(C=>C!==this);c.push(...w)}const u=i.closestView||null,d=i.closestMagnet||null;i.closestView=null,i.closestMagnet=null;let h,f=Number.MAX_SAFE_INTEGER;const g=new $(t,e);c.forEach(w=>{if(w.container.getAttribute("magnet")!=="false"){if(w.isNodeView())h=l==="center"?w.cell.getBBox().getCenter().distance(g):w.cell.getBBox().getNearestPointToPoint(g).distance(g);else if(w.isEdgeView()){const C=w.getClosestPoint(g);C?h=C.distance(g):h=Number.MAX_SAFE_INTEGER}h<a&&h<f&&(d===w.container||this.validateConnection(...i.getValidateConnectionArgs(w,null),w.getEdgeTerminal(w.container,t,e,this.cell,i.terminalType)))&&(f=h,i.closestView=w,i.closestMagnet=w.container)}w.container.querySelectorAll("[magnet]").forEach(C=>{if(C.getAttribute("magnet")!=="false"){const P=w.getBBoxOfElement(C);h=g.distance(P.getCenter()),h<a&&h<f&&(d===C||this.validateConnection(...i.getValidateConnectionArgs(w,C),w.getEdgeTerminal(C,t,e,this.cell,i.terminalType)))&&(f=h,i.closestView=w,i.closestMagnet=C)}})});let m;const p=i.terminalType,v=i.closestView,b=i.closestMagnet,y=d!==b;if(u&&y&&u.unhighlight(d,{type:"magnetAdsorbed"}),v){if(!y)return;v.highlight(b,{type:"magnetAdsorbed"}),m=v.getEdgeTerminal(b,t,e,this.cell,p)}else m={x:t,y:e};this.cell.setTerminal(p,m,{},Object.assign(Object.assign({},i.options),{ui:!0}))}snapArrowheadEnd(t){const e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(i,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(i)),t.closestView=null,t.closestMagnet=null}finishEmbedding(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}fallbackConnection(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}notifyConnectionEvent(t,e){const i=t.terminalType,s=t.initialTerminal,r=this.cell[i];if(r&&!Pe.equalTerminals(s,r)){const a=this.graph,l=s,c=l.cell?a.getCellById(l.cell):null,u=l.port,d=c?a.findViewByCell(c):null,h=c||t.isNewEdge?null:$.create(s).toJSON(),f=r,g=f.cell?a.getCellById(f.cell):null,m=f.port,p=g?a.findViewByCell(g):null,v=g?null:$.create(r).toJSON();this.notify("edge:connected",{e,previousCell:c,previousPort:u,previousView:d,previousPoint:h,currentCell:g,currentView:p,currentPort:m,currentPoint:v,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:i,isNew:t.isNewEdge})}}highlightAvailableMagnets(t){const e=this.graph,i=e.model.getCells();t.marked={};for(let s=0,r=i.length;s<r;s+=1){const o=e.findViewByCell(i[s]);if(!o||o.cell.id===this.cell.id)continue;const a=Array.prototype.slice.call(o.container.querySelectorAll("[magnet]"));o.container.getAttribute("magnet")!=="false"&&a.push(o.container);const l=a.filter(c=>this.validateConnection(...t.getValidateConnectionArgs(o,c),o.getEdgeTerminal(c,t.x,t.y,this.cell,t.terminalType)));if(l.length>0){for(let c=0,u=l.length;c<u;c+=1)o.highlight(l[c],{type:"magnetAvailable"});o.highlight(null,{type:"nodeAvailable"}),t.marked[o.cell.id]=l}}}unhighlightAvailableMagnets(t){const e=t.marked||{};Object.keys(e).forEach(i=>{const s=this.graph.findViewByCell(i);s&&(e[i].forEach(o=>{s.unhighlight(o,{type:"magnetAvailable"})}),s.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null}startArrowheadDragging(t,e,i){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,e,i);return}const r=t.target.getAttribute("data-terminal"),o=this.prepareArrowheadDragging(r,{x:e,y:i});this.setEventData(t,o)}dragArrowhead(t,e,i){const s=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,i,s):this.arrowheadDragging(this.getEventTarget(t),e,i,s)}stopArrowheadDragging(t,e,i){const s=this.graph,r=this.getEventData(t);s.options.connecting.snap?this.snapArrowheadEnd(r):this.arrowheadDragged(r,e,i),this.validateEdge(this.cell,r.terminalType,r.initialTerminal)?(this.finishEmbedding(r),this.notifyConnectionEvent(r,t)):this.fallbackConnection(r),this.afterArrowheadDragging(r)}startLabelDragging(t,e,i){if(this.can("edgeLabelMovable")){const s=t.currentTarget,r=parseInt(s.getAttribute("data-index"),10),o=this.getLabelPositionAngle(r),a=this.getLabelPositionArgs(r),l=this.getDefaultLabelPositionArgs(),c=this.mergeLabelPositionArgs(a,l);this.setEventData(t,{index:r,positionAngle:o,positionArgs:c,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}dragLabel(t,e,i){const s=this.getEventData(t),r=this.cell.getLabelAt(s.index),o=xe({},r,{position:this.getLabelPosition(e,i,s.positionAngle,s.positionArgs)});this.cell.setLabelAt(s.index,o)}stopLabelDragging(t,e,i){}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],s=e;return(i==null||i===n.toStringTag)&&typeof s.isNodeView=="function"&&typeof s.isEdgeView=="function"&&typeof s.confirmUpdate=="function"&&typeof s.update=="function"&&typeof s.getConnection=="function"}n.isEdgeView=t})(qi||(qi={}));qi.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}});qi.registry.register("edge",qi,!0);var X6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class ni extends Dt{get disposeContainer(){return!1}get options(){return this.graph.options}constructor(t){super(),this.graph=t;const{selectors:e,fragment:i}=ee.parseJSONMarkup(ni.markup);this.background=e.background,this.grid=e.grid,this.svg=e.svg,this.defs=e.defs,this.viewport=e.viewport,this.primer=e.primer,this.stage=e.stage,this.decorator=e.decorator,this.overlay=e.overlay,this.container=this.options.container,this.restore=ni.snapshoot(this.container),bt(this.container,this.prefixClassName("graph")),Nn(this.container,i),this.delegateEvents()}delegateEvents(){const t=this.constructor;return super.delegateEvents(t.events),this}guard(t,e){return t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e)?!0:t.data&&t.data.guarded!==void 0?t.data.guarded:!(e&&e.cell&&Nt.isCell(e.cell)||this.svg===t.target||this.container===t.target||this.svg.contains(t.target))}findView(t){return this.graph.findViewByElem(t)}onDblClick(t){this.options.preventDefaultDblClick&&t.preventDefault();const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const s=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onDblClick(e,s.x,s.y):this.graph.trigger("blank:dblclick",{e,x:s.x,y:s.y})}onClick(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const s=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onClick(e,s.x,s.y):this.graph.trigger("blank:click",{e,x:s.x,y:s.y})}}isPreventDefaultContextMenu(t){let e=this.options.preventDefaultContextMenu;return typeof e=="function"&&(e=yt(e,this.graph,{view:t})),e}onContextMenu(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.isPreventDefaultContextMenu(i)&&t.preventDefault(),this.guard(e,i))return;const s=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onContextMenu(e,s.x,s.y):this.graph.trigger("blank:contextmenu",{e,x:s.x,y:s.y})}delegateDragEvents(t,e){t.data==null&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});const i=this.constructor;this.delegateDocumentEvents(i.documentEvents,t.data),this.undelegateEvents()}getMouseMovedCount(t){return this.getEventData(t).mouseMovedCount||0}onMouseDown(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;this.options.preventDefaultMouseDown&&t.preventDefault();const s=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onMouseDown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:s.x,y:s.y})),this.delegateDragEvents(e,i)}onMouseMove(t){const e=this.getEventData(t),i=e.startPosition;if(i&&i.x===t.clientX&&i.y===t.clientY||(e.mouseMovedCount==null&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,e.mouseMovedCount<=this.options.moveThreshold))return;const r=this.normalizeEvent(t),o=this.graph.snapToGrid(r.clientX,r.clientY),a=e.currentView;a?a.onMouseMove(r,o.x,o.y):this.graph.trigger("blank:mousemove",{e:r,x:o.x,y:o.y}),this.setEventData(r,e)}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY),r=this.getEventData(t).currentView;if(r?r.onMouseUp(e,i.x,i.y):this.graph.trigger("blank:mouseup",{e,x:i.x,y:i.y}),!t.isPropagationStopped()){const o=new wi(t,{type:"click",data:t.data});this.onClick(o)}t.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}}onMouseOut(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}}onMouseEnter(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const s=this.graph.findViewByElem(e.relatedTarget);if(i){if(s===i)return;i.onMouseEnter(e)}else{if(s)return;this.graph.trigger("graph:mouseenter",{e})}}onMouseLeave(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const s=this.graph.findViewByElem(e.relatedTarget);if(i){if(s===i)return;i.onMouseLeave(e)}else{if(s)return;this.graph.trigger("graph:mouseleave",{e})}}onMouseWheel(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const s=e.originalEvent,r=this.graph.snapToGrid(s.clientX,s.clientY),o=Math.max(-1,Math.min(1,s.wheelDelta||-s.detail));i?i.onMouseWheel(e,r.x,r.y,o):this.graph.trigger("blank:mousewheel",{e,delta:o,x:r.x,y:r.y})}onCustomEvent(t){const e=t.currentTarget,i=e.getAttribute("event")||e.getAttribute("data-event");if(i){const s=this.findView(e);if(s){const r=this.normalizeEvent(t);if(this.guard(r,s))return;const o=this.graph.snapToGrid(r.clientX,r.clientY);s.onCustomEvent(r,i,o.x,o.y)}}}handleMagnetEvent(t,e){const i=t.currentTarget,s=i.getAttribute("magnet");if(s&&s.toLowerCase()!=="false"){const r=this.findView(i);if(r){const o=this.normalizeEvent(t);if(this.guard(o,r))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);yt(e,this.graph,r,o,i,a.x,a.y)}}}onMagnetMouseDown(t){this.handleMagnetEvent(t,(e,i,s,r,o)=>{e.onMagnetMouseDown(i,s,r,o)})}onMagnetDblClick(t){this.handleMagnetEvent(t,(e,i,s,r,o)=>{e.onMagnetDblClick(i,s,r,o)})}onMagnetContextMenu(t){const e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(i,s,r,o,a)=>{i.onMagnetContextMenu(s,r,o,a)})}onLabelMouseDown(t){const e=t.currentTarget,i=this.findView(e);if(i){const s=this.normalizeEvent(t);if(this.guard(s,i))return;const r=this.graph.snapToGrid(s.clientX,s.clientY);i.onLabelMouseDown(s,r.x,r.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}X6([Dt.dispose()],ni.prototype,"dispose",null);(function(n){const t=`${Ln.prefixCls}-graph`;n.markup=[{ns:je.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:je.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:je.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":je.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}];function e(i){const s=i.cloneNode();return i.childNodes.forEach(r=>s.appendChild(r)),()=>{for(Qa(i);i.attributes.length>0;)i.removeAttribute(i.attributes[0].name);for(let r=0,o=s.attributes.length;r<o;r+=1){const a=s.attributes[r];i.setAttribute(a.name,a.value)}s.childNodes.forEach(r=>i.appendChild(r))}}n.snapshoot=e})(ni||(ni={}));(function(n){const t=Ln.prefixCls;n.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})(ni||(ni={}));const K6=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class He extends cn{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(t){super(),this.graph=t,this.init()}init(){}}var J6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class md extends He{init(){Sr("core",K6)}dispose(){Pr("core")}}J6([md.dispose()],md.prototype,"dispose",null);var Z6=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e},za;(function(n){function t(e){const{grid:i,panning:s,mousewheel:r,embedding:o}=e,a=Z6(e,["grid","panning","mousewheel","embedding"]),l=e.container;if(l!=null)a.width==null&&(a.width=l.clientWidth),a.height==null&&(a.height=l.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const c=xe({},n.defaults,a),u={size:10,visible:!1};return typeof i=="number"?c.grid={size:i,visible:!1}:typeof i=="boolean"?c.grid=Object.assign(Object.assign({},u),{visible:i}):c.grid=Object.assign(Object.assign({},u),i),["panning","mousewheel","embedding"].forEach(h=>{const f=e[h];typeof f=="boolean"?c[h].enabled=f:c[h]=Object.assign(Object.assign({},c[h]),f)}),c}n.get=t})(za||(za={}));(function(n){n.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Ln.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Ln.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:t,sourceView:e,targetView:i}){return(t==="target"?i:e)!=null},createEdge(){return new Sw}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}})(za||(za={}));var Q6=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},t5=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class jf extends He{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();const i=this.graph.matrix(),s=this.getInstance(),r=Array.isArray(t)?t:[t];this.patterns.forEach((l,c)=>{const u=`pattern_${c}`,d=i.a||1,h=i.d||1,{update:f,markup:g}=l,m=t5(l,["update","markup"]),p=Object.assign(Object.assign(Object.assign({},m),r[c]),{sx:d,sy:h,ox:i.e||0,oy:i.f||0,width:e*d,height:e*h});s.has(u)||s.add(u,Et.create("pattern",{id:u,patternUnits:"userSpaceOnUse"},Et.createVectors(g)).node);const v=s.get(u);typeof f=="function"&&f(v.childNodes[0],p);let b=p.ox%p.width;b<0&&(b+=p.width);let y=p.oy%p.height;y<0&&(y+=p.height),Vt(v,{x:b,y,width:p.width,height:p.height})});const o=new XMLSerializer().serializeToString(s.root),a=`url(data:image/svg+xml;base64,${btoa(o)})`;this.elem.style.backgroundImage=a}getInstance(){return this.instance||(this.instance=new ys),this.instance}resolveGrid(t){if(!t)return[];const e=t.type;if(e==null)return[Object.assign(Object.assign({},ys.presets.dot),t.args)];const i=ys.registry.get(e);if(i){let s=t.args||[];return Array.isArray(s)||(s=[s]),Array.isArray(i)?i.map((r,o)=>Object.assign(Object.assign({},r),s[o])):[Object.assign(Object.assign({},i),s[0])]}return ys.registry.onNotFound(e)}dispose(){this.stopListening(),this.clear()}}Q6([He.dispose()],jf.prototype,"dispose",null);class Pw extends He{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),Fe(this.viewportMatrix)}setMatrix(t){const e=Fe(t),i=Lo(e);this.viewport.setAttribute("transform",i),this.viewportMatrix=e,this.viewportTransformString=i}resize(t,e){let i=t===void 0?this.options.width:t,s=e===void 0?this.options.height:e;this.options.width=i,this.options.height=s,typeof i=="number"&&(i=Math.round(i)),typeof s=="number"&&(s=Math.round(s)),this.container.style.width=i==null?"":`${i}px`,this.container.style.height=s==null?"":`${s}px`;const r=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},r)),this}getComputedSize(){let t=this.options.width,e=this.options.height;return xm(t)||(t=this.container.clientWidth),xm(e)||(e=this.container.clientHeight),{width:t,height:e}}getScale(){return Kz(this.getMatrix())}scale(t,e=t,i=0,s=0){if(t=this.clampScale(t),e=this.clampScale(e),i||s){const o=this.getTranslation(),a=o.tx-i*(t-1),l=o.ty-s*(e-1);(a!==o.tx||l!==o.ty)&&this.translate(a,l)}const r=this.getMatrix();return r.a=t,r.d=e,this.setMatrix(r),this.graph.trigger("scale",{sx:t,sy:e,ox:i,oy:s}),this}clampScale(t){const e=this.graph.options.scaling;return dn(t,e.min||.01,e.max||16)}getZoom(){return this.getScale().sx}zoom(t,e){e=e||{};let i=t,s=t;const r=this.getScale(),o=this.getComputedSize();let a=o.width/2,l=o.height/2;if(e.absolute||(i+=r.sx,s+=r.sy),e.scaleGrid&&(i=Math.round(i/e.scaleGrid)*e.scaleGrid,s=Math.round(s/e.scaleGrid)*e.scaleGrid),e.maxScale&&(i=Math.min(e.maxScale,i),s=Math.min(e.maxScale,s)),e.minScale&&(i=Math.max(e.minScale,i),s=Math.max(e.minScale,s)),e.center&&(a=e.center.x,l=e.center.y),i=this.clampScale(i),s=this.clampScale(s),a||l){const c=this.getTranslation(),u=a-(a-c.tx)*(i/r.sx),d=l-(l-c.ty)*(s/r.sy);(u!==c.tx||d!==c.ty)&&this.translate(u,d)}return this.scale(i,s),this}getRotation(){return Jz(this.getMatrix())}rotate(t,e,i){if(e==null||i==null){const r=Yt.getBBox(this.stage);e=r.width/2,i=r.height/2}const s=this.getMatrix().translate(e,i).rotate(t).translate(-e,-i);return this.setMatrix(s),this}getTranslation(){return Zz(this.getMatrix())}translate(t,e){const i=this.getMatrix();i.e=t||0,i.f=e||0,this.setMatrix(i);const s=this.getTranslation();return this.options.x=s.tx,this.options.y=s.ty,this.graph.trigger("translate",Object.assign({},s)),this}setOrigin(t,e){return this.translate(t||0,e||0)}fitToContent(t,e,i,s){if(typeof t=="object"){const y=t;t=y.gridWidth||1,e=y.gridHeight||1,i=y.padding||0,s=y}else t=t||1,e=e||1,i=i||0,s==null&&(s={});const r=yi(i),o=s.border||0,a=s.contentArea?nt.create(s.contentArea):this.getContentArea(s);o>0&&a.inflate(o);const l=this.getScale(),c=this.getTranslation(),u=l.sx,d=l.sy;a.x*=u,a.y*=d,a.width*=u,a.height*=d;let h=Math.max(Math.ceil((a.width+a.x)/t),1)*t,f=Math.max(Math.ceil((a.height+a.y)/e),1)*e,g=0,m=0;(s.allowNewOrigin==="negative"&&a.x<0||s.allowNewOrigin==="positive"&&a.x>=0||s.allowNewOrigin==="any")&&(g=Math.ceil(-a.x/t)*t,g+=r.left,h+=g),(s.allowNewOrigin==="negative"&&a.y<0||s.allowNewOrigin==="positive"&&a.y>=0||s.allowNewOrigin==="any")&&(m=Math.ceil(-a.y/e)*e,m+=r.top,f+=m),h+=r.right,f+=r.bottom,h=Math.max(h,s.minWidth||0),f=Math.max(f,s.minHeight||0),h=Math.min(h,s.maxWidth||Number.MAX_SAFE_INTEGER),f=Math.min(f,s.maxHeight||Number.MAX_SAFE_INTEGER);const p=this.getComputedSize(),v=h!==p.width||f!==p.height;return(g!==c.tx||m!==c.ty)&&this.translate(g,m),v&&this.resize(h,f),new nt(-g/u,-m/d,h/u,f/d)}scaleContentToFit(t={}){this.scaleContentToFitImpl(t)}scaleContentToFitImpl(t={},e=!0){let i,s;if(t.contentArea){const v=t.contentArea;i=this.graph.localToGraph(v),s=$.create(v)}else i=this.getContentBBox(t),s=this.graph.graphToLocal(i);if(!i.width||!i.height)return;const r=yi(t.padding),o=t.minScale||0,a=t.maxScale||Number.MAX_SAFE_INTEGER,l=t.minScaleX||o,c=t.maxScaleX||a,u=t.minScaleY||o,d=t.maxScaleY||a;let h;if(t.viewportArea)h=t.viewportArea;else{const v=this.getComputedSize(),b=this.getTranslation();h={x:b.tx,y:b.ty,width:v.width,height:v.height}}h=nt.create(h).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const f=this.getScale();let g=h.width/i.width*f.sx,m=h.height/i.height*f.sy;t.preserveAspectRatio!==!1&&(g=m=Math.min(g,m));const p=t.scaleGrid;if(p&&(g=p*Math.floor(g/p),m=p*Math.floor(m/p)),g=dn(g,l,c),m=dn(m,u,d),this.scale(g,m),e){const v=this.options,b=h.x-s.x*g-v.x,y=h.y-s.y*m-v.y;this.translate(b,y)}}getContentArea(t={}){return t.useCellGeometry!==!1?this.model.getAllCellsBBox()||new nt:Yt.getBBox(this.stage)}getContentBBox(t={}){return this.graph.localToGraph(this.getContentArea(t))}getGraphArea(){const t=nt.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}zoomToRect(t,e={}){const i=nt.create(t),s=this.graph;e.contentArea=i,e.viewportArea==null&&(e.viewportArea={x:s.options.x,y:s.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);const r=i.getCenter();return this.centerPoint(r.x,r.y),this}zoomToFit(t={}){return this.zoomToRect(this.getContentArea(t),t)}centerPoint(t,e){const i=this.getComputedSize(),s=this.getScale(),r=this.getTranslation(),o=i.width/2,a=i.height/2;t=typeof t=="number"?t:o,e=typeof e=="number"?e:a,t=o-t*s.sx,e=a-e*s.sy,(r.tx!==t||r.ty!==e)&&this.translate(t,e)}centerContent(t){const i=this.graph.getContentArea(t).getCenter();this.centerPoint(i.x,i.y)}centerCell(t){return this.positionCell(t,"center")}positionPoint(t,e,i){const s=this.getComputedSize();e=wn(e,Math.max(0,s.width)),e<0&&(e=s.width+e),i=wn(i,Math.max(0,s.height)),i<0&&(i=s.height+i);const r=this.getTranslation(),o=this.getScale(),a=e-t.x*o.sx,l=i-t.y*o.sy;(r.tx!==a||r.ty!==l)&&this.translate(a,l)}positionRect(t,e){const i=nt.create(t);switch(e){case"center":return this.positionPoint(i.getCenter(),"50%","50%");case"top":return this.positionPoint(i.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%");case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(i.getTopLeft(),0,0);default:return this}}positionCell(t,e){const i=t.getBBox();return this.positionRect(i,e)}positionContent(t,e){const i=this.graph.getContentArea(e);return this.positionRect(i,t)}}var e5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Mu extends He{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(t={}){let e=t.size||"auto auto",i=t.position||"center";const s=this.graph.transform.getScale(),r=this.graph.translate();if(typeof i=="object"){const o=r.tx+s.sx*(i.x||0),a=r.ty+s.sy*(i.y||0);i=`${o}px ${a}px`}typeof e=="object"&&(e=nt.fromSize(e).scale(s.sx,s.sy),e=`${e.width}px ${e.height}px`),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=i}drawBackgroundImage(t,e={}){if(!(t instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const i=this.optionsCache;if(i&&i.image!==e.image)return;let s;const r=e.opacity,o=e.size;let a=e.repeat||"no-repeat";const l=Na.registry.get(a);if(typeof l=="function"){const u=e.quality||1;t.width*=u,t.height*=u;const d=l(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");s=d.toDataURL("image/png"),e.repeat&&a!==e.repeat?a=e.repeat:a="repeat",typeof o=="object"?(o.width*=d.width/t.width,o.height*=d.height/t.height):o===void 0&&(e.size={width:d.width/u,height:d.height/u})}else s=t.src,o===void 0&&(e.size={width:t.width,height:t.height});i!=null&&typeof e.size=="object"&&e.image===i.image&&e.repeat===i.repeat&&e.quality===i.quality&&(i.size=ed(e.size));const c=this.elem.style;c.backgroundImage=`url(${s})`,c.backgroundRepeat=a,c.opacity=r==null||r>=1?"":`${r}`,this.updateBackgroundImage(e)}updateBackgroundColor(t){this.elem.style.backgroundColor=t||""}updateBackgroundOptions(t){this.graph.options.background=t}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(t){const e=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(e.color),e.image){this.optionsCache=ed(e);const i=document.createElement("img");i.onload=()=>this.drawBackgroundImage(i,t),i.setAttribute("crossorigin","anonymous"),i.src=e.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}e5([He.dispose()],Mu.prototype,"dispose",null);var n5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class zf extends He{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.onSpaceKeyDown=this.onSpaceKeyDown.bind(this),this.onSpaceKeyUp=this.onSpaceKeyUp.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),Qt.on(this.graph.container,"mousedown",this.onRightMouseDown),Qt.on(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle=new Ax(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),Qt.off(this.graph.container,"mousedown",this.onRightMouseDown),Qt.off(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(t,e){return t.spaceKey=this.isSpaceKeyPressed,this.pannable&&Wi.isMatch(t,this.widgetOptions.modifiers,e)}startPanning(t){const e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),Qt.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Qt.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.view.normalizeEvent(t),i=e.clientX-this.clientX,s=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(i,s)}stopPanning(t){this.panning=!1,this.updateClassName(),Qt.off(document.body,".panning"),Qt.off(window,".panning")}updateClassName(){const t=this.view.container,e=this.view.prefixClassName("graph-panning"),i=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(bt(t,e),Ce(t,i)):(Ce(t,e),bt(t,i)):(Ce(t,e),Ce(t,i))}onMouseDown({e:t}){if(!this.allowBlankMouseDown(t))return;const e=this.graph.getPlugin("selection"),i=e&&e.allowRubberband(t,!0);(this.allowPanning(t,!0)||this.allowPanning(t)&&!i)&&this.startPanning(t)}onRightMouseDown(t){const e=this.widgetOptions.eventTypes;e!=null&&e.includes("rightMouseDown")&&t.button===2&&this.allowPanning(t,!0)&&this.startPanning(t)}onMouseWheel(t,e,i){this.graph.translateBy(-e,-i)}onSpaceKeyDown(t){t.which===32&&(this.isSpaceKeyPressed=!0)}onSpaceKeyUp(t){t.which===32&&(this.isSpaceKeyPressed=!1)}allowBlankMouseDown(t){const e=this.widgetOptions.eventTypes;return(e==null?void 0:e.includes("leftMouseDown"))&&t.button===0||(e==null?void 0:e.includes("mouseWheelDown"))&&t.button===1}allowMouseWheel(t){var e;return this.pannable&&!t.ctrlKey&&((e=this.widgetOptions.eventTypes)===null||e===void 0?void 0:e.includes("mouseWheel"))}autoPanning(t,e){const s=this.graph.getGraphArea();let r=0,o=0;t<=s.left+10&&(r=-10),e<=s.top+10&&(o=-10),t>=s.right-10&&(r=10),e>=s.bottom-10&&(o=10),(r!==0||o!==0)&&this.graph.translateBy(-r,-o)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}n5([He.dispose()],zf.prototype,"dispose",null);var i5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Vf extends He{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new Ax(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(t){const e=this.widgetOptions.guard;return(e==null||e(t))&&Wi.isMatch(t,this.widgetOptions.modifiers)}onMouseWheel(t){const e=this.widgetOptions.guard;if((e==null||e(t))&&Wi.isMatch(t,this.widgetOptions.modifiers)){const i=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*i*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/i)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const r=this.currentScale;let o=this.graph.transform.clampScale(r*this.cumulatedFactor);const a=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,l=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(o=dn(o,a,l),o!==r)if(this.widgetOptions.zoomAtMousePosition){const u=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(o,{absolute:!0,center:u.clone()})}else this.graph.zoom(o,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}i5([cn.dispose()],Vf.prototype,"dispose",null);var s5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Ew extends He{init(){this.resetRenderArea=Zj(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}dispose(){this.stopListening()}}s5([He.dispose()],Ew.prototype,"dispose",null);class r5{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(t){if(t.priority&Ii.PRIOR)t.cb();else{const e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const t=this.getCurrentTime();let e;for(;(e=this.queue.shift())&&(e.cb(),!(this.getCurrentTime()-t>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let t;for(;t=this.queue.shift();)try{t.cb()}catch(e){console.log(e)}this.isFlushing=!1}findInsertionIndex(t){let e=0,i=this.queue.length,s=i-1;const r=t.priority;for(;e<=s;){const o=(s-e>>1)+e;r<=this.queue[o].priority?e=o+1:(i=o,s=o-1)}return i}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var Ii;(function(n){n[n.Update=2]="Update",n[n.RenderEdge=4]="RenderEdge",n[n.RenderNode=8]="RenderNode",n[n.PRIOR=1048576]="PRIOR"})(Ii||(Ii={}));var o5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Ie extends cn{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(t){super(),this.views={},this.willRemoveViews={},this.queue=new r5,this.graph=t,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:t}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const e=this.model.getCells();this.renderViews(e,Object.assign(Object.assign({},t),{queue:e.map(i=>i.id)}))}onCellAdded({cell:t,options:e}){this.renderViews([t],e)}onCellRemoved({cell:t}){this.removeViews([t])}onCellZIndexChanged({cell:t,options:e}){const i=this.views[t.id];i&&this.requestViewUpdate(i.view,Ie.FLAG_INSERT,e,Ii.Update,!0)}onCellVisibleChanged({cell:t,current:e}){this.toggleVisible(t,!!e)}requestViewUpdate(t,e,i={},s=Ii.Update,r=!0){const o=t.cell.id,a=this.views[o];if(!a)return;a.flag=e,a.options=i,(t.hasAction(e,["translate","resize","rotate"])||i.async===!1)&&(s=Ii.PRIOR,r=!1),this.queue.queueJob({id:o,priority:s,cb:()=>{this.renderViewInArea(t,e,i);const u=i.queue;if(u){const d=u.indexOf(t.cell.id);d>=0&&u.splice(d,1),u.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(t).forEach(u=>{this.requestViewUpdate(u.view,u.flag,i,s,!1)}),r&&this.flush()}setRenderArea(t){this.renderArea=t,this.flushWaitingViews()}isViewMounted(t){if(t==null)return!1;const e=this.views[t.cell.id];return e?e.state===Ie.ViewState.MOUNTED:!1}renderViews(t,e={}){t.sort((i,s)=>i.isNode()&&s.isEdge()?-1:0),t.forEach(i=>{const s=i.id,r=this.views;let o=0,a=r[s];if(a)o=Ie.FLAG_INSERT;else{const l=this.createCellView(i);l&&(l.graph=this.graph,o=Ie.FLAG_INSERT|l.getBootstrapFlag(),a={view:l,flag:o,options:e,state:Ie.ViewState.CREATED},this.views[s]=a)}a&&this.requestViewUpdate(a.view,o,e,this.getRenderPriority(a.view),!1)}),this.flush()}renderViewInArea(t,e,i={}){const s=t.cell,r=s.id,o=this.views[r];if(!o)return;let a=0;this.isUpdatable(t)?(a=this.updateView(t,e,i),o.flag=a):o.state===Ie.ViewState.MOUNTED?(a=this.updateView(t,e,i),o.flag=a):o.state=Ie.ViewState.WAITING,a&&s.isEdge()&&!(a&t.getFlag(["source","target"]))&&this.queue.queueJob({id:r,priority:Ii.RenderEdge,cb:()=>{this.updateView(t,e,i)}})}removeViews(t){t.forEach(e=>{const i=e.id,s=this.views[i];s&&(this.willRemoveViews[i]=s,delete this.views[i],this.queue.queueJob({id:i,priority:this.getRenderPriority(s.view),cb:()=>{this.removeView(s.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(t=>{if(t&&t.state===Ie.ViewState.WAITING){const{view:e,flag:i,options:s}=t;this.requestViewUpdate(e,i,s,this.getRenderPriority(e),!1)}}),this.flush()}updateView(t,e,i={}){if(t==null)return 0;if(Ae.isCellView(t)){if(e&Ie.FLAG_REMOVE)return this.removeView(t.cell),0;e&Ie.FLAG_INSERT&&(this.insertView(t),e^=Ie.FLAG_INSERT)}return e?t.confirmUpdate(e,i):0}insertView(t){const e=this.views[t.cell.id];if(e){const i=t.cell.getZIndex(),s=this.addZPivot(i);this.container.insertBefore(t.container,s),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=Ie.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(t=>{t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(t){const e=t.cell,i=this.willRemoveViews[e.id];i&&t&&(i.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}toggleVisible(t,e){const i=this.model.getConnectedEdges(t);for(let r=0,o=i.length;r<o;r+=1){const a=i[r];if(e){const l=a.getSourceCell(),c=a.getTargetCell();if(l&&!l.isVisible()||c&&!c.isVisible())continue;this.toggleVisible(a,!0)}else this.toggleVisible(a,!1)}const s=this.views[t.id];s&&Ht(s.view.container,{display:e?"unset":"none"})}addZPivot(t=0){this.zPivots==null&&(this.zPivots={});const e=this.zPivots;let i=e[t];if(i)return i;i=e[t]=document.createComment(`z-index:${t+1}`);let s=-1/0;for(const o in e){const a=+o;a<t&&a>s&&(s=a,t-1)}const r=this.container;if(s!==-1/0){const o=e[s];r.insertBefore(i,o.nextSibling)}else r.insertBefore(i,r.firstChild);return i}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(t){const e={graph:this.graph},i=this.graph.options.createCellView;if(i){const r=yt(i,this.graph,t);if(r)return new r(t,e);if(r===null)return null}const s=t.view;if(s!=null&&typeof s=="string"){const r=Ae.registry.get(s);return r?new r(t,e):Ae.registry.onNotFound(s)}return t.isNode()?new Sn(t,e):t.isEdge()?new qi(t,e):null}getEffectedEdges(t){const e=[],i=t.cell,s=this.model.getConnectedEdges(i);for(let r=0,o=s.length;r<o;r+=1){const a=s[r],l=this.views[a.id];if(!l)continue;const c=l.view;if(!this.isViewMounted(c))continue;const u=["update"];a.getTargetCell()===i&&u.push("target"),a.getSourceCell()===i&&u.push("source"),e.push({id:a.id,view:c,flag:c.getFlag(u)})}return e}isUpdatable(t){if(t.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(t.cell.getBBox()):!0;if(t.isEdgeView()){const e=t.cell,i=e.getSourceCell(),s=e.getTargetCell();if(this.renderArea&&i&&s)return this.renderArea.isIntersectWithRect(i.getBBox())||this.renderArea.isIntersectWithRect(s.getBBox())}return!0}getRenderPriority(t){return t.cell.isNode()?Ii.RenderNode:Ii.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(t=>{this.views[t].view.dispose()}),this.views={}}}o5([cn.dispose()],Ie.prototype,"dispose",null);(function(n){n.FLAG_INSERT=1<<30,n.FLAG_REMOVE=1<<29,n.FLAG_RENDER=(1<<26)-1})(Ie||(Ie={}));(function(n){(function(t){t[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITING=2]="WAITING"})(n.ViewState||(n.ViewState={}))})(Ie||(Ie={}));var a5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Ff extends He{constructor(){super(...arguments),this.schedule=new Ie(this.graph)}requestViewUpdate(t,e,i={}){this.schedule.requestViewUpdate(t,e,i)}isViewMounted(t){return this.schedule.isViewMounted(t)}setRenderArea(t){this.schedule.setRenderArea(t)}findViewByElem(t){if(t==null)return null;const e=this.options.container,i=typeof t=="string"?e.querySelector(t):t instanceof Element?t:t[0];if(i){const s=this.graph.view.findAttr("data-cell-id",i);if(s){const r=this.schedule.views;if(r[s])return r[s].view}}return null}findViewByCell(t){if(t==null)return null;const e=Nt.isCell(t)?t.id:t,i=this.schedule.views;return i[e]?i[e].view:null}findViewsFromPoint(t){const e={x:t.x,y:t.y};return this.model.getCells().map(i=>this.findViewByCell(i)).filter(i=>i!=null?Yt.getBBox(i.container,{target:this.view.stage}).containsPoint(e):!1)}findEdgeViewsFromPoint(t,e=5){return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i!=null){const s=i.getClosestPoint(t);if(s)return s.distance(t)<=e}return!1})}findViewsInArea(t,e={}){const i=nt.create(t);return this.model.getCells().map(s=>this.findViewByCell(s)).filter(s=>{if(s){if(e.nodeOnly&&!s.isNodeView())return!1;const r=Yt.getBBox(s.container,{target:this.view.stage});return r.width===0?r.inflate(1,0):r.height===0&&r.inflate(0,1),e.strict?i.containsRect(r):i.isIntersectWithRect(r)}return!1})}dispose(){this.schedule.dispose()}}a5([He.dispose()],Ff.prototype,"dispose",null);var Xm=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Ow extends He{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(t){return this.svg.getElementById(t)!=null}filter(t){let e=t.id;const i=t.name;if(e||(e=`filter-${i}-${this.cid}-${fh(JSON.stringify(t))}`),!this.isDefined(e)){const s=co.registry.get(i);if(s==null)return co.registry.onNotFound(i);const r=s(t.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});Et.create(ee.sanitize(r),o).appendTo(this.defs)}return e}gradient(t){let e=t.id;const i=t.type;if(e||(e=`gradient-${i}-${this.cid}-${fh(JSON.stringify(t))}`),!this.isDefined(e)){const r=t.stops.map(l=>{const c=l.opacity!=null&&Number.isFinite(l.opacity)?l.opacity:1;return`<stop offset="${l.offset}" stop-color="${l.color}" stop-opacity="${c}"/>`}),o=`<${i}>${r.join("")}</${i}>`,a=Object.assign({id:e},t.attrs);Et.create(o,a).appendTo(this.defs)}return e}marker(t){const{id:e,refX:i,refY:s,markerUnits:r,markerOrient:o,tagName:a,children:l}=t,c=Xm(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let u=e;if(u||(u=`marker-${this.cid}-${fh(JSON.stringify(t))}`),!this.isDefined(u)){a!=="path"&&delete c.d;const d=Et.create("marker",{refX:i,refY:s,id:u,overflow:"visible",orient:o??"auto",markerUnits:r||"userSpaceOnUse"},l?l.map(h=>{var{tagName:f}=h,g=Xm(h,["tagName"]);return Et.create(`${f}`||"path",_a(Object.assign(Object.assign({},c),g)))}):[Et.create(a||"path",_a(c))]);this.defs.appendChild(d.node)}return u}remove(t){const e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}class Aw extends He{getClientMatrix(){return Fe(this.view.stage.getScreenCTM())}getClientOffset(){const t=this.view.svg.getBoundingClientRect();return new $(t.left,t.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(t,e){return(typeof t=="number"?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(t,e){const i=$.create(t,e);return Yt.transformPoint(i,this.graph.matrix())}localToClientPoint(t,e){const i=$.create(t,e);return Yt.transformPoint(i,this.getClientMatrix())}localToPagePoint(t,e){return(typeof t=="number"?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}localToGraphRect(t,e,i,s){const r=nt.create(t,e,i,s);return Yt.transformRectangle(r,this.graph.matrix())}localToClientRect(t,e,i,s){const r=nt.create(t,e,i,s);return Yt.transformRectangle(r,this.getClientMatrix())}localToPageRect(t,e,i,s){return(typeof t=="number"?this.localToGraphRect(t,e,i,s):this.localToGraphRect(t)).translate(this.getPageOffset())}graphToLocalPoint(t,e){const i=$.create(t,e);return Yt.transformPoint(i,this.graph.matrix().inverse())}clientToLocalPoint(t,e){const i=$.create(t,e);return Yt.transformPoint(i,this.getClientMatrix().inverse())}clientToGraphPoint(t,e){const i=$.create(t,e);return Yt.transformPoint(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(t,e){const s=$.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(s)}graphToLocalRect(t,e,i,s){const r=nt.create(t,e,i,s);return Yt.transformRectangle(r,this.graph.matrix().inverse())}clientToLocalRect(t,e,i,s){const r=nt.create(t,e,i,s);return Yt.transformRectangle(r,this.getClientMatrix().inverse())}clientToGraphRect(t,e,i,s){const r=nt.create(t,e,i,s);return Yt.transformRectangle(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(t,e,i,s){const r=nt.create(t,e,i,s),o=this.getPageOffset();return r.x-=o.x,r.y-=o.y,this.graphToLocalRect(r)}}var l5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class _c extends He{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:t,magnet:e,options:i={}}){const s=this.resolveHighlighter(i);if(!s)return;const r=this.getHighlighterId(e,s);if(!this.highlights[r]){const o=s.highlighter;o.highlight(t,e,Object.assign({},s.args)),this.highlights[r]={cellView:t,magnet:e,highlighter:o,args:s.args}}}onCellUnhighlight({magnet:t,options:e={}}){const i=this.resolveHighlighter(e);if(!i)return;const s=this.getHighlighterId(t,i);this.unhighlight(s)}resolveHighlighter(t){const e=this.options;let i=t.highlighter;if(i==null){const a=t.type;i=a&&e.highlighting[a]||e.highlighting.default}if(i==null)return null;const s=typeof i=="string"?{name:i}:i,r=s.name,o=zi.registry.get(r);return o==null?zi.registry.onNotFound(r):(zi.check(r,o),{name:r,highlighter:o,args:s.args||{}})}getHighlighterId(t,e){return Mf(t),e.name+t.id+JSON.stringify(e.args)}unhighlight(t){const e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}dispose(){Object.keys(this.highlights).forEach(t=>this.unhighlight(t)),this.stopListening()}}l5([_c.dispose()],_c.prototype,"dispose",null);var c5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Tw extends He{getScroller(){const t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}getContainer(){const t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const t=this.options.autoResize;if(t)return typeof t=="boolean"?this.getContainer():t}init(){if(this.options.autoResize){const e=this.getSensorTarget();e&&Cc.bind(e,()=>{const i=e.offsetWidth,s=e.offsetHeight;this.resize(i,s)})}}resize(t,e){const i=this.getScroller();i?i.resize(t,e):this.graph.transform.resize(t,e)}dispose(){Cc.clear(this.graph.container)}}c5([He.dispose()],Tw.prototype,"dispose",null);var u5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class tt extends pe{get container(){return this.options.container}get[Symbol.toStringTag](){return tt.toStringTag}constructor(t){super(),this.installedPlugins=new Set,this.options=za.get(t),this.css=new md(this),this.view=new ni(this),this.defs=new Ow(this),this.coord=new Aw(this),this.transform=new Pw(this),this.highlight=new _c(this),this.grid=new jf(this),this.background=new Mu(this),this.options.model?this.model=this.options.model:(this.model=new fn,this.model.graph=this),this.renderer=new Ff(this),this.panning=new zf(this),this.mousewheel=new Vf(this),this.virtualRender=new Ew(this),this.size=new Tw(this)}isNode(t){return t.isNode()}isEdge(t){return t.isEdge()}resetCells(t,e={}){return this.model.resetCells(t,e),this}clearCells(t={}){return this.model.clear(t),this}toJSON(t={}){return this.model.toJSON(t)}parseJSON(t){return this.model.parseJSON(t)}fromJSON(t,e={}){return this.model.fromJSON(t,e),this}getCellById(t){return this.model.getCell(t)}addNode(t,e={}){return this.model.addNode(t,e)}addNodes(t,e={}){return this.addCell(t.map(i=>me.isNode(i)?i:this.createNode(i)),e)}createNode(t){return this.model.createNode(t)}removeNode(t,e={}){return this.model.removeCell(t,e)}addEdge(t,e={}){return this.model.addEdge(t,e)}addEdges(t,e={}){return this.addCell(t.map(i=>Pe.isEdge(i)?i:this.createEdge(i)),e)}removeEdge(t,e={}){return this.model.removeCell(t,e)}createEdge(t){return this.model.createEdge(t)}addCell(t,e={}){return this.model.addCell(t,e),this}removeCell(t,e={}){return this.model.removeCell(t,e)}removeCells(t,e={}){return this.model.removeCells(t,e)}removeConnectedEdges(t,e={}){return this.model.removeConnectedEdges(t,e)}disconnectConnectedEdges(t,e={}){return this.model.disconnectConnectedEdges(t,e),this}hasCell(t){return this.model.has(t)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(t){return this.model.getOutgoingEdges(t)}getIncomingEdges(t){return this.model.getIncomingEdges(t)}getConnectedEdges(t,e={}){return this.model.getConnectedEdges(t,e)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(t){return this.model.isRoot(t)}isLeafNode(t){return this.model.isLeaf(t)}getNeighbors(t,e={}){return this.model.getNeighbors(t,e)}isNeighbor(t,e,i={}){return this.model.isNeighbor(t,e,i)}getSuccessors(t,e={}){return this.model.getSuccessors(t,e)}isSuccessor(t,e,i={}){return this.model.isSuccessor(t,e,i)}getPredecessors(t,e={}){return this.model.getPredecessors(t,e)}isPredecessor(t,e,i={}){return this.model.isPredecessor(t,e,i)}getCommonAncestor(...t){return this.model.getCommonAncestor(...t)}getSubGraph(t,e={}){return this.model.getSubGraph(t,e)}cloneSubGraph(t,e={}){return this.model.cloneSubGraph(t,e)}cloneCells(t){return this.model.cloneCells(t)}getNodesFromPoint(t,e){return this.model.getNodesFromPoint(t,e)}getNodesInArea(t,e,i,s,r){return this.model.getNodesInArea(t,e,i,s,r)}getNodesUnderNode(t,e={}){return this.model.getNodesUnderNode(t,e)}searchCell(t,e,i={}){return this.model.search(t,e,i),this}getShortestPath(t,e,i={}){return this.model.getShortestPath(t,e,i)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(t,e={}){return this.model.getCellsBBox(t,e)}startBatch(t,e={}){this.model.startBatch(t,e)}stopBatch(t,e={}){this.model.stopBatch(t,e)}batchUpdate(t,e,i){const s=typeof t=="string"?t:"update",r=typeof t=="string"?e:t,o=typeof e=="function"?i:e;this.startBatch(s,o);const a=r();return this.stopBatch(s,o),a}updateCellId(t,e){return this.model.updateCellId(t,e)}findView(t){return Nt.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}findViews(t){return nt.isRectangleLike(t)?this.findViewsInArea(t):$.isPointLike(t)?this.findViewsFromPoint(t):[]}findViewByCell(t){return this.renderer.findViewByCell(t)}findViewByElem(t){return this.renderer.findViewByElem(t)}findViewsFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(i)}findViewsInArea(t,e,i,s,r){const o=typeof t=="number"?{x:t,y:e,width:i,height:s}:t,a=typeof t=="number"?r:e;return this.renderer.findViewsInArea(o,a)}matrix(t){return typeof t>"u"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}resize(t,e){const i=this.getPlugin("scroller");return i?i.resize(t,e):this.transform.resize(t,e),this}scale(t,e=t,i=0,s=0){return typeof t>"u"?this.transform.getScale():(this.transform.scale(t,e,i,s),this)}zoom(t,e){const i=this.getPlugin("scroller");if(i){if(typeof t>"u")return i.zoom();i.zoom(t,e)}else{if(typeof t>"u")return this.transform.getZoom();this.transform.zoom(t,e)}return this}zoomTo(t,e={}){const i=this.getPlugin("scroller");return i?i.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){const i=this.getPlugin("scroller");return i?i.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}zoomToFit(t={}){const e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}rotate(t,e,i){return typeof t>"u"?this.transform.getRotation():(this.transform.rotate(t,e,i),this)}translate(t,e){return typeof t>"u"?this.transform.getTranslation():(this.transform.translate(t,e),this)}translateBy(t,e){const i=this.translate(),s=i.tx+t,r=i.ty+e;return this.translate(s,r)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(t={}){return this.transform.getContentArea(t)}getContentBBox(t={}){return this.transform.getContentBBox(t)}fitToContent(t,e,i,s){return this.transform.fitToContent(t,e,i,s)}scaleContentToFit(t={}){return this.transform.scaleContentToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,i){const s=this.getPlugin("scroller");return s?s.centerPoint(t,e,i):this.transform.centerPoint(t,e),this}centerContent(t){const e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}centerCell(t,e){const i=this.getPlugin("scroller");return i?i.centerCell(t,e):this.transform.centerCell(t),this}positionPoint(t,e,i,s={}){const r=this.getPlugin("scroller");return r?r.positionPoint(t,e,i,s):this.transform.positionPoint(t,e,i),this}positionRect(t,e,i){const s=this.getPlugin("scroller");return s?s.positionRect(t,e,i):this.transform.positionRect(t,e),this}positionCell(t,e,i){const s=this.getPlugin("scroller");return s?s.positionCell(t,e,i):this.transform.positionCell(t,e),this}positionContent(t,e){const i=this.getPlugin("scroller");return i?i.positionContent(t,e):this.transform.positionContent(t,e),this}snapToGrid(t,e){return this.coord.snapToGrid(t,e)}pageToLocal(t,e,i,s){return nt.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.pageToLocalRect(t,e,i,s):this.coord.pageToLocalPoint(t,e)}localToPage(t,e,i,s){return nt.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.localToPageRect(t,e,i,s):this.coord.localToPagePoint(t,e)}clientToLocal(t,e,i,s){return nt.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.clientToLocalRect(t,e,i,s):this.coord.clientToLocalPoint(t,e)}localToClient(t,e,i,s){return nt.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.localToClientRect(t,e,i,s):this.coord.localToClientPoint(t,e)}localToGraph(t,e,i,s){return nt.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.localToGraphRect(t,e,i,s):this.coord.localToGraphPoint(t,e)}graphToLocal(t,e,i,s){return nt.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.graphToLocalRect(t,e,i,s):this.coord.graphToLocalPoint(t,e)}clientToGraph(t,e,i,s){return nt.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof s=="number"?this.coord.clientToGraphRect(t,e,i,s):this.coord.clientToGraphPoint(t,e)}defineFilter(t){return this.defs.filter(t)}defineGradient(t){return this.defs.gradient(t)}defineMarker(t){return this.defs.marker(t)}getGridSize(){return this.grid.getGridSize()}setGridSize(t){return this.grid.setGridSize(t),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(t){return this.grid.draw(t),this}updateBackground(){return this.background.update(),this}drawBackground(t,e){const i=this.getPlugin("scroller");return i!=null&&(this.options.background==null||!e)?i.drawBackground(t,e):this.background.draw(t),this}clearBackground(t){const e=this.getPlugin("scroller");return e!=null&&(this.options.background==null||!t)?e.clearBackground(t):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}enablePanning(){const t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}disablePanning(){const t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}togglePanning(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}use(t,...e){return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init(this,...e)),this}getPlugin(t){return Array.from(this.installedPlugins).find(e=>e.name===t)}getPlugins(t){return Array.from(this.installedPlugins).filter(e=>t.includes(e.name))}enablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(s=>{var r;(r=s==null?void 0:s.enable)===null||r===void 0||r.call(s)}),this}disablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(s=>{var r;(r=s==null?void 0:s.disable)===null||r===void 0||r.call(s)}),this}isPluginEnabled(t){var e;const i=this.getPlugin(t);return(e=i==null?void 0:i.isEnabled)===null||e===void 0?void 0:e.call(i)}disposePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(s=>{s.dispose(),this.installedPlugins.delete(s)}),this}dispose(t=!0){t&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(e=>{e.dispose()})}}u5([pe.dispose()],tt.prototype,"dispose",null);(function(n){n.View=ni,n.Renderer=Ff,n.MouseWheel=Vf,n.DefsManager=Ow,n.GridManager=jf,n.CoordManager=Aw,n.TransformManager=Pw,n.HighlightManager=_c,n.BackgroundManager=Mu,n.PanningManager=zf})(tt||(tt={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag];return i==null||i===n.toStringTag}n.isGraph=t})(tt||(tt={}));(function(n){function t(e,i){const s=e instanceof HTMLElement?new n({container:e}):new n(e);return i!=null&&s.fromJSON(i),s}n.render=t})(tt||(tt={}));(function(n){n.registerNode=me.registry.register,n.registerEdge=Pe.registry.register,n.registerView=Ae.registry.register,n.registerAttr=Pi.registry.register,n.registerGrid=ys.registry.register,n.registerFilter=co.registry.register,n.registerNodeTool=fo.registry.register,n.registerEdgeTool=go.registry.register,n.registerBackground=Na.registry.register,n.registerHighlighter=zi.registry.register,n.registerPortLayout=rr.registry.register,n.registerPortLabelLayout=uo.registry.register,n.registerMarker=Ts.registry.register,n.registerRouter=xs.registry.register,n.registerConnector=or.registry.register,n.registerAnchor=po.registry.register,n.registerEdgeAnchor=mo.registry.register,n.registerConnectionPoint=bo.registry.register})(tt||(tt={}));(function(n){n.unregisterNode=me.registry.unregister,n.unregisterEdge=Pe.registry.unregister,n.unregisterView=Ae.registry.unregister,n.unregisterAttr=Pi.registry.unregister,n.unregisterGrid=ys.registry.unregister,n.unregisterFilter=co.registry.unregister,n.unregisterNodeTool=fo.registry.unregister,n.unregisterEdgeTool=go.registry.unregister,n.unregisterBackground=Na.registry.unregister,n.unregisterHighlighter=zi.registry.unregister,n.unregisterPortLayout=rr.registry.unregister,n.unregisterPortLabelLayout=uo.registry.unregister,n.unregisterMarker=Ts.registry.unregister,n.unregisterRouter=xs.registry.unregister,n.unregisterConnector=or.registry.unregister,n.unregisterAnchor=po.registry.unregister,n.unregisterEdgeAnchor=mo.registry.unregister,n.unregisterConnectionPoint=bo.registry.unregister})(tt||(tt={}));var h5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},d5=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class xo extends me{}(function(n){class t extends Sn{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:i}){const s=n.shapeMaps[this.cell.shape];if(s){const{effect:r}=s;(!r||r.includes(i))&&this.renderHTMLComponent()}}confirmUpdate(i){const s=super.confirmUpdate(i);return this.handleAction(s,t.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const i=this.selectors&&this.selectors.foContent;if(i){Qa(i);const s=n.shapeMaps[this.cell.shape];if(!s)return;let{html:r}=s;typeof r=="function"&&(r=r(this.cell)),r&&(typeof r=="string"?i.innerHTML=r:Nn(i,r))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}h5([t.dispose()],t.prototype,"dispose",null),n.View=t,function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),Sn.registry.register("html-view",e,!0)}(t=n.View||(n.View={}))})(xo||(xo={}));(function(n){n.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},ee.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),me.registry.register("html",n,!0)})(xo||(xo={}));(function(n){n.shapeMaps={};function t(e){const{shape:i,html:s,effect:r,inherit:o}=e,a=d5(e,["shape","html","effect","inherit"]);if(!i)throw new Error("should specify shape in config");n.shapeMaps[i]={html:s,effect:r},tt.registerNode(i,Object.assign({inherit:o||"html"},a),!0)}n.register=t})(xo||(xo={}));var f5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},g5=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Re extends Dt{get graph(){return this.options.graph}get model(){return this.graph.model}constructor(t){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=Re.getOptions(t),this.onUpdate=wf(this.onUpdate,200);const e=this.graph.transform.getScale();this.sx=e.sx,this.sy=e.sy;const i=this.options.width||this.graph.options.width,s=this.options.height||this.graph.options.height;this.container=document.createElement("div"),bt(this.container,this.prefixClassName(Re.containerClass)),Ht(this.container,{width:i,height:s}),this.options.pageVisible&&bt(this.container,this.prefixClassName(Re.pagedClass)),this.options.className&&bt(this.container,this.options.className);const r=this.graph.container;r.parentNode&&ka(r,this.container),this.content=document.createElement("div"),bt(this.content,this.prefixClassName(Re.contentClass)),Ht(this.content,{width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),bt(this.background,this.prefixClassName(Re.backgroundClass)),Nn(this.content,this.background),this.options.pageVisible||Nn(this.content,this.graph.view.grid),Nn(this.content,r),ji(this.content,this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new Re.Background(this),this.options.autoResize||this.update()}startListening(){const t=this.graph,e=this.model;t.on("scale",this.onScale,this),t.on("resize",this.onResize,this),t.on("before:print",this.storeScrollPosition,this),t.on("before:export",this.storeScrollPosition,this),t.on("after:print",this.restoreScrollPosition,this),t.on("after:export",this.restoreScrollPosition,this),e.on("reseted",this.onUpdate,this),e.on("cell:added",this.onUpdate,this),e.on("cell:removed",this.onUpdate,this),e.on("cell:changed",this.onUpdate,this),this.delegateBackgroundEvents()}stopListening(){const t=this.graph,e=this.model;t.off("scale",this.onScale,this),t.off("resize",this.onResize,this),t.off("beforeprint",this.storeScrollPosition,this),t.off("beforeexport",this.storeScrollPosition,this),t.off("afterprint",this.restoreScrollPosition,this),t.off("afterexport",this.restoreScrollPosition,this),e.off("reseted",this.onUpdate,this),e.off("cell:added",this.onUpdate,this),e.off("cell:removed",this.onUpdate,this),e.off("cell:changed",this.onUpdate,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.options.autoResize&&this.update()}delegateBackgroundEvents(t){const e=t||ni.events;this.delegatedHandlers=Object.keys(e).reduce((i,s)=>{const r=e[s];if(s.indexOf(" ")===-1)if(typeof r=="function")i[s]=r;else{let o=this.graph.view[r];typeof o=="function"&&(o=o.bind(this.graph.view),i[s]=o)}return i},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(i=>{this.delegateEvent(i,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(t=>{this.undelegateEvent(t,this.onBackgroundEvent)})}onBackgroundEvent(t){let e=!1;const i=t.target;if(this.options.pageVisible)this.options.background?e=this.background===i:e=this.content===i;else{const s=this.graph.view;e=s.background===i||s.grid===i}if(e){const s=this.delegatedHandlers[t.type];typeof s=="function"&&s.apply(this.graph,arguments)}}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:t,sy:e,ox:i,oy:s}){this.updateScale(t,e),(i||s)&&(this.centerPoint(i,s),this.updatePageBreak()),typeof this.options.autoResizeOptions=="function"&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(_n.IS_IE||_n.IS_EDGE)&&Ht(this.container,{visibility:"hidden"})}afterManipulation(){(_n.IS_IE||_n.IS_EDGE)&&Ht(this.container,{visibility:"visible"})}updatePageSize(t,e){t!=null&&(this.options.pageWidth=t),e!=null&&(this.options.pageHeight=e),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const t=this.graph.options.width,e=this.graph.options.height,i=this.options.pageWidth*this.sx,s=this.options.pageHeight*this.sy;if(i===0||s===0)return;if(t>i||e>s){let r=!1;const o=document.createElement("div");for(let a=1,l=Math.floor(t/i);a<l;a+=1){const c=document.createElement("div");bt(c,this.prefixClassName("graph-pagebreak-vertical")),Ht(c,{left:a*i}),ji(c,o),r=!0}for(let a=1,l=Math.floor(e/s);a<l;a+=1){const c=document.createElement("div");bt(c,this.prefixClassName("graph-pagebreak-horizontal")),Ht(c,{top:a*s}),ji(c,o),r=!0}r&&(bt(o,this.prefixClassName("graph-pagebreak")),yz(this.graph.view.grid,o),this.pageBreak=o)}}}update(){const t=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(t.width/2,t.height/2);let e=this.options.autoResizeOptions;typeof e=="function"&&(e=yt(e,this,this));const i=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},e);this.graph.fitToContent(this.getFitToContentOptions(i))}getFitToContentOptions(t){const e=this.sx,i=this.sy;return t.gridWidth&&(t.gridWidth*=e),t.gridHeight&&(t.gridHeight*=i),t.minWidth&&(t.minWidth*=e),t.minHeight&&(t.minHeight*=i),typeof t.padding=="object"?t.padding={left:(t.padding.left||0)*e,right:(t.padding.right||0)*e,top:(t.padding.top||0)*i,bottom:(t.padding.bottom||0)*i}:typeof t.padding=="number"&&(t.padding*=e),this.options.autoResize||(t.contentArea=nt.create()),t}updateScale(t,e){const i=this.graph.options,s=t/this.sx,r=e/this.sy;this.sx=t,this.sy=e,this.graph.translate(i.x*s,i.y*r),this.graph.transform.resize(i.width*s,i.height*r)}scrollbarPosition(t,e){if(t==null&&e==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};const i={};return typeof t=="number"&&(i.scrollLeft=t),typeof e=="number"&&(i.scrollTop=e),od(this.container,i),this}scrollToPoint(t,e){const i=this.getClientSize(),s=this.graph.matrix(),r={};return typeof t=="number"&&(r.scrollLeft=t-i.width/2+s.e+(this.padding.left||0)),typeof e=="number"&&(r.scrollTop=e-i.height/2+s.f+(this.padding.top||0)),od(this.container,r),this}scrollToContent(){const t=this.sx,e=this.sy,i=this.graph.getContentArea().getCenter();return this.scrollToPoint(i.x*t,i.y*e)}scrollToCell(t){const e=this.sx,i=this.sy,s=t.getBBox().getCenter();return this.scrollToPoint(s.x*e,s.y*i)}center(t){return this.centerPoint(t)}centerPoint(t,e,i){const s=this.graph.matrix(),r=s.a,o=s.d,a=-s.e,l=-s.f,c=a+this.graph.options.width,u=l+this.graph.options.height;let d;if(this.storeClientSize(),typeof t=="number"||typeof e=="number"){d=i;const C=this.getVisibleArea().getCenter();typeof t=="number"?t*=r:t=C.x,typeof e=="number"?e*=o:e=C.y}else d=t,t=(a+c)/2,e=(l+u)/2;if(d&&d.padding)return this.positionPoint({x:t,y:e},"50%","50%",d);const h=this.getPadding(),f=this.getClientSize(),g=f.width/2,m=f.height/2,p=g-h.left-t+a,v=g-h.right+t-c,b=m-h.top-e+l,y=m-h.bottom+e-u;this.addPadding(Math.max(p,0),Math.max(v,0),Math.max(b,0),Math.max(y,0));const w=this.scrollToPoint(t,e);return this.restoreClientSize(),w}centerContent(t){return this.positionContent("center",t)}centerCell(t,e){return this.positionCell(t,"center",e)}positionContent(t,e){const i=this.graph.getContentArea(e);return this.positionRect(i,t,e)}positionCell(t,e,i){const s=t.getBBox();return this.positionRect(s,e,i)}positionRect(t,e,i){const s=nt.create(t);switch(e){case"center":return this.positionPoint(s.getCenter(),"50%","50%",i);case"top":return this.positionPoint(s.getTopCenter(),"50%",0,i);case"top-right":return this.positionPoint(s.getTopRight(),"100%",0,i);case"right":return this.positionPoint(s.getRightMiddle(),"100%","50%",i);case"bottom-right":return this.positionPoint(s.getBottomRight(),"100%","100%",i);case"bottom":return this.positionPoint(s.getBottomCenter(),"50%","100%",i);case"bottom-left":return this.positionPoint(s.getBottomLeft(),0,"100%",i);case"left":return this.positionPoint(s.getLeftMiddle(),0,"50%",i);case"top-left":return this.positionPoint(s.getTopLeft(),0,0,i);default:return this}}positionPoint(t,e,i,s={}){const{padding:r}=s,o=g5(s,["padding"]),a=yi(r),l=nt.fromSize(this.getClientSize()),c=l.clone().moveAndExpand({x:a.left,y:a.top,width:-a.right-a.left,height:-a.top-a.bottom});e=wn(e,Math.max(0,c.width)),e<0&&(e=c.width+e),i=wn(i,Math.max(0,c.height)),i<0&&(i=c.height+i);const u=c.getTopLeft().translate(e,i),d=l.getCenter().diff(u),h=this.zoom(),f=d.scale(1/h,1/h),g=$.create(t).translate(f);return this.centerPoint(g.x,g.y,o)}zoom(t,e){if(t==null)return this.sx;e=e||{};let i,s;const r=this.getClientSize(),o=this.clientToLocalPoint(r.width/2,r.height/2);let a=t,l=t;if(e.absolute||(a+=this.sx,l+=this.sy),e.scaleGrid&&(a=Math.round(a/e.scaleGrid)*e.scaleGrid,l=Math.round(l/e.scaleGrid)*e.scaleGrid),e.maxScale&&(a=Math.min(e.maxScale,a),l=Math.min(e.maxScale,l)),e.minScale&&(a=Math.max(e.minScale,a),l=Math.max(e.minScale,l)),a=this.graph.transform.clampScale(a),l=this.graph.transform.clampScale(l),e.center){const c=a/this.sx,u=l/this.sy;i=e.center.x-(e.center.x-o.x)/c,s=e.center.y-(e.center.y-o.y)/u}else i=o.x,s=o.y;return this.beforeManipulation(),this.graph.transform.scale(a,l),this.centerPoint(i,s),this.afterManipulation(),this}zoomToRect(t,e={}){const i=nt.create(t),s=this.graph;if(e.contentArea=i,e.viewportArea==null){const o=this.container.getBoundingClientRect();e.viewportArea={x:s.options.x,y:s.options.y,width:o.width,height:o.height}}this.beforeManipulation(),s.transform.scaleContentToFitImpl(e,!1);const r=i.getCenter();return this.centerPoint(r.x,r.y),this.afterManipulation(),this}zoomToFit(t={}){return this.zoomToRect(this.graph.getContentArea(t),t)}transitionToPoint(t,e,i){typeof t=="object"?(i=e,e=t.y,t=t.x):e=e,i==null&&(i={});let s,r;const o=this.sx,a=Math.max(i.scale||o,1e-6),l=this.getClientSize(),c=new $(t,e),u=this.clientToLocalPoint(l.width/2,l.height/2);if(o===a){const h=u.diff(c).scale(o,o).round();s=`translate(${h.x}px,${h.y}px)`}else{const h=a/(o-a)*c.distance(u),f=u.clone().move(c,h),g=this.localToBackgroundPoint(f).round();s=`scale(${a/o})`,r=`${g.x}px ${g.y}px`}const d=i.onTransitionEnd;return bt(this.container,Re.transitionClassName),Qt.off(this.content,Re.transitionEventName),Qt.on(this.content,Re.transitionEventName,h=>{this.syncTransition(a,{x:t,y:e}),typeof d=="function"&&yt(d,this,h.originalEvent)}),Ht(this.content,{transform:s,transformOrigin:r,transition:"transform",transitionDuration:i.duration||"1s",transitionDelay:i.delay,transitionTimingFunction:i.timing}),this}syncTransition(t,e){return this.beforeManipulation(),this.graph.scale(t),this.removeTransition(),this.centerPoint(e.x,e.y),this.afterManipulation(),this}removeTransition(){return Ce(this.container,Re.transitionClassName),Qt.off(this.content,Re.transitionEventName),Ht(this.content,{transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(t,e={}){const i=nt.create(t),s=e.maxScale||1/0,r=e.minScale||Number.MIN_VALUE,o=e.scaleGrid||null,a=e.visibility||1,l=e.center?$.create(e.center):i.getCenter(),c=this.getClientSize(),u=c.width*a,d=c.height*a;let h=new nt(l.x-u/2,l.y-d/2,u,d).getMaxUniformScaleToFit(i,l);return h=Math.min(h,s),o&&(h=Math.floor(h/o)*o),h=Math.max(r,h),this.transitionToPoint(l,Object.assign({scale:h},e))}startPanning(t){const e=this.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.trigger("pan:start",{e}),Qt.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Qt.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.normalizeEvent(t),i=e.clientX-this.clientX,s=e.clientY-this.clientY;this.container.scrollTop-=s,this.container.scrollLeft-=i,this.clientX=e.clientX,this.clientY=e.clientY,this.trigger("panning",{e})}stopPanning(t){Qt.off(document.body,".panning"),Qt.off(window,".panning"),this.trigger("pan:stop",{e:t})}clientToLocalPoint(t,e){let i=typeof t=="object"?t.x:t,s=typeof t=="object"?t.y:e;const r=this.graph.matrix();return i+=this.container.scrollLeft-this.padding.left-r.e,s+=this.container.scrollTop-this.padding.top-r.f,new $(i/r.a,s/r.d)}localToBackgroundPoint(t,e){const i=typeof t=="object"?$.create(t):new $(t,e),s=this.graph.matrix(),r=this.padding;return Yt.transformPoint(i,s).translate(r.left,r.top)}resize(t,e){let i=t??this.container.offsetWidth,s=e??this.container.offsetHeight;typeof i=="number"&&(i=Math.round(i)),typeof s=="number"&&(s=Math.round(s)),this.options.width=i,this.options.height=s,Ht(this.container,{width:i,height:s}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(t,e){const s=this.container,r=s.getBoundingClientRect();let o=0,a=0;return t<=r.left+10&&(o=-10),e<=r.top+10&&(a=-10),t>=r.right-10&&(o=10),e>=r.bottom-10&&(a=10),o!==0&&(s.scrollLeft+=o),a!==0&&(s.scrollTop+=a),{scrollerX:o,scrollerY:a}}addPadding(t,e,i,s){let r=this.getPadding();this.padding={left:Math.round(r.left+(t||0)),top:Math.round(r.top+(i||0)),bottom:Math.round(r.bottom+(s||0)),right:Math.round(r.right+(e||0))},r=this.padding,Ht(this.content,{width:r.left+this.graph.options.width+r.right,height:r.top+this.graph.options.height+r.bottom});const o=this.graph.container;return o.style.left=`${this.padding.left}px`,o.style.top=`${this.padding.top}px`,this}getPadding(){const t=this.options.padding;return yi(typeof t=="function"?yt(t,this,this):t)}getVisibleArea(){const t=this.graph.matrix(),e=this.getClientSize(),i={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:e.width,height:e.height},s=Yt.transformRectangle(i,t.inverse());return s.x-=(this.padding.left||0)/this.sx,s.y-=(this.padding.top||0)/this.sy,s}isCellVisible(t,e={}){const i=t.getBBox(),s=this.getVisibleArea();return e.strict?s.containsRect(i):s.isIntersectWithRect(i)}isPointVisible(t){return this.getVisibleArea().containsPoint(t)}lock(){return Ht(this.container,{overflow:"hidden"}),this}unlock(){return Ht(this.container,{overflow:"scroll"}),this}onRemove(){this.stopListening()}dispose(){ka(this.container,this.graph.container),this.remove()}}f5([Dt.dispose()],Re.prototype,"dispose",null);(function(n){class t extends Mu{get elem(){return this.scroller.background}constructor(i){super(i.graph),this.scroller=i,i.options.background&&this.draw(i.options.background)}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(i){this.scroller.options.background=i}}n.Background=t})(Re||(Re={}));(function(n){n.containerClass="graph-scroller",n.panningClass=`${n.containerClass}-panning`,n.pannableClass=`${n.containerClass}-pannable`,n.pagedClass=`${n.containerClass}-paged`,n.contentClass=`${n.containerClass}-content`,n.backgroundClass=`${n.containerClass}-background`,n.transitionClassName="transition-in-progress",n.transitionEventName="transitionend.graph-scroller-transition",n.defaultOptions={padding(){const e=this.getClientSize(),i=Math.max(this.options.minVisibleWidth||0,1)||1,s=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(e.width-i,0),o=Math.max(e.height-s,0);return{left:r,top:o,right:r,bottom:o}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function t(e){const i=xe({},n.defaultOptions,e);i.pageWidth==null&&(i.pageWidth=e.graph.options.width),i.pageHeight==null&&(i.pageHeight=e.graph.options.height);const s=e.graph.options;return s.background&&i.enabled&&i.background==null&&(i.background=s.background,e.graph.background.clear()),i}n.getOptions=t})(Re||(Re={}));const p5=`.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
`;tt.prototype.lockScroller=function(){const n=this.getPlugin("scroller");return n&&n.lockScroller(),this};tt.prototype.unlockScroller=function(){const n=this.getPlugin("scroller");return n&&n.unlockScroller(),this};tt.prototype.updateScroller=function(){const n=this.getPlugin("scroller");return n&&n.updateScroller(),this};tt.prototype.getScrollbarPosition=function(){const n=this.getPlugin("scroller");return n?n.getScrollbarPosition():{left:0,top:0}};tt.prototype.setScrollbarPosition=function(n,t){const e=this.getPlugin("scroller");return e&&e.setScrollbarPosition(n,t),this};var m5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Mw extends pe{get pannable(){return this.options?typeof this.options.pannable=="object"?this.options.pannable.enabled:!!this.options.pannable:!1}get container(){return this.scrollerImpl.container}constructor(t={}){super(),this.name="scroller",this.options=t,Sr(this.name,p5)}init(t){this.graph=t;const e=Re.getOptions(Object.assign(Object.assign({enabled:!0},this.options),{graph:t}));this.options=e,this.scrollerImpl=new Re(e),this.setup(),this.startListening(),this.updateClassName(),this.scrollerImpl.center()}resize(t,e){this.scrollerImpl.resize(t,e)}resizePage(t,e){this.scrollerImpl.updatePageSize(t,e)}zoom(t,e){return typeof t>"u"?this.scrollerImpl.zoom():(this.scrollerImpl.zoom(t,e),this)}zoomTo(t,e={}){return this.scrollerImpl.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){return this.scrollerImpl.zoomToRect(t,e),this}zoomToFit(t={}){return this.scrollerImpl.zoomToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,i){return this.scrollerImpl.centerPoint(t,e,i),this}centerContent(t){return this.scrollerImpl.centerContent(t),this}centerCell(t,e){return this.scrollerImpl.centerCell(t,e),this}positionPoint(t,e,i,s={}){return this.scrollerImpl.positionPoint(t,e,i,s),this}positionRect(t,e,i){return this.scrollerImpl.positionRect(t,e,i),this}positionCell(t,e,i){return this.scrollerImpl.positionCell(t,e,i),this}positionContent(t,e){return this.scrollerImpl.positionContent(t,e),this}drawBackground(t,e){return(this.graph.options.background==null||!e)&&this.scrollerImpl.backgroundManager.draw(t),this}clearBackground(t){return(this.graph.options.background==null||!t)&&this.scrollerImpl.backgroundManager.clear(),this}isPannable(){return this.pannable}enablePanning(){this.pannable||(this.options.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.options.pannable=!1,this.updateClassName())}togglePanning(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}lockScroller(){return this.scrollerImpl.lock(),this}unlockScroller(){return this.scrollerImpl.unlock(),this}updateScroller(){return this.scrollerImpl.update(),this}getScrollbarPosition(){return this.scrollerImpl.scrollbarPosition()}setScrollbarPosition(t,e){return this.scrollerImpl.scrollbarPosition(t,e),this}scrollToPoint(t,e){return this.scrollerImpl.scrollToPoint(t,e),this}scrollToContent(){return this.scrollerImpl.scrollToContent(),this}scrollToCell(t){return this.scrollerImpl.scrollToCell(t),this}transitionToPoint(t,e,i){return this.scrollerImpl.transitionToPoint(t,e,i),this}transitionToRect(t,e={}){return this.scrollerImpl.transitionToRect(t,e),this}enableAutoResize(){this.scrollerImpl.enableAutoResize()}disableAutoResize(){this.scrollerImpl.disableAutoResize()}autoScroll(t,e){return this.scrollerImpl.autoScroll(t,e)}clientToLocalPoint(t,e){return this.scrollerImpl.clientToLocalPoint(t,e)}setup(){this.scrollerImpl.on("*",(t,e)=>{this.trigger(t,e)})}startListening(){let t=[];const e=this.options.pannable;typeof e=="object"?t=e.eventTypes||[]:t=["leftMouseDown"],t.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),Qt.on(this.scrollerImpl.container,"mousedown",this.onRightMouseDown))}stopListening(){let t=[];const e=this.options.pannable;typeof e=="object"?t=e.eventTypes||[]:t=["leftMouseDown"],t.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&Qt.off(this.scrollerImpl.container,"mousedown",this.onRightMouseDown)}onRightMouseDown(t){t.button===2&&this.allowPanning(t,!0)&&(this.updateClassName(!0),this.scrollerImpl.startPanning(t),this.scrollerImpl.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e:t}){const e=this.allowPanning(t,!0),i=this.graph.getPlugin("selection"),s=i&&i.allowRubberband(t,!0);(e||this.allowPanning(t)&&!s)&&(this.updateClassName(!0),this.scrollerImpl.startPanning(t),this.scrollerImpl.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(t,e){return this.pannable&&Wi.isMatch(t,this.options.modifiers,e)}updateClassName(t){const e=this.scrollerImpl.container,i=Ln.prefix("graph-scroller-pannable");this.pannable?(bt(e,i),e.dataset.panning=(!!t).toString()):Ce(e,i)}dispose(){this.scrollerImpl.dispose(),this.stopListening(),this.off(),Pr(this.name)}}m5([pe.dispose()],Mw.prototype,"dispose",null);const b5=`.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizespeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
`;var v5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class kw extends Dt{get scroller(){return this.graph.getPlugin("scroller")}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}constructor(t){super(),this.name="minimap",this.options=Object.assign(Object.assign({},$c.defaultOptions),t),Sr(this.name,b5)}init(t){this.graph=t,this.updateViewport=wf(this.updateViewport.bind(this),0),this.container=document.createElement("div"),bt(this.container,this.prefixClassName(ya.root));const e=document.createElement("div");this.container.appendChild(e),this.viewport=document.createElement("div"),bt(this.viewport,this.prefixClassName(ya.viewport)),this.options.scalable&&(this.zoomHandle=document.createElement("div"),bt(this.zoomHandle,this.prefixClassName(ya.zoom)),ji(this.zoomHandle,this.viewport)),Nn(this.container,this.viewport),Ht(this.container,{width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const i=Object.assign(Object.assign({},this.options.graphOptions),{container:e,model:this.sourceGraph.model,interacting:!1,grid:!1,background:!1,embedding:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(i):new tt(i),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}startListening(){this.scroller?Qt.on(this.graphContainer,`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?Qt.off(this.graphContainer,this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.stopListening(),this.targetGraph.dispose(!1)}onTransform(t){(t.ui||this.targetGraphTransforming||!this.scroller)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(t,e){let i,s;typeof t=="object"?(i=t.width,s=t.height):(i=t,s=e);const r=this.sourceGraph.options,o=this.sourceGraph.transform.getScale(),a=this.options.width-2*this.options.padding,l=this.options.height-2*this.options.padding;i/=o.sx,s/=o.sy,this.ratio=Math.min(a/i,l/s);const c=this.ratio,u=r.x*c/o.sx,d=r.y*c/o.sy;return i*=c,s*=c,this.targetGraph.resize(i,s),this.targetGraph.translate(u,d),this.scroller?this.targetGraph.scale(c,c):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const t=this.sourceGraph.transform.getScale(),e=this.targetGraph.transform.getScale();let i=null;this.scroller?i=this.scroller.clientToLocalPoint(0,0):i=this.graph.graphToLocal(0,0);const s=sV(this.targetGraph.container),r=this.targetGraph.translate();r.ty=r.ty||0,this.geometry={top:s.top+i.y*e.sy+r.ty,left:s.left+i.x*e.sx+r.tx,width:this.graphContainer.clientWidth*e.sx/t.sx,height:this.graphContainer.clientHeight*e.sy/t.sy},Ht(this.viewport,this.geometry)}startAction(t){const e=this.normalizeEvent(t),i=e.target===this.zoomHandle?"zooming":"panning",{tx:s,ty:r}=this.sourceGraph.translate(),o={action:i,clientX:e.clientX,clientY:e.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:s,translateY:r};this.targetGraphTransforming=!0,this.delegateDocumentEvents($c.documentEvents,o)}doAction(t){const e=this.normalizeEvent(t),i=e.clientX,s=e.clientY,r=e.data;switch(r.action){case"panning":{const o=this.sourceGraph.transform.getScale(),a=(i-r.clientX)*o.sx,l=(s-r.clientY)*o.sy;this.scroller?(this.graphContainer.scrollLeft=r.scrollLeft+a/this.ratio,this.graphContainer.scrollTop=r.scrollTop+l/this.ratio):this.sourceGraph.translate(r.translateX-a/this.ratio,r.translateY-l/this.ratio);break}case"zooming":{const o=r.scale,a=r.geometry,l=1+(r.clientX-i)/a.width/o.sx;r.frameId&&cancelAnimationFrame(r.frameId),r.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(l*r.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(t){const e=this.normalizeEvent(t);let i,s;const r=this.targetGraph.translate();if(r.ty=r.ty||0,e.offsetX==null){const l=oo(this.targetGraph.container);i=e.pageX-l.left,s=e.pageY-l.top}else i=e.offsetX,s=e.offsetY;const o=(i-r.tx)/this.ratio,a=(s-r.ty)/this.ratio;this.sourceGraph.centerPoint(o,a)}dispose(){this.remove(),Pr(this.name)}}v5([Dt.dispose()],kw.prototype,"dispose",null);var ya;(function(n){n.root="widget-minimap",n.viewport=`${n.root}-viewport`,n.zoom=`${n.viewport}-zoom`})(ya||(ya={}));var $c;(function(n){n.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:t=>new tt(t)},n.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})($c||($c={}));function y5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _w={exports:{}};(function(n){(function(t,e,i){if(!t)return;for(var s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},a={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,c=1;c<20;++c)s[111+c]="f"+c;for(c=0;c<=9;++c)s[c+96]=c.toString();function u(E,S,A){if(E.addEventListener){E.addEventListener(S,A,!1);return}E.attachEvent("on"+S,A)}function d(E){if(E.type=="keypress"){var S=String.fromCharCode(E.which);return E.shiftKey||(S=S.toLowerCase()),S}return s[E.which]?s[E.which]:r[E.which]?r[E.which]:String.fromCharCode(E.which).toLowerCase()}function h(E,S){return E.sort().join(",")===S.sort().join(",")}function f(E){var S=[];return E.shiftKey&&S.push("shift"),E.altKey&&S.push("alt"),E.ctrlKey&&S.push("ctrl"),E.metaKey&&S.push("meta"),S}function g(E){if(E.preventDefault){E.preventDefault();return}E.returnValue=!1}function m(E){if(E.stopPropagation){E.stopPropagation();return}E.cancelBubble=!0}function p(E){return E=="shift"||E=="ctrl"||E=="alt"||E=="meta"}function v(){if(!l){l={};for(var E in s)E>95&&E<112||s.hasOwnProperty(E)&&(l[s[E]]=E)}return l}function b(E,S,A){return A||(A=v()[E]?"keydown":"keypress"),A=="keypress"&&S.length&&(A="keydown"),A}function y(E){return E==="+"?["+"]:(E=E.replace(/\+{2}/g,"+plus"),E.split("+"))}function w(E,S){var A,M,O,T=[];for(A=y(E),O=0;O<A.length;++O)M=A[O],a[M]&&(M=a[M]),S&&S!="keypress"&&o[M]&&(M=o[M],T.push("shift")),p(M)&&T.push(M);return S=b(M,T,S),{key:M,modifiers:T,action:S}}function C(E,S){return E===null||E===e?!1:E===S?!0:C(E.parentNode,S)}function P(E){var S=this;if(E=E||e,!(S instanceof P))return new P(E);S.target=E,S._callbacks={},S._directMap={};var A={},M,O=!1,T=!1,R=!1;function L(z){z=z||{};var q=!1,lt;for(lt in A){if(z[lt]){q=!0;continue}A[lt]=0}q||(R=!1)}function k(z,q,lt,mt,X,ft){var B,ht,vt=[],xt=lt.type;if(!S._callbacks[z])return[];for(xt=="keyup"&&p(z)&&(q=[z]),B=0;B<S._callbacks[z].length;++B)if(ht=S._callbacks[z][B],!(!mt&&ht.seq&&A[ht.seq]!=ht.level)&&xt==ht.action&&(xt=="keypress"&&!lt.metaKey&&!lt.ctrlKey||h(q,ht.modifiers))){var Wt=!mt&&ht.combo==X,se=mt&&ht.seq==mt&&ht.level==ft;(Wt||se)&&S._callbacks[z].splice(B,1),vt.push(ht)}return vt}function _(z,q,lt,mt){S.stopCallback(q,q.target||q.srcElement,lt,mt)||z(q,lt)===!1&&(g(q),m(q))}S._handleKey=function(z,q,lt){var mt=k(z,q,lt),X,ft={},B=0,ht=!1;for(X=0;X<mt.length;++X)mt[X].seq&&(B=Math.max(B,mt[X].level));for(X=0;X<mt.length;++X){if(mt[X].seq){if(mt[X].level!=B)continue;ht=!0,ft[mt[X].seq]=1,_(mt[X].callback,lt,mt[X].combo,mt[X].seq);continue}ht||_(mt[X].callback,lt,mt[X].combo)}var vt=lt.type=="keypress"&&T;lt.type==R&&!p(z)&&!vt&&L(ft),T=ht&&lt.type=="keydown"};function D(z){typeof z.which!="number"&&(z.which=z.keyCode);var q=d(z);if(q){if(z.type=="keyup"&&O===q){O=!1;return}S.handleKey(q,f(z),z)}}function V(){clearTimeout(M),M=setTimeout(L,1e3)}function it(z,q,lt,mt){A[z]=0;function X(xt){return function(){R=xt,++A[z],V()}}function ft(xt){_(lt,xt,z),mt!=="keyup"&&(O=d(xt)),setTimeout(L,10)}for(var B=0;B<q.length;++B){var ht=B+1===q.length,vt=ht?ft:X(mt||w(q[B+1]).action);at(q[B],vt,mt,z,B)}}function at(z,q,lt,mt,X){S._directMap[z+":"+lt]=q,z=z.replace(/\s+/g," ");var ft=z.split(" "),B;if(ft.length>1){it(z,ft,q,lt);return}B=w(z,lt),S._callbacks[B.key]=S._callbacks[B.key]||[],k(B.key,B.modifiers,{type:B.action},mt,z,X),S._callbacks[B.key][mt?"unshift":"push"]({callback:q,modifiers:B.modifiers,action:B.action,seq:mt,level:X,combo:z})}S._bindMultiple=function(z,q,lt){for(var mt=0;mt<z.length;++mt)at(z[mt],q,lt)},u(E,"keypress",D),u(E,"keydown",D),u(E,"keyup",D)}P.prototype.bind=function(E,S,A){var M=this;return E=E instanceof Array?E:[E],M._bindMultiple.call(M,E,S,A),M},P.prototype.unbind=function(E,S){var A=this;return A.bind.call(A,E,function(){},S)},P.prototype.trigger=function(E,S){var A=this;return A._directMap[E+":"+S]&&A._directMap[E+":"+S]({},E),A},P.prototype.reset=function(){var E=this;return E._callbacks={},E._directMap={},E},P.prototype.stopCallback=function(E,S){var A=this;if((" "+S.className+" ").indexOf(" mousetrap ")>-1||C(S,A.target))return!1;if("composedPath"in E&&typeof E.composedPath=="function"){var M=E.composedPath()[0];M!==E.target&&(S=M)}return S.tagName=="INPUT"||S.tagName=="SELECT"||S.tagName=="TEXTAREA"||S.isContentEditable},P.prototype.handleKey=function(){var E=this;return E._handleKey.apply(E,arguments)},P.addKeycodes=function(E){for(var S in E)E.hasOwnProperty(S)&&(s[S]=E[S]);l=null},P.init=function(){var E=P(e);for(var S in E)S.charAt(0)!=="_"&&(P[S]=function(A){return function(){return E[A].apply(E,arguments)}}(S))},P.init(),t.Mousetrap=P,n.exports&&(n.exports=P),typeof i=="function"&&i.amd&&i(function(){return P})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(_w);var x5=_w.exports;const w5=y5(x5);var C5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class wo extends cn{get graph(){return this.options.graph}constructor(t){super(),this.options=t;const e=this.graph.getPlugin("scroller");this.container=e?e.container:this.graph.container,t.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=wo.createMousetrap(this)}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(t,e,i){this.mousetrap.bind(this.getKeys(t),e,i)}off(t,e){this.mousetrap.unbind(this.getKeys(t),e)}clear(){this.mousetrap.reset()}trigger(t,e){this.mousetrap.trigger(t,e)}focus(t){if(this.isInputEvent(t.e))return;this.target.focus({preventScroll:!0})}getKeys(t){return(Array.isArray(t)?t:[t]).map(e=>this.formatkey(e))}formatkey(t){const e=t.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command").replace("arrowup","up").replace("arrowright","right").replace("arrowdown","down").replace("arrowleft","left"),i=this.options.format;return i?yt(i,this.graph,e):e}isGraphEvent(t){const e=t.target,i=t.currentTarget;return e?e===this.target||i===this.target||e===document.body?!0:$f(this.container,e):!1}isInputEvent(t){var e;const i=t.target,s=(e=i==null?void 0:i.tagName)===null||e===void 0?void 0:e.toLowerCase();let r=["input","textarea"].includes(s);return Vt(i,"contenteditable")==="true"&&(r=!0),r}isEnabledForEvent(t){const e=!this.disabled&&this.isGraphEvent(t),i=this.isInputEvent(t);if(e){if(i&&(t.key==="Backspace"||t.key==="Delete"))return!1;if(this.options.guard)return yt(this.options.guard,this.graph,t)}return e}dispose(){this.mousetrap.reset()}}C5([cn.dispose()],wo.prototype,"dispose",null);(function(n){function t(e){const i=new w5(e.target),s=i.stopCallback;return i.stopCallback=(r,o,a)=>e.isEnabledForEvent(r)?s?s.call(i,r,o,a):!1:!0,i}n.createMousetrap=t})(wo||(wo={}));tt.prototype.isKeyboardEnabled=function(){const n=this.getPlugin("keyboard");return n?n.isEnabled():!1};tt.prototype.enableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.enable(),this};tt.prototype.disableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.disable(),this};tt.prototype.toggleKeyboard=function(n){const t=this.getPlugin("keyboard");return t&&t.toggleEnabled(n),this};tt.prototype.bindKey=function(n,t,e){const i=this.getPlugin("keyboard");return i&&i.bindKey(n,t,e),this};tt.prototype.unbindKey=function(n,t){const e=this.getPlugin("keyboard");return e&&e.unbindKey(n,t),this};tt.prototype.clearKeys=function(){const n=this.getPlugin("keyboard");return n&&n.clear(),this};tt.prototype.triggerKey=function(n,t){const e=this.getPlugin("keyboard");return e&&e.trigger(n,t),this};var S5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class $w extends cn{constructor(t={}){super(),this.name="keyboard",this.options=Object.assign({enabled:!0},t)}init(t){this.keyboardImpl=new wo(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(t,e,i){return this.keyboardImpl.on(t,e,i),this}trigger(t,e){return this.keyboardImpl.trigger(t,e),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(t,e){return this.keyboardImpl.off(t,e),this}dispose(){this.keyboardImpl.dispose()}}S5([cn.dispose()],$w.prototype,"dispose",null);var P5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},E5=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};class Iw extends Dt{get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}constructor(t){super();const{graph:e}=t,i=E5(t,["graph"]);this.graph=e,this.options=Object.assign({},i),this.offset={x:0,y:0},this.render(),this.disabled||this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.stopListening())}setFilter(t){this.options.filter=t}render(){const t=this.containerWrapper=new Et("svg"),e=this.horizontal=new Et("line"),i=this.vertical=new Et("line");t.addClass(this.containerClassName),e.addClass(this.horizontalClassName),i.addClass(this.verticalClassName),t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.setAttribute("display","none"),i.setAttribute("display","none"),t.append([e,i]),this.options.className&&t.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}onBatchStop({name:t,data:e}){t==="resize"&&this.snapOnResizing(e.cell,e)}captureCursorOffset({view:t,x:e,y:i}){const s=t.getDelegatedView();if(s&&this.isNodeMovable(s)){const r=t.cell.getPosition();this.offset={x:e-r.x,y:i-r.y}}}isNodeMovable(t){return t&&t.cell.isNode()&&t.can("nodeMovable")}getRestrictArea(t){const e=this.graph.options.translating.restrict,i=typeof e=="function"?yt(e,this.graph,t):e;return typeof i=="number"?this.graph.transform.getGraphArea().inflate(i):i===!0?this.graph.transform.getGraphArea():i||null}snapOnResizing(t,e){if(this.options.resizing&&!e.snapped&&e.ui&&e.direction&&e.trueDirection){const i=this.graph.renderer.findViewByCell(t);if(i&&i.cell.isNode()){const s=t.getBBox(),r=s.bbox(t.getAngle()),o=r.getTopLeft(),a=r.getBottomRight(),l=zt.normalize(t.getAngle()),c=this.options.tolerance||0;let u,d,h,f,g,m;const p={vertical:0,horizontal:0},v=e.direction,b=e.trueDirection,y=e.relativeDirection;b.indexOf("right")!==-1?p.vertical=a.x:p.vertical=o.x,b.indexOf("bottom")!==-1?p.horizontal=a.y:p.horizontal=o.y,this.model.getNodes().some(T=>{if(this.isIgnored(t,T))return!1;const R=T.getBBox().bbox(T.getAngle()),L=R.getTopLeft(),k=R.getBottomRight(),_={vertical:[L.x,k.x],horizontal:[L.y,k.y]},D={};return Object.keys(_).forEach(V=>{const it=V,at=_[it].map(z=>({position:z,distance:Math.abs(z-p[it])})).filter(z=>z.distance<=c);D[it]=W0(at,z=>z.distance)}),u==null&&D.vertical.length>0&&(u=D.vertical[0].position,d=Math.min(r.y,R.y),h=Math.max(a.y,k.y)-d),f==null&&D.horizontal.length>0&&(f=D.horizontal[0].position,g=Math.min(r.x,R.x),m=Math.max(a.x,k.x)-g),u!=null&&f!=null}),this.hide();let w=0,C=0;(f!=null||u!=null)&&(u!=null&&(w=b.indexOf("right")!==-1?u-a.x:o.x-u),f!=null&&(C=b.indexOf("bottom")!==-1?f-a.y:o.y-f));let P=0,E=0;if(l%90===0)l===90||l===270?(P=C,E=w):(P=w,E=C);else{const T=l>=0&&l<90?1:l>=90&&l<180?4:l>=180&&l<270?3:2;f!=null&&u!=null&&(w<C?(C=0,f=void 0):(w=0,u=void 0));const R=zt.toRad(l%90);w&&(P=T===3?w/Math.cos(R):w/Math.sin(R)),C&&(E=T===3?C/Math.cos(R):C/Math.sin(R));const L=T===1||T===3;switch(y){case"top":case"bottom":E=C?C/(L?Math.cos(R):Math.sin(R)):w/(L?Math.sin(R):Math.cos(R));break;case"left":case"right":P=w?w/(L?Math.cos(R):Math.sin(R)):C/(L?Math.sin(R):Math.cos(R));break}}switch(y){case"top":case"bottom":P=0;break;case"left":case"right":E=0;break}const S=this.graph.getGridSize();let A=Math.max(s.width+P,S),M=Math.max(s.height+E,S);e.minWidth&&e.minWidth>S&&(A=Math.max(A,e.minWidth)),e.minHeight&&e.minHeight>S&&(M=Math.max(M,e.minHeight)),e.maxWidth&&(A=Math.min(A,e.maxWidth)),e.maxHeight&&(M=Math.min(M,e.maxHeight)),e.preserveAspectRatio&&(E<P?M=A*(s.height/s.width):A=M*(s.width/s.height)),(A!==s.width||M!==s.height)&&(t.resize(A,M,{direction:v,relativeDirection:y,trueDirection:b,snapped:!0,snaplines:this.cid,restrict:this.getRestrictArea(i)}),h&&(h+=M-s.height),m&&(m+=A-s.width));const O=t.getBBox().bbox(l);u&&Math.abs(O.x-u)>1&&Math.abs(O.width+O.x-u)>1&&(u=void 0),f&&Math.abs(O.y-f)>1&&Math.abs(O.height+O.y-f)>1&&(f=void 0),this.update({verticalLeft:u,verticalTop:d,verticalHeight:h,horizontalTop:f,horizontalLeft:g,horizontalWidth:m})}}}snapOnMoving({view:t,e,x:i,y:s}){const r=t.getEventData(e).delegatedView||t;if(!this.isNodeMovable(r))return;const o=r.cell,a=o.getSize(),l=o.getPosition(),c=new nt(i-this.offset.x,s-this.offset.y,a.width,a.height),u=o.getAngle(),d=c.getCenter(),h=c.bbox(u),f=h.getTopLeft(),g=h.getBottomRight(),m=this.options.tolerance||0;let p,v,b,y,w,C,P=0,E=0;if(this.model.getNodes().some(S=>{if(this.isIgnored(o,S))return!1;const A=S.getBBox().bbox(S.getAngle()),M=A.getCenter(),O=A.getTopLeft(),T=A.getBottomRight();return p==null&&(Math.abs(M.x-d.x)<m?(p=M.x,P=.5):Math.abs(O.x-f.x)<m?(p=O.x,P=0):Math.abs(O.x-g.x)<m?(p=O.x,P=1):Math.abs(T.x-g.x)<m?(p=T.x,P=1):Math.abs(T.x-f.x)<m&&(p=T.x),p!=null&&(v=Math.min(h.y,A.y),b=Math.max(g.y,T.y)-v)),y==null&&(Math.abs(M.y-d.y)<m?(y=M.y,E=.5):Math.abs(O.y-f.y)<m?y=O.y:Math.abs(O.y-g.y)<m?(y=O.y,E=1):Math.abs(T.y-g.y)<m?(y=T.y,E=1):Math.abs(T.y-f.y)<m&&(y=T.y),y!=null&&(w=Math.min(h.x,A.x),C=Math.max(g.x,T.x)-w)),p!=null&&y!=null}),this.hide(),y!=null||p!=null){y!=null&&(h.y=y-E*h.height),p!=null&&(h.x=p-P*h.width);const S=h.getCenter(),A=S.x-c.width/2,M=S.y-c.height/2,O=A-l.x,T=M-l.y;(O!==0||T!==0)&&(o.translate(O,T,{snapped:!0,restrict:this.getRestrictArea(r)}),C&&(C+=O),b&&(b+=T)),this.update({verticalLeft:p,verticalTop:v,verticalHeight:b,horizontalTop:y,horizontalLeft:w,horizontalWidth:C})}}isIgnored(t,e){return e.id===t.id||e.isDescendantOf(t)||!this.filter(e)}filter(t){const e=this.options.filter;return Array.isArray(e)?e.some(i=>typeof i=="string"?t.shape===i:t.id===i.id):typeof e=="function"?yt(e,this.graph,t):!0}update(t){if(t.horizontalTop){const e=this.graph.localToGraph(new $(t.horizontalLeft,t.horizontalTop)),i=this.graph.localToGraph(new $(t.horizontalLeft+t.horizontalWidth,t.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${e.x}`:"0",y1:`${e.y}`,x2:this.options.sharp?`${i.x}`:"100%",y2:`${i.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(t.verticalLeft){const e=this.graph.localToGraph(new $(t.verticalLeft,t.verticalTop)),i=this.graph.localToGraph(new $(t.verticalLeft,t.verticalTop+t.verticalHeight));this.vertical.setAttributes({x1:`${e.x}`,y1:this.options.sharp?`${e.y}`:"0",x2:`${i.x}`,y2:this.options.sharp?`${i.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const t=this.options.clean,e=typeof t=="number"?t:t!==!1?3e3:0;return e>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},e)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}P5([Dt.dispose()],Iw.prototype,"dispose",null);const O5=`.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
`;tt.prototype.isSnaplineEnabled=function(){const n=this.getPlugin("snapline");return n?n.isEnabled():!1};tt.prototype.enableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enable(),this};tt.prototype.disableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disable(),this};tt.prototype.toggleSnapline=function(){const n=this.getPlugin("snapline");return n&&n.toggleEnabled(),this};tt.prototype.hideSnapline=function(){const n=this.getPlugin("snapline");return n&&n.hide(),this};tt.prototype.setSnaplineFilter=function(n){const t=this.getPlugin("snapline");return t&&t.setFilter(n),this};tt.prototype.isSnaplineOnResizingEnabled=function(){const n=this.getPlugin("snapline");return n?n.isOnResizingEnabled():!1};tt.prototype.enableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.enableOnResizing(),this};tt.prototype.disableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.disableOnResizing(),this};tt.prototype.toggleSnaplineOnResizing=function(n){const t=this.getPlugin("snapline");return t&&t.toggleOnResizing(n),this};tt.prototype.isSharpSnapline=function(){const n=this.getPlugin("snapline");return n?n.isSharp():!1};tt.prototype.enableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enableSharp(),this};tt.prototype.disableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disableSharp(),this};tt.prototype.toggleSharpSnapline=function(n){const t=this.getPlugin("snapline");return t&&t.toggleSharp(n),this};tt.prototype.getSnaplineTolerance=function(){const n=this.getPlugin("snapline");if(n)return n.getTolerance()};tt.prototype.setSnaplineTolerance=function(n){const t=this.getPlugin("snapline");return t&&t.setTolerance(n),this};var A5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Rw extends cn{constructor(t={}){super(),this.name="snapline",this.options=Object.assign({enabled:!0,tolerance:10},t),Sr(this.name,O5)}init(t){this.snaplineImpl=new Iw(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.snaplineImpl.disabled}enable(){this.snaplineImpl.enable()}disable(){this.snaplineImpl.disable()}toggleEnabled(t){if(t!=null)t!==this.isEnabled()&&(t?this.enable():this.disable());else return this.isEnabled()?this.disable():this.enable(),this}hide(){return this.snaplineImpl.hide(),this}setFilter(t){return this.snaplineImpl.setFilter(t),this}isOnResizingEnabled(){return this.snaplineImpl.options.resizing===!0}enableOnResizing(){return this.snaplineImpl.options.resizing=!0,this}disableOnResizing(){return this.snaplineImpl.options.resizing=!1,this}toggleOnResizing(t){return t!=null?t!==this.isOnResizingEnabled()&&(t?this.enableOnResizing():this.disableOnResizing()):this.isOnResizingEnabled()?this.disableOnResizing():this.enableOnResizing(),this}isSharp(){return this.snaplineImpl.options.sharp===!0}enableSharp(){return this.snaplineImpl.options.sharp=!0,this}disableSharp(){return this.snaplineImpl.options.sharp=!1,this}toggleSharp(t){return t!=null?t!==this.isSharp()&&(t?this.enableSharp():this.disableSharp()):this.isSharp()?this.disableSharp():this.enableSharp(),this}getTolerance(){return this.snaplineImpl.options.tolerance}setTolerance(t){return this.snaplineImpl.options.tolerance=t,this}captureCursorOffset(t){this.snaplineImpl.captureCursorOffset(t)}snapOnMoving(t){this.snaplineImpl.snapOnMoving(t)}dispose(){this.snaplineImpl.dispose(),Pr(this.name)}}A5([cn.dispose()],Rw.prototype,"dispose",null);tt.prototype.isHistoryEnabled=function(){const n=this.getPlugin("history");return n?n.isEnabled():!1};tt.prototype.enableHistory=function(){const n=this.getPlugin("history");return n&&n.enable(),this};tt.prototype.disableHistory=function(){const n=this.getPlugin("history");return n&&n.disable(),this};tt.prototype.toggleHistory=function(n){const t=this.getPlugin("history");return t&&t.toggleEnabled(n),this};tt.prototype.undo=function(n){const t=this.getPlugin("history");return t&&t.undo(n),this};tt.prototype.redo=function(n){const t=this.getPlugin("history");return t&&t.redo(n),this};tt.prototype.undoAndCancel=function(n){const t=this.getPlugin("history");return t&&t.cancel(n),this};tt.prototype.canUndo=function(){const n=this.getPlugin("history");return n?n.canUndo():!1};tt.prototype.canRedo=function(){const n=this.getPlugin("history");return n?n.canRedo():!1};tt.prototype.cleanHistory=function(n){const t=this.getPlugin("history");return t&&t.clean(n),this};tt.prototype.getHistoryStackSize=function(){return this.getPlugin("history").getSize()};tt.prototype.getUndoStackSize=function(){return this.getPlugin("history").getUndoSize()};tt.prototype.getRedoStackSize=function(){return this.getPlugin("history").getRedoSize()};tt.prototype.getUndoRemainSize=function(){return this.getPlugin("history").getUndoRemainSize()};var Nw=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Co extends pe{constructor(t={}){super(),this.name="history",this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.stackSize=0,this.handlers=[];const{stackSize:e=0}=t;this.stackSize=e,this.options=fe.getOptions(t),this.validator=new Co.Validator({history:this,cancelInvalid:this.options.cancelInvalid})}init(t){this.graph=t,this.model=this.graph.model,this.clean(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}undo(t={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack.push(e),this.notify("undo",e,t))}return this}redo(t={}){if(!this.disabled){const e=this.redoStack.pop();e&&(this.applyCommand(e,t),this.undoStackPush(e),this.notify("redo",e,t))}return this}cancel(t={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack=[],this.notify("cancel",e,t))}return this}getSize(){return this.stackSize}getUndoRemainSize(){const t=this.undoStack.length;return this.stackSize-t}getUndoSize(){return this.undoStack.length}getRedoSize(){return this.redoStack.length}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}clean(t={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,t),this}get disabled(){return this.options.enabled!==!0}validate(t,...e){return this.validator.validate(t,...e),this}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((t,e)=>{this.handlers[e]=this.addCommand.bind(this,t),this.model.on(t,this.handlers[e])}),this.validator.on("invalid",t=>this.trigger("invalid",t))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((t,e)=>{this.model.off(t,this.handlers[e])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(t){return{batch:t?t.batch:!1,data:{}}}revertCommand(t,e){this.freezed=!0;const i=Array.isArray(t)?fe.sortBatchCommands(t):[t];for(let s=i.length-1;s>=0;s-=1){const r=i[s],o=Object.assign(Object.assign({},e),wm(r.options,this.options.revertOptionsList||[]));this.executeCommand(r,!0,o)}this.freezed=!1}applyCommand(t,e){this.freezed=!0;const i=Array.isArray(t)?fe.sortBatchCommands(t):[t];for(let s=0;s<i.length;s+=1){const r=i[s],o=Object.assign(Object.assign({},e),wm(r.options,this.options.applyOptionsList||[]));this.executeCommand(r,!1,o)}this.freezed=!1}executeCommand(t,e,i){const s=this.model,r=s.getCell(t.data.id),o=t.event;if(fe.isAddEvent(o)&&e||fe.isRemoveEvent(o)&&!e)r&&r.remove(i);else if(fe.isAddEvent(o)&&!e||fe.isRemoveEvent(o)&&e){const a=t.data;a.node?s.addNode(a.props,i):a.edge&&s.addEdge(a.props,i)}else if(fe.isChangeEvent(o)){const a=t.data,l=a.key;if(l&&r){const c=e?a.prev[l]:a.next[l];a.key==="attrs"&&this.ensureUndefinedAttrs(c,e?a.next[l]:a.prev[l])&&(i.dirty=!0),r.prop(l,c,i)}}else{const a=this.options.executeCommand;a&&yt(a,this,t,e,i)}}addCommand(t,e){if(this.freezed||this.disabled)return;const i=e,s=i.options||{};if(s.dryrun||fe.isAddEvent(t)&&this.options.ignoreAdd||fe.isRemoveEvent(t)&&this.options.ignoreRemove||fe.isChangeEvent(t)&&this.options.ignoreChange)return;const r=this.options.beforeAddCommand;if(r!=null&&yt(r,this,t,e)===!1)return;t==="cell:change:*"&&(t=`cell:change:${i.key}`);const o=i.cell,a=fn.isModel(o);let l;if(this.batchCommands){l=this.batchCommands[Math.max(this.lastBatchIndex,0)];const u=a&&!l.modelChange||l.data.id!==o.id,d=l.event!==t;if(this.lastBatchIndex>=0&&(u||d)){const h=this.batchCommands.findIndex(f=>(a&&f.modelChange||f.data.id===o.id)&&f.event===t);h<0||fe.isAddEvent(t)||fe.isRemoveEvent(t)?l=this.createCommand({batch:!0}):(l=this.batchCommands[h],this.batchCommands.splice(h,1)),this.batchCommands.push(l),this.lastBatchIndex=this.batchCommands.length-1}}else l=this.createCommand({batch:!1});if(fe.isAddEvent(t)||fe.isRemoveEvent(t)){const u=l.data;return l.event=t,l.options=s,u.id=o.id,u.props=ae(o.toJSON()),o.isEdge()?u.edge=!0:o.isNode()&&(u.node=!0),this.push(l,s)}if(fe.isChangeEvent(t)){const u=e.key,d=l.data;return(!l.batch||!l.event)&&(l.event=t,l.options=s,d.key=u,d.prev==null&&(d.prev={}),d.prev[u]=ae(o.previous(u)),a?l.modelChange=!0:d.id=o.id),d.next==null&&(d.next={}),d.next[u]=ae(o.prop(u)),this.push(l,s)}const c=this.options.afterAddCommand;c&&yt(c,this,t,e,l),this.push(l,s)}initBatchCommand(t){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(t){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const e=this.filterBatchCommand(this.batchCommands);e.length>0&&(this.redoStack=[],this.undoStackPush(e),this.consolidateCommands(),this.notify("add",e,t)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(t){let e=t.slice();const i=[];for(;e.length>0;){const s=e.shift(),r=s.event,o=s.data.id;if(r!=null&&(o!=null||s.modelChange)){if(fe.isAddEvent(r)){const a=e.findIndex(l=>fe.isRemoveEvent(l.event)&&l.data.id===o);if(a>=0){e=e.filter((l,c)=>a<c||l.data.id!==o);continue}}else if(fe.isRemoveEvent(r)){const a=e.findIndex(l=>fe.isAddEvent(l.event)&&l.data.id===o);if(a>=0){e.splice(a,1);continue}}else if(fe.isChangeEvent(r)){const a=s.data;if(vi(a.prev,a.next))continue}i.push(s)}}return i}notify(t,e,i){const s=e==null?null:Array.isArray(e)?e:[e];this.emit(t,{cmds:s,options:i}),this.graph.trigger(`history:${t}`,{cmds:s,options:i}),this.emit("change",{cmds:s,options:i}),this.graph.trigger("history:change",{cmds:s,options:i})}push(t,e){this.redoStack=[],t.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:t,options:e})):(this.undoStackPush(t),this.consolidateCommands(),this.notify("add",t,e))}consolidateCommands(){var t;const e=this.undoStack[this.undoStack.length-1],i=this.undoStack[this.undoStack.length-2];if(!Array.isArray(e))return;const s=new Set(e.map(o=>o.event));if(s.size!==2||!s.has("cell:change:parent")||!s.has("cell:change:children")||!e.every(o=>{var a;return o.batch&&((a=o.options)===null||a===void 0?void 0:a.ui)})||!Array.isArray(i)||i.length!==1)return;const r=i[0];r.event!=="cell:change:position"||!(!((t=r.options)===null||t===void 0)&&t.ui)||(i.push(...e),this.undoStack.pop())}undoStackPush(t){if(this.stackSize===0){this.undoStack.push(t);return}this.undoStack.length>=this.stackSize&&this.undoStack.shift(),this.undoStack.push(t)}ensureUndefinedAttrs(t,e){let i=!1;return t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{t[s]===void 0&&e[s]!==void 0?(t[s]=void 0,i=!0):typeof t[s]=="object"&&typeof e[s]=="object"&&(i=this.ensureUndefinedAttrs(t[s],e[s]))}),i}dispose(){this.validator.dispose(),this.clean(),this.stopListening(),this.off()}}Nw([pe.dispose()],Co.prototype,"dispose",null);(function(n){class t extends pe{constructor(i){super(),this.map={},this.command=i.history,this.cancelInvalid=i.cancelInvalid!==!1,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:i}){return Array.isArray(i)?i.every(s=>this.isValidCommand(s)):this.isValidCommand(i)}isValidCommand(i){if(i.options&&i.options.validation===!1)return!0;const s=i.event&&this.map[i.event]||[];let r=null;return s.forEach(o=>{let a=0;const l=c=>{const u=o[a];a+=1;try{if(u)u(c,i,l);else{r=c;return}}catch(d){l(d)}};l(r)}),r?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:r}),!1):!0}validate(i,...s){const r=Array.isArray(i)?i:i.split(/\s+/);return s.forEach(o=>{if(typeof o!="function")throw new Error(`${r.join(" ")} requires callback functions.`)}),r.forEach(o=>{this.map[o]==null&&(this.map[o]=[]),this.map[o].push(s)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}Nw([pe.dispose()],t.prototype,"dispose",null),n.Validator=t})(Co||(Co={}));var fe;(function(n){function t(o){return o==="cell:added"}n.isAddEvent=t;function e(o){return o==="cell:removed"}n.isRemoveEvent=e;function i(o){return o!=null&&o.startsWith("cell:change:")}n.isChangeEvent=i;function s(o){const a=["cell:added","cell:removed","cell:change:*"],l=["batch:start","batch:stop"],c=o.eventNames?o.eventNames.filter(u=>!(n.isChangeEvent(u)||a.includes(u)||l.includes(u))):a;return Object.assign(Object.assign({enabled:!0},o),{eventNames:c,applyOptionsList:o.applyOptionsList||["propertyPath"],revertOptionsList:o.revertOptionsList||["propertyPath"]})}n.getOptions=s;function r(o){const a=[];for(let l=0,c=o.length;l<c;l+=1){const u=o[l];let d=null;if(n.isAddEvent(u.event)){const h=u.data.id;for(let f=0;f<l;f+=1)if(o[f].data.id===h){d=f;break}}d!==null?a.splice(d,0,u):a.push(u)}return a}n.sortBatchCommands=r})(fe||(fe={}));var T5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Dw extends Dt{get model(){return this.graph.model}get view(){return this.graph.renderer.findViewByCell(this.node)}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}constructor(t,e,i){super(),this.node=e,this.graph=i,this.options=Object.assign(Object.assign({},_e.defaultOptions),t),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this)}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this)}renderHandles(){this.container=document.createElement("div");const t=document.createElement("div");Vt(t,"draggable","false");const e=t.cloneNode(!0);bt(e,this.rotateClassName);const i=_e.POSITIONS.map(s=>{const r=t.cloneNode(!0);return bt(r,this.resizeClassName),Vt(r,"data-position",s),r});this.empty(),Nn(this.container,[...i,e])}render(){return this.renderHandles(),this.view&&this.view.addClass(_e.NODE_CLS),bt(this.container,this.containerClassName),fa(this.container,"no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing),fa(this.container,"no-resize",!this.options.resizable),fa(this.container,"no-rotate",!this.options.rotatable),this.options.className&&bt(this.container,this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;const i=zt.normalize(this.node.getAngle()),s=i!==0?`rotate(${i}deg)`:"";return Ht(this.container,{transform:s,width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this}remove(){return this.view&&this.view.removeClass(_e.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const t=zt.normalize(this.node.getAngle()),e=Math.floor(t*(_e.DIRECTIONS.length/360));if(e!==this.prevShift){const i=_e.DIRECTIONS.slice(e).concat(_e.DIRECTIONS.slice(0,e)),s=o=>`${this.containerClassName}-cursor-${o}`;this.container.querySelectorAll(`.${this.resizeClassName}`).forEach((o,a)=>{Ce(o,_e.DIRECTIONS.map(l=>s(l)).join(" ")),bt(o,s(i[a]))}),this.prevShift=e}}getTrueDirection(t){const e=zt.normalize(this.node.getAngle());let i=_e.POSITIONS.indexOf(t);return i+=Math.floor(e*(_e.POSITIONS.length/360)),i%=_e.POSITIONS.length,_e.POSITIONS[i]}toValidResizeDirection(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t}startResizing(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const e=Vt(t.target,"data-position");this.prepareResizing(t,e),this.startAction(t)}prepareResizing(t,e){const i=this.getTrueDirection(e);let s=0,r=0;e.split("-").forEach(c=>{s={left:-1,right:1}[c]||s,r={top:-1,bottom:1}[c]||r});const o=this.toValidResizeDirection(e),a={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[o],l=zt.normalize(this.node.getAngle());this.setEventData(t,{selector:a,direction:o,trueDirection:i,relativeDirection:e,angle:l,resizeX:s,resizeY:r,action:"resizing"})}startRotating(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const e=this.node.getBBox().getCenter(),i=this.normalizeEvent(t),s=this.graph.snapToGrid(i.clientX,i.clientY);this.setEventData(t,{center:e,action:"rotating",angle:zt.normalize(this.node.getAngle()),start:$.create(s).theta(e)}),this.startAction(t)}onMouseMove(t){const e=this.graph.findViewByCell(this.node);let i=this.getEventData(t);if(i.action){const s=this.normalizeEvent(t);let r=s.clientX,o=s.clientY;const a=this.graph.getPlugin("scroller"),l=this.options.restrictedResizing;if(l===!0||typeof l=="number"){const f=l===!0?0:l,g=a?Math.max(f,8):f,m=this.graph.container.getBoundingClientRect();r=dn(r,m.left+g,m.right-g),o=dn(o,m.top+g,m.bottom-g)}else this.options.autoScrollOnResizing&&a&&a.autoScroll(r,o);const c=this.graph.snapToGrid(r,o),u=this.graph.getGridSize(),d=this.node,h=this.options;if(i.action==="resizing"){i=i,i.resized||(e&&(e.addClass("node-resizing"),this.notify("node:resize",t,e)),i.resized=!0);const f=d.getBBox(),g=$.create(c).rotate(i.angle,f.getCenter()).diff(f[i.selector]);let m=i.resizeX?g.x*i.resizeX:f.width,p=i.resizeY?g.y*i.resizeY:f.height;const v=m,b=p;if(m=qt.snapToGrid(m,u),p=qt.snapToGrid(p,u),m=Math.max(m,h.minWidth||u),p=Math.max(p,h.minHeight||u),m=Math.min(m,h.maxWidth||1/0),p=Math.min(p,h.maxHeight||1/0),h.preserveAspectRatio){const w=f.width*p/f.height,C=f.height*m/f.width;m<w?p=C:m=w}const y=i.relativeDirection;if(h.allowReverse&&(v<=-m||b<=-p)){let w;y==="left"?v<=-m&&(w="right"):y==="right"?v<=-m&&(w="left"):y==="top"?b<=-p&&(w="bottom"):y==="bottom"?b<=-p&&(w="top"):y==="top-left"?v<=-m&&b<=-p?w="bottom-right":v<=-m?w="top-right":b<=-p&&(w="bottom-left"):y==="top-right"?v<=-m&&b<=-p?w="bottom-left":v<=-m?w="top-left":b<=-p&&(w="bottom-right"):y==="bottom-left"?v<=-m&&b<=-p?w="top-right":v<=-m?w="bottom-right":b<=-p&&(w="top-left"):y==="bottom-right"&&(v<=-m&&b<=-p?w="top-left":v<=-m?w="bottom-left":b<=-p&&(w="top-right"));const C=w;this.stopHandle();const P=this.container.querySelector(`.${this.resizeClassName}[data-position="${C}"]`);this.startHandle(P),this.prepareResizing(t,C),this.onMouseMove(t)}if(f.width!==m||f.height!==p){const w={ui:!0,direction:i.direction,relativeDirection:i.relativeDirection,trueDirection:i.trueDirection,minWidth:h.minWidth,minHeight:h.minHeight,maxWidth:h.maxWidth,maxHeight:h.maxHeight,preserveAspectRatio:h.preserveAspectRatio===!0};d.resize(m,p,w),this.notify("node:resizing",t,e)}}else if(i.action==="rotating"){i=i,i.rotated||(e&&(e.addClass("node-rotating"),this.notify("node:rotate",t,e)),i.rotated=!0);const f=d.getAngle(),g=i.start-$.create(c).theta(i.center);let m=i.angle+g;h.rotateGrid&&(m=qt.snapToGrid(m,h.rotateGrid)),m=zt.normalize(m),f!==m&&(d.rotate(m,{absolute:!0}),this.notify("node:rotating",t,e))}}}onMouseUp(t){const e=this.getEventData(t);e.action&&(this.stopAction(t),this.model.stopBatch(e.action==="resizing"?"resize":"rotate",{cid:this.cid}))}startHandle(t){if(this.handle=t||null,bt(this.container,`${this.containerClassName}-active`),t){bt(t,`${this.containerClassName}-active-handle`);const e=t.getAttribute("data-position");if(e){const i=_e.DIRECTIONS[_e.POSITIONS.indexOf(e)];bt(this.container,`${this.containerClassName}-cursor-${i}`)}}}stopHandle(){if(Ce(this.container,`${this.containerClassName}-active`),this.handle){Ce(this.handle,`${this.containerClassName}-active-handle`);const t=this.handle.getAttribute("data-position");if(t){const e=_e.DIRECTIONS[_e.POSITIONS.indexOf(t)];Ce(this.container,`${this.containerClassName}-cursor-${e}`)}this.handle=null}}startAction(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(_e.documentEvents,t.data)}stopAction(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const e=this.graph.findViewByCell(this.node),i=this.getEventData(t);e&&(e.removeClass(`node-${i.action}`),i.action==="resizing"&&i.resized?this.notify("node:resized",t,e):i.action==="rotating"&&i.rotated&&this.notify("node:rotated",t,e))}notify(t,e,i,s={}){if(i){const r=i.graph,o=r.view.normalizeEvent(e),a=r.snapToGrid(o.clientX,o.clientY);this.trigger(t,Object.assign({e:o,view:i,node:i.cell,cell:i.cell,x:a.x,y:a.y},s))}}dispose(){this.stopListening(),this.remove(),this.off()}}T5([Dt.dispose()],Dw.prototype,"dispose",null);var _e;(function(n){n.NODE_CLS="has-widget-transform",n.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],n.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},n.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(_e||(_e={}));const M5=`.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
`;tt.prototype.createTransformWidget=function(n){const t=this.getPlugin("transform");return t&&t.createWidget(n),this};tt.prototype.clearTransformWidgets=function(){const n=this.getPlugin("transform");return n&&n.clearWidgets(),this};var k5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class dr extends pe{constructor(t={}){super(),this.name="transform",this.widgets=new Map,this.disabled=!1,this.options=t,Sr(this.name,M5)}init(t){this.graph=t,!this.disabled&&this.startListening()}startListening(){this.graph.on("node:click",this.onNodeClick,this),this.graph.on("blank:mousedown",this.onBlankMouseDown,this)}stopListening(){this.graph.off("node:click",this.onNodeClick,this),this.graph.off("blank:mousedown",this.onBlankMouseDown,this)}enable(){this.disabled&&(this.disabled=!1,this.startListening())}disable(){this.disabled||(this.disabled=!0,this.stopListening())}isEnabled(){return!this.disabled}createWidget(t){this.clearWidgets();const e=this.createTransform(t);e&&(this.widgets.set(t,e),e.on("*",(i,s)=>{this.trigger(i,s),this.graph.trigger(i,s)}))}onNodeClick({node:t}){this.createWidget(t)}onBlankMouseDown(){this.clearWidgets()}createTransform(t){const e=this.getTransformOptions(t);return e.resizable||e.rotatable?new Dw(e,t,this.graph):null}getTransformOptions(t){this.options.resizing||(this.options.resizing={enabled:!1}),this.options.rotating||(this.options.rotating={enabled:!1}),typeof this.options.resizing=="boolean"&&(this.options.resizing={enabled:this.options.resizing}),typeof this.options.rotating=="boolean"&&(this.options.rotating={enabled:this.options.rotating});const e=dr.parseOptionGroup(this.graph,t,this.options.resizing),i=dr.parseOptionGroup(this.graph,t,this.options.rotating);return{resizable:!!e.enabled,minWidth:e.minWidth||0,maxWidth:e.maxWidth||Number.MAX_SAFE_INTEGER,minHeight:e.minHeight||0,maxHeight:e.maxHeight||Number.MAX_SAFE_INTEGER,orthogonalResizing:typeof e.orthogonal=="boolean"?e.orthogonal:!0,restrictedResizing:!!e.restrict,autoScrollOnResizing:typeof e.autoScroll=="boolean"?e.autoScroll:!0,preserveAspectRatio:!!e.preserveAspectRatio,allowReverse:typeof e.allowReverse=="boolean"?e.allowReverse:!0,rotatable:!!i.enabled,rotateGrid:i.grid||15}}clearWidgets(){this.widgets.forEach((t,e)=>{this.graph.getCellById(e.id)&&t.dispose()}),this.widgets.clear()}dispose(){this.clearWidgets(),this.stopListening(),this.off(),Pr(this.name)}}k5([pe.dispose()],dr.prototype,"dispose",null);(function(n){function t(e,i,s){const r={};return Object.keys(s||{}).forEach(o=>{const a=s[o];r[o]=typeof a=="function"?a.call(e,i):a}),r}n.parseOptionGroup=t})(dr||(dr={}));var _5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class Bw extends Dt{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(un.classNames.box)}get $boxes(){return wz(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(t){super(),this.options=t,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new kc([],{comparator:un.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const t=this.graph,e=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onGraphTransformed,this),t.off("translate",this.onGraphTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:t,options:e}){const{showNodeSelectionBox:i,pointerEvents:s}=this.options,{ui:r,selection:o,translateBy:a,snapped:l}=e,c=(i!==!0||s&&this.getPointerEventsValue(s)==="none")&&!this.translating&&!o,u=r&&a&&t.id===a;if(c&&(u||l)){this.translating=!0;const d=t.position(),h=t.previous("position"),f=d.x-h.x,g=d.y-h.y;(f!==0||g!==0)&&this.translateSelectedNodes(f,g,t,e),this.translating=!1}}onModelUpdated({removed:t}){t&&t.length&&this.unselect(t)}isEmpty(){return this.length<=0}isSelected(t){return this.collection.has(t)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(t,e={}){e.dryrun=!0;const i=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(i,e),this}unselect(t,e={}){return e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this}reset(t,e={}){if(t){if(e.batch){const c=this.filter(Array.isArray(t)?t:[t]);return this.collection.reset(c,Object.assign(Object.assign({},e),{ui:!0})),this}const i=this.cells,s=this.filter(Array.isArray(t)?t:[t]),r={},o={};i.forEach(c=>r[c.id]=c),s.forEach(c=>o[c.id]=c);const a=[],l=[];return s.forEach(c=>{r[c.id]||a.push(c)}),i.forEach(c=>{o[c.id]||l.push(c)}),l.length&&this.unselect(l,Object.assign(Object.assign({},e),{ui:!0})),a.length&&this.select(a,Object.assign(Object.assign({},e),{ui:!0})),l.length===0&&a.length===0&&this.updateContainer(),this}return this.clean(e)}clean(t={}){return this.length&&(t.batch===!1?this.unselect(this.cells,t):this.collection.reset([],Object.assign(Object.assign({},t),{ui:!0}))),this}setFilter(t){this.options.filter=t}setContent(t){this.options.content=t}startSelecting(t){t=this.normalizeEvent(t),this.clean();let e,i;const s=this.graph.container;if(t.offsetX!=null&&t.offsetY!=null&&s.contains(t.target))e=t.offsetX,i=t.offsetY;else{const r=oo(s),o=s.scrollLeft,a=s.scrollTop;e=t.clientX-r.left+window.pageXOffset+o,i=t.clientY-r.top+window.pageYOffset+a}Ht(this.container,{top:i,left:e,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:e,offsetY:i,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(un.documentEvents,t.data)}filter(t){const e=this.options.filter;return t.filter(i=>Array.isArray(e)?e.some(s=>typeof s=="string"?i.shape===s:i.id===s.id):typeof e=="function"?yt(e,this.graph,i):!0)}stopSelecting(t){const e=this.graph,i=this.getEventData(t);switch(i.action){case"selecting":{let r=nV(this.container),o=iV(this.container);const a=oo(this.container),l=e.pageToLocal(a.left,a.top),c=e.transform.getScale();r/=c.sx,o/=c.sy;const u=new nt(l.x,l.y,r,o),d=this.getCellViewsInArea(u).map(h=>h.cell);this.reset(d,{batch:!0}),this.hideRubberband();break}case"translating":{const r=e.snapToGrid(t.clientX,t.clientY);if(!this.options.following){const o=i;this.updateSelectedNodesPosition({dx:o.clientX-o.originX,dy:o.clientY-o.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",t,r.x,r.y);break}default:{this.clean();break}}}onMouseUp(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(t){this.options.following||t.stopPropagation();const e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);const i=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:i});const s=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,s.x,s.y),this.delegateDocumentEvents(un.documentEvents,e.data)}startTranslating(t){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const t=this.graph.options.translating.restrict,e=typeof t=="function"?yt(t,this.graph,null):t;return typeof e=="number"?this.graph.transform.getGraphArea().inflate(e):e===!0?this.graph.transform.getGraphArea():e||null}getSelectionOffset(t,e){let i=t.x-e.clientX,s=t.y-e.clientY;const r=this.getRestrictArea();if(r){const o=this.collection.toArray(),a=Nt.getCellsBBox(o,{deep:!0})||nt.create(),l=r.x-a.x,c=r.y-a.y,u=r.x+r.width-(a.x+a.width),d=r.y+r.height-(a.y+a.height);if(i<l&&(i=l),s<c&&(s=c),u<i&&(i=u),d<s&&(s=d),!this.options.following){const h=t.x-e.originX,f=t.y-e.originY;i=h<=l||h>=u?0:i,s=f<=c||f>=d?0:s}}return{dx:i,dy:s}}updateElementPosition(t,e,i){const s=Ht(t,"left"),r=Ht(t,"top"),o=s?parseFloat(s):0,a=r?parseFloat(r):0;Ht(t,"left",o+e),Ht(t,"top",a+i)}updateSelectedNodesPosition(t){const{dx:e,dy:i}=t;if(e||i)if(this.translateSelectedNodes(e,i),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const s=this.graph.transform.getScale();for(let r=0,o=this.$boxes,a=o.length;r<a;r+=1)this.updateElementPosition(o[r],e*s.sx,i*s.sy);this.updateElementPosition(this.selectionContainer,e*s.sx,i*s.sy)}}autoScrollGraph(t,e){const i=this.graph.getPlugin("scroller");return i?i.autoScroll(t,e):{scrollerX:0,scrollerY:0}}adjustSelection(t){const e=this.normalizeEvent(t),i=this.getEventData(e);switch(i.action){case"selecting":{const r=i;r.moving!==!0&&(ji(this.container,this.graph.container),this.showRubberband(),r.moving=!0);const{scrollerX:o,scrollerY:a}=this.autoScrollGraph(e.clientX,e.clientY);r.scrollerX+=o,r.scrollerY+=a;const l=e.clientX-r.clientX+r.scrollerX,c=e.clientY-r.clientY+r.scrollerY,u=parseInt(Ht(this.container,"left")||"0",10),d=parseInt(Ht(this.container,"top")||"0",10);Ht(this.container,{left:l<0?r.offsetX+l:u,top:c<0?r.offsetY+c:d,width:Math.abs(l),height:Math.abs(c)});break}case"translating":{const r=this.graph.snapToGrid(e.clientX,e.clientY),o=i,a=this.getSelectionOffset(r,o);this.options.following?this.updateSelectedNodesPosition(a):this.updateContainerPosition(a),a.dx&&(o.clientX=r.x),a.dy&&(o.clientY=r.y),this.notifyBoxEvent("box:mousemove",t,r.x,r.y);break}}this.boxesUpdated=!1}translateSelectedNodes(t,e,i,s){const r={},o=[];if(i&&(r[i.id]=!0),this.collection.toArray().forEach(a=>{a.getDescendants({deep:!0}).forEach(l=>{r[l.id]=!0})}),s&&s.translateBy){const a=this.graph.getCellById(s.translateBy);a&&(r[a.id]=!0,a.getDescendants({deep:!0}).forEach(l=>{r[l.id]=!0}),o.push(a))}this.collection.toArray().forEach(a=>{if(!r[a.id]){const l=Object.assign(Object.assign({},s),{selection:this.cid,exclude:o});a.translate(t,e,l),this.graph.model.getConnectedEdges(a).forEach(c=>{r[c.id]||(c.translate(t,e,l),r[c.id]=!0)})}})}getCellViewsInArea(t){const e=this.graph,i={strict:this.options.strict};let s=[];return this.options.rubberNode&&(s=s.concat(e.model.getNodesInArea(t,i).map(r=>e.renderer.findViewByCell(r)).filter(r=>r!=null))),this.options.rubberEdge&&(s=s.concat(e.model.getEdgesInArea(t,i).map(r=>e.renderer.findViewByCell(r)).filter(r=>r!=null))),s}notifyBoxEvent(t,e,i,s){const o=this.getEventData(e).activeView;this.trigger(t,{e,view:o,x:i,y:s,cell:o.cell})}getSelectedClassName(t){return this.prefixClassName(`${t.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))}removeCellUnSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))}destroySelectionBox(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(xi(this.container.querySelector(`[data-cell-id="${t.id}"]`)),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(t){t.forEach(e=>this.removeCellUnSelectedClassName(e)),this.hide(),xi(this.$boxes),this.boxCount=0}hide(){Ce(this.container,this.prefixClassName(un.classNames.rubberband)),Ce(this.container,this.prefixClassName(un.classNames.selected))}showRubberband(){bt(this.container,this.prefixClassName(un.classNames.rubberband))}hideRubberband(){Ce(this.container,this.prefixClassName(un.classNames.rubberband))}showSelected(){If(this.container,"style"),bt(this.container,this.prefixClassName(un.classNames.selected))}createContainer(){this.container=document.createElement("div"),bt(this.container,this.prefixClassName(un.classNames.root)),this.options.className&&bt(this.container,this.options.className),this.selectionContainer=document.createElement("div"),bt(this.selectionContainer,this.prefixClassName(un.classNames.inner)),this.selectionContent=document.createElement("div"),bt(this.selectionContent,this.prefixClassName(un.classNames.content)),Nn(this.selectionContainer,this.selectionContent),Vt(this.selectionContainer,"data-selection-length",this.collection.length),px(this.container,this.selectionContainer)}updateContainerPosition(t){(t.dx||t.dy)&&this.updateElementPosition(this.selectionContainer,t.dx,t.dy)}updateContainer(){const t={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter(r=>this.canShowSelectionBox(r)).forEach(r=>{const o=this.graph.renderer.findViewByCell(r);if(o){const a=o.getBBox({useCellGeometry:!0});t.x=Math.min(t.x,a.x),t.y=Math.min(t.y,a.y),e.x=Math.max(e.x,a.x+a.width),e.y=Math.max(e.y,a.y+a.height)}}),Ht(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:e.x-t.x,height:e.y-t.y}),Vt(this.selectionContainer,"data-selection-length",this.collection.length);const s=this.options.content;if(s)if(typeof s=="function"){const r=yt(s,this.graph,this,this.selectionContent);r&&(this.selectionContent.innerHTML=r)}else this.selectionContent.innerHTML=s;this.collection.length>0&&!this.container.parentNode?ji(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(t){return t.isNode()&&this.options.showNodeSelectionBox===!0||t.isEdge()&&this.options.showEdgeSelectionBox===!0}getPointerEventsValue(t){return typeof t=="string"?t:t(this.cells)}createSelectionBox(t){if(this.addCellSelectedClassName(t),this.canShowSelectionBox(t)){const e=this.graph.renderer.findViewByCell(t);if(e){const i=e.getBBox({useCellGeometry:!0}),s=this.boxClassName,r=document.createElement("div"),o=this.options.pointerEvents;bt(r,s),bt(r,`${s}-${t.isNode()?"node":"edge"}`),Vt(r,"data-cell-id",t.id),Ht(r,{position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height,pointerEvents:o?this.getPointerEventsValue(o):"auto"}),ji(r,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let t=0,e=this.$boxes,i=e.length;t<i;t+=1){const s=e[t],r=Vt(s,"data-cell-id");xi(s),this.boxCount-=1;const o=this.collection.get(r);o&&this.createSelectionBox(o)}this.updateContainer()}return 0}getCellViewFromElem(t){const e=t.getAttribute("data-cell-id");if(e){const i=this.collection.get(e);if(i)return this.graph.renderer.findViewByCell(i)}return null}onCellRemoved({cell:t}){this.destroySelectionBox(t),this.updateContainer()}onReseted({previous:t,current:e}){this.destroyAllSelectionBoxes(t),e.forEach(i=>{this.listenCellRemoveEvent(i),this.createSelectionBox(i)}),this.updateContainer()}onCellAdded({cell:t}){this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}listenCellRemoveEvent(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:t,removed:e,options:i}){t.forEach(r=>{this.trigger("cell:selected",{cell:r,options:i}),r.isNode()?this.trigger("node:selected",{cell:r,options:i,node:r}):r.isEdge()&&this.trigger("edge:selected",{cell:r,options:i,edge:r})}),e.forEach(r=>{this.trigger("cell:unselected",{cell:r,options:i}),r.isNode()?this.trigger("node:unselected",{cell:r,options:i,node:r}):r.isEdge()&&this.trigger("edge:unselected",{cell:r,options:i,edge:r})});const s={added:t,removed:e,options:i,selected:this.cells.filter(r=>!!this.graph.getCellById(r.id))};this.trigger("selection:changed",s)}dispose(){this.clean(),this.remove(),this.off()}}_5([Dt.dispose()],Bw.prototype,"dispose",null);var un;(function(n){const t="widget-selection";n.classNames={root:t,inner:`${t}-inner`,box:`${t}-box`,content:`${t}-content`,rubberband:`${t}-rubberband`,selected:`${t}-selected`},n.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};function e(i){return i.getAncestors().length}n.depthComparator=e})(un||(un={}));const $5=`.x6-widget-selection {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
`;tt.prototype.isSelectionEnabled=function(){const n=this.getPlugin("selection");return n?n.isEnabled():!1};tt.prototype.enableSelection=function(){const n=this.getPlugin("selection");return n&&n.enable(),this};tt.prototype.disableSelection=function(){const n=this.getPlugin("selection");return n&&n.disable(),this};tt.prototype.toggleSelection=function(n){const t=this.getPlugin("selection");return t&&t.toggleEnabled(n),this};tt.prototype.isMultipleSelection=function(){const n=this.getPlugin("selection");return n?n.isMultipleSelection():!1};tt.prototype.enableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.enableMultipleSelection(),this};tt.prototype.disableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.disableMultipleSelection(),this};tt.prototype.toggleMultipleSelection=function(n){const t=this.getPlugin("selection");return t&&t.toggleMultipleSelection(n),this};tt.prototype.isSelectionMovable=function(){const n=this.getPlugin("selection");return n?n.isSelectionMovable():!1};tt.prototype.enableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.enableSelectionMovable(),this};tt.prototype.disableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.disableSelectionMovable(),this};tt.prototype.toggleSelectionMovable=function(n){const t=this.getPlugin("selection");return t&&t.toggleSelectionMovable(n),this};tt.prototype.isRubberbandEnabled=function(){const n=this.getPlugin("selection");return n?n.isRubberbandEnabled():!1};tt.prototype.enableRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableRubberband(),this};tt.prototype.disableRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableRubberband(),this};tt.prototype.toggleRubberband=function(n){const t=this.getPlugin("selection");return t&&t.toggleRubberband(n),this};tt.prototype.isStrictRubberband=function(){const n=this.getPlugin("selection");return n?n.isStrictRubberband():!1};tt.prototype.enableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableStrictRubberband(),this};tt.prototype.disableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableStrictRubberband(),this};tt.prototype.toggleStrictRubberband=function(n){const t=this.getPlugin("selection");return t&&t.toggleStrictRubberband(n),this};tt.prototype.setRubberbandModifiers=function(n){const t=this.getPlugin("selection");return t&&t.setRubberbandModifiers(n),this};tt.prototype.setSelectionFilter=function(n){const t=this.getPlugin("selection");return t&&t.setSelectionFilter(n),this};tt.prototype.setSelectionDisplayContent=function(n){const t=this.getPlugin("selection");return t&&t.setSelectionDisplayContent(n),this};tt.prototype.isSelectionEmpty=function(){const n=this.getPlugin("selection");return n?n.isEmpty():!0};tt.prototype.cleanSelection=function(n){const t=this.getPlugin("selection");return t&&t.clean(n),this};tt.prototype.resetSelection=function(n,t){const e=this.getPlugin("selection");return e&&e.reset(n,t),this};tt.prototype.getSelectedCells=function(){const n=this.getPlugin("selection");return n?n.getSelectedCells():[]};tt.prototype.getSelectedCellCount=function(){const n=this.getPlugin("selection");return n?n.getSelectedCellCount():0};tt.prototype.isSelected=function(n){const t=this.getPlugin("selection");return t?t.isSelected(n):!1};tt.prototype.select=function(n,t){const e=this.getPlugin("selection");return e&&e.select(n,t),this};tt.prototype.unselect=function(n,t){const e=this.getPlugin("selection");return e&&e.unselect(n,t),this};var I5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class So extends pe{get rubberbandDisabled(){return this.options.enabled!==!0||this.options.rubberband!==!0}get disabled(){return this.options.enabled!==!0}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(t={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Object.assign(Object.assign({enabled:!0},So.defaultOptions),t),Sr(this.name,$5)}init(t){this.graph=t,this.selectionImpl=new Bw(Object.assign(Object.assign({},this.options),{graph:t})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.options.movable!==!1}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selectionImpl.options.strict===!0}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(t){this.setModifiers(t)}setSelectionFilter(t){return this.setFilter(t),this}setSelectionDisplayContent(t){return this.setContent(t),this}isEmpty(){return this.length<=0}clean(t={}){return this.selectionImpl.clean(t),this}reset(t,e={}){return this.selectionImpl.reset(t?this.getCells(t):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(t){return this.selectionImpl.isSelected(t)}select(t,e={}){const i=this.getCells(t);return i.length&&(this.isMultiple()?this.selectionImpl.select(i,e):this.reset(i.slice(0,1),e)),this}unselect(t,e={}){return this.selectionImpl.unselect(this.getCells(t),e),this}setup(){this.selectionImpl.on("*",(t,e)=>{this.trigger(t,e),this.graph.trigger(t,e)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:t}){if(!this.allowBlankMouseDown(t))return;const e=this.graph.panning.allowPanning(t,!0),i=this.graph.getPlugin("scroller"),s=i&&i.allowPanning(t,!0);(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!s&&!e)&&this.startRubberband(t)}allowBlankMouseDown(t){const e=this.options.eventTypes;return(e==null?void 0:e.includes("leftMouseDown"))&&t.button===0||(e==null?void 0:e.includes("mouseWheelDown"))&&t.button===1}onBlankClick(){this.clean()}allowRubberband(t,e){return!this.rubberbandDisabled&&Wi.isMatch(t,this.options.modifiers,e)}allowMultipleSelection(t){return this.isMultiple()&&Wi.isMatch(t,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:t}){this.movedMap.set(t,!0)}onCellMouseUp({e:t,cell:e}){const i=this.options;let s=this.disabled;!s&&this.movedMap.has(e)&&(s=i.selectCellOnMoved===!1,s||(s=i.selectNodeOnMoved===!1&&e.isNode()),s||(s=i.selectEdgeOnMoved===!1&&e.isEdge())),s||(this.allowMultipleSelection(t)?this.unselectMap.has(e)?this.unselectMap.delete(e):this.isSelected(e)?this.unselect(e):this.select(e):this.reset(e)),this.movedMap.delete(e)}onBoxMouseDown({e:t,cell:e}){this.disabled||this.allowMultipleSelection(t)&&(this.unselect(e),this.unselectMap.set(e,!0))}getCells(t){return(Array.isArray(t)?t:[t]).map(e=>typeof e=="string"?this.graph.getCellById(e):e).filter(e=>e!=null)}startRubberband(t){return this.rubberbandDisabled||this.selectionImpl.startSelecting(t),this}isMultiple(){return this.options.multiple!==!1}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(t){return this.options.modifiers=t,this}setContent(t){return this.selectionImpl.setContent(t),this}setFilter(t){return this.selectionImpl.setFilter(t),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),Pr(this.name)}}I5([pe.dispose()],So.prototype,"dispose",null);(function(n){n.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null,eventTypes:["leftMouseDown","mouseWheelDown"]}})(So||(So={}));const Vs={TRIGGER:0,CONDITION:1,ACTION:2},bd=Array.from({length:10}).reduce((n,t,e)=>(n["TRIG_"+e]={name:""+e,code:"1"+e,icon:"trigger"},n),{}),vd=Array.from({length:3}).reduce((n,t,e)=>(n["CON_"+e]={name:""+e,code:"2"+e,icon:"condition"},n),{}),yd=Array.from({length:25}).reduce((n,t,e)=>(n["ACT_"+e]={name:""+e,code:"3"+e,icon:"action"},n),{}),Hf={0:{TRIG_1:{exchange:n=>{const[t]=n||[];let e=170;if(t!=null&&t.desc.length)switch(t.desc.length){case 2:e=200;break;case 3:e=230;break}return{label:"1",tips:t.desc.join(),size:[e,40]}}}},1:{CON_1:{exchange:([n])=>({size:[140,40],label:"1",tips:n.desc})}},2:{ACT_1:{exchange:([n])=>({label:"1",tips:n.desc,size:[130,40]})}}};let Ys={};const qn={_buffer:[],_replayBuffer(n){const t=this._buffer;this._buffer=[];for(let e=0,i=t.length;e<i;e++){const s=t[e];s[0]===n?this.emit.apply(this,s):this._buffer.push(s)}},on(n,t){const e="$"+n;Ys[e]?Ys[e].push(t):(Ys[e]=[t],this._replayBuffer(n))},once(n,t){const e=(...i)=>(this.off(n,e),t.apply(this,i));this.on(n,e)},off(n,t){if(n="$"+n,!arguments.length)Ys={};else{const e=Ys[n];if(e)if(!t)Ys[n]=null;else for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r===t||r.fn===t){e.splice(i,1);break}}}},emit(n,...t){const e="$"+n;let i=Ys[e];if(i){i=i.slice();for(let s=0,r=i.length;s<r;s++)try{const o=i[s].apply(this,t);typeof(o==null?void 0:o.catch)=="function"&&o.catch(a=>{console.error(`[Hook] Error in async event handler for ${n} with args:`,t),console.error(a)})}catch(o){console.error(`[Hook] Error in event handler for ${n} with args:`,t),console.error(o)}}else this._buffer.push([n,...t])}};class R5{constructor(){Vn(this,"graph");Vn(this,"triggerShapes");Vn(this,"conditionShapes");Vn(this,"actionShapes");this.graph=null,this.triggerShapes=[],this.conditionShapes=[],this.actionShapes=[],this.init(),this.loadVueShapes(),this.initEventsHook()}init(){const t=new tt({container:document.getElementById("container"),background:{color:"#F2F7FA"},autoResize:!0,grid:{size:20,visible:!0},mousewheel:{enabled:!0,modifiers:["ctrl","meta"],minScale:.7,maxScale:1.5},connecting:{snap:!0,allowBlank:!1,allowLoop:!1,allowMulti:!1,highlight:!0,allowNode:!1,sourceAnchor:{name:"center"},targetAnchor:"center",connectionPoint:"anchor",connector:{name:"rounded",args:{radius:20}},router:{name:"manhattan",args:{step:20,padding:20}},validateMagnet({magnet:e,cell:i}){return e.getAttribute("port-group")!=="in"},createEdge(){return new Sw({attrs:{line:{stroke:"rgba(118, 124, 130, .5)",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})}},highlighting:{embedding:{name:"stroke",attrs:{stroke:"#73d13d"}},magnetAvailable:{name:"stroke",args:{padding:4,attrs:{"stroke-width":4,stroke:"skyblue"}}},magnetAdsorbed:{name:"stroke",args:{padding:4,attrs:{"stroke-width":8,stroke:"skyblue"}}}}});window.__x6_instances__.push(t),this.graph=t,this.loadPlugins(t),this.registerGraphEvents(t)}loadPlugins(t){t.use(new Mw({enabled:!0,pannable:!0})).use(new kw({container:document.getElementById("minimap"),width:150,height:100,padding:20,scalable:!1})).use(new $w({enabled:!0,global:!0})).use(new Rw({enabled:!0})).use(new Co({enabled:!0})).use(new dr({resizing:{minWidth:400,minHeight:200,restricted:!0}})).use(new So({enabled:!0}))}loadVueShapes(){this.triggerShapes=Object.keys(bd).map(t=>this.graph.createNode({shape:t})),this.conditionShapes=Object.keys(vd).map(t=>this.graph.createNode({shape:t})),this.actionShapes=Object.keys(yd).map(t=>this.graph.createNode({shape:t}))}getTriggers(){return this.triggerShapes}getConditions(){return this.conditionShapes}getActions(){return this.actionShapes}registerGraphEvents(t=new tt){t.on("blank:click",()=>{qn.emit("blank:click"),t.getCells().forEach(i=>i.removeTools())});let e=0;t.on("node:click",({e:i,node:s})=>{i.preventDefault();const r=Date.now();if(r-e<=300){const o=s.getData();logger.info("Data",o),qn.emit("node:dblclick",o),e=0}else e=r},this),t.on("cell:selected",({cell:i})=>{var s;qn.emit("cell:selected",i),(s=t.getCells())==null||s.forEach(r=>r.removeTools()),i.addTools("button-remove")},this),t.on("node:added",({node:i})=>{const s=t.findViewByCell(i);s==null||s.container.setAttribute("filter","url(#lighting)"),qn.emit("node:added",i)},this)}toJSON(){const t=this.graph.getNodes().map(s=>{const r=s.toJSON(),{id:o}=r,a=s.getData();if(!a)throw new Error("toJSON Data");return{category:a.category,id:o,nodeId:a.nodeId,nodeJson:r}}),e={TRUE:0,FLASE:1},i=this.graph.getEdges().map(s=>{const r=s.toJSON(),{id:o,source:a,target:l}=r,c={true:e.TRUE+"",false:e.FLASE+""},u=c[a.port]??c[l.port];return{edgeId:o,edgeJson:r,property:u,sourceId:a.cell,targetId:l.cell}});return{nodes:t,edges:i}}initEventsHook(){qn.on("custom:set:node:data",(t,e)=>{var s,r;const i=this.graph.getSelectedCells();if(i.length===1){const o=i[0],a=o.getData(),l=PS(t,a);(s=this.graph.findViewByCell(o))==null||s.container.setAttribute("filter","url(#lighting)"),a.nodeId&&((r=this.graph.findViewByCell(o))==null||r.container.removeAttribute("filter")),o.setData({...l,updateAt:Date.now()},e)}})}}class Km extends me{}(function(n){function t(e){const i=[],s=ee.getForeignObjectMarkup();return e?i.push({tagName:e,selector:"body"},s):i.push(s),i}n.config({view:"vue-shape-view",markup:t(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(e){if(e.markup==null){const i=e.primer;if(i){e.markup=t(i);let s={};switch(i){case"circle":s={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":s={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break}e.attrs=xe({},{body:Object.assign({refWidth:null,refHeight:null},s)},e.attrs||{})}}return e}}),me.registry.register("vue-shape",n,!0)})(Km||(Km={}));var N5=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const Lw={};function Gf(n){const{shape:t,component:e,inherit:i}=n,s=N5(n,["shape","component","inherit"]);if(!t)throw new Error("should specify shape in config");Lw[t]={component:e},tt.registerNode(t,Object.assign({inherit:i||"vue-shape"},s),!0)}let ku=!1;const Ic=de({});function D5(n,t,e,i,s){ku&&(Ic[n]=kd(U({render:()=>Xr(mr,{to:e},[Xr(t,{node:i,graph:s})]),provide:()=>({getNode:()=>i,getGraph:()=>s})})))}function B5(n){ku&&delete Ic[n]}function Jm(){return ku}function L5(){return ku=!0,U({setup(){return()=>Xr(Jt,{},Object.keys(Ic).map(n=>Xr(Ic[n])))}})}class Rc extends Sn{getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(t){const e=super.confirmUpdate(t);return this.handleAction(e,Rc.action,()=>{this.renderVueComponent()})}targetId(){return`${this.graph.view.cid}:${this.cell.id}`}renderVueComponent(){this.unmountVueComponent();const t=this.getComponentContainer(),e=this.cell,i=this.graph;if(t){const{component:s}=Lw[e.shape];s&&(Jm()?D5(this.targetId(),s,t,e,i):(this.vm=jd({render(){return Xr(s,{node:e,graph:i})},provide(){return{getNode:()=>e,getGraph:()=>i}}}),this.vm.mount(t)))}}unmountVueComponent(){const t=this.getComponentContainer();return this.vm&&(this.vm.unmount(),this.vm=null),t&&(t.innerHTML=""),t}onMouseDown(t,e,i){const s=t.target;if(s.tagName.toLowerCase()==="input"){const o=s.getAttribute("type");if(o==null||["text","password","number","email","search","tel","url"].includes(o))return}super.onMouseDown(t,e,i)}unmount(){return Jm()&&B5(this.targetId()),this.unmountVueComponent(),super.unmount(),this}}(function(n){n.action="vue",n.config({bootstrap:[n.action],actions:{component:n.action}}),Sn.registry.register("vue-shape-view",n,!0)})(Rc||(Rc={}));const j5=`.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
`;var z5=function(n,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(t,e,r):o(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};class fr extends Dt{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(t){super(),this.name="dnd",this.options=Object.assign(Object.assign({},fr.defaults),t),this.init()}init(){Sr(this.name,j5),this.container=document.createElement("div"),bt(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new tt(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),Nn(this.container,this.draggingGraph.container)}start(t,e){const i=e;i.preventDefault(),this.targetModel.startBatch("dnd"),bt(this.container,"dragging"),ji(this.container,this.options.draggingContainer||document.body),this.sourceNode=t,this.prepareDragging(t,i.clientX,i.clientY);const s=this.updateNodePosition(i.clientX,i.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:i,node:t,cell:t,view:this.draggingView,x:s.x,y:s.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(fr.documentEvents,i.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(t,e,i){const s=this.draggingGraph,r=s.model,o=this.options.getDragNode(t,{sourceNode:t,draggingGraph:s,targetGraph:this.targetGraph});o.position(0,0);let a=5;if(this.isSnaplineEnabled()&&(a+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const u=this.targetGraph.transform.getScale();s.scale(u.sx,u.sy),a*=Math.max(u.sx,u.sy)}else s.scale(1,1);this.clearDragging(),r.resetCells([o]);const l=s.findViewByCell(o);l.undelegateEvents(),l.cell.off("changed"),s.fitToContent({padding:a,allowNewOrigin:"any",useCellGeometry:!1});const c=l.getBBox();this.geometryBBox=l.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(c.getTopLeft()),this.draggingNode=o,this.draggingView=l,this.draggingBBox=o.getBBox(),this.padding=a,this.originOffset=this.updateGraphPosition(e,i)}updateGraphPosition(t,e){const i=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft,r=this.delta,o=this.geometryBBox,a=this.padding||5,l={left:t-r.x-o.width/2-a+s,top:e-r.y-o.height/2-a+i};return this.draggingGraph&&Ht(this.container,{left:`${l.left}px`,top:`${l.top}px`}),l}updateNodePosition(t,e){const i=this.targetGraph.clientToLocal(t,e),s=this.draggingBBox;return i.x-=s.width/2,i.y-=s.height/2,this.draggingNode.position(i.x,i.y),i}snap({cell:t,current:e,options:i}){const s=t;if(i.snapped){const r=this.draggingBBox;s.position(r.x+i.tx,r.y+i.ty,{silent:!0}),this.draggingView.translate(),s.position(e.x,e.y,{silent:!0}),this.snapOffset={x:i.tx,y:i.ty}}else this.snapOffset=null}onDragging(t){const e=this.draggingView;if(e){t.preventDefault();const i=this.normalizeEvent(t),s=i.clientX,r=i.clientY;this.updateGraphPosition(s,r);const o=this.updateNodePosition(s,r),a=this.targetGraph.options.embedding.enabled,l=(a||this.isSnaplineEnabled())&&this.isInsideValidArea({x:s,y:r});if(a){e.setEventData(i,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const c=e.getEventData(i);l?e.processEmbedding(i,c):e.clearEmbedding(c),this.candidateEmbedView=c.candidateEmbedView}this.isSnaplineEnabled()&&(l?this.snapline.snapOnMoving({e:i,view:e,x:o.x,y:o.y}):this.snapline.hide())}}onDragEnd(t){const e=this.draggingNode;if(e){const i=this.normalizeEvent(t),s=this.draggingView,r=this.draggingBBox,o=this.snapOffset;let a=r.x,l=r.y;o&&(a+=o.x,l+=o.y),e.position(a,l,{silent:!0});const c=this.drop(e,{x:i.clientX,y:i.clientY}),u=d=>{d?(this.onDropped(e),this.targetGraph.options.embedding.enabled&&s&&(s.setEventData(i,{cell:d,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),s.finalizeEmbedding(i,s.getEventData(i)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};sd(c)?(this.undelegateDocumentEvents(),c.then(u)):u(c)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(t){this.draggingNode===t&&(this.clearDragging(),Ce(this.container,"dragging"),xi(this.container))}onDropInvalid(){const t=this.draggingNode;t&&this.onDropped(t)}isInsideValidArea(t){let e,i=null;const s=this.targetGraph,r=this.targetScroller;this.options.dndContainer&&(i=this.getDropArea(this.options.dndContainer));const o=i&&i.containsPoint(t);if(r)if(r.options.autoResize)e=this.getDropArea(r.container);else{const a=this.getDropArea(r.container);e=this.getDropArea(s.container).intersectsWithRect(a)}else e=this.getDropArea(s.container);return!o&&e&&e.containsPoint(t)}getDropArea(t){const e=oo(t),i=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft;return nt.create({x:e.left+parseInt(Ht(t,"border-left-width"),10)-s,y:e.top+parseInt(Ht(t,"border-top-width"),10)-i,width:t.clientWidth,height:t.clientHeight})}drop(t,e){if(this.isInsideValidArea(e)){const i=this.targetGraph,s=i.model,r=i.clientToLocal(e),o=this.sourceNode,a=this.options.getDropNode(t,{sourceNode:o,draggingNode:t,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),l=a.getBBox();r.x+=l.x-l.width/2,r.y+=l.y-l.height/2;const c=this.snapOffset?1:i.getGridSize();a.position(qt.snapToGrid(r.x,c),qt.snapToGrid(r.y,c)),a.removeZIndex();const u=this.options.validateNode,d=u?u(a,{sourceNode:o,draggingNode:t,droppingNode:a,targetGraph:i,draggingGraph:this.draggingGraph}):!0;return typeof d=="boolean"?d?(s.addCell(a,{stencil:this.cid}),a):null:iz(d).then(h=>h?(s.addCell(a,{stencil:this.cid}),a):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),Pr(this.name)}}z5([Dt.dispose()],fr.prototype,"dispose",null);(function(n){n.defaults={getDragNode:t=>t.clone(),getDropNode:t=>t.clone()},n.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}})(fr||(fr={}));const V5=()=>fz(0,Date.now()).toString().slice(0,7);function Zm(n={},{atomicCategory:t,nodeCode:e,configJSON:i}){const{transform:s,describes:r}=F5(n,i);n=sv(n);const o={form:n,nodeCode:e},a={category:t,id:null,properties:[o]};return logger.info("TransformData","staticform",s,"describes",r),{result:a,willSetData:{...o,describes:r}}}function F5(n={},t=""){if(Object.keys(n).length<=0)return{transform:null,describes:null};if(!t)return{transform:null,describes:null};const e=t.list;logger.info("templateList",e);const i=[];return{transform:Object.keys(n).sort().reduce((r,o)=>{const a=e.find(l=>l.prop===o);if(!a)return r;if(a.ele==="select"||Array.isArray(a.options)&&a.options.length)if(Array.isArray(n[o])){const l=n[o].map(c=>a.options.find(d=>d.key===c).value);r[o]=l,i.push({label:a.label,desc:l})}else{const c=a.options.find(u=>u.key===n[o]).value;r[o]=c,i.push({label:a.label,desc:c})}else{const l=n[o];r[o]=l,i.push({label:a.label,desc:l})}return r},{}),describes:i}}class H5 extends Dt{constructor(e={}){super();Vn(this,"dnd");Vn(this,"options");Vn(this,"graph");Vn(this,"container");this.graph=null,this.options=e,this.init()}init(){this.dnd=new fr({...this.options}),this.initContainer()}load(e=[]){return this.initGroup(),Array.isArray(e)&&this.loadGroup(e),this}initContainer(){this.container=document.getElementById("stencil-container")}initGroup(){this.graph&&this.clearGroup();const e=new tt({container:this.container,background:{color:"#EBEDF0"},interacting:!1,preventDefaultBlankAction:!1});window.__x6_instances__[1]=e,this.registerGraphEvents(e),this.graph=e}registerGraphEvents(e){e.on("cell:mousedown",this.onDragStart,this)}unregisterGraphEvents(e){e.off("cell:mousedown",this.onDragStart,this)}loadGroup(e){const i=this.getModel();let s=[];i&&(s=e.map(o=>me.isNode(o)?(o.removePorts(),o):me.create(o)),i.resetCells(s));const r=this.graph;return G5(s,{columnWidth:r.options.width,columns:2,rowHeight:50,resizeToFit:!1,dx:0,dy:5}),r.fitToContent({padding:{bottom:50}}),this}onDragStart(e){const{e:i,node:s}=e,r=this.getGroupByNode(s);r&&r.nodeMovable===!1||(s.id=V5(),this.dnd.start(s,i),qn.emit("custom:on:drag:start",s))}getGroupByNode(e){const i=this.getModel();return i?i.has(e.id):null}clearGroup(){this.unregisterGraphEvents(this.graph),this.graph.dispose(),this.graph=null}getModel(){return this.graph?this.graph.model:null}}function G5(n,t={}){const e=fn.isModel(n)?n:new fn().resetCells(n,{sort:!1,dryrun:!0}),i=e.getNodes(),s=t.columns||1,r=Math.ceil(i.length/s),o=t.dx||0,a=t.dy||0,l=t.center!==!1,c=t.resizeToFit===!0,u=t.marginX||0,d=t.marginY||0,h=[];let f=t.columnWidth;if(f==="compact")for(let b=0;b<s;b+=1){const y=W5(i,b,s);h.push(Ll(y,"width")+o)}else{(f==null||f==="auto")&&(f=Ll(i,"width")+o);for(let b=0;b<s;b+=1)h.push(f)}const g=Qm(h,u),m=[];let p=t.rowHeight;if(p==="compact")for(let b=0;b<r;b+=1){const y=U5(i,b,s);m.push(Ll(y,"height")+a)}else{(p==null||p==="auto")&&(p=Ll(i,"height")+a);for(let b=0;b<r;b+=1)m.push(p)}const v=Qm(m,d);e.startBatch("layout"),i.forEach((b,y)=>{const w=y%s,C=Math.floor(y/s),P=h[w],E=m[C];let S=0,A=0,M=b.getSize();if(c){let O=P-2*o,T=E-2*a;const R=M.height*(M.width?O/M.width:1),L=M.width*(M.height?T/M.height:1);E<R?O=L:T=R,M={width:O,height:T},b.setSize(M,t)}l&&(S=(P-M.width)/2,A=(E-M.height)/2),b.position(g[w]+o+S,v[C]+a+A,t)}),e.stopBatch("layout")}function Ll(n,t){return n.reduce((e,i)=>Math.max(i==null?void 0:i.getSize()[t],e),0)}function U5(n,t,e){const i=[];for(let s=e*t,r=s+e;s<r;s+=1)n[s]&&i.push(n[s]);return i}function W5(n,t,e){const i=[];for(let s=t,r=n.length;s<r;s+=e)n[s]&&i.push(n[s]);return i}function Qm(n,t){return n.reduce((e,i,s)=>(e.push(e[s]+i),e),[t||0])}async function q5(n){if(n.startsWith("1"))return[{nodeCode:"TRIG_1",nodeName:"1",configJSON:{list:[{ele:"select",prop:"test_trig_prop",label:"",multiple:!0,options:[{key:1,value:""},{key:2,value:""},{key:3,value:""}],rules:[{required:!0,message:"",trigger:"blur"}]}]}}];if(n.startsWith("2"))return[{nodeCode:"CON_1",nodeName:"1",configJSON:{list:[{ele:"select",prop:"test_con_prop",label:"",options:[{key:0,value:""},{key:1,value:""}],rules:[{required:!0,message:"",trigger:"blur"}]}]}}];if(n.startsWith("3"))return[{nodeCode:"ACT_1",nodeName:"1",configJSON:{list:[{ele:"select",label:"",prop:"state",options:[{key:1,value:""},{key:2,value:""}]}],rules:{state:[{required:!0,message:"",trigger:"change"}]}}}]}const jw={};function tb(n){const t=Date.now();return jw[t]=n}function Y5(n){return jw[n]}const X5={class:"body"},K5={class:"select-title"},J5={__name:"Multiple",props:{modelValue:{type:Array,default:()=>[]},config:{type:Object,default:()=>({label:"",rules:[],placeholder:"",options:[]})}},emits:["update:modelValue"],setup(n,{emit:t}){const e=j(""),i=n,s=t,r=j([]),o=j(!1),a=()=>{e.value=i.config.options.filter(l=>r.value.includes(l.key)).map(l=>l.value).join(),s("update:modelValue",r.value),o.value=!1};return(l,c)=>{const u=ve("van-field"),d=ve("van-button"),h=ve("van-checkbox"),f=ve("van-cell"),g=ve("van-checkbox-group"),m=ve("van-popup");return It(),ne(Jt,null,[x(u,{"label-width":"120px","is-link":"",readonly:"",onClick:c[0]||(c[0]=p=>o.value=!0),modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=p=>e.value=p),label:i.config.label,placeholder:i.config.placeholder||"",rules:i.config.rules||[]},null,8,["modelValue","label","placeholder","rules"]),x(m,{duration:.1,show:o.value,"onUpdate:show":c[4]||(c[4]=p=>o.value=p),position:"bottom",style:{height:"70%"}},{default:We(()=>[Kt("div",X5,[Kt("div",K5,[x(d,{style:{border:"none",color:"#969799"},onClick:c[2]||(c[2]=p=>o.value=!1),size:"normal"},{default:We(()=>[Qn("")]),_:1}),x(d,{style:{border:"none",color:"#6398fb"},onClick:a,size:"normal"},{default:We(()=>[Qn("")]),_:1})]),x(g,{modelValue:r.value,"onUpdate:modelValue":c[3]||(c[3]=p=>r.value=p),class:"checbox-group-container"},{default:We(()=>[(It(!0),ne(Jt,null,ar(i.config.options,p=>(It(),on(f,{key:p.key,title:p.value,"is-link":""},{"right-icon":We(()=>[x(h,{disabled:i.config.multipleLimit==r.value.length&&!r.value.includes(p.key),name:p.key},null,8,["disabled","name"])]),_:2},1032,["title"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["show"])],64)}}},Z5=$s(J5,[["__scopeId","data-v-fda3f5ea"]]),Q5={style:{padding:"10px 20px"}},tH={style:{margin:"16px"}},eH={__name:"Form",emits:["submit"],setup(n,{expose:t,emit:e}){const i=j({show:!1,title:"",prop:"",columns:[],showTimePicker:!1,model:null}),s=j([]);t({reload:(f,g)=>{g&&(o.value=g||{}),s.value=f.list}});const o=j({}),a=f=>{var g;i.value={showTimePicker:!0,title:f.label,prop:f.prop,model:((g=o.value[f.prop])==null?void 0:g.split(":"))||[]}},l=f=>{const m=(f.options||[]).map(p=>({text:p.value,value:p.key}));i.value={show:!0,title:f.label,prop:f.prop,columns:m}},c=({selectedOptions:f})=>{o.value[i.value.prop]=f[0].value,o.value["_"+i.value.prop]=f[0].text,i.value.show=!1},u=({selectedOptions:f,selectedValues:g})=>{o.value[i.value.prop]=f.map(m=>m.text).join(":"),i.value.showTimePicker=!1},d=e,h=()=>{d("submit",Ut(o.value))};return(f,g)=>{const m=ve("van-field"),p=ve("van-radio"),v=ve("van-radio-group"),b=ve("van-button"),y=ve("van-form"),w=ve("van-picker"),C=ve("van-popup"),P=ve("van-time-picker");return It(),ne(Jt,null,[x(y,{onSubmit:h},{default:We(()=>[(It(!0),ne(Jt,null,ar(s.value,(E,S)=>(It(),ne(Jt,{key:S},[E.ele=="input"?(It(),on(m,{key:0,"label-width":"120px",modelValue:o.value[E.prop],"onUpdate:modelValue":A=>o.value[E.prop]=A,label:E.label,placeholder:E.placeholder||"",rules:E.rules||[],type:E.type},null,8,["modelValue","onUpdate:modelValue","label","placeholder","rules","type"])):gi("",!0),E.ele=="input-number"?(It(),on(m,{key:1,"label-width":"120px",modelValue:o.value[E.prop],"onUpdate:modelValue":A=>o.value[E.prop]=A,label:E.label,type:"number",placeholder:E.placeholder||"",rules:E.rules||[]},null,8,["modelValue","onUpdate:modelValue","label","placeholder","rules"])):gi("",!0),E.ele=="time-select"?(It(),on(m,{key:2,"label-width":"120px",modelValue:o.value[E.prop],"onUpdate:modelValue":A=>o.value[E.prop]=A,"is-link":"",readonly:"",label:E.label,placeholder:E.placeholder||"",onClick:A=>a(E),rules:E.rules||[]},null,8,["modelValue","onUpdate:modelValue","label","placeholder","onClick","rules"])):gi("",!0),E.ele=="select"&&!E.multiple?(It(),on(m,{key:3,"label-width":"120px",modelValue:o.value["_"+E.prop],"onUpdate:modelValue":A=>o.value["_"+E.prop]=A,"is-link":"",readonly:"",label:E.label,placeholder:E.placeholder||"",onClick:A=>l(E),rules:E.rules||[]},null,8,["modelValue","onUpdate:modelValue","label","placeholder","onClick","rules"])):gi("",!0),E.ele=="select"&&E.multiple?(It(),on(Z5,{key:4,modelValue:o.value[E.prop],"onUpdate:modelValue":A=>o.value[E.prop]=A,config:E},null,8,["modelValue","onUpdate:modelValue","config"])):gi("",!0),Kt("div",Q5,[E.ele=="radio"?(It(),on(v,{key:0,modelValue:o.value[E.prop],"onUpdate:modelValue":A=>o.value[E.prop]=A,direction:"horizontal",style:{gap:"10px"}},{default:We(()=>[(It(!0),ne(Jt,null,ar(E.options,A=>(It(),on(p,{key:A.key,name:A.key},{default:We(()=>[Qn(Xn(A.value),1)]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):gi("",!0)])],64))),128)),Kt("div",tH,[x(b,{block:"",type:"primary",size:"small","native-type":"submit"},{default:We(()=>[Qn("  ")]),_:1})])]),_:1}),x(C,{duration:.1,show:i.value.show,"onUpdate:show":g[1]||(g[1]=E=>i.value.show=E),position:"bottom"},{default:We(()=>[x(w,{title:i.value.title,columns:i.value.columns,onConfirm:c,onCancel:g[0]||(g[0]=E=>i.value.show=!1)},null,8,["title","columns"])]),_:1},8,["show"]),x(C,{duration:.1,show:i.value.showTimePicker,"onUpdate:show":g[4]||(g[4]=E=>i.value.showTimePicker=E),position:"bottom"},{default:We(()=>[x(P,{modelValue:i.value.model,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value.model=E),title:i.value.title,onConfirm:u,onCancel:g[3]||(g[3]=E=>i.value.showTimePicker=!1)},null,8,["modelValue","title"])]),_:1},8,["show"])],64)}}},nH=n=>($b("data-v-9f2eaf7f"),n=n(),Ib(),n),iH={class:"drawer-container"},sH={class:"list"},rH=nH(()=>Kt("span",{style:{"margin-left":"5px"}},"",-1)),oH={__name:"Drawer",setup(n){const t=j(!1),e=j([]),i=j("");let s=null,r={};const o=j(null);qn.on("node:dblclick",async({code:u,nodeId:d})=>{var h,f,g,m;if(e.value=await q5(u),t.value=!0,d){const p=await Y5(d);if(Object.keys((f=(h=p.properties)==null?void 0:h[0])==null?void 0:f.form).length===0)return;r=(m=(g=p.properties)==null?void 0:g[0])==null?void 0:m.form;const v=e.value.find(b=>{var y,w;return b.nodeCode==((w=(y=p.properties)==null?void 0:y[0])==null?void 0:w.nodeCode)});l(v)}else i.value="list";t.value=!0});const a=()=>{r={},i.value="list"},l=async u=>{if(s=u,!u||!u.configJSON){i.value="list",r={};const d=Zm(r,u),h=await tb(d.result);t.value=!1,qn.emit("custom:set:node:data",{nodeId:h,...d.willSetData})}else try{if(r&&u.configJSON){i.value="detail";let d=r;const h=u.configJSON,f=h.list;for(let g=0;g<f.length;g++){const m=f[g],p=m.hasOwnProperty("_default");!r.hasOwnProperty(`${m.prop}`)&&p&&(d={...d,[m.prop]:m._default})}await _t(),o.value.reload(h,d)}}catch(d){logger.err("[debug]error:",d)}},c=async u=>{const d=Zm(u,s),h=await tb(d.result);t.value=!1,r={},qn.emit("custom:set:node:data",{nodeId:h,...d.willSetData})};return(u,d)=>{const h=ve("van-cell"),f=ve("van-cell-group"),g=ve("van-icon"),m=ve("van-popup");return It(),ne("div",iH,[Kt("div",sH,[x(m,{duration:.1,show:t.value,"onUpdate:show":d[0]||(d[0]=p=>t.value=p),position:"right",style:{width:"50%",height:"100%"}},{default:We(()=>[i.value=="list"?(It(),on(h,{key:0,title:""})):gi("",!0),i.value=="list"?(It(),on(f,{key:1,inset:""},{default:We(()=>[(It(!0),ne(Jt,null,ar(e.value,p=>(It(),on(h,{key:p.id,title:p.nodeName,"is-link":!!p.configJSON,onClick:v=>l(p)},null,8,["title","is-link","onClick"]))),128))]),_:1})):gi("",!0),i.value=="detail"?(It(),on(h,{key:2},{title:We(()=>[x(g,{name:"arrow-left",onClick:a}),rH]),_:1})):gi("",!0),i.value=="detail"?(It(),on(eH,{key:3,ref_key:"formRef",ref:o,onSubmit:c},null,512)):gi("",!0)]),_:1},8,["show"])])])}}},aH=$s(oH,[["__scopeId","data-v-9f2eaf7f"]]),lH={},cH={class:"filter-container"},uH=kC('<svg data-v-09ae98c0><defs data-v-09ae98c0><filter id="svgBlur" data-v-09ae98c0><feColorMatrix type="saturate" values="0.5" data-v-09ae98c0></feColorMatrix></filter><filter id="svgBlurHue" data-v-09ae98c0><feColorMatrix type="hueRotate" values="150" data-v-09ae98c0></feColorMatrix></filter><filter id="lighting" data-v-09ae98c0><feSpecularLighting in="SourceGraphic" specularExponent="150" specularConstant="0.4" result="spec" data-v-09ae98c0><fePointLight x="15" y="15" z="80" data-v-09ae98c0></fePointLight></feSpecularLighting><feComposite in="SourceGraphic" in2="spec" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" data-v-09ae98c0></feComposite></filter></defs></svg>',1),hH=[uH];function dH(n,t){return It(),ne("div",cH,hH)}const fH=$s(lH,[["render",dH],["__scopeId","data-v-09ae98c0"]]),gH={key:0,class:"default"},pH={key:1,class:"container"},mH={class:"icon-box"},bH={class:"title"},vH={class:"detail"},yH={__name:"index",setup(n){const e=In("getNode")(),{name:i,icon:s}=e.getData(),r=j({label:i,nodeCode:"",tips:""});return e.on("change:data",({current:o})=>{const a=Hf[Vs.ACTION];logger.info("change:",o);const l=a[o.nodeCode],{label:c,tips:u}=l.exchange(o.describes);r.value={nodeCode:o.nodeCode,label:c,tips:u},e.setSize(130,100)}),(o,a)=>{const l=ve("svg-icon");return It(),ne("div",null,[r.value.nodeCode?(It(),ne("div",pH,[Kt("div",mH,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"])]),Kt("div",bH,Xn(r.value.label),1),Kt("div",vH,[(It(!0),ne(Jt,null,ar(r.value.tips,(c,u)=>(It(),ne("div",{key:u},Xn(c),1))),128))])])):(It(),ne("div",gH,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"]),Qn(" "+Xn(r.value.label),1)]))])}}},xH=$s(yH,[["__scopeId","data-v-26d72554"]]),Va={circle:{r:8,magnet:!0,stroke:"rgba(50, 96, 93, .5)",strokeWidth:1,fill:"#fff"}};function eb(n){const{x:t,y:e,...i}=n;let s={...Va.circle};for(const r in i)if(Object.prototype.hasOwnProperty.call(n,r)){const o=n[r];s[r]=o}return{circle:{...s,transform:`translate(${t||0}, ${e||0})`}}}function Uf(n){const t=Object.assign;return t({width:100,height:40},n)}const wH=Uf({component:xH,ports:{items:[{group:"in",id:"p_left"},{group:"out",id:"p_right"}],groups:{in:{attrs:Va,zIndex:102,position:"left"},out:{position:"right",attrs:Va}}}});Object.keys(yd).forEach(n=>{const{code:t,name:e,icon:i}=yd[n];Gf({shape:n,...wH,data:{name:e,icon:i,code:t,category:Vs.ACTION}})});const CH={key:0,class:"default"},SH={key:1,class:"container"},PH={class:"icon-box"},EH={class:"title"},OH={class:"detail"},AH={__name:"index",setup(n){const e=In("getNode")(),{name:i,icon:s}=e.getData(),r=j({label:i,nodeCode:"",tips:""});return e.on("change:data",({current:o})=>{const a=Hf[Vs.CONDITION];logger.info("change:",o);const l=a[o.nodeCode],{label:c,tips:u}=l.exchange(o.describes);r.value={nodeCode:o.nodeCode,label:c,tips:u},e.setSize(130,100)}),(o,a)=>{const l=ve("svg-icon");return It(),ne("div",null,[r.value.nodeCode?(It(),ne("div",SH,[Kt("div",PH,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"])]),Kt("div",EH,Xn(r.value.label),1),Kt("div",OH,[(It(!0),ne(Jt,null,ar(r.value.tips,(c,u)=>(It(),ne("div",{key:u},Xn(c),1))),128))])])):(It(),ne("div",CH,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"]),Qn(" "+Xn(r.value.label),1)]))])}}},TH=$s(AH,[["__scopeId","data-v-b587f035"]]),MH=Uf({component:TH,ports:{items:[{group:"in",id:"p_left"},{group:"out",id:"true"},{group:"out",id:"false"}],groups:{in:{attrs:eb({}),zIndex:102,position:"left"},out:{position:"right",attrs:eb({})}}}});Object.keys(vd).forEach(n=>{const{code:t,name:e,icon:i}=vd[n];Gf({shape:n,...MH,data:{name:e,icon:i,code:t,category:Vs.CONDITION}})});const kH={key:0,class:"default"},_H={key:1,class:"container"},$H={class:"icon-box"},IH={class:"title"},RH={class:"detail"},NH={__name:"index",setup(n){const e=In("getNode")(),{name:i,icon:s}=e.getData(),r=j({label:i,nodeCode:"",tips:""});return e.on("change:data",({current:o})=>{const a=Hf[Vs.TRIGGER];logger.info("change:",o);const l=a[o.nodeCode],{label:c,tips:u}=l.exchange(o.describes);r.value={nodeCode:o.nodeCode,label:c,tips:u},e.setSize(130,100)}),(o,a)=>{const l=ve("svg-icon");return It(),ne("div",null,[r.value.nodeCode?(It(),ne("div",_H,[Kt("div",$H,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"])]),Kt("div",IH,Xn(r.value.label),1),Kt("div",RH,[(It(!0),ne(Jt,null,ar(r.value.tips,(c,u)=>(It(),ne("div",{key:u},Xn(c),1))),128))])])):(It(),ne("div",kH,[x(l,{"icon-class":Cn(s)},null,8,["icon-class"]),Qn(" "+Xn(r.value.label),1)]))])}}},DH=$s(NH,[["__scopeId","data-v-2173fc5f"]]),BH=Uf({component:DH,ports:{items:[{group:"in",id:"p_left"},{group:"out",id:"p_right"}],groups:{in:{attrs:Va,position:"left"},out:{position:"right",attrs:Va}}}});Object.keys(bd).forEach(n=>{const{code:t,name:e,icon:i}=bd[n];Gf({shape:n,...BH,data:{name:e,icon:i,code:t,category:Vs.TRIGGER}})});var LH=function(t,e){return t===e},nb=function(){function n(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return n.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},n}(),jH=function(){function n(t){t===void 0&&(t=LH),this.head=null,this.tail=null,this.compare=t}return n.prototype.prepend=function(t){var e=new nb(t,this.head);return this.head=e,this.tail||(this.tail=e),this},n.prototype.append=function(t){var e=new nb(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},n.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var i=this.head;if(i!==null)for(;i.next;)this.compare(i.next.value,t)?(e=i.next,i.next=i.next.next):i=i.next;return this.compare(this.tail.value,t)&&(this.tail=i),e},n.prototype.find=function(t){var e=t.value,i=e===void 0?void 0:e,s=t.callback,r=s===void 0?void 0:s;if(!this.head)return null;for(var o=this.head;o;){if(r&&r(o.value)||i!==void 0&&this.compare(o.value,i))return o;o=o.next}return null},n.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},n.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},n.prototype.fromArray=function(t){var e=this;return t.forEach(function(i){return e.append(i)}),this},n.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},n.prototype.reverse=function(){for(var t=this.head,e=null,i=null;t;)i=t.next,t.next=e,e=t,t=i;this.tail=this.head,this.head=e},n.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},n}(),ws=function(t,e,i){e===void 0&&(e=[]);var s=e.filter(function(l){return l.source===t||l.target===t});if(i==="target"){var r=function(c){return c.source===t};return s.filter(r).map(function(l){return l.target})}if(i==="source"){var o=function(c){return c.target===t};return s.filter(o).map(function(l){return l.source})}var a=function(c){return c.source===t?c.target:c.source};return s.map(a)},zH=function(t){for(var e=t.nodes,i=e===void 0?[]:e,s=t.edges,r=s===void 0?[]:s,o=[],a={},l=[],c=function f(g){l.push(g),a[g.id]=!0;for(var m=ws(g.id,r),p=function(y){var w=m[y];if(!a[w]){var C=i.filter(function(P){return P.id===w});C.length>0&&f(C[0])}},v=0;v<m.length;++v)p(v)},u=0;u<i.length;u++){var d=i[u];if(!a[d.id]){c(d);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},zw=function(t){for(var e=t.nodes,i=e===void 0?[]:e,s=t.edges,r=s===void 0?[]:s,o=[],a={},l={},c={},u=[],d=0,h=function p(v){l[v.id]=d,c[v.id]=d,d+=1,o.push(v),a[v.id]=!0;for(var b=ws(v.id,r,"target").filter(function(E){return i.map(function(S){return S.id}).indexOf(E)>-1}),y=function(S){var A=b[S];if(!l[A]&&l[A]!==0){var M=i.filter(function(O){return O.id===A});M.length>0&&p(M[0]),c[v.id]=Math.min(c[v.id],c[A])}else a[A]&&(c[v.id]=Math.min(c[v.id],l[A]))},w=0;w<b.length;w++)y(w);if(c[v.id]===l[v.id]){for(var C=[];o.length>0;){var P=o.pop();if(a[P.id]=!1,C.push(P),P===v)break}C.length>0&&u.push(C)}},f=0,g=i;f<g.length;f++){var m=g[f];!l[m.id]&&l[m.id]!==0&&h(m)}return u};function VH(n,t){return t?zw(n):zH(n)}var FH=function(t,e,i){var s,r;i===void 0&&(i=!0);for(var o=[],a=VH(t,!1),l=0,c=a;l<c.length;l++){var u=c[l];if(u.length)for(var d=u[0],h=d.id,f=[d],g=(s={},s[h]=d,s),m=(r={},r[h]=new Set,r);f.length>0;)for(var p=f.pop(),v=p.id,b=ws(v,t.edges),y=function(P){var E,S=b[P],A=t.nodes.find(function(k){return k.id===S});if(S===v)o.push((E={},E[S]=p,E));else if(!(S in m))g[S]=p,f.push(A),m[S]=new Set([p]);else if(!m[v].has(A)){for(var M=!0,O=[A,p],T=g[v];m[S].size&&!m[S].has(T)&&(O.push(T),T!==g[T.id]);)T=g[T.id];if(O.push(T),e&&i?(M=!1,O.findIndex(function(k){return e.indexOf(k.id)>-1})>-1&&(M=!0)):e&&!i&&O.findIndex(function(k){return e.indexOf(k.id)>-1})>-1&&(M=!1),M){for(var R={},L=1;L<O.length;L+=1)R[O[L-1].id]=O[L];O.length&&(R[O[O.length-1].id]=O[0]),o.push(R)}m[S].add(p)}},w=0;w<b.length;w+=1)y(w)}return o},HH=function(t,e,i){i===void 0&&(i=!0);for(var s=[],r=new Set,o=[],a=[],l={},c={},u=function(T){for(var R=[T];R.length>0;){var L=R.pop();r.has(L)&&(r.delete(L),o[L.id].forEach(function(k){R.push(k)}),o[L.id].clear())}},d=function O(T,R,L){var k=!1;if(e&&i===!1&&e.indexOf(T.id)>-1)return k;s.push(T),r.add(T);for(var _=L[T.id],D=0;D<_.length;D+=1){var V=l[_[D]];if(V===R){for(var it={},at=1;at<s.length;at+=1)it[s[at-1].id]=s[at];s.length&&(it[s[s.length-1].id]=s[0]),a.push(it),k=!0}else r.has(V)||O(V,R,L)&&(k=!0)}if(k)u(T);else for(var D=0;D<_.length;D+=1){var V=l[_[D]];o[V.id].has(T)||o[V.id].add(T)}return s.pop(),k},h=t.nodes,f=h===void 0?[]:h,g=0;g<f.length;g+=1){var m=f[g],p=m.id;c[p]=g,l[g]=m}if(e&&i)for(var v=function(T){var R=e[T];c[f[T].id]=c[R],c[R]=0,l[0]=f.find(function(L){return L.id===R}),l[c[f[T].id]]=f[T]},g=0;g<e.length;g++)v(g);for(var b=function(T){for(var R,L,k=1/0,_=0;_<T.length;_+=1)for(var D=T[_],V=0;V<D.length;V++){var it=c[D[V].id];it<k&&(k=it,L=_)}for(var at=T[L],z=[],_=0;_<at.length;_+=1){var q=at[_];z[q.id]=[];for(var lt=0,mt=ws(q.id,t.edges,"target").filter(function(B){return at.map(function(ht){return ht.id}).indexOf(B)>-1});lt<mt.length;lt++){var X=mt[lt];X===q.id&&!(i===!1&&e.indexOf(q.id)>-1)?a.push((R={},R[q.id]=q,R)):z[q.id].push(c[X])}}return{component:at,adjList:z,minIdx:k}},y=0;y<f.length;){var w=f.filter(function(O){return c[O.id]>=y}),C=zw({nodes:w,edges:t.edges}).filter(function(O){return O.length>1});if(C.length===0)break;var P=b(C),E=P.minIdx,S=P.adjList,A=P.component;if(A.length>1){A.forEach(function(O){o[O.id]=new Set});var M=l[E];if(e&&i&&e.indexOf(M.id)===-1)return a;d(M,M,S),y=E+1}else break}return a},GH=function(t,e,i,s){return s===void 0&&(s=!0),e?HH(t,i,s):FH(t,i,s)};function UH(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),s=0,t=0;t<e;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i}var WH={}.toString,Wf=function(n,t){return WH.call(n)==="[object "+t+"]"};const Vw=function(n){return Wf(n,"Function")},qH=function(n){return Array.isArray?Array.isArray(n):Wf(n,"Array")},YH=function(n){var t=typeof n;return n!==null&&t==="object"||t==="function"};function XH(n,t){if(n){var e;if(qH(n))for(var i=0,s=n.length;i<s&&(e=t(n[i],i),e!==!1);i++);else if(YH(n)){for(var r in n)if(n.hasOwnProperty(r)&&(e=t(n[r],r),e===!1))break}}}const KH=function(n){return Wf(n,"String")};var JH=Object.values?function(n){return Object.values(n)}:function(n){var t=[];return XH(n,function(e,i){Vw(n)&&i==="prototype"||t.push(e)}),t};const ZH=function(n,t){if(!Vw(n))throw new TypeError("Expected a function");var e=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var r=t?t.apply(this,i):i[0],o=e.cache;if(o.has(r))return o.get(r);var a=n.apply(this,i);return o.set(r,a),a};return e.cache=new Map,e};var jl;ZH(function(n,t){t===void 0&&(t={});var e=t.fontSize,i=t.fontFamily,s=t.fontWeight,r=t.fontStyle,o=t.fontVariant;return jl||(jl=document.createElement("canvas").getContext("2d")),jl.font=[r,o,s,e+"px",i].join(" "),jl.measureText(KH(n)?n:"").width},function(n,t){return t===void 0&&(t={}),UH([n],JH(t)).join("")});var QH=function(t,e,i,s){var r;if(e===i)return[[e]];var o=t.edges,a=o===void 0?[]:o,l=[e],c=(r={},r[e]=!0,r),u=[],d=[],h=s?ws(e,a,"target"):ws(e,a);for(u.push(h);l.length>0&&u.length>0;){var f=u[u.length-1];if(f.length){var g=f.shift();g&&(l.push(g),c[g]=!0,h=s?ws(g,a,"target"):ws(g,a),u.push(h.filter(function(v){return!c[v]})))}else{var m=l.pop();c[m]=!1,u.pop();continue}if(l[l.length-1]===i){var p=l.map(function(b){return b});d.push(p);var m=l.pop();c[m]=!1,u.pop()}}return d},ib;(function(n){n.EuclideanDistance="euclideanDistance"})(ib||(ib={}));(function(){function n(t){t===void 0&&(t=10),this.linkedList=new jH,this.maxStep=t}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n})();function t4(n,t,e){const i=t.map(r=>{const o=r.getSourceCellId(),a=r.getTargetCellId();return{source:o,target:a}}),s=GH({nodes:e.map(r=>({id:r.id})),edges:i},!0);return s.length>0&&(console.log("[debug]:",s),n.select(Object.keys(s[0]).map(r=>r))),s}const zl={getArrLast:n=>us(n)=="array"?n.slice().pop():n,arrDictinct:n=>{let t=[];return new Set(n).forEach(e=>t.push(e)),t},arrSort:n=>n.sort(()=>-1),lenByKeys:n=>Object.keys(n).length};function e4(n,t){const e=n.getEdges().map(a=>{const l=a.getSourceCellId(),c=a.getTargetCellId();return{source:l,target:c}}),i={},s=Fw(n),r=n.getLeafNodes();s.forEach(a=>{r.forEach(l=>{const u=QH({nodes:t,edges:e},a.id,l.id).map(h=>zl.getArrLast(h)),d=zl.arrDictinct(u);i[a.id]?i[a.id].push(...d):i[a.id]=[...d]})});const o={};return Object.keys(i).map(a=>{const l=zl.arrSort(i[a]);o[l.join()]=!0}),zl.lenByKeys(o)>1}function Fw(n){return n.getRootNodes().filter(e=>!e.getData().special)}function n4(n){return Fw(n).some(i=>i.getData().category!==Vs.TRIGGER)}function i4(n,t){return new Set(t.reduce((i,s)=>{const r=s.toJSON();return i.push(r.target.cell),i.push(r.source.cell),i},[])).size!==n.length}function s4(n){return n.getLeafNodes().length===0}function r4(n){const t=n.getLeafNodes(),e=[Vs.ACTION];return!t.some(s=>{const r=s.getData();if(!r)throw ms.InvalidFormatData("validate nodeData");return e.includes(r.category)})}function o4(n){for(let t=0;t<n.length;t++){const i=n[t].getData();if(!i)throw ms.InvalidFormatData("validate nodeData");if(!i.nodeId)return Ge.ERR_NODE_EMPTY}return"nil"}const Ge={ERR_GRAPH_EMPTY:0,ERR_START_NODE:1,ERR_NOT_CONNECTED:2,ERR_LEAF_EMPTY:3,ERR_MULTIPLE_SCENARIO:4,ERR_LEAF_INCORRECT_TYPE:5,ERR_HAS_LOOP:6,ERR_NODE_EMPTY:10},a4={[Ge.ERR_GRAPH_EMPTY]:{msg:"",cout:""},[Ge.ERR_NOT_CONNECTED]:{msg:"",cout:""},[Ge.ERR_START_NODE]:{msg:"",cout:""},[Ge.ERR_LEAF_EMPTY]:{msg:"",cout:""},[Ge.ERR_HAS_LOOP]:{msg:"",cout:""},[Ge.ERR_LEAF_INCORRECT_TYPE]:{msg:"",cout:""},[Ge.ERR_MULTIPLE_SCENARIO]:{msg:"",cout:"Tab"},[Ge.ERR_REGISTER_NO_ANCESTOR]:{msg:"",cout:""},[Ge.ERR_NODE_EMPTY]:{msg:"",cout:""}},cs=(n,t)=>t.push({code:n,...a4[n]});function l4(n){const t=[],e=n.getNodes();e.length||cs(Ge.ERR_GRAPH_EMPTY,t);const i=e.filter(h=>h.shape!=="html"),s=n.getEdges();i4(i,s)&&cs(Ge.ERR_NOT_CONNECTED,t),e4(n,i)&&cs(Ge.ERR_MULTIPLE_SCENARIO,t);const a=o4(i);return a!=="nil"&&cs(a,t),t4(n,s,i).length>0&&cs(Ge.ERR_HAS_LOOP,t),n4(n)&&cs(Ge.ERR_START_NODE,t),r4(n)&&cs(Ge.ERR_LEAF_INCORRECT_TYPE,t),s4(n)&&cs(Ge.ERR_LEAF_EMPTY,t),{ok:!t.length,errs:t}}const Hw=n=>($b("data-v-c1d79842"),n=n(),Ib(),n),c4={class:"main-container"},u4={class:"tools-container"},h4={class:"graph-container"},d4={class:"nav-container"},f4={class:"left-container"},g4=Hw(()=>Kt("div",{id:"stencil-container"},null,-1)),p4=[g4],m4=Hw(()=>Kt("div",{class:"right-container"},[Kt("div",{id:"container"}),Kt("div",{id:"minimap"})],-1)),b4={__name:"Container",setup(n){const t=L5(),e=j(!1);let i,s,r;const o=async l=>{if(i==l){e.value=!e.value;return}switch(i=l,e.value=!0,await _t(),l){case"trigger":r.load(s.getTriggers());break;case"condition":r.load(s.getConditions());break;case"action":r.load(s.getActions());break}},a=async()=>{const{ok:l,errs:c}=l4(s.graph);if(!l){ac(c[0].msg);return}const u=s.toJSON();console.log("[debug]json:",u)};return qn.on("custom:on:drag:start",()=>e.value=!1),qn.on("blank:click",()=>e.value=!1),be(async()=>{s=new R5,r=new H5({target:s.graph})}),(l,c)=>{const u=ve("van-button");return It(),ne("div",c4,[Kt("div",u4,[x(u,{type:"primary",size:"mini",onClick:a},{default:We(()=>[Qn("")]),_:1})]),Kt("div",h4,[Kt("div",d4,[Kt("div",{class:"tri",onClick:c[0]||(c[0]=Vu(d=>o("trigger"),["prevent","stop"]))},""),Kt("div",{class:"con",onClick:c[1]||(c[1]=Vu(d=>o("condition"),["prevent","stop"]))},""),Kt("div",{class:"act",onClick:c[2]||(c[2]=Vu(d=>o("action"),["prevent","stop"]))},"")]),x(br,{name:"stencil-fade"},{default:We(()=>[De(Kt("div",f4,p4,512),[[Ve,e.value]])]),_:1}),m4]),x(aH),x(Cn(t)),x(fH)])}}},v4=$s(b4,[["__scopeId","data-v-c1d79842"]]),y4={__name:"App",setup(n){return(t,e)=>(It(),on(v4))}};window.__x6_instances__=[];const qf=jd(y4);qf.use(SS);qf.use(GI);qf.mount("#app")});export default x4();
